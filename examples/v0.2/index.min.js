!function t(e,i,n){function o(s,l){if(!i[s]){if(!e[s]){var a="function"==typeof require&&require;if(!l&&a)return a(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=i[s]={exports:{}};e[s][0].call(u.exports,function(t){var i=e[s][1][t];return o(i?i:t)},u,u.exports,t,e,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(t,e,i){"use strict";function n(t,e){o(r[t],t,e)}var o=t("css-injector"),r={grid:["div#grid-container {","    position: relative;","    display: inline-block;","    -webkit-user-select: none;","    -moz-user-select: none;","    -ms-user-select: none;","    -o-user-select: none;","    user-select: none;","    overflow: hidden; }","visible { opacity: 0.75; }","hidden { opacity: 0.0; }","editor {","    position: absolute;","    display: none;","    border: solid 2px black;","    outline: 0;","    padding: 0;","    z-index: 1000; }"],"list-dragon":["div.dragon-list, li.dragon-pop {","    font-family: Roboto, sans-serif;","    text-transform: capitalize; }","div.dragon-list {","    position: absolute;","    top: 4%;","    left: 4%;","    height: 92%;","    width: 20%; }","div.dragon-list:nth-child(2) { left: 28%; }","div.dragon-list:nth-child(3) { left: 52%; }","div.dragon-list:nth-child(4) { left: 76%; }","div.dragon-list > div, div.dragon-list > ul > li, li.dragon-pop { line-height: 46px; }","div.dragon-list > ul { top: 46px; }","div.dragon-list > ul > li:not(:last-child)::before, li.dragon-pop::before {","    content: '\\2b24';","    color: #b6b6b6;","    font-size: 30px;","    margin: 8px 14px 8px 8px; }","li.dragon-pop { opacity:.8; }"]};e.exports=n},{"css-injector":4}],2:[function(t,e,i){e.exports={calendar:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAc0lEQVR4nIXQwQkCMRSE4U9ZLMCT9Xjaq2AfNhfYU5oQLMAOtoN48EWei5iBIRPe/yYQ3qrhf1lFG7iKcEaJxSfukUvMWgdHavt0uWHtg2QwxXnAnJZ2uOLyVZtybzzhgWNmfoFl0/YB87NbzR1cjP9xeQHSDC6mcL1xFQAAAABJRU5ErkJggg=="},checked:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA0AAAAPCAYAAAA/I0V3AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAYJJREFUOE+NkstLglEQxf0fahG0iFrUxm2ElFDYLohCqCDaCAkWPaxIRbFFEJEaGEKLDCoMETRFUAMLyaIHBUG6sSKIMtKFqEhLT818ZUgmDhzu3DPn9z0uV1RrmUwmyGQyqNVqfFvViwBxu5RFPZuLSyGMKhz/qlEsRV19K8xm6y+w7bpBPFnAferjj3bdQX6DpHcAUwavAHUN2RGIZxBJZHH2mC/TUeydwwTZvBegLENNgw7sX6Wh1FswNmPEmjPCDyGRRwCtW9E3tMgdAtQw7GZjYcNX+gza2wJ3ZXsSZUuQ0vWCOV8SHfJJ/uluhbHUj1v8PKNMszIoQNRMHCShD6Wh8zyhrbOPwz8w+STKlCCJ7oRNUzQH63kBs5thBghePXxlj2aUoSxDPcuXPNiLAc5EEZ6HIkbmV2DYiXBPHs0o079+K0DTVj/s11mE00A0L+g4VcDp10qKZMAzytBhMaTRaPmYg885DlcSzSij0eoEiIouoUqlqqqaL2rlEok+Ad4vlfzPoVDsAAAAAElFTkSuQmCC"},"down-rectangle":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAkAAAAECAYAAABcDxXOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAABpJREFUGFdjgIL/eDAKIKgABggqgAE0BQwMAPTlD/Fpi0JfAAAAAElFTkSuQmCC"},"filter-off":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAChSURBVChTzZHBCoUgFET9TqEiskgyWoutQvRLRIr+cR7XQAjiJW/1BgZmMUevXsY5xy9OoDEGMcYiUzeB67qibVuwQjVNA6311V+WBeM4vsLDMEApde/1fY9pmtI453neHEKAlBJd1z0fXtc16PbjODK07zvmeUZVVd8nooc75zJIOX3Gm6i0bVsGKf8xKIRIuyJTLgJJ3nvQzsjW2geIsQ/pr9hMVrSncAAAAABJRU5ErkJggg=="},"filter-on":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAACoSURBVChTY3BqfP2fHAzWmDbj7f8p294RhVOBasEa02e+/e/VBmQQCTxaX/9PnvYGoj5ywpv/Qd2ENft3vv4f1gfVBAP+nW/+h/a+ATtn1q73KHjytvdgg3070DTBgHvL6/8g22fsQGiaDmSHA21xaybgIpDHixa8hWssnA8NDEIApCh3LkIjiD2INYJCL2X6W3B8gdhEaQQBUOCA4gyE8+e9xaKJgQEA/74BNE3cElkAAAAASUVORK5CYII="},unchecked:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA0AAAAPCAYAAAA/I0V3AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAARBJREFUOE+9krtug1AQRPldSio7FQ1tZImOkoKOBomGT0EURC5ino54yTw90WywQhTkIkVWGoF2zuxdrlD+t0zThKZpT0Vmxb8CQRCg6zr0fb8rer7vfwcPxxdcrx+YpgnzPGNZlh9ibxxHlGUJshLSdV0at9tNpg7DIBrX5+OkPM9BVkKGYSBJEtR1jbZrBdiqbVtUVYU0TUFWQq+nE+I4xvvlImGaW7FHjwxZCVmWhbfzGVmWoSgKWXUr9uiRISshx3FkEldomubXauzRI0NWQp7nyUR+NG/rfr/jUXxnjx5vmKyEbNuWox9Xvid6ZMhK6HA4wnVdhGGIKIp2RY8MWQmx+JuoqvpUZFb8L6UonyYL3uOtrFH+AAAAAElFTkSuQmCC"},"up-down-spin":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGJJREFUOE+lkwEKACEIBH2Zb/PnHsoGeaVJDUjGOgRRpKpkiIj+y4MME3eDR7kaKOVNsJyMNjIHzGy9YnW6J7qIcrriQimeCqORNABd0fpRTkt8uVUj7EsxC6vs/q3e/Q6iD2bwnByjPXHNAAAAAElFTkSuQmCC"},"up-down":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGFJREFUOE+lkkEKQCEIRD2ZJ3Ph3iN4WD9GflpYhj0YYowpGgJmbikd3gjMDFokwbuT1iAiurG5nomgqo5QaPo9ERQRI6Jf7sfGjudy2je23+i0Wl2oQ85TOdlfrJQOazF8br+rqTXQKn0AAAAASUVORK5CYII="}}},{}],3:[function(t,e,i){"use strict";var n=t("object-iterators"),o=t("./images");n(o).each(function(t,e){var i=new Image;i.src="data:"+t.type+";base64,"+t.data,o[e]=i}),o.checkbox=function(t){return o[t?"checked":"unchecked"]},o.filter=function(t){return o[t?"filter-on":"filter-off"]},e.exports=o},{"./images":2,"object-iterators":21}],4:[function(t,e,i){"use strict";function n(t,e,i){if("string"==typeof i){if(i=document.querySelector(i),!i)throw"Cannot find reference element for CSS injection."}else if(i&&!(i instanceof Element))throw"Given value not a reference element.";var o=i&&i.parentNode||document.head||document.getElementsByTagName("head")[0];if(!e||(e=n.idPrefix+e,!o.querySelector("#"+e))){var r=document.createElement("style");return r.type="text/css",e&&(r.id=e),t instanceof Array&&(t=t.join("\n")),t="\n"+t+"\n",r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t)),void 0===i&&(i=o.firstChild),o.insertBefore(r,i),r}}n.idPrefix="injected-stylesheet-",e.exports=n},{}],5:[function(t,e,i){"use strict";function n(t,e){function i(){e.preInitialize&&e.preInitialize.apply(this,arguments),o.apply(this,arguments),e.postInitialize&&e.postInitialize.apply(this,arguments)}function r(t,i){s[i]=e[t]}switch(arguments.length){case 0:e={};break;case 1:if(e=t,"object"!=typeof e)throw"Single parameter overload must be object.";t=void 0;break;case 2:if("string"!=typeof t||"object"!=typeof e)throw"Two parameter overload must be string, object.";break;default:throw"Too many parameters"}i.extend=n;var s=i.prototype=Object.create(this.prototype);s.constructor=i,t&&n.debug&&(s.$$CLASS_NAME=t);for(var l in e)if(e.hasOwnProperty(l)){var a=e[l];switch(l){case"initializeOwn":break;case"aliases":for(var u in a)a.hasOwnProperty(u)&&r(a[u],u);break;default:"string"==typeof a&&"#"===a[0]?r(a,l.substr(1)):s[l]=a}}return i}function o(){function t(n){var o=Object.getPrototypeOf(n);o.constructor!==Object&&(t(o),o.hasOwnProperty("initialize")&&o.initialize.apply(e,i))}var e=this,i=arguments;t(e)}n.Base=function(){},n.Base.extend=n,e.exports=n},{}],6:[function(t,e,i){"use strict";function n(t){if("object"!=typeof t){var e="Expected `state` parameter to be an object.";throw"string"==typeof t&&(e+=" See `JSON.parse()`."),c.Error(e)}}function o(t){var e=t.target,i=this[e.className]||this[e.parentNode.className];i&&(this.detachChooser&&this.detachChooser(),i.call(this,t),t.stopPropagation()),this.eventHandler&&this.eventHandler(t)}function r(t){if(this instanceof v&&!this.children.length)throw new c.Error("Empty subexpression (no filters).");this.children.forEach(function(e){e instanceof h?e.validate(t):e.children.length&&r.call(e,t)})}function s(t){var e=this,i=t.target.getBoundingClientRect();if(!i.width)return void setTimeout(function(){s.call(e,t)},50);var n=Object.keys(v.prototype.editors),o=this.chooser=document.createElement("select");o.className="filter-tree-chooser",o.size=n.length,n.forEach(function(t){var i=e.editors[t].prototype.name||t;i=i.replace("?","≟"),o.add(new Option(i,t))}),o.onmouseover=function(t){t.target.selected=!0},o.style.left=i.left+19+"px",o.style.top=i.bottom+"px",this.detachChooser=l.bind(this),window.addEventListener("click",this.detachChooser),o.onclick=function(){e.children.push(new e.editors[o.value]({parent:e}))},o.onmouseout=function(){o.selectedIndex=-1},this.el.appendChild(o),this.chooserTarget=t.target,this.chooserTarget.classList.add("as-menu-header")}function l(){var t=this.chooser;t&&(this.el.removeChild(t),this.chooserTarget.classList.remove("as-menu-header"),t.onclick=t.onmouseout=null,window.removeEventListener("click",this.detachChooser),delete this.detachChooser,delete this.chooser)}var a=t("unstrungify"),u=t("./js/css"),c=t("./js/FilterNode"),h=t("./js/FilterLeaf"),d=t("./js/template"),g=t("./js/tree-operators"),f=0,p=/^filter-tree: /,v=c.extend("FilterTree",{preInitialize:function(t){u("filter-tree-base",t&&t.cssStylesheetReferenceElement),t.editors&&(this.editors=t.editors)},destroy:function(){l.call(this)},editors:{Default:h},addEditor:function(t,e){e?this.editors[t]=h.extend(e):delete this.editors[t]},newView:function(){this.el=d("tree",++f),this.el.addEventListener("click",o.bind(this))},getState:a,getJSON:function(){var t=JSON.stringify(this,null,this.JSONspace);return t?t:""},setJSON:function(t){this.setState(JSON.parse(t))},load:function(t){if(t){if(n(t),!(g[t.operator]||void 0===t.operator&&1===t.children.length))throw c.Error("Expected `operator` property to be one of: "+Object.keys(g));if(this.operator=t.operator,!(t.children instanceof Array&&t.children.length))throw c.Error("Expected `children` property to be a non-empty array.");this.children=[];var e=this;t.children.forEach(function(t){var i;if("object"!=typeof t)throw e.Error("Expected child to be an object containing either `children`, `editor`, or neither.");i=t.children?v:e.editors[t.editor||"Default"],e.children.push(new i({state:t,parent:e}))})}else{var i=Object.keys(this.editors),o=1===i.length;this.children=o?[new this.editors[i[0]]({parent:this})]:[],this.operator="op-and"}},render:function(){var t=this.el.querySelector("input[value="+this.operator+"]");if(t.checked=!0,this["filter-tree-op-choice"]({target:t}),!this.children.length&&Object.keys(this.editors).length>1){var e=this.el.querySelector(".filter-tree-add-filter");this["filter-tree-add-filter"]({target:e})}c.prototype.render.call(this)},"filter-tree-op-choice":function(t){var e=t.target;this.operator=e.value;var i=this.el.querySelectorAll("label>input.filter-tree-op-choice[name="+e.name+"]");Array.prototype.slice.call(i).forEach(function(t){t.parentElement.style.textDecoration=t.checked?"none":"line-through"});for(var n in g)this.el.classList.remove(n);this.el.classList.add(this.operator)},"filter-tree-add-filter":function(t){var e=Object.keys(this.editors);1===e.length?this.children.push(new this.editors[e[0]]({parent:this})):s.call(this,t)},"filter-tree-add":function(){this.children.push(new v({parent:this}))},"filter-tree-remove":function(t){var e=t.target,i=e.parentElement,n=this.children,o=e.nextElementSibling;n.forEach(function(t,e){t.el===o&&(delete n[e],i.remove())})},validate:function(t){t=t||{};var e,i=void 0===t.focus||t.focus,n=void 0===t.alert||t.alert,o=t.rethrow===!0;try{r.call(this,i)}catch(s){if(e=s.message,o||!p.test(e))throw s;n&&(e=e.replace(p,""),window.alert(e))}return e},test:function m(t){var e=g[this.operator],i=e.seed,n=!0;return this.children.find(function(o){return o?(n=!1,o instanceof h?i=e.reduce(i,o.test(t)):o.children.length&&(i=e.reduce(i,m.call(o,t))),i===e.abort):!1}),n||(e.negate?!i:i)},toJSON:function C(){var t={operator:this.operator,children:[]};this.children.forEach(function(e){if(e)if(e instanceof h)t.children.push(e);else if(e.children.length){var i=C.call(e);i&&t.children.push(i)}});var e=c.prototype.toJSON.call(this);return Object.keys(e).forEach(function(i){t[i]=e[i]}),t.children.length?t:void 0},getSqlWhereClause:function w(){var t=g[this.operator].SQL,e="";return this.children.forEach(function(i,n){var o=n?" "+t.op+" ":"";i&&(i instanceof h?e+=o+i.getSqlWhereClause():i.children.length&&(e+=o+w.call(i)))}),e||(e="NULL IS NULL"),t.beg+e+t.end}});e.exports=v},{"./js/FilterLeaf":7,"./js/FilterNode":8,"./js/css":9,"./js/template":11,"./js/tree-operators":12,unstrungify:26}],7:[function(t,e,i){"use strict";function n(t,e){var i,o;return o=t.find(function(t){return(t.options||t)instanceof Array?i=n(t.options||t,e):t.name===e}),i||o}function o(t){var e=t.target;if(e.classList.remove("filter-tree-error"),u.setWarningClass(e),!e.multiple&&e.value)for(;(e=e.nextElementSibling)&&(!("name"in e)||""!==e.value.trim()););e&&""===e.value.trim()&&(e.value="",u.clickIn(e)),this.eventHandler&&this.eventHandler(t)}function r(t){setTimeout(function(){t.classList.add("filter-tree-error"),u.clickIn(t)},0)}function s(t){var e,i;switch(t.type){case"checkbox":case"radio":for(t=document.querySelectorAll("input[name='"+t.name+"']:enabled:checked"),e=[],i=0;i<t.length;i++)e.push(t[i].value);break;case"select-multiple":for(t=t.options,e=[],i=0;i<t.length;i++)!t.disabled&&t.selected&&e.push(t[i].value);break;default:e=t.value}return e}function l(t,e,i,n){var o=document.createElement(t);if(e){var r,s;"select"===t?(r=o.add,i?(s=new Option("("+i,""),s.innerHTML+="&hellip;)",o.add(s)):null!==i&&o.add(new Option)):(r=o.appendChild,o.label=i),n&&(e=e.slice().sort(a)),e.forEach(function(t){if((t.options||t)instanceof Array){var e=l("optgroup",t.options||t,t.label);o.add(e)}else{var i="object"!=typeof t?new Option(t):new Option(t.alias||t.name,t.name||t.alias);r.call(o,i)}})}else o.type="text";return o}function a(t,e){return t=t.alias||t.name||t.label||t,e=e.alias||e.name||e.label||e,e>t?-1:t>e?1:0}var u=t("./FilterNode"),c=t("./template"),h=t("./leaf-operators"),d={to:Number,not:isNaN},g={to:function(t){return new Date(t)},not:isNaN},f=u.extend("FilterLeaf",{name:"column : value",preInitialize:function(){this.onChange=o.bind(this)},operators:h,operatorsOptions:h.options,destroy:function(){if(this.controls)for(var t in this.controls)this.controls[t].removeEventListener("change",this.onChange)},newView:function(){var t=this.parent.nodeFields||this.fields;if(!t)throw u.Error("Terminal node requires a fields list.");var e=this.el=document.createElement("span");e.className="filter-tree-default",this.controls={column:this.makeElement(e,t,"column",!0),operator:this.makeElement(e,this.operatorsOptions,"operator"),value:this.makeElement(e)},e.appendChild(document.createElement("br"))},makeElement:function(t,e,i,n){var o,r,s,a=e?"select":"input";return e&&1===e.length?(r=e[0],o=document.createElement("input"),o.type="hidden",o.value=r.name||r.alias||r,s=document.createElement("span"),s.innerHTML=r.alias||r.name||r,s.appendChild(o),t.appendChild(s)):(o=l(a,e,i,n),"text"===o.type&&this.eventHandler&&this.el.addEventListener("keyup",this.eventHandler),this.el.addEventListener("change",this.onChange),u.setWarningClass(o),t.appendChild(o)),o},load:function(t){if(t){var e,i,n,o,r,s=[];for(var l in t)if("fields"!==l&&"editor"!==l)switch(e=t[l],i=this.controls[l],i.type){case"checkbox":case"radio":for(i=document.querySelectorAll("input[name='"+i.name+"']"),n=0;n<i.length;n++)i[n].checked=e.indexOf(i[n].value)>=0;break;case"select-multiple":for(i=i.options,n=0,o=!1;n<i.length;n++,o=o||r)r=e.indexOf(i[n].value)>=0,i[n].selected=r;u.setWarningClass(i,o);break;default:i.value=e,u.setWarningClass(i)||i.value===e||s.push({key:l,value:e})}if(s.length){var a=s.length>1,h=c(a?"notes":"note"),d=h.lastElementChild;s.forEach(function(t){var e=a?document.createElement("li"):d;for(t=c("optionMissing",t.key,t.value);t.length;)e.appendChild(t[0]);a&&d.appendChild(e)}),i.parentNode.replaceChild(h,i.parentNode.lastElementChild)}}},converters:{number:d,"int":d,"float":d,date:g},validate:function(t){var e,i,o;for(e in this.controls){var l=this.controls[e],a=s(l).trim();if(""===a)throw t&&r(l),new u.Error("Blank "+e+" control.\nComplete the filter or delete it.");this[e]=a}if(this.op=this.operators[this.operator],this.converter=void 0,this.op.type)this.converter=this.converters[this.op.type];else for(e in this.controls)/^column/.test(e)&&(i=this.parent.nodeFields||this.fields,o=n(i,this[e]),o&&o.type&&(this.converter=this.converters[o.type]))},p:function(t){return t[this.column]},q:function(){return this.value},test:function(t){var e,i,n,o,r;return void 0===(e=this.p(t))||void 0===(i=this.q(t))?!1:!(r=this.converter)||r.not(n=r.to(e))||r.not(o=r.to(i))?this.op.test(e,i):this.op.test(n,o)},toJSON:function(t){var e={};this.editor&&(e.editor=this.editor);for(var i in this.controls)e[i]=this[i];return this.parent.nodeFields||this.fields===this.parent.fields||(e.fields=this.fields),e},getSqlWhereClause:function(){return this.SQL_QUOTED_IDENTIFIER+this.column+this.SQL_QUOTED_IDENTIFIER+" "+("function"==typeof this.op.sql?this.op.sql(this.value):(this.op.sql||this.operator)+h.sq(this.value))}});e.exports=f},{"./FilterNode":8,"./leaf-operators":10,"./template":11}],8:[function(t,e,i){"use strict";function n(t,e,i,n){return e&&e[t]||i&&i[t]||n&&n[t]}var o=t("extend-me"),r=o.Base,s=t("./template");o.debug=!0;var l="OL",a="LI",u=r.extend({initialize:function(t){var e=t&&t.parent,i=t&&(t.state||t.json&&JSON.parse(t.json));this.parent=e,this.nodeFields=n("nodeFields",t,i),this.fields=n("fields",t,i,e),this.editor=n("editor",t,i,e),this.eventHandler=n("eventHandler",t,i,e),this.setState(i)},render:function(){if(this.parent){var t=document.createElement(a);t.appendChild(s("removeButton")),t.appendChild(this.el),this.parent.el.querySelector(l).appendChild(t)}},setState:function(t){var e=this.el;this.newView(),this.load(t),this.render(),e&&!this.parent&&e.parentNode.replaceChild(this.el,e)},toJSON:function(){var t={};if(this.toJsonOptions){var e=this,i=[];this.toJsonOptions.fields&&(i.push("fields"),i.push("nodeFields")),this.toJsonOptions.editor&&i.push("editor"),i.forEach(function(i){(!e.parent||e[i]&&e[i]!==e.parent[i])&&(t[i]=e[i])})}return t},SQL_QUOTED_IDENTIFIER:'"'});u.setWarningClass=function(t,e){return arguments.length<2&&(e=t.value),t.classList[e?"remove":"add"]("filter-tree-warning"),e},u.Error=function(t){return new Error("filter-tree: "+t)},u.clickIn=function(t){t&&("SELECT"===t.tagName?setTimeout(function(){t.dispatchEvent(new MouseEvent("mousedown"))},0):t.focus())},e.exports=u},{"./template":11,"extend-me":5}],9:[function(t,e,i){"use strict";var n,o=t("css-injector");n=".filter-tree{font-family:sans-serif;font-size:10pt;line-height:1.5em}.filter-tree label{font-weight:400}.filter-tree input[type=checkbox],.filter-tree input[type=radio]{left:3px;margin-right:3px}.filter-tree ol{margin-top:0}.filter-tree-add,.filter-tree-add-filter,.filter-tree-remove{cursor:pointer}.filter-tree-add,.filter-tree-add-filter{font-style:italic;color:#444;font-size:90%}.filter-tree-add-filter{margin:3px 0 3px 3em;width:120px;display:inline-block}.filter-tree-add-filter:hover,.filter-tree-add:hover{text-decoration:underline}.filter-tree-add-filter.as-menu-header,.filter-tree-add.as-menu-header{background-color:#fff;font-weight:700;font-style:normal}.filter-tree-add-filter.as-menu-header:hover{text-decoration:inherit}.filter-tree-add-filter>div,.filter-tree-add>div,.filter-tree-remove{display:inline-block;width:15px;height:15px;border-radius:8px;background-color:#8c8;font-size:11.5px;font-weight:700;color:#fff;text-align:center;line-height:normal;font-style:normal;font-family:sans-serif;text-shadow:0 0 1.5px grey;margin-right:4px}.filter-tree-add-filter>div:before,.filter-tree-add>div:before{content:'\\ff0b'}.filter-tree-remove{background-color:#e88;border:0}.filter-tree-remove:before{content:'\\2212'}.filter-tree li::after{font-size:70%;font-style:italic;font-weight:700;color:#080}.filter-tree>ol>li:last-child::after{display:none}.op-or>ol>li::after{margin-left:2.5em;content:'— OR —'}.op-and>ol>li::after{margin-left:2.5em;content:'— AND —'}.op-nor>ol>li::after{margin-left:2.5em;content:'— NOR —'}.filter-tree-default>:enabled{margin:0 .4em;background-color:#ddd;border:0}.filter-tree-default>input[type=text]{width:8em;padding:0 5px}.filter-tree-default>select{border:0}.filter-tree-default>.filter-tree-warning{background-color:#ffc}.filter-tree-default>.filter-tree-error{background-color:#Fcc}.filter-tree .footnotes{font-size:6pt;margin:2px 0 0;line-height:normal;white-space:normal;color:#999}.filter-tree .footnotes>ol{margin:0;padding-left:2em}.filter-tree .footnotes>ol>li{margin:2px 0}.filter-tree .footnotes .field-name,.filter-tree .footnotes .field-value{font-weight:700;color:#777}.filter-tree .footnotes .field-value:after,.filter-tree .footnotes .field-value:before{content:'\"'}.filter-tree .footnotes .field-value{font-family:monospace}.filter-tree-chooser{position:absolute;font-size:9pt;outline:0;box-shadow:5px 5px 10px grey}",e.exports=o.bind(this,n)},{"css-injector":4}],10:[function(t,e,i){"use strict";function n(t,e){return e.trim().replace(/\s*,\s*/g,",").split(",").indexOf(t.toString())}function o(t,e){return t.toString().toLowerCase().indexOf(e.toString().toLowerCase())}function r(t,e){return t.toString().toLowerCase().substr(0,e)}function s(t,e){return t.toString().toLowerCase().substr(-e,e)}function l(t,e,i,n){var o=n.replace(/([\[_%\]])/g,"[$1]");return i+h(t+o+e)}function a(t){return"IN ('"+c(t).replace(/\s*,\s*/g,"', '")+"')"}function u(t){return"NOT "+a(t)}function c(t){return t.replace(/'/g,"''")}function h(t){return" '"+c(t)+"'"}var d,g,f,p,v,m=t("regexp-like"),C="LIKE ",w="NOT "+C,y="%",b={"<":{test:function(t,e){return e>t}},"≤":{test:function(t,e){return e>=t},sql:"<="},"=":{test:function(t,e){return t===e}},"≥":{test:function(t,e){return t>=e},sql:">="},">":{test:function(t,e){return t>e}},"≠":{test:function(t,e){return t!==e},sql:"<>"},LIKE:{test:function(t,e){return m.cached(e,!0).test(t)},type:"string"},"NOT LIKE":{test:function(t,e){return!m.cached(e,!0).test(t)},type:"string"},IN:{test:function(t,e){return n(t,e)>=0},sql:a,type:"string"},"NOT IN":{test:function(t,e){return n(t,e)<0},sql:u,type:"string"},CONTAINS:{test:function(t,e){return o(t,e)>=0},sql:l.bind(this,y,y,C),type:"string"},"NOT CONTAINS":{test:function(t,e){return o(t,e)<0},sql:l.bind(this,y,y,w),type:"string"},BEGINS:{test:function(t,e){return e=e.toString().toLowerCase(),r(t,e.length)===e},sql:l.bind(this,"",y,C),type:"string"},"NOT BEGINS":{test:function(t,e){return e=e.toString().toLowerCase(),r(t,e.length)!==e},sql:l.bind(this,"",y,w),type:"string"},ENDS:{test:function(t,e){return e=e.toString().toLowerCase(),s(t,e.length)===e},sql:l.bind(this,y,"",C),type:"string"},"NOT ENDS":{test:function(t,e){return e=e.toString().toLowerCase(),s(t,e.length)!==e},sql:l.bind(this,y,"",w),type:"string"}};d=["="],d.label="Equality",g=["<","≤","≠","≥",">"],g.label="Inquality",f=["IN","NOT IN"],f.label="Set scan",p=["CONTAINS","NOT CONTAINS","BEGINS","NOT BEGINS","ENDS","NOT ENDS"],p.label="String scan",v={options:["LIKE","NOT LIKE"],label:"Pattern matching"},b.options=[d,g,f,p,v],b.sq=h,e.exports=b},{"regexp-like":23}],11:[function(t,e,i){"use strict";function n(t){var e,i=document.createElement("div"),n=r[t].toString().match(s)[1],a=[n].concat(Array.prototype.slice.call(arguments,1)),u={};for(l.lastIndex=0;e=l.exec(n);)u[e[1]]=!0;return e=Object.keys(u),e.length&&(e.forEach(function(t){i.textContent=a[t],a[t]=i.innerHTML}),a[0]=n.replace(l,"{$1}")),i.innerHTML=o.apply(this,a),1===i.children.length&&1===i.childNodes.length?i.firstChild:i.childNodes}var o=t("templex"),r={tree:function(){},removeButton:function(){},note:function(){},notes:function(){},optionMissing:function(){}},s=/\/\*\s*([^]+?)\s+\*\//,l=/\{(\d+)\:encode\}/g;e.exports=n},{templex:25}],12:[function(t,e,i){"use strict";function n(t,e){return t&&e}function o(t,e){return t||e}var r={"op-and":{reduce:n,seed:!0,abort:!1,negate:!1,SQL:{op:"AND",beg:"(",end:")"}},"op-or":{reduce:o,seed:!1,abort:!0,negate:!1,SQL:{op:"OR",beg:"(",end:")"}},"op-nor":{reduce:o,seed:!1,abort:!0,negate:!0,SQL:{op:"OR",beg:"NOT (",end:")"}}};e.exports=r},{}],13:[function(t,e,i){"use strict";function n(t){var e=this._bound={};for(s in u)e[s]=u[s].bind(this);var i=document.createElement("div");i.classList.add("thumb"),i.onclick=e.shortStop,i.onmouseover=e.onmouseover,this.thumb=i;var o=document.createElement("div");o.classList.add("finbar-vertical"),o.appendChild(i),this.paging&&(o.onclick=e.onclick),this.bar=o,t=t||{},this.orientation="vertical",this._min=this._index=0,this._max=100;for(var s in t)if(t.hasOwnProperty(s)){var c=t[s];switch(s){case"index":this._index=c;break;case"range":r(c),this._min=c.min,this._max=c.max,this.contentSize=c.max-c.min+1;break;default:"_"!==s.charAt(0)&&"function"!=typeof n.prototype[s]&&(this[s]=c)}}l(a,"finbar-base",t.cssStylesheetReferenceElement)}function o(t){for(var e=1;e<arguments.length;++e){var i=arguments[e];if(i)for(var n in i)t[n]=i[n]}return t}function r(t){var e=Object.keys(t),i=2===e.length&&"number"==typeof t.min&&"number"==typeof t.max&&t.min<=t.max;i||s("Invalid .range object.")}function s(t){throw"finbars: "+t}var l=t("css-injector");n.prototype={set orientation(t){t!==this._orientation&&(this._orientation=t,this.oh=c[this._orientation],this.oh||s("Invalid value for `options._orientation."),this.deltaProp=this.oh.delta,this.bar.className=this.bar.className.replace(/(vertical|horizontal)/g,t),(this.bar.style.cssText||this.thumb.style.cssText)&&(this.bar.removeAttribute("style"),this.thumb.removeAttribute("style"),this.resize()))},get orientation(){return this._orientation},onchange:null,set classPrefix(t){this._classPrefix&&this.bar.classList.remove(this._classPrefix+this.orientation),this._classPrefix=t,t&&this.bar.classList.add(t+"-"+this.orientation)},get classPrefix(){return this._classPrefix},increment:1,barStyles:null,set style(t){var e=Object.keys(t=o({},t,this._auxStyles));if(e.length){var i=this.bar,n=i.getBoundingClientRect(),r=this.container||i.parentElement,s=r.getBoundingClientRect(),l=this.oh;i.removeAttribute("style"),e.forEach(function(e){var o=t[e];if(e in l&&(e=l[e]),isNaN(Number(o))){if(/%$/.test(o)){var r=h[e],a=n[r.marginLeading]+n[r.marginTrailing];a&&(o=parseInt(o,10)/100*s[r.size]-a+"px")}}else o=(o||0)+"px";i.style[e]=o})}},paging:!0,set range(t){r(t),this._min=t.min,this._max=t.max,this.contentSize=t.max-t.min+1,this.index=this.index},get range(){return{min:this._min,max:this._max}},set index(t){t=Math.min(this._max,Math.max(this._min,t)),this._setScroll(t)},get index(){return this._index},_setScroll:function(t,e){this._index=t,this.testPanelItem&&this.testPanelItem.index instanceof Element&&(this.testPanelItem.index.innerHTML=Math.round(t)),this.onchange&&this.onchange.call(this,Math.round(t)),void 0===e&&(e=(t-this._min)/(this._max-this._min)*this._thumbMax),this.thumb.style[this.oh.leading]=e+"px"},scrollRealContent:function(t){var e=this.content.parentElement.getBoundingClientRect(),i=this.oh.size,n=Math.max(0,this.content[i]-e[i]),o=(t-this._min)/(this._max-this._min)*n;this.content.style[this.oh.leading]=-o+"px"},resize:function(t,e){var i=this.bar;if(i.parentNode){var n=this.container||i.parentElement,o=n.getBoundingClientRect();"object"==typeof t&&(e=t,t=void 0),this.style=this.barStyles=e||this.barStyles,this.content&&(this.onchange||(this.onchange=this.scrollRealContent,this.contentSize=this.content[this.oh.size],this._min=0,this._max=this.contentSize-1)),this.onchange===this.scrollRealContent?(this.containerSize=o[this.oh.size],this.increment=this.containerSize/(this.contentSize-this.containerSize)*(this._max-this._min)):(this.containerSize=1,this.increment=t||this.increment);var r=this.index;return this.testPanelItem=this.testPanelItem||this._addTestPanelItem(),this._setThumbSize(),this.index=r,null!==this.deltaProp&&n.addEventListener("wheel",this._bound.onwheel),this}},shortenBy:function(t){return this.shortenEndBy("trailing",t)},foreshortenBy:function(t){return this.shortenEndBy("leading",t)},shortenEndBy:function(t,e){if(e){if(e instanceof n&&e.orientation!==this.orientation){var i=window.getComputedStyle(e.bar),o=c[e.orientation];this._auxStyles={},this._auxStyles[t]=i[o.thickness]}}else delete this._auxStyles;return this},_setThumbSize:function(){var t=this.oh,e=window.getComputedStyle(this.thumb),i=parseInt(e[t.marginLeading]),n=parseInt(e[t.marginTrailing]),o=i+n,r=this.bar.getBoundingClientRect()[t.size],s=Math.max(20,r*this.containerSize/this.contentSize);this.containerSize<this.contentSize?(this.bar.style.visibility="visible",this.thumb.style[t.size]=s+"px"):this.bar.style.visibility="hidden",this._thumbMax=r-s-o,this._thumbMarginLeading=i},remove:function(){this._removeEvt("mousedown"),this._removeEvt("mousemove"),this._removeEvt("mouseup"),(this.container||this.bar.parentElement)._removeEvt("wheel",this._bound.onwheel),this.bar.onclick=this.thumb.onclick=this.thumb.onmouseover=this.thumb.transitionend=this.thumb.onmouseout=null,this.bar.remove()},_addTestPanelItem:function(){var t,e=document.querySelector("."+this._classPrefix+".test-panel")||document.querySelector(".test-panel");if(e){var i=["mousedown","mousemove","mouseup","index"],n=document.createElement("li");i.forEach(function(t){n.innerHTML+='<span class="'+t+'">'+t.replace("mouse","")+"</span>"}),e.appendChild(n),t={},i.forEach(function(e){t[e]=n.getElementsByClassName(e)[0]})}return t},_addEvt:function(t){var e=this.testPanelItem&&this.testPanelItem[t];e&&e.classList.add("listening"),window.addEventListener(t,this._bound["on"+t])},_removeEvt:function(t){var e=this.testPanelItem&&this.testPanelItem[t];e&&e.classList.remove("listening"),window.removeEventListener(t,this._bound["on"+t])}};var a,u={shortStop:function(t){t.stopPropagation()},onwheel:function(t){this.index+=t[this.deltaProp],t.stopPropagation(),t.preventDefault()},onclick:function(t){var e=this.thumb.getBoundingClientRect(),i=t[this.oh.coordinate]<e[this.oh.leading];"object"==typeof this.paging?this.index=this.paging[i?"up":"down"](Math.round(this.index)):this.index+=i?-this.increment:this.increment,this.thumb.classList.add("hover");var n=this;this.thumb.addEventListener("transitionend",function o(){this.removeEventListener("transitionend",o),n._bound.onmouseup(t)}),t.stopPropagation()},onmouseover:function(){this.thumb.classList.add("hover"),this.thumb.onmouseout=this._bound.onmouseout,this._addEvt("mousedown")},onmouseout:function(){this._removeEvt("mousedown"),this.thumb.onmouseover=this._bound.onmouseover,this.thumb.classList.remove("hover")},onmousedown:function(t){this._removeEvt("mousedown"),this.thumb.onmouseover=this.thumb.onmouseout=null;var e=this.thumb.getBoundingClientRect();this.pinOffset=t[this.oh.axis]-e[this.oh.leading]+this.bar.getBoundingClientRect()[this.oh.leading]+this._thumbMarginLeading,document.documentElement.style.cursor="default",this._addEvt("mousemove"),this._addEvt("mouseup"),t.stopPropagation(),t.preventDefault()},onmousemove:function(t){var e=Math.min(this._thumbMax,Math.max(0,t[this.oh.axis]-this.pinOffset)),i=e/this._thumbMax*(this._max-this._min)+this._min;this._setScroll(i,e),t.stopPropagation(),t.preventDefault()},onmouseup:function(t){this._removeEvt("mousemove"),this._removeEvt("mouseup"),document.documentElement.style.cursor="auto";var e=this.thumb.getBoundingClientRect();e.left<=t.clientX&&t.clientX<=e.right&&e.top<=t.clientY&&t.clientY<=e.bottom?this._bound.onmouseover(t):this._bound.onmouseout(t),t.stopPropagation(),t.preventDefault()}},c={vertical:{coordinate:"clientY",axis:"pageY",size:"height",outside:"right",inside:"left",leading:"top",trailing:"bottom",marginLeading:"marginTop",marginTrailing:"marginBottom",thickness:"width",delta:"deltaY"},horizontal:{coordinate:"clientX",axis:"pageX",size:"width",outside:"bottom",inside:"top",leading:"left",trailing:"right",marginLeading:"marginLeft",marginTrailing:"marginRight",thickness:"height",
delta:"deltaX"}},h={top:"vertical",bottom:"vertical",height:"vertical",left:"horizontal",right:"horizontal",width:"horizontal"};a="div.finbar-horizontal,div.finbar-vertical{position:absolute;margin:3px}div.finbar-horizontal>.thumb,div.finbar-vertical>.thumb{position:absolute;background-color:#d3d3d3;-webkit-box-shadow:0 0 1px #000;-moz-box-shadow:0 0 1px #000;box-shadow:0 0 1px #000;border-radius:4px;margin:2px;opacity:.4;transition:opacity .5s}div.finbar-horizontal>.thumb.hover,div.finbar-vertical>.thumb.hover{opacity:1;transition:opacity .5s}div.finbar-vertical{top:0;bottom:0;right:0;width:11px}div.finbar-vertical>.thumb{top:0;right:0;width:7px}div.finbar-horizontal{left:0;right:0;bottom:0;height:11px}div.finbar-horizontal>.thumb{left:0;bottom:0;height:7px}",e.exports=n},{"css-injector":4}],14:[function(t,e,i){"use strict";function n(t,e,i){var n=this;this.div=t,this.component=e,i=i||{},this.doubleClickDelay=i.doubleClickDelay||325,this.dragEndtime=Date.now(),this.canvas=document.createElement("canvas"),this.div.appendChild(this.canvas),this.canvas.style.outline="none",this.canvasCTX=this.canvas.getContext("2d"),this.gc=new u(this.canvasCTX),this.buffer=document.createElement("canvas"),this.bufferCTX=this.buffer.getContext("2d"),this.bufferGC=new u(this.bufferCTX),this.mouseLocation=new l.Point(-1,-1),this.dragstart=new l.Point(-1,-1),this.bounds=new l.Rectangle(0,0,0,0),this.hasMouse=!1,document.addEventListener("mousemove",function(t){(n.hasMouse||n.isDragging())&&n.finmousemove(t)}),document.addEventListener("mouseup",function(t){n.finmouseup(t)}),document.addEventListener("wheel",function(t){n.finwheelmoved(t)}),document.addEventListener("keydown",function(t){n.finkeydown(t)}),document.addEventListener("keyup",function(t){n.finkeyup(t)}),this.canvas.onmouseover=function(){n.hasMouse=!0},this.canvas.addEventListener("focus",function(t){n.finfocusgained(t)}),this.canvas.addEventListener("blur",function(t){n.finfocuslost(t)}),this.canvas.addEventListener("mousedown",function(t){n.finmousedown(t)}),this.canvas.addEventListener("mouseout",function(t){n.hasMouse=!1,n.finmouseout(t)}),this.canvas.addEventListener("click",function(t){n.finclick(t)}),this.canvas.addEventListener("contextmenu",function(t){return n.fincontextmenu(t),t.preventDefault(),!1}),a.addEventListener(this.canvas,"tap",function(t){n.fintap(t)}),a.addEventListener(this.canvas,"holdpulse",function(t){n.finholdpulse(t)}),a.addEventListener(this.canvas,"flick",function(t){n.finflick(t)}),a.addEventListener(this.canvas,"release",function(t){n.finrelease(t)}),a.addEventListener(this.canvas,"trackstart",function(t){n.fintrackstart(t)}),a.addEventListener(this.canvas,"track",function(t){n.fintrack(t)}),a.addEventListener(this.canvas,"trackend",function(t){n.fintrackend(t)}),this.canvas.setAttribute("tabindex",0),this.canvas.contentEditable=!0,this.resize(),this.beginResizing(),this.beginPainting()}function o(t){if(g){for(var e=0;e<h.length;e++)try{h[e].tickPainter(t)}catch(i){console.error(i)}requestAnimationFrame(o)}}function r(t){if(f)for(var e=0;e<d.length;e++)try{d[e].tickResizer(t)}catch(i){console.error(i)}}function s(){for(var t=[],e=["",""],i=0;256>i;i++)t[i]=e;return t[27]=["ESC","ESCSHIFT"],t[192]=["`","~"],t[49]=["1","!"],t[50]=["2","@"],t[51]=["3","#"],t[52]=["4","$"],t[53]=["5","%"],t[54]=["6","^"],t[55]=["7","&"],t[56]=["8","*"],t[57]=["9","("],t[48]=["0",")"],t[189]=["-","_"],t[187]=["=","+"],t[8]=["BACKSPACE","BACKSPACESHIFT"],t[46]=["DELETE","DELETESHIFT"],t[9]=["TAB","TABSHIFT"],t[81]=["q","Q"],t[87]=["w","W"],t[69]=["e","E"],t[82]=["r","R"],t[84]=["t","T"],t[89]=["y","Y"],t[85]=["u","U"],t[73]=["i","I"],t[79]=["o","O"],t[80]=["p","P"],t[219]=["[","{"],t[221]=["]","}"],t[220]=["\\","|"],t[220]=["CAPSLOCK","CAPSLOCKSHIFT"],t[65]=["a","A"],t[83]=["s","S"],t[68]=["d","D"],t[70]=["f","F"],t[71]=["g","G"],t[72]=["h","H"],t[74]=["j","J"],t[75]=["k","K"],t[76]=["l","L"],t[186]=[";",":"],t[222]=["'","|"],t[13]=["RETURN","RETURNSHIFT"],t[16]=["SHIFT","SHIFT"],t[90]=["z","Z"],t[88]=["x","X"],t[67]=["c","C"],t[86]=["v","V"],t[66]=["b","B"],t[78]=["n","N"],t[77]=["m","M"],t[188]=[",","<"],t[190]=[".",">"],t[191]=["/","?"],t[16]=["SHIFT","SHIFT"],t[17]=["CTRL","CTRLSHIFT"],t[18]=["ALT","ALTSHIFT"],t[91]=["COMMANDLEFT","COMMANDLEFTSHIFT"],t[32]=["SPACE","SPACESHIFT"],t[93]=["COMMANDRIGHT","COMMANDRIGHTSHIFT"],t[18]=["ALT","ALTSHIFT"],t[38]=["UP","UPSHIFT"],t[37]=["LEFT","LEFTSHIFT"],t[40]=["DOWN","DOWNSHIFT"],t[39]=["RIGHT","RIGHTSHIFT"],t[33]=["PAGEUP","PAGEUPSHIFT"],t[34]=["PAGEDOWN","PAGEDOWNSHIFT"],t[35]=["PAGERIGHT","PAGERIGHTSHIFT"],t[36]=["PAGELEFT","PAGELEFTSHIFT"],t[112]=["F1","F1SHIFT"],t[113]=["F2","F2SHIFT"],t[114]=["F3","F3SHIFT"],t[115]=["F4","F4SHIFT"],t[116]=["F5","F5SHIFT"],t[117]=["F6","F6SHIFT"],t[118]=["F7","F7SHIFT"],t[119]=["F8","F8SHIFT"],t[120]=["F9","F9SHIFT"],t[121]=["F10","F10SHIFT"],t[122]=["F11","F1S1HIFT"],t[123]=["F12","F121HIFT"],t}var l=t("rectangular"),a=t("./js/polymergestures.dev.js"),u=t("./js/GraphicsContext.js"),c=200,h=[],d=[],g=!0,f=!0,p=s();n.prototype={constructor:n.prototype.constructor,div:null,component:null,gestures:a,canvas:null,canvasCTX:null,focuser:null,buffer:null,ctx:null,mouseLocation:null,holdPulseCount:-1,dragstart:null,origin:null,bounds:null,dirty:!1,size:null,mousedown:!1,dragging:!1,repeatKeyCount:0,repeatKey:null,repeatKeyStartTime:0,currentKeys:[],hasMouse:!1,lastDoubleClickTime:0,dragEndTime:0,lastRepaintTime:0,addEventListener:function(t,e){this.canvas.addEventListener(t,e)},stopPaintLoop:function(){g=!1},restartPaintLoop:function(){g||(g=!0,requestAnimationFrame(o))},stopResizeLoop:function(){f=!1},restartResizeLoop:function(){f||(f=!0,setInterval(r,200))},detached:function(){this.stopPainting(),this.stopResizing()},useHiDPI:function(){return this.component.resolveProperty("useHiDPI")},useBitBlit:function(){return this.component.resolveProperty("useBitBlit")},getFPS:function(){var t=this.component.resolveProperty("repaintIntervalRate");return t?parseInt(t):0},tickPaint:function(t){var e=this.getFPS();if(0!==e){var i=1e3/e,n=t-this.lastRepaintTime;n>i&&this.dirty&&(this.lastRepaintTime=t-n%i,this.paintNow())}},beginPainting:function(){var t=this;this.dirty=!0,this.tickPainter=function(e){t.tickPaint(e)},h.push(this)},stopPainting:function(){h.splice(h.indexOf(this),1)},beginResizing:function(){var t=this;this.tickResizer=function(){t.checksize()},d.push(this)},stopResizing:function(){d.splice(d.indexOf(this),1)},start:function(){this.beginPainting(),this.beginResizing()},stop:function(){this.stopPainting(),this.stopResizing()},checksize:function(){var t=this.div.getBoundingClientRect();(t.width!==this.size.width||t.height!==this.size.height)&&this.sizeChangedNotification()},sizeChangedNotification:function(){this.resize()},resize:function(){var t=this.size=this.div.getBoundingClientRect();this.canvas.width=this.buffer.width=t.width,this.canvas.height=this.buffer.height=t.height;var e=1,i=this.useBitBlit(),n=window.devicePixelRatio&&this.useHiDPI();if(n){var o=window.devicePixelRatio||1,r=this.canvasCTX.webkitBackingStorePixelRatio||this.canvasCTX.mozBackingStorePixelRatio||this.canvasCTX.msBackingStorePixelRatio||this.canvasCTX.oBackingStorePixelRatio||this.canvasCTX.backingStorePixelRatio||1;e=o/r}var s=this.canvas.getAttribute("width"),a=this.canvas.getAttribute("height");this.canvas.width=this.buffer.width=s*e,this.canvas.height=this.buffer.height=a*e,this.canvas.style.width=this.buffer.style.width=s+"px",this.canvas.style.height=this.buffer.style.height=a+"px",this.bufferCTX.scale(e,e),n&&!i&&this.canvasCTX.scale(e,e),this.bounds=new l.Rectangle(0,0,t.width,t.height);var u=this.component;u&&u.setBounds(this.bounds),this.resizeNotification(),this.paintNow()},resizeNotification:function(){},getBounds:function(){return this.bounds},paintNow:function(){var t=this;this.safePaintImmediately(function(e){e.clearRect(0,0,t.canvas.width,t.canvas.height);var i=t.component;i&&i.paint(e),t.dirty=!1})},safePaintImmediately:function(t){var e=this.useBitBlit(),i=e?this.bufferGC:this.gc;try{i.save(),t(i)}catch(n){console.error(n)}finally{i.restore()}e&&this.flushBuffer()},flushBuffer:function(){this.buffer.width>0&&this.buffer.height>0&&this.canvasCTX.drawImage(this.buffer,0,0)},dispatchNewEvent:function(t,e,i){return i={detail:i||{}},i.detail.primitiveEvent=t,this.canvas.dispatchEvent(new CustomEvent(e,i))},dispatchNewMouseKeysEvent:function(t,e,i){return i=i||{},i.mouse=this.mouseLocation,i.keys=this.currentKeys,this.dispatchNewEvent(t,e,i)},finmousemove:function(t){!this.isDragging()&&this.mousedown&&(this.beDragging(),this.dispatchNewMouseKeysEvent(t,"fin-canvas-dragstart",{isRightClick:this.isRightClick(t)}),this.dragstart=new l.Point(this.mouseLocation.x,this.mouseLocation.y)),this.mouseLocation=this.getLocal(t),this.isDragging()&&this.dispatchNewMouseKeysEvent(t,"fin-canvas-drag",{dragstart:this.dragstart,isRightClick:this.isRightClick(t)}),this.bounds.contains(this.mouseLocation)&&this.dispatchNewMouseKeysEvent(t,"fin-canvas-mousemove")},finmousedown:function(t){this.mouseLocation=this.mouseDownLocation=this.getLocal(t),this.mousedown=!0,this.dispatchNewMouseKeysEvent(t,"fin-canvas-mousedown",{isRightClick:this.isRightClick(t)}),this.takeFocus()},finmouseup:function(t){this.isDragging()&&(this.dispatchNewMouseKeysEvent(t,"fin-canvas-dragend",{dragstart:this.dragstart,isRightClick:this.isRightClick(t)}),this.beNotDragging(),this.dragEndtime=Date.now()),this.mousedown=!1,this.dispatchNewMouseKeysEvent(t,"fin-canvas-mouseup",{isRightClick:this.isRightClick(t)})},finmouseout:function(t){this.mousedown||(this.mouseLocation=new l.Point(-1,-1)),this.dispatchNewMouseKeysEvent(t,"fin-canvas-mouseout")},finwheelmoved:function(t){!this.isDragging()&&this.hasFocus()&&(t.preventDefault(),this.dispatchNewMouseKeysEvent(t,"fin-canvas-wheelmoved",{isRightClick:this.isRightClick(t)}))},finclick:function(t){this.doubleClickTimer&&Date.now()-this.lastClickTime<this.doubleClickDelay?(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=void 0,this.findblclick(t)):(this.lastClickTime=Date.now(),this.doubleClickTimer=setTimeout(function(){this.doubleClickTimer=void 0,this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-click",{isRightClick:this.isRightClick(t)})}.bind(this),this.doubleClickDelay))},finrelease:function(t){this.holdPulseCount=0,this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-release")},finflick:function(t){this.hasFocus()&&(this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-flick",{isRightClick:this.isRightClick(t)}))},fintrackstart:function(t){this.hasFocus()&&(this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-trackstart"))},fintrack:function(t){this.hasFocus()&&(this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-track"))},fintrackend:function(t){this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-trackend")},finhold:function(t){this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-hold",{isRightClick:this.isRightClick(t)})},finholdpulse:function(t){this.mouseLocation=this.getLocal(t),this.dispatchNewMouseKeysEvent(t,"fin-canvas-holdpulse",{count:this.holdPulseCount++})},fintap:function(t){var e=this,i=Date.now(),n=i-this.lastDoubleClickTime;300>n||i-this.dragEndtime<100||setTimeout(function(){e._fintap(t)},180)},_fintap:function(t){var e=Date.now(),i=e-this.lastDoubleClickTime;300>i||(this.mouseDownLocation&&(this.mouseLocation=this.mouseDownLocation,this.mouseDownLocation=void 0),this.dispatchNewMouseKeysEvent(t,"fin-canvas-tap",{isRightClick:this.isRightClick(t)}))},findblclick:function(t){this.mouseLocation=this.getLocal(t),this.lastDoubleClickTime=Date.now(),this.dispatchNewMouseKeysEvent(t,"fin-canvas-dblclick",{isRightClick:this.isRightClick(t)})},getCharMap:function(){return p},finkeydown:function(t){if(this.hasFocus()){var e=t.shiftKey?p[t.keyCode][1]:p[t.keyCode][0];t.repeat?this.repeatKey===e?this.repeatKeyCount++:(this.repeatKey=e,this.repeatKeyStartTime=Date.now()):(this.repeatKey=null,this.repeatKeyCount=0,this.repeatKeyStartTime=0),-1===this.currentKeys.indexOf(e)&&this.currentKeys.push(e),this.dispatchNewEvent(t,"fin-canvas-keydown",{alt:t.altKey,ctrl:t.ctrlKey,"char":e,code:t.charCode,key:t.keyCode,meta:t.metaKey,repeatCount:this.repeatKeyCount,repeatStartTime:this.repeatKeyStartTime,shift:t.shiftKey,identifier:t.keyIdentifier,currentKeys:this.currentKeys.slice(0)})}},finkeyup:function(t){var e=t.shiftKey?p[t.keyCode][1]:p[t.keyCode][0];this.currentKeys.splice(this.currentKeys.indexOf(e),1),this.hasFocus()&&(this.repeatKeyCount=0,this.repeatKey=null,this.repeatKeyStartTime=0,this.dispatchNewEvent(t,"fin-canvas-keyup",{alt:t.altKey,ctrl:t.ctrlKey,"char":e,code:t.charCode,key:t.keyCode,meta:t.metaKey,repeat:t.repeat,shift:t.shiftKey,identifier:t.keyIdentifier,currentKeys:this.currentKeys.slice(0)}))},finfocusgained:function(t){this.dispatchNewEvent(t,"fin-canvas-focus-gained")},finfocuslost:function(t){this.dispatchNewEvent(t,"fin-canvas-focus-lost")},fincontextmenu:function(t){t.ctrlKey&&-1===this.currentKeys.indexOf("CTRL")&&this.currentKeys.push("CTRL"),this.doubleRightClickTimer&&Date.now()-this.lastClickTime<this.doubleClickDelay?(clearTimeout(this.doubleRightClickTimer),this.doubleRightClickTimer=void 0,this.findblclick(t)):(this.lastClickTime=Date.now(),this.doubleRightClickTimer=setTimeout(function(){this.doubleRightClickTimer=void 0,this.dispatchNewMouseKeysEvent(t,"fin-canvas-context-menu",{isRightClick:this.isRightClick(t)})}.bind(this),this.doubleClickDelay))},repaint:function(){var t=this.getFPS();this.dirty=!0,g&&0!==t||this.paintNow()},getMouseLocation:function(){return this.mouseLocation},getOrigin:function(){var t=this.canvas.getBoundingClientRect(),e=new l.Point(t.left,t.top);return e},getLocal:function(t){var e=this.canvas.getBoundingClientRect(),i=new l.Point(t.clientX-e.left,t.clientY-e.top);return i},hasFocus:function(){return document.activeElement===this.canvas},takeFocus:function(){var t=this;this.hasFocus()||setTimeout(function(){t.canvas.focus()},10)},beDragging:function(){this.dragging=!0,this.disableDocumentElementSelection()},beNotDragging:function(){this.dragging=!1,this.enableDocumentElementSelection()},isDragging:function(){return this.dragging},disableDocumentElementSelection:function(){var t=document.body.style;t.cssText=t.cssText+"-webkit-user-select: none"},enableDocumentElementSelection:function(){var t=document.body.style;t.cssText=t.cssText.replace("-webkit-user-select: none","")},setFocusable:function(t){this.focuser.style.display=t?"":"none"},isRightClick:function(t){var e;return t=t||window.event,"which"in t?e=3===t.which:"button"in t&&(e=2===t.button),e},dispatchEvent:function(t){return this.canvas.dispatchEvent(t)}},requestAnimationFrame(o),setInterval(r,c),e.exports=n},{"./js/GraphicsContext.js":15,"./js/polymergestures.dev.js":17,rectangular:22}],15:[function(t,e,i){"use strict";function n(t,e){function i(i){i in n.prototype||s.test(i)||("function"==typeof t[i]?r[i]=e?function(){return e(i,arguments,t[i].apply(t,arguments))}:t[i].bind(t):Object.defineProperty(r,i,{get:function(){var n=t[i];return e?e(i,"getter",n):n},set:function(n){t[i]=e?e(i,"setter",n):n}}))}this.gc=t;var r=this,s=/^webkit/;switch(typeof e){case"string":e=o.bind(void 0,e+".");break;case"boolean":e===!0&&(e=o.bind(void 0,"gc."));break;case"function":if(3!==e.length)throw"GraphicsContext: User-supplied API logger function does not accept three parameters.";break;default:e=!1}Object.keys(Object.getPrototypeOf(t)).forEach(i),Object.keys(t).forEach(i)}var o=t("./gc-console-logger");e.exports=n},{"./gc-console-logger":16}],16:[function(t,e,i){"use strict";function n(t,e,i,n){var r=n;switch("string"==typeof n&&(r='"'+r+'"'),e=t+e,i){case"getter":console.log(e,"=",r);break;case"setter":console.log(e,o,r);break;default:e+="("+Array.prototype.slice.call(i).join(", ")+")",void 0===r?console.log(e):console.log(e,o,r)}return n}var o="⟹";e.exports=n},{}],17:[function(t,e,i){!function(t){var e=!1,i=document.createElement("meta");if(i.createShadowRoot){var n=i.createShadowRoot(),o=document.createElement("span");n.appendChild(o),i.addEventListener("testpath",function(t){t.path&&(e=t.path[0]===o),t.stopPropagation()});var r=new CustomEvent("testpath",{bubbles:!0});document.head.appendChild(i),o.dispatchEvent(r),i.parentNode.removeChild(i),n=o=null}i=null;var s={shadow:function(t){return t?t.shadowRoot||t.webkitShadowRoot:void 0},canTarget:function(t){return t&&Boolean(t.elementFromPoint)},targetingShadow:function(t){var e=this.shadow(t);return this.canTarget(e)?e:void 0},olderShadow:function(t){var e=t.olderShadowRoot;if(!e){var i=t.querySelector("shadow");i&&(e=i.olderShadowRoot)}return e},allShadows:function(t){for(var e=[],i=this.shadow(t);i;)e.push(i),i=this.olderShadow(i);return e},searchRoot:function(t,e,i){var n,o;return t?(n=t.elementFromPoint(e,i),n?o=this.targetingShadow(n):t!==document&&(o=this.olderShadow(t)),this.searchRoot(o,e,i)||n):void 0},owner:function(t){if(!t)return document;for(var e=t;e.parentNode;)e=e.parentNode;return e.nodeType!=Node.DOCUMENT_NODE&&e.nodeType!=Node.DOCUMENT_FRAGMENT_NODE&&(e=document),e},findTarget:function(t){if(e&&t.path&&t.path.length)return t.path[0];var i=t.clientX,n=t.clientY,o=this.owner(t.target);return o.elementFromPoint(i,n)||(o=document),this.searchRoot(o,i,n)},findTouchAction:function(t){var i;if(e&&t.path&&t.path.length){for(var n=t.path,o=0;o<n.length;o++)if(i=n[o],i.nodeType===Node.ELEMENT_NODE&&i.hasAttribute("touch-action"))return i.getAttribute("touch-action")}else for(i=t.target;i;){if(i.nodeType===Node.ELEMENT_NODE&&i.hasAttribute("touch-action"))return i.getAttribute("touch-action");i=i.parentNode||i.host}return"auto"},LCA:function(t,e){if(t===e)return t;if(t&&!e)return t;if(e&&!t)return e;if(!e&&!t)return document;if(t.contains&&t.contains(e))return t;if(e.contains&&e.contains(t))return e;var i=this.depth(t),n=this.depth(e),o=i-n;for(o>=0?t=this.walk(t,o):e=this.walk(e,-o);t&&e&&t!==e;)t=t.parentNode||t.host,e=e.parentNode||e.host;return t},walk:function(t,e){for(var i=0;t&&e>i;i++)t=t.parentNode||t.host;return t},depth:function(t){for(var e=0;t;)e++,t=t.parentNode||t.host;return e},deepContains:function(t,e){var i=this.LCA(t,e);return i===t},insideNode:function(t,e,i){var n=t.getBoundingClientRect();return n.left<=e&&e<=n.right&&n.top<=i&&i<=n.bottom},path:function(t){var i;if(e&&t.path&&t.path.length)i=t.path;else{i=[];for(var n=this.findTarget(t);n;)i.push(n),n=n.parentNode||n.host}return i}};t.targetFinding=s,t.findTarget=s.findTarget.bind(s),t.deepContains=s.deepContains.bind(s),t.insideNode=s.insideNode}(i),function(){function t(t){return"html /deep/ "+e(t)}function e(t){return'[touch-action="'+t+'"]'}function i(t){return"{ -ms-touch-action: "+t+"; touch-action: "+t+";}"}var n=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]},"manipulation"],o="",r="string"==typeof document.head.style.touchAction,s=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;if(r){n.forEach(function(n){String(n)===n?(o+=e(n)+i(n)+"\n",s&&(o+=t(n)+i(n)+"\n")):(o+=n.selectors.map(e)+i(n.rule)+"\n",s&&(o+=n.selectors.map(t)+i(n.rule)+"\n"))});var l=document.createElement("style");l.textContent=o,document.head.appendChild(l)}}(),function(t){var e=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],i=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],n=function(){return function(){}},o={preventTap:n,makeBaseEvent:function(t,e){var i=document.createEvent("Event");return i.initEvent(t,e.bubbles||!1,e.cancelable||!1),i.preventTap=o.preventTap(i),i},makeGestureEvent:function(t,e){e=e||Object.create(null);for(var i,n=this.makeBaseEvent(t,e),o=0,r=Object.keys(e);o<r.length;o++)i=r[o],"bubbles"!==i&&"cancelable"!==i&&(n[i]=e[i]);return n},makePointerEvent:function(t,n){n=n||Object.create(null);for(var o,r=this.makeBaseEvent(t,n),s=2;s<e.length;s++)o=e[s],r[o]=n[o]||i[s];r.buttons=n.buttons||0;var l=0;return l=n.pressure?n.pressure:r.buttons?.5:0,r.x=r.clientX,r.y=r.clientY,r.pointerId=n.pointerId||0,r.width=n.width||0,r.height=n.height||0,r.pressure=l,r.tiltX=n.tiltX||0,r.tiltY=n.tiltY||0,r.pointerType=n.pointerType||"",r.hwTimestamp=n.hwTimestamp||0,r.isPrimary=n.isPrimary||!1,r._source=n._source||"",r}};t.eventFactory=o}(i),function(t){function e(){if(i){var t=new Map;return t.pointers=n,t}this.keys=[],this.values=[]}var i=window.Map&&window.Map.prototype.forEach,n=function(){return this.size};e.prototype={set:function(t,e){var i=this.keys.indexOf(t);i>-1?this.values[i]=e:(this.keys.push(t),this.values.push(e))},has:function(t){return this.keys.indexOf(t)>-1},"delete":function(t){var e=this.keys.indexOf(t);e>-1&&(this.keys.splice(e,1),this.values.splice(e,1))},get:function(t){var e=this.keys.indexOf(t);return this.values[e]},clear:function(){this.keys.length=0,this.values.length=0},forEach:function(t,e){this.values.forEach(function(i,n){t.call(e,i,this.keys[n],this)},this)},pointers:function(){return this.keys.length}},t.PointerMap=e}(i),function(t){var e,i=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp","preventTap","tapPrevented","_source"],n=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0,function(){},!1],o="undefined"!=typeof SVGElementInstance,r=t.eventFactory,s={IS_IOS:!1,pointermap:new t.PointerMap,requiredGestures:new t.PointerMap,eventMap:Object.create(null),eventSources:Object.create(null),eventSourceList:[],gestures:[],dependencyMap:{down:{listeners:0,index:-1},up:{listeners:0,index:-1}},gestureQueue:[],registerSource:function(t,e){var i=e,n=i.events;n&&(n.forEach(function(t){i[t]&&(this.eventMap[t]=i[t].bind(i))},this),this.eventSources[t]=i,this.eventSourceList.push(i))},registerGesture:function(t,e){var i=Object.create(null);i.listeners=0,i.index=this.gestures.length;for(var n,o=0;o<e.exposes.length;o++)n=e.exposes[o].toLowerCase(),this.dependencyMap[n]=i;this.gestures.push(e)},register:function(t,e){for(var i,n=this.eventSourceList.length,o=0;n>o&&(i=this.eventSourceList[o]);o++)i.register.call(i,t,e)},unregister:function(t){for(var e,i=this.eventSourceList.length,n=0;i>n&&(e=this.eventSourceList[n]);n++)e.unregister.call(e,t)},down:function(t){this.requiredGestures.set(t.pointerId,e),this.fireEvent("down",t)},move:function(t){t.type="move",this.fillGestureQueue(t)},up:function(t){this.fireEvent("up",t),this.requiredGestures["delete"](t.pointerId)},cancel:function(t){t.tapPrevented=!0,this.fireEvent("up",t),this.requiredGestures["delete"](t.pointerId)},addGestureDependency:function(t,e){var i=t._pgEvents;if(i&&e)for(var n,o,r,s=Object.keys(i),l=0;l<s.length;l++)r=s[l],i[r]>0&&(n=this.dependencyMap[r],o=n?n.index:-1,e[o]=!0)},eventHandler:function(i){var n=i.type;if("touchstart"===n||"mousedown"===n||"pointerdown"===n||"MSPointerDown"===n)if(i._handledByPG||(e={}),this.IS_IOS){var o=i;if("touchstart"===n){var r=i.changedTouches[0];o={target:i.target,clientX:r.clientX,clientY:r.clientY,path:i.path}}for(var s,l=i.path||t.targetFinding.path(o),a=0;a<l.length;a++)s=l[a],this.addGestureDependency(s,e)}else this.addGestureDependency(i.currentTarget,e);if(!i._handledByPG){var u=this.eventMap&&this.eventMap[n];u&&u(i),i._handledByPG=!0}},listen:function(t,e){for(var i,n=0,o=e.length;o>n&&(i=e[n]);n++)this.addEvent(t,i)},unlisten:function(t,e){for(var i,n=0,o=e.length;o>n&&(i=e[n]);n++)this.removeEvent(t,i)},addEvent:function(t,e){t.addEventListener(e,this.boundHandler)},removeEvent:function(t,e){t.removeEventListener(e,this.boundHandler)},makeEvent:function(t,e){var i=r.makePointerEvent(t,e);return i.preventDefault=e.preventDefault,i.tapPrevented=e.tapPrevented,i._target=i._target||e.target,i},fireEvent:function(t,e){var i=this.makeEvent(t,e);return this.dispatchEvent(i)},cloneEvent:function(t){for(var e,r=Object.create(null),s=0;s<i.length;s++)e=i[s],r[e]=t[e]||n[s],("target"===e||"relatedTarget"===e)&&o&&r[e]instanceof SVGElementInstance&&(r[e]=r[e].correspondingUseElement);return r.preventDefault=function(){t.preventDefault()},r},dispatchEvent:function(t){var e=t._target;if(e){e.dispatchEvent(t);var i=this.cloneEvent(t);i.target=e,this.fillGestureQueue(i)}},gestureTrigger:function(){for(var t,e,i=0;i<this.gestureQueue.length;i++)if(t=this.gestureQueue[i],e=t._requiredGestures)for(var n,o,r=0;r<this.gestures.length;r++)e[r]&&(n=this.gestures[r],o=n[t.type],o&&o.call(n,t));this.gestureQueue.length=0},fillGestureQueue:function(t){this.gestureQueue.length||requestAnimationFrame(this.boundGestureTrigger),t._requiredGestures=this.requiredGestures.get(t.pointerId),this.gestureQueue.push(t)}};s.boundHandler=s.eventHandler.bind(s),s.boundGestureTrigger=s.gestureTrigger.bind(s),t.dispatcher=s,t.activateGesture=function(t,e){var i=e.toLowerCase(),n=s.dependencyMap[i];if(n){var o=s.gestures[n.index];if(t._pgListeners||(s.register(t),t._pgListeners=0),o){var r,l=o.defaultActions&&o.defaultActions[i];switch(t.nodeType){case Node.ELEMENT_NODE:r=t;break;case Node.DOCUMENT_FRAGMENT_NODE:r=t.host;break;default:r=null}l&&r&&!r.hasAttribute("touch-action")&&r.setAttribute("touch-action",l)}t._pgEvents||(t._pgEvents={}),t._pgEvents[i]=(t._pgEvents[i]||0)+1,t._pgListeners++}return Boolean(n)},t.addEventListener=function(e,i,n,o){n&&(t.activateGesture(e,i),e.addEventListener(i,n,o))},t.deactivateGesture=function(t,e){var i=e.toLowerCase(),n=s.dependencyMap[i];return n&&(t._pgListeners>0&&t._pgListeners--,0===t._pgListeners&&s.unregister(t),t._pgEvents&&(t._pgEvents[i]>0?t._pgEvents[i]--:t._pgEvents[i]=0)),Boolean(n)},t.removeEventListener=function(e,i,n,o){n&&(t.deactivateGesture(e,i),e.removeEventListener(i,n,o))}}(i),function(t){var e=t.dispatcher,i=e.pointermap,n=25,o=[0,1,4,2],r=0,s=/Linux.*Firefox\//i,l=function(){if(s.test(navigator.userAgent))return!1;try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(t){return!1}}(),a={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup"],exposes:["down","up","move"],register:function(t){e.listen(t,this.events)},unregister:function(t){t.nodeType!==Node.DOCUMENT_NODE&&e.unlisten(t,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(t){for(var e,i=this.lastTouches,o=t.clientX,r=t.clientY,s=0,l=i.length;l>s&&(e=i[s]);s++){var a=Math.abs(o-e.x),u=Math.abs(r-e.y);if(n>=a&&n>=u)return!0}},prepareEvent:function(t){var i=e.cloneEvent(t);if(i.pointerId=this.POINTER_ID,i.isPrimary=!0,i.pointerType=this.POINTER_TYPE,i._source="mouse",!l){var n=t.type,s=o[t.which]||0;"mousedown"===n?r|=s:"mouseup"===n&&(r&=~s),i.buttons=r}return i},mousedown:function(n){if(!this.isEventSimulatedFromTouch(n)){var o=(i.has(this.POINTER_ID),this.prepareEvent(n));o.target=t.findTarget(n),i.set(this.POINTER_ID,o.target),e.down(o)}},mousemove:function(t){if(!this.isEventSimulatedFromTouch(t)){var n=i.get(this.POINTER_ID);if(n){var o=this.prepareEvent(t);o.target=n,0===(l?o.buttons:o.which)?(l||(r=o.buttons=0),e.cancel(o),this.cleanupMouse(o.buttons)):e.move(o)}}},mouseup:function(n){if(!this.isEventSimulatedFromTouch(n)){var o=this.prepareEvent(n);o.relatedTarget=t.findTarget(n),o.target=i.get(this.POINTER_ID),e.up(o),this.cleanupMouse(o.buttons)}},cleanupMouse:function(t){0===t&&i["delete"](this.POINTER_ID)}};t.mouseEvents=a}(i),function(t){var e=t.dispatcher,i=(t.targetFinding.allShadows.bind(t.targetFinding),e.pointermap),n=(Array.prototype.map.call.bind(Array.prototype.map),2500),o=25,r=200,s=20,l=!1,a={IS_IOS:!1,events:["touchstart","touchmove","touchend","touchcancel"],exposes:["down","up","move"],register:function(t,i){(this.IS_IOS?i:!i)&&e.listen(t,this.events)},unregister:function(t){this.IS_IOS||e.unlisten(t,this.events)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y"},touchActionToScrollType:function(t){var e=t,i=this.scrollTypes;return e===i.EMITTER?"none":e===i.XSCROLLER?"X":e===i.YSCROLLER?"Y":"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(t){return this.firstTouch===t.identifier},setPrimaryTouch:function(t){(0===i.pointers()||1===i.pointers()&&i.has(1))&&(this.firstTouch=t.identifier,this.firstXY={X:t.clientX,Y:t.clientY},this.firstTarget=t.target,this.scrolling=null,this.cancelResetClickCount())},removePrimaryPointer:function(t){t.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var t=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(t,r)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(t){var e=0;return("touchstart"===t||"touchmove"===t)&&(e=1),e},findTarget:function(e,n){if("touchstart"===this.currentTouchEvent.type){if(this.isPrimaryTouch(e)){var o={clientX:e.clientX,clientY:e.clientY,path:this.currentTouchEvent.path,target:this.currentTouchEvent.target};return t.findTarget(o)}return t.findTarget(e)}return i.get(n)},touchToPointer:function(t){var i=this.currentTouchEvent,n=e.cloneEvent(t),o=n.pointerId=t.identifier+2;n.target=this.findTarget(t,o),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.buttons=this.typeToButtons(i.type),n.width=t.webkitRadiusX||t.radiusX||0,n.height=t.webkitRadiusY||t.radiusY||0,n.pressure=t.webkitForce||t.force||.5,n.isPrimary=this.isPrimaryTouch(t),n.pointerType=this.POINTER_TYPE,n._source="touch";var r=this;return n.preventDefault=function(){r.scrolling=!1,r.firstXY=null,i.preventDefault()},n},processTouches:function(t,e){var n=t.changedTouches;this.currentTouchEvent=t;for(var o,r,s=0;s<n.length;s++)o=n[s],r=this.touchToPointer(o),"touchstart"===t.type&&i.set(r.pointerId,r.target),i.has(r.pointerId)&&e.call(this,r),("touchend"===t.type||t._cancel)&&this.cleanUpPointer(r)},shouldScroll:function(e){if(this.firstXY){var i,n=t.targetFinding.findTouchAction(e),o=this.touchActionToScrollType(n);if("none"===o)i=!1;else if("XY"===o)i=!0;else{var r=e.changedTouches[0],s=o,l="Y"===o?"X":"Y",a=Math.abs(r["client"+s]-this.firstXY[s]),u=Math.abs(r["client"+l]-this.firstXY[l]);i=a>=u}return i}},findTouch:function(t,e){for(var i,n=0,o=t.length;o>n&&(i=t[n]);n++)if(i.identifier===e)return!0},vacuumTouches:function(t){var e=t.touches;if(i.pointers()>=e.length){var n=[];i.forEach(function(t,i){if(1!==i&&!this.findTouch(e,i-2)){var o=t;n.push(o)}},this),n.forEach(function(t){this.cancel(t),i["delete"](t.pointerId)},this)}},touchstart:function(t){this.vacuumTouches(t),this.setPrimaryTouch(t.changedTouches[0]),this.dedupSynthMouse(t),this.scrolling||(this.clickCount++,this.processTouches(t,this.down))},down:function(t){e.down(t)},touchmove:function(t){if(l)t.cancelable&&this.processTouches(t,this.move);else if(this.scrolling){if(this.firstXY){var e=t.changedTouches[0],i=e.clientX-this.firstXY.X,n=e.clientY-this.firstXY.Y,o=Math.sqrt(i*i+n*n);o>=s&&(this.touchcancel(t),this.scrolling=!0,this.firstXY=null)}}else null===this.scrolling&&this.shouldScroll(t)?this.scrolling=!0:(this.scrolling=!1,t.preventDefault(),this.processTouches(t,this.move))},move:function(t){e.move(t)},touchend:function(t){this.dedupSynthMouse(t),this.processTouches(t,this.up)},up:function(i){i.relatedTarget=t.findTarget(i),e.up(i)},cancel:function(t){e.cancel(t)},touchcancel:function(t){t._cancel=!0,this.processTouches(t,this.cancel)},cleanUpPointer:function(t){i["delete"](t.pointerId),this.removePrimaryPointer(t)},dedupSynthMouse:function(e){var i=t.mouseEvents.lastTouches,o=e.changedTouches[0];if(this.isPrimaryTouch(o)){var r={x:o.clientX,y:o.clientY};i.push(r);var s=function(t,e){var i=t.indexOf(e);i>-1&&t.splice(i,1);
}.bind(null,i,r);setTimeout(s,n)}}},u=Event.prototype.stopImmediatePropagation||Event.prototype.stopPropagation;document.addEventListener("click",function(e){var i=e.clientX,n=e.clientY,r=function(t){var e=Math.abs(i-t.x),r=Math.abs(n-t.y);return o>=e&&o>=r},s=t.mouseEvents.lastTouches.some(r),l=t.targetFinding.path(e);if(s){for(var c=0;c<l.length;c++)if(l[c]===a.firstTarget)return;e.preventDefault(),u.call(e)}},!0),t.touchEvents=a}(i),function(t){var e=t.dispatcher,i=e.pointermap,n=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,o={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"],register:function(t){e.listen(t,this.events)},unregister:function(t){t.nodeType!==Node.DOCUMENT_NODE&&e.unlisten(t,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(t){var i=t;return i=e.cloneEvent(t),n&&(i.pointerType=this.POINTER_TYPES[t.pointerType]),i._source="ms",i},cleanup:function(t){i["delete"](t)},MSPointerDown:function(n){var o=this.prepareEvent(n);o.target=t.findTarget(n),i.set(n.pointerId,o.target),e.down(o)},MSPointerMove:function(t){var n=i.get(t.pointerId);if(n){var o=this.prepareEvent(t);o.target=n,e.move(o)}},MSPointerUp:function(n){var o=this.prepareEvent(n);o.relatedTarget=t.findTarget(n),o.target=i.get(o.pointerId),e.up(o),this.cleanup(n.pointerId)},MSPointerCancel:function(n){var o=this.prepareEvent(n);o.relatedTarget=t.findTarget(n),o.target=i.get(o.pointerId),e.cancel(o),this.cleanup(n.pointerId)}};t.msEvents=o}(i),function(t){var e=t.dispatcher,i=e.pointermap,n={events:["pointerdown","pointermove","pointerup","pointercancel"],prepareEvent:function(t){var i=e.cloneEvent(t);return i._source="pointer",i},register:function(t){e.listen(t,this.events)},unregister:function(t){t.nodeType!==Node.DOCUMENT_NODE&&e.unlisten(t,this.events)},cleanup:function(t){i["delete"](t)},pointerdown:function(n){var o=this.prepareEvent(n);o.target=t.findTarget(n),i.set(o.pointerId,o.target),e.down(o)},pointermove:function(t){var n=i.get(t.pointerId);if(n){var o=this.prepareEvent(t);o.target=n,e.move(o)}},pointerup:function(n){var o=this.prepareEvent(n);o.relatedTarget=t.findTarget(n),o.target=i.get(o.pointerId),e.up(o),this.cleanup(n.pointerId)},pointercancel:function(n){var o=this.prepareEvent(n);o.relatedTarget=t.findTarget(n),o.target=i.get(o.pointerId),e.cancel(o),this.cleanup(n.pointerId)}};t.pointerEvents=n}(i),function(t){var e=t.dispatcher,i=window.navigator;window.PointerEvent?e.registerSource("pointer",t.pointerEvents):i.msPointerEnabled?e.registerSource("ms",t.msEvents):(e.registerSource("mouse",t.mouseEvents),void 0!==window.ontouchstart&&e.registerSource("touch",t.touchEvents));var n=navigator.userAgent,o=n.match(/iPad|iPhone|iPod/)&&"ontouchstart"in window;e.IS_IOS=o,t.touchEvents.IS_IOS=o,e.register(document,!0)}(i),function(t){var e=t.dispatcher,i=t.eventFactory,n=new t.PointerMap,o={events:["down","move","up"],exposes:["trackstart","track","trackx","tracky","trackend"],defaultActions:{track:"none",trackx:"pan-y",tracky:"pan-x"},WIGGLE_THRESHOLD:4,clampDir:function(t){return t>0?1:-1},calcPositionDelta:function(t,e){var i=0,n=0;return t&&e&&(i=e.pageX-t.pageX,n=e.pageY-t.pageY),{x:i,y:n}},fireTrack:function(t,e,n){var o=n,r=this.calcPositionDelta(o.downEvent,e),s=this.calcPositionDelta(o.lastMoveEvent,e);if(s.x)o.xDirection=this.clampDir(s.x);else if("trackx"===t)return;if(s.y)o.yDirection=this.clampDir(s.y);else if("tracky"===t)return;var l={bubbles:!0,cancelable:!0,trackInfo:o.trackInfo,relatedTarget:e.relatedTarget,pointerType:e.pointerType,pointerId:e.pointerId,_source:"track"};"tracky"!==t&&(l.x=e.x,l.dx=r.x,l.ddx=s.x,l.clientX=e.clientX,l.pageX=e.pageX,l.screenX=e.screenX,l.xDirection=o.xDirection),"trackx"!==t&&(l.dy=r.y,l.ddy=s.y,l.y=e.y,l.clientY=e.clientY,l.pageY=e.pageY,l.screenY=e.screenY,l.yDirection=o.yDirection);var a=i.makeGestureEvent(t,l);o.downTarget.dispatchEvent(a)},down:function(t){if(t.isPrimary&&("mouse"===t.pointerType?1===t.buttons:!0)){var e={downEvent:t,downTarget:t.target,trackInfo:{},lastMoveEvent:null,xDirection:0,yDirection:0,tracking:!1};n.set(t.pointerId,e)}},move:function(t){var e=n.get(t.pointerId);if(e){if(!e.tracking){var i=this.calcPositionDelta(e.downEvent,t),o=i.x*i.x+i.y*i.y;o>this.WIGGLE_THRESHOLD&&(e.tracking=!0,e.lastMoveEvent=e.downEvent,this.fireTrack("trackstart",t,e))}e.tracking&&(this.fireTrack("track",t,e),this.fireTrack("trackx",t,e),this.fireTrack("tracky",t,e)),e.lastMoveEvent=t}},up:function(t){var e=n.get(t.pointerId);e&&(e.tracking&&this.fireTrack("trackend",t,e),n["delete"](t.pointerId))}};e.registerGesture("track",o)}(i),function(t){var e=t.dispatcher,i=t.eventFactory,n={HOLD_DELAY:200,WIGGLE_THRESHOLD:16,events:["down","move","up"],exposes:["hold","holdpulse","release"],heldPointer:null,holdJob:null,pulse:function(){var t=Date.now()-this.heldPointer.timeStamp,e=this.held?"holdpulse":"hold";this.fireHold(e,t),this.held=!0},cancel:function(){clearInterval(this.holdJob),this.held&&this.fireHold("release"),this.held=!1,this.heldPointer=null,this.target=null,this.holdJob=null},down:function(t){t.isPrimary&&!this.heldPointer&&(this.heldPointer=t,this.target=t.target,this.holdJob=setInterval(this.pulse.bind(this),this.HOLD_DELAY))},up:function(t){this.heldPointer&&this.heldPointer.pointerId===t.pointerId&&this.cancel()},move:function(t){if(this.heldPointer&&this.heldPointer.pointerId===t.pointerId){var e=t.clientX-this.heldPointer.clientX,i=t.clientY-this.heldPointer.clientY;e*e+i*i>this.WIGGLE_THRESHOLD&&this.cancel()}},fireHold:function(t,e){var n={bubbles:!0,cancelable:!0,pointerType:this.heldPointer.pointerType,pointerId:this.heldPointer.pointerId,x:this.heldPointer.clientX,y:this.heldPointer.clientY,_source:"hold"};e&&(n.holdTime=e);var o=i.makeGestureEvent(t,n);this.target.dispatchEvent(o)}};e.registerGesture("hold",n)}(i),function(t){var e=t.dispatcher,i=t.eventFactory,n=new t.PointerMap,o={events:["down","up"],exposes:["tap"],down:function(t){t.isPrimary&&!t.tapPrevented&&n.set(t.pointerId,{target:t.target,buttons:t.buttons,x:t.clientX,y:t.clientY})},shouldTap:function(t,e){var i=!0;return"mouse"===t.pointerType&&(i=1^t.buttons&&1&e.buttons),i&&!t.tapPrevented},up:function(e){var o=n.get(e.pointerId);if(o&&this.shouldTap(e,o)){var r=t.targetFinding.LCA(o.target,e.relatedTarget);if(r){var s=i.makeGestureEvent("tap",{bubbles:!0,cancelable:!0,x:e.clientX,y:e.clientY,detail:e.detail,pointerType:e.pointerType,pointerId:e.pointerId,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,_source:"tap"});r.dispatchEvent(s)}}n["delete"](e.pointerId)}};i.preventTap=function(t){return function(){t.tapPrevented=!0,n["delete"](t.pointerId)}},e.registerGesture("tap",o)}(i),function(t){var e=t.dispatcher,i=t.eventFactory,n=new t.PointerMap,o=180/Math.PI,r={events:["down","up","move","cancel"],exposes:["pinchstart","pinch","pinchend","rotate"],defaultActions:{pinch:"none",rotate:"none"},reference:{},down:function(e){if(n.set(e.pointerId,e),2==n.pointers()){var i=this.calcChord(),o=this.calcAngle(i);this.reference={angle:o,diameter:i.diameter,target:t.targetFinding.LCA(i.a.target,i.b.target)},this.firePinch("pinchstart",i.diameter,i)}},up:function(t){var e=n.get(t.pointerId),i=n.pointers();if(e){if(2===i){var o=this.calcChord();this.firePinch("pinchend",o.diameter,o)}n["delete"](t.pointerId)}},move:function(t){n.has(t.pointerId)&&(n.set(t.pointerId,t),n.pointers()>1&&this.calcPinchRotate())},cancel:function(t){this.up(t)},firePinch:function(t,e,n){var o=e/this.reference.diameter,r=i.makeGestureEvent(t,{bubbles:!0,cancelable:!0,scale:o,centerX:n.center.x,centerY:n.center.y,_source:"pinch"});this.reference.target.dispatchEvent(r)},fireRotate:function(t,e){var n=Math.round((t-this.reference.angle)%360),o=i.makeGestureEvent("rotate",{bubbles:!0,cancelable:!0,angle:n,centerX:e.center.x,centerY:e.center.y,_source:"pinch"});this.reference.target.dispatchEvent(o)},calcPinchRotate:function(){var t=this.calcChord(),e=t.diameter,i=this.calcAngle(t);e!=this.reference.diameter&&this.firePinch("pinch",e,t),i!=this.reference.angle&&this.fireRotate(i,t)},calcChord:function(){var t=[];n.forEach(function(e){t.push(e)});for(var e,i,o,r=0,s={a:t[0],b:t[1]},l=0;l<t.length;l++)for(var a=t[l],u=l+1;u<t.length;u++){var c=t[u];e=Math.abs(a.clientX-c.clientX),i=Math.abs(a.clientY-c.clientY),o=e+i,o>r&&(r=o,s={a:a,b:c})}return e=Math.abs(s.a.clientX+s.b.clientX)/2,i=Math.abs(s.a.clientY+s.b.clientY)/2,s.center={x:e,y:i},s.diameter=r,s},calcAngle:function(t){var e=t.a.clientX-t.b.clientX,i=t.a.clientY-t.b.clientY;return(360+Math.atan2(i,e)*o)%360}};e.registerGesture("pinch",r)}(i)},{}],18:[function(t,e,i){"use strict";function n(t,e){if(!(this instanceof n))throw d('Not called with "new" keyword.');var i,o,s=this;e=e||{},"string"==typeof t?(o=r(document.querySelectorAll(t)),i=c(o)):t[0]instanceof Element?(o=r(t),i=c(o)):(o=[],i=u(t,e),i.forEach(function(t){o=o.concat(r(t.element.querySelectorAll("li")))})),i.forEach(function(t){t.element.addEventListener("wheel",h)}),o.forEach(function(t,e){var i=t!==t.parentElement.lastElementChild?s.addEvt(t,"mousedown",t,!0):{element:t};o[e]=i}),g="transform"in o[0].element.style?"transform":"-webkit-transform",this.modelLists=i,this.items=o,this.bindings={},this.callback={},m(v,"list-dragon-base",e.cssStylesheetReferenceElement)}function o(t,e,i){if(t){var n=0>p&&t>=0||0===p&&0!==t||p>0&&0>=t;p=t>0?Math.min(50,t):Math.max(-50,t),n&&(clearInterval(f),f=setInterval(function(t){var e=i.scrollTop+p;0>p&&t>e||p>0&&e>t?(i.scrollTop=t,clearInterval(f)):i.scrollTop=e},125))}else clearInterval(f),p=0}function r(t){return Array.prototype.slice.call(t)}function s(t,e){return e.top<=t.y&&t.y<=e.bottom&&e.left<=t.x&&t.x<=e.right}function l(t,e){return"translate("+Math.floor(t+window.scrollX)+"px,"+Math.floor(e+window.scrollY)+"px)"}function a(t){var e=document.createTextNode(t);return document.createElement("a").appendChild(e).parentNode.innerHTML}function u(t,e){var i=e.label||"{label}";return t.forEach(function(n,o){var r=n.label||i,s=void 0!==n.htmlEncode&&n.htmlEncode||e.htmlEncode,l=document.createElement("div"),u=document.createElement("ul");if(n.models)Object.keys(n).forEach(function(t){"models"!==t&&(n.models[t]=n[t])}),t[o]=n=n.models;else{if(!(n instanceof Array))throw d("List [{1}] not an array of models (with or without additional properties) OR an object (with a `models` property containing an array of models).",o);n.models=n}n.forEach(function(t){var i=t.label||r,o=void 0!==t.htmlEncode&&t.htmlEncode||s,l="object"==typeof t?t:{label:t},c=C.call([l,n,e],i),h=document.createElement("li");h.innerHTML=o?a(c):c,u.appendChild(h)});var c=document.createElement("li");if(c.innerHTML="&nbsp;",u.appendChild(c),n.title){var h=document.createElement("div");h.innerHTML=s?a(n.title):n.title,l.appendChild(h)}l.appendChild(u),l.className=n.cssClassNames||e.cssClassNames||"dragon-list",n.element=u,n.container=l}),t}function c(t){var e=[];return t.forEach(function(t){var i=t.parentElement,n=i.parentElement,o=[];e.find(function(t){return t.element===i})||(r(i.querySelectorAll("li")).forEach(function(t){t!==i.lastElementChild&&o.push(t.innerHTML)}),o.element=i,o.container=n,e.push(o))}),e}function h(t){t.stopPropagation()}function d(){return"list-dragon: "+C.apply(this,Array.prototype.slice.call(arguments))}var g,f,p,v,m=t("css-injector"),C=t("templex"),w=null;v="div.dragon-list{position:relative;background-color:#fff}div.dragon-list>div,div.dragon-list>ul{position:absolute;left:0;right:0}div.dragon-list>div{text-align:center;background-color:#00796b;color:#fff;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);overflow:hidden;white-space:nowrap}div.dragon-list>ul{overflow-y:auto;bottom:0;margin:0;padding:0;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}div.dragon-list>ul>li,li.dragon-pop{white-space:nowrap;list-style-type:none;border:0 solid #f4f4f4;border-bottom:1px solid #e0e0e0;cursor:move;transition:border-top-width .2s}div.dragon-list>ul>li:last-child{height:0;border-bottom:none}li.dragon-pop{position:fixed;background-color:#fff;border:1px solid #e0e0e0;left:0;top:0;overflow-x:hidden;box-shadow:rgba(0,0,0,.188235) 0 10px 20px,rgba(0,0,0,.227451) 0 6px 6px}",n.prototype={addEvt:function(t,e,i,n){var o={handler:y[e].bind(t,this),element:i||window};return n||(this.bindings[e]=o),o.element.addEventListener(e,o.handler),o},removeEvt:function(t){var e=this.bindings[t];delete this.bindings[t],e.element.removeEventListener(t,e.handler)},removeAllEventListeners:function(){for(var t in this.bindings){var e=this.bindings[t];e.element.removeEventListener(t,e.handler)}this.items.forEach(function(t){t.handler&&t.element.removeEventListener("mousedown",t.handler)}),this.modelLists.forEach(function(t){t.element.removeEventListener("wheel",h)})},pointInListRects:function(t){return this.modelLists.find(function(e){var i=e.element.getBoundingClientRect();return i={left:window.scrollX+i.left,top:window.scrollY+i.top,right:window.scrollX+i.right,bottom:window.scrollY+i.bottom,width:i.width,height:i.height},e.rect=i,s(t,i)?(e.rect=i,!0):!1})},pointInItemRects:function(t,e,i){return this.items.find(function(n){var o=n.element;return o!==e&&o!==i&&s(t,n.rect)})},getAllItemBoundingRects:function(){var t,e=this.modelLists;this.items.forEach(function(i){var n=i.element,o=n.parentElement,r=e.find(function(t){return t.element===o});if(void 0===r.isDropTarget||"function"==typeof r.isDropTarget&&r.isDropTarget()||r.isDropTarget){var s=n.getBoundingClientRect(),l=s.bottom;n===o.lastElementChild?(l=o.getBoundingClientRect().bottom,l<s.top&&(l=s.top+(t||50))):t=s.height,s={left:window.scrollX+s.left,right:window.scrollX+s.right,top:window.scrollY+s.top+o.scrollTop,bottom:window.scrollY+l+o.scrollTop},i.rect=s}})},reinsert:function(t){var e=t.style;e.width=e[g]=e.transition=w,t.classList.remove("dragon-pop"),this.drop.style.transitionDuration="0s",this.drop.style.borderTopWidth=w,this.drop.parentElement.insertBefore(t,this.drop),delete this.drop},itemCoordinates:function(t){for(var e=t.parentElement,i={item:0};t=t.previousElementSibling;)++i.item;return this.modelLists.find(function(t,n){return i.list=n,t.element===e}),i}};var y={mousedown:function(t,e){if(e.stopPropagation(),e.preventDefault(),!t.drop){var i=this.getBoundingClientRect();if(t.rect=i={left:Math.round(i.left-1),top:Math.round(i.top-1),right:Math.round(i.right),bottom:Math.round(i.bottom),width:Math.round(i.width),height:Math.round(i.height)},t.pin={x:window.scrollX+e.clientX,y:window.scrollY+e.clientY},t.origin=t.itemCoordinates(this),t.callback.grabbed&&t.callback.grabbed.call(this,t),t.getAllItemBoundingRects(),t.drop=this.nextElementSibling,t.drop.style.transitionDuration="0s",t.drop.style.borderTopWidth=i.height+"px",this.style.width=i.width+"px",this.style.transitionDuration="0s",this.style[g]=l(i.left-window.scrollX,i.top-window.scrollY),this.classList.add("dragon-pop"),this.style.zIndex=window.getComputedStyle(t.modelLists[0].container.parentElement).zIndex,!t.container){for(var n=this;n.parentNode&&(n=n.parentNode,!("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot||"BODY"===n.tagName)););t.container=n}t.container.appendChild(this),i.left+=window.scrollX,i.top+=window.scrollY,i.right+=window.scrollX,i.bottom+=window.scrollY,t.addEvt(this,"mousemove"),t.addEvt(this,"mouseup")}},mousemove:function(t,e){t.drop.style.transition=w;var i=t.pointInListRects({x:e.clientX,y:e.clientY})||t.mostRecentHoverList;if(i){var n=e.clientX-t.pin.x,r=e.clientY-t.pin.y;t.mostRecentHoverList=i;var s,a=i.element.scrollHeight-i.rect.height,u=e.clientY+window.scrollY;a>0&&(i.element.scrollTop>0&&(s=u-(i.rect.top+5))<0?o(s,0,i.element):i.element.scrollTop<a&&(s=u-(i.rect.bottom-1-5))>0?o(s,a,i.element):o());var c=t.pointInItemRects({x:e.clientX,y:t.rect.bottom+window.scrollY+r+i.element.scrollTop},this,t.drop);if(this.style[g]=l(t.rect.left-window.scrollX+n,t.rect.top-window.scrollY+r),c){var h=c.element;h.style.transition=w,h.style.borderTopWidth=t.drop.style.borderTopWidth,t.drop.style.borderTopWidth=null,t.drop=h}}},mouseup:function(t,e){o(),t.removeEvt("mousemove"),t.removeEvt("mouseup"),e.stopPropagation();var i=this.getBoundingClientRect();if(window.scrollX+i.left===t.rect.left&&window.scrollY+i.top===t.rect.top)t.reinsert(this);else{var n=t.drop.getBoundingClientRect();t.addEvt(this,"transitionend",this),this.style.transitionDuration=w,this.style.transitionProperty=g,this.style[g]=l(n.left-window.scrollX,n.top-window.scrollY)}},transitionend:function(t,e){if(e.propertyName===g){t.removeEvt("transitionend"),t.reinsert(this),this.style.transitionProperty=w;var i=t.modelLists[t.origin.list].splice(t.origin.item,1)[0],n=t.itemCoordinates(this);t.modelLists[n.list].splice(n.item,0,i),t.callback.dropped&&t.callback.dropped.call(this,t)}}};e.exports=n},{"css-injector":4,templex:25}],19:[function(t,e,i){!function(){function t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function i(){return 1}function n(t){d||"string"==typeof t||"number"==typeof t||(d=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof t).stack))}function o(t){return this instanceof o?("number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||i,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=i),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,void this.reset()):new o(t)}function r(t,e,i){n(e);var o=t._cache[e];return o&&(s(t,o)?(c(t,o),t._allowStale||(o=void 0)):i&&l(t,o),o&&(o=o.value)),o}function s(t,e){if(!e||!e.maxAge&&!t._maxAge)return!1;var i=!1,n=Date.now()-e.now;return i=e.maxAge?n>e.maxAge:t._maxAge&&n>t._maxAge}function l(t,e){u(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}function a(t){for(;t._lru<t._mru&&t._length>t._max;)c(t,t._lruList[t._lru])}function u(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function c(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],u(t,e))}function h(t,e,i,n,o,r){this.key=t,this.value=e,this.lu=i,this.length=n,this.now=o,r&&(this.maxAge=r)}"object"==typeof e&&e.exports?e.exports=o:this.LRUCache=o;var d=!1;Object.defineProperty(o.prototype,"max",{set:function(t){(!t||"number"!=typeof t||0>=t)&&(t=1/0),this._max=t,this._length>this._max&&a(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(o.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t){this._lengthCalculator=i,this._length=this._itemCount;for(var e in this._cache)this._cache[e].length=1}else{this._lengthCalculator=t,this._length=0;for(var e in this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length}this._length>this._max&&a(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(o.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),o.prototype.forEach=function(t,e){e=e||this;for(var i=0,n=this._itemCount,o=this._mru-1;o>=0&&n>i;o--)if(this._lruList[o]){i++;var r=this._lruList[o];s(this,r)&&(c(this,r),this._allowStale||(r=void 0)),r&&t.call(e,r.value,r.key,this)}},o.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,i=this._mru-1;i>=0&&e<this._itemCount;i--)if(this._lruList[i]){var n=this._lruList[i];t[e++]=n.key}return t},o.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,i=this._mru-1;i>=0&&e<this._itemCount;i--)if(this._lruList[i]){var n=this._lruList[i];t[e++]=n.value}return t},o.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},o.prototype.dump=function(){for(var t=[],e=0,i=this._mru-1;i>=0&&e<this._itemCount;i--)if(this._lruList[i]){var n=this._lruList[i];s(this,n)||(++e,t.push({k:n.key,v:n.value,e:n.now+(n.maxAge||0)}))}return t},o.prototype.dumpLru=function(){return this._lruList},o.prototype.set=function(e,i,o){o=o||this._maxAge,n(e);var r=o?Date.now():0,s=this._lengthCalculator(i);if(t(this._cache,e))return s>this._max?(c(this,this._cache[e]),!1):(this._dispose&&this._dispose(e,this._cache[e].value),this._cache[e].now=r,this._cache[e].maxAge=o,this._cache[e].value=i,this._length+=s-this._cache[e].length,this._cache[e].length=s,this.get(e),this._length>this._max&&a(this),!0);var l=new h(e,i,this._mru++,s,r,o);return l.length>this._max?(this._dispose&&this._dispose(e,i),!1):(this._length+=l.length,this._lruList[l.lu]=this._cache[e]=l,this._itemCount++,this._length>this._max&&a(this),!0)},o.prototype.has=function(e){if(n(e),!t(this._cache,e))return!1;var i=this._cache[e];return s(this,i)?!1:!0},o.prototype.get=function(t){return n(t),r(this,t,!0)},o.prototype.peek=function(t){return n(t),r(this,t,!1)},o.prototype.pop=function(){var t=this._lruList[this._lru];return c(this,t),t||null},o.prototype.del=function(t){n(t),c(this,this._cache[t])},o.prototype.load=function(t){this.reset();for(var e=Date.now(),i=t.length-1;i>=0;i--){var o=t[i];n(o.k);var r=o.e||0;if(0===r)this.set(o.k,o.v);else{var s=r-e;s>0&&this.set(o.k,o.v,s)}}}}()},{}],20:[function(t,e,i){!function(t,e){"object"==typeof i&&i&&"string"!=typeof i.nodeName?e(i):"function"==typeof define&&define.amd?define(["exports"],e):(t.Mustache={},e(t.Mustache))}(this,function(t){function e(t){return"function"==typeof t}function i(t){return p(t)?"array":typeof t}function n(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(t,e){return null!=t&&"object"==typeof t&&e in t}function r(t,e){return v.call(t,e)}function s(t){return!r(m,t)}function l(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return C[t]})}function a(e,i){function o(){if(m&&!C)for(;v.length;)delete f[v.pop()];else v=[];m=!1,C=!1}function r(t){if("string"==typeof t&&(t=t.split(y,2)),!p(t)||2!==t.length)throw new Error("Invalid tags: "+t);l=new RegExp(n(t[0])+"\\s*"),a=new RegExp("\\s*"+n(t[1])),d=new RegExp("\\s*"+n("}"+t[1]))}if(!e)return[];var l,a,d,g=[],f=[],v=[],m=!1,C=!1;r(i||t.tags);for(var E,A,R,D,T,P,M=new h(e);!M.eos();){if(E=M.pos,R=M.scanUntil(l))for(var k=0,F=R.length;F>k;++k)D=R.charAt(k),s(D)?v.push(f.length):C=!0,f.push(["text",D,E,E+1]),E+=1,"\n"===D&&o();if(!M.scan(l))break;if(m=!0,A=M.scan(x)||"name",M.scan(w),"="===A?(R=M.scanUntil(b),M.scan(b),M.scanUntil(a)):"{"===A?(R=M.scanUntil(d),M.scan(S),M.scanUntil(a),A="&"):R=M.scanUntil(a),!M.scan(a))throw new Error("Unclosed tag at "+M.pos);if(T=[A,R,E,M.pos],f.push(T),"#"===A||"^"===A)g.push(T);else if("/"===A){if(P=g.pop(),!P)throw new Error('Unopened section "'+R+'" at '+E);if(P[1]!==R)throw new Error('Unclosed section "'+P[1]+'" at '+E)}else"name"===A||"{"===A||"&"===A?C=!0:"="===A&&r(R)}if(P=g.pop())throw new Error('Unclosed section "'+P[1]+'" at '+M.pos);return c(u(f))}function u(t){for(var e,i,n=[],o=0,r=t.length;r>o;++o)e=t[o],e&&("text"===e[0]&&i&&"text"===i[0]?(i[1]+=e[1],i[3]=e[3]):(n.push(e),i=e));return n}function c(t){for(var e,i,n=[],o=n,r=[],s=0,l=t.length;l>s;++s)switch(e=t[s],e[0]){case"#":case"^":o.push(e),r.push(e),o=e[4]=[];break;case"/":i=r.pop(),i[5]=e[2],o=r.length>0?r[r.length-1][4]:n;break;default:o.push(e)}return n}function h(t){this.string=t,this.tail=t,this.pos=0}function d(t,e){this.view=t,this.cache={".":this.view},this.parent=e}function g(){this.cache={}}var f=Object.prototype.toString,p=Array.isArray||function(t){return"[object Array]"===f.call(t)},v=RegExp.prototype.test,m=/\S/,C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},w=/\s*/,y=/\s+/,b=/\s*=/,S=/\s*\}/,x=/#|\^|\/|>|\{|&|=|!/;h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(t){var e=this.tail.match(t);if(!e||0!==e.index)return"";var i=e[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},h.prototype.scanUntil=function(t){var e,i=this.tail.search(t);switch(i){case-1:e=this.tail,this.tail="";break;case 0:e="";break;default:e=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=e.length,e},d.prototype.push=function(t){return new d(t,this)},d.prototype.lookup=function(t){var i,n=this.cache;if(n.hasOwnProperty(t))i=n[t];else{for(var r,s,l=this,a=!1;l;){if(t.indexOf(".")>0)for(i=l.view,r=t.split("."),s=0;null!=i&&s<r.length;)s===r.length-1&&(a=o(i,r[s])),i=i[r[s++]];else i=l.view[t],a=o(l.view,t);if(a)break;l=l.parent}n[t]=i}return e(i)&&(i=i.call(this.view)),i},g.prototype.clearCache=function(){this.cache={}},g.prototype.parse=function(t,e){var i=this.cache,n=i[t];return null==n&&(n=i[t]=a(t,e)),n},g.prototype.render=function(t,e,i){var n=this.parse(t),o=e instanceof d?e:new d(e);return this.renderTokens(n,o,i,t)},g.prototype.renderTokens=function(t,e,i,n){for(var o,r,s,l="",a=0,u=t.length;u>a;++a)s=void 0,o=t[a],r=o[0],"#"===r?s=this.renderSection(o,e,i,n):"^"===r?s=this.renderInverted(o,e,i,n):">"===r?s=this.renderPartial(o,e,i,n):"&"===r?s=this.unescapedValue(o,e):"name"===r?s=this.escapedValue(o,e):"text"===r&&(s=this.rawValue(o)),void 0!==s&&(l+=s);return l},g.prototype.renderSection=function(t,i,n,o){function r(t){return s.render(t,i,n)}var s=this,l="",a=i.lookup(t[1]);if(a){if(p(a))for(var u=0,c=a.length;c>u;++u)l+=this.renderTokens(t[4],i.push(a[u]),n,o);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)l+=this.renderTokens(t[4],i.push(a),n,o);else if(e(a)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");a=a.call(i.view,o.slice(t[3],t[5]),r),null!=a&&(l+=a)}else l+=this.renderTokens(t[4],i,n,o);return l}},g.prototype.renderInverted=function(t,e,i,n){var o=e.lookup(t[1]);return!o||p(o)&&0===o.length?this.renderTokens(t[4],e,i,n):void 0},g.prototype.renderPartial=function(t,i,n){if(n){var o=e(n)?n(t[1]):n[t[1]];return null!=o?this.renderTokens(this.parse(o),i,n,o):void 0}},g.prototype.unescapedValue=function(t,e){var i=e.lookup(t[1]);return null!=i?i:void 0},g.prototype.escapedValue=function(e,i){var n=i.lookup(e[1]);return null!=n?t.escape(n):void 0},g.prototype.rawValue=function(t){return t[1]},t.name="mustache.js",t.version="2.2.1",t.tags=["{{","}}"];var E=new g;t.clearCache=function(){return E.clearCache()},t.parse=function(t,e){return E.parse(t,e)},t.render=function(t,e,n){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+i(t)+'" was given as the first argument for mustache#render(template, view, partials)');return E.render(t,e,n)},t.to_html=function(i,n,o,r){var s=t.render(i,n,o);return e(r)?void r(s):s},t.escape=l,t.Scanner=h,t.Context=d,t.Writer=g})},{}],21:[function(t,e,i){"use strict";function n(t){return t instanceof n?t:this instanceof n?(this.originalValue=t,void(this.o=t||{})):new n(t)}n.chain=function(t){var e=n(t);return e.chaining=!0,e},n.prototype={value:function(){return this.originalValue},each:function(t,e){var i=this.o;return Object.keys(i).forEach(function(e){t.call(this,i[e],e,i)},e||i),this},find:function(t,e){var i,n=this.o;return n&&(i=Object.keys(n).find(function(e){return t.call(this,n[e],e,n)},e||n),void 0!==i&&(i=n[i])),i},filter:function(t,e){var i=this.o,n=[];return i&&Object.keys(i).forEach(function(e){t.call(this,i[e],e,i)&&n.push(i[e])},e||i),n},map:function(t,e){var i=this.o,n=[];return i&&Object.keys(i).forEach(function(e){n.push(t.call(this,i[e],e,i))},e||i),n},reduce:function(t,e,i){var n=this.o;return n&&Object.keys(n).forEach(function(i,o){e=o||void 0!==e?t(e,n[i],i,n):n[i]},i||n),e},extend:function(t){var e=this.o;return Array.prototype.slice.call(arguments).forEach(function(t){if(t)for(var i in t)e[i]=t[i]}),this.chaining?this:e},extendOwn:function(t){var e=this.o;return Array.prototype.slice.call(arguments).forEach(function(t){n(t).each(function(t,i){e[i]=t})}),this.chaining?this:e}},Array.prototype.find||(Array.prototype.find=function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;n>r;r++)if(e=i[r],t.call(o,e,r,i))return e}),e.exports=n},{}],22:[function(t,e,i){"use strict";function n(t,e){Object.defineProperty(this,t,{value:e,writable:!1,enumerable:!0,configurable:!1})}function o(t,e){n.call(this,"x",Number(t)||0),n.call(this,"y",Number(e)||0)}function r(t,e,i,r){t=Number(t)||0,e=Number(e)||0,i=Number(i)||0,r=Number(r)||0,0>i&&(t+=i,i=-i),0>r&&(e+=r,r=-r),n.call(this,"origin",new o(t,e)),n.call(this,"extent",new o(i,r)),n.call(this,"corner",new o(t+i,e+r)),n.call(this,"center",new o(t+i/2,e+r/2))}o.prototype={plus:function(t){return new o(this.x+t.x,this.y+t.y)},plusXY:function(t,e){return new o(this.x+(t||0),this.y+(e||0))},minus:function(t){return new o(this.x-t.x,this.y-t.y)},min:function(t){return new o(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new o(Math.max(this.x,t.x),Math.max(this.y,t.y))},distance:function(t){var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){var e=!1;return t&&(e=this.x===t.x&&this.y===t.y),e},greaterThan:function(t){return this.x>t.x&&this.y>t.y},lessThan:function(t){return this.x<t.x&&this.y<t.y},greaterThanOrEqualTo:function(t){return this.x>=t.x&&this.y>=t.y},lessThanOrEqualTo:function(t){return this.x<=t.x&&this.y<=t.y},within:function(t){var e=t.origin.x,i=e+t.extent.x,n=t.origin.y,o=n+t.extent.y;return t.extent.x<0&&(e=i,i=t.origin.x),t.extent.y<0&&(n=o,o=t.origin.y),e<=this.x&&this.x<i&&n<=this.y&&this.y<o}},o.prototype.EQ=o.prototype.equals,o.prototype.GT=o.prototype.greaterThan,o.prototype.LT=o.prototype.lessThan,o.prototype.GE=o.prototype.greaterThanOrEqualTo,o.prototype.LE=o.prototype.lessThanOrEqualTo,r.prototype={get top(){return this.origin.y},get left(){return this.origin.x},get bottom(){return this.corner.y},get right(){return this.corner.x},get width(){return this.extent.x},get height(){return this.extent.y},get area(){return this.width*this.height},flattenXAt:function(t){return new r(t,this.origin.y,0,this.extent.y)},flattenYAt:function(t){return new r(this.origin.x,t,this.extent.x,0)},contains:function(t){return t.within(this)},within:function(t){return t.origin.lessThanOrEqualTo(this.origin)&&t.corner.greaterThanOrEqualTo(this.corner)},growBy:function(t){return new r(this.origin.x+t,this.origin.y+t,this.extent.x-t-t,this.extent.y-t-t)},shrinkBy:function(t){return this.growBy(-t)},union:function(t){var e=this.origin.min(t.origin),i=this.corner.max(t.corner),n=i.minus(e);return new r(e.x,e.y,n.x,n.y)},forEach:function(t,e){e=e||this;for(var i=this.origin.x,n=this.corner.x;n>i;i++)for(var o=this.origin.y,r=this.corner.y;r>o;o++)t.call(e,i,o)},intersect:function(t,e,i){var n=null,o=this.origin.max(t.origin),s=this.corner.min(t.corner),l=s.minus(o);return l.x>0&&l.y>0?n=new r(o.x,o.y,l.x,l.y):"function"==typeof e&&(n=e.call(i||this,t)),n},intersects:function(t){return t.corner.x>this.origin.x&&t.corner.y>this.origin.y&&t.origin.x<this.corner.x&&t.origin.y<this.corner.y}},i.Point=o,i.Rectangle=r},{}],23:[function(t,e,i){"use strict";function n(t,e){var i,o;if(o=t.match(c)){for(i=0;i<o.length;++i)"["===o[i][0]&&(o[i]=n.reserve(o[i])),o[i]="("+o[i]+")";for(o=t.match(new RegExp(l+o.join(l)+l)),o.shift(),i=1;i<o.length;i+=2){var h=o[i];switch(h){case u:h=r;break;case a:h=s;break;default:var d="^"===h[1]?2:1;h="["+n.reserve(h.substr(d,h.length-(d+1)))+"]"}o[i]=h}}else o=[t];for(i=0;i<o.length;i+=2)o[i]=n.reserve(o[i]);return o=o.join(""),o=o.substr(0,2)===r?o.substr(2):"^"+o,o.substr(-2,2)===r?o=o.substr(0,o.length-2):o+="$",new RegExp(o,e?"i":void 0)}var o=/([\.\\\+\*\?\^\$\(\)\{\}\=\!\<\>\|\:\[\]])/g,r=".*",s=".",l="("+r+")",a="_",u="%",c=new RegExp("("+[a,u,"\\[\\^?[^-\\]]+]","\\[\\^?[^-\\]]\\-[^\\]]]"].join("|")+")","g");
n.reserve=function(t){return t.replace(o,"\\$1")};var h,d;(n.clearCache=function(t){return t?h[t]&&(delete h[t],d--):(h={},d=0),d})(),n.getCacheSize=function(){return d},n.cached=function(t,e,i){"string"==typeof t&&(i=e,e=t,t=!1);var o=e+(i?"i":"c"),r=h[o];if(r)r.when=(new Date).getTime(),void 0!==t&&(r.keep=t);else{if(d===n.cacheMax){var s,l,a=[],u=0;for(s in h)if(r=h[s],!r.keep){for(l=0;u>l&&!(r.when<a[l].item.when);++l);a.splice(l,0,{key:s,item:r}),u++}if(!a.length)return n(e,i);for(l=Math.ceil(a.length/10),d-=l;l--;)delete h[a[l].key]}r=h[o]={regex:n(e,i),keep:t,when:(new Date).getTime()},d++}return r.regex},e.exports=n},{}],24:[function(t,e,i){"use strict";(function(t){function e(){this.selection=[],this.states=[],this.storeState=function(){for(var t,e=this.selection,i=[],n=0;n<e.length;n++)t=[].concat(e[n]),i.push(t);this.states.push(i)}}function i(t,e){return t instanceof Array?i.apply(this,t):void 0===e?[t,t]:e>=t?[t,e]:[e,t]}function n(t,e){return t[0]<=e[0]&&e[0]<=t[1]||t[0]<=e[1]&&e[1]<=t[1]||e[0]<t[0]&&t[1]<e[1]}function o(t,e){return t[1]===e[0]-1||e[1]===t[0]-1}function r(t,e){var i=t[0],n=t[1],o=e[0],r=e[1],s=[];return i>=o&&n>r?s.push([r+1,n]):o>i&&r>=n?s.push([i,o-1]):o>i&&n>r?(s.push([i,o-1]),s.push([r+1,n])):(i>r||o>n)&&s.push(t),s}function s(t,e){var i=Math.min(Math.min.apply(Math,t),Math.min.apply(Math,e)),n=Math.max(Math.max.apply(Math,t),Math.max.apply(Math,e));return[i,n]}e.prototype={select:function(t,e){this.storeState();var r=i(t,e),l=[0,1];return this.selection.forEach(function(t){n(t,r)||o(t,r)?r=s(t,r):l.push(t)}),l.push(r),l[1]=this.selection.length,this.selection.splice.apply(this.selection,l),this},deselect:function(t,e){var o=i(t,e),s=[0,0];return this.selection.forEach(function(t){if(n(t,o)){var e=r(t,o);s=s.concat(e)}else s.push(t)}),s[1]=this.selection.length,this.selection.splice.apply(this.selection,s),this},clear:function(){return this.states.length=0,this.selection.length=0,this},clearMostRecentSelection:function(){0!==this.states.length&&(this.selection=this.states.pop())},isSelected:function(t){return this.selection.some(function(e){return e[0]<=t&&t<=e[1]})},isEmpty:function(){return 0===this.selection.length},getSelections:function(){var t=[];return this.selection.forEach(function(e){for(var i=e[0];i<=e[1];i++)t.push(i)}),t.sort(function(t,e){return t-e}),t}},t.exports=e})("object"==typeof e&&e||(window.RangeSelectionModel={}),"object"==typeof e&&e.exports||(window.RangeSelectionModel.exports={}))||"object"==typeof e||(window.RangeSelectionModel=window.RangeSelectionModel.exports)},{}],25:[function(require,module,exports){function templex(t){var e=this instanceof Array?this:[this];return arguments.length>1&&e.unshift(arguments),t.replace(templex.regexp,templex.merger.bind(e))}templex.regexp=/\{(.*?)\}/g,templex["with"]=function(t,e){return"with(this["+t+"]){"+e+"}"},templex.cache=[],templex.deref=function(key){if(!(this.length in templex.cache)){for(var code="return eval(expr)",i=0;i<this.length;++i)code=templex["with"](i,code);templex.cache[this.length]=eval("(function(expr){"+code+"})")}return templex.cache[this.length].call(this,key)},templex.merger=function(t,e){var i;try{i=isNaN(e)?templex.deref.call(this,e):this[0][e]}catch(n){i="{"+e+"}"}return i},module.exports=templex},{}],26:[function(t,e,i){"use strict";function n(t){var e,i,o="function"==typeof this.toJSON?this.toJSON():this,r=t&&t.preserve;return n.isArray(o)?(e=[],o.forEach(function(t){i=n.call(t),void 0!==i?e.push(i):r&&e.push(null)})):"object"==typeof o?(e={},Object.keys(o).forEach(function(t){i=n.call(o[t]),void 0!==i&&(e[t]=i)})):e=o,e}function o(t){return t.constructor===Array}n.isArray=o;Object.prototype.toString;e.exports=n},{}],27:[function(t,e,i){"use strict";function n(t,e,i){var n=this;this.div="string"==typeof t?document.querySelector(t):t,w("grid"),this.lastEdgeSelection=[0,0],this.lnfProperties=Object.create(A),this.isWebkit=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,this.selectionModel=new C(this),this.localCellEditors={},this.cellEditors=Object.create(this.localCellEditors),this.renderOverridesCache={},this.behavior=e(this),this.div.oncontextmenu=function(t){return t.preventDefault(),!1},this.clearMouseDown(),this.dragExtent=new g(0,0),this.numRows=0,this.numColumns=0,this.pluginsDo(function(t){t.installOn&&t.installOn(n)}),i=i||{},i.top=i.top||0,i.right=i.right||"-200px",i.bottom=i.bottom||0,i.left=i.left||0,x||(x=!0,s()),this.initRenderer(),this.initCanvas(i),this.initScrollbars(),this.initLocalCellEditors(),document.body.addEventListener("copy",function(t){n.checkClipboardCopy(t)}),this.getCanvas().resize(),this.dialog=new y(this),this.filter=new S}function o(t,e){return p(e).each(function(e,i){"object"==typeof t[i]&&"object"==typeof e?o(t[i],e):void 0===e?delete t[i]:t[i]=e}),t}function r(t){var e=t.origin,i=t.corner,n=Math.min(e.x,i.x),o=Math.min(e.y,i.y),r=Math.max(e.x,i.x),s=Math.max(e.y,i.y),l=new f(n,o,r-n,s-o);return l}function s(){l(E);var t=document.createElement("paper-button");t.style.display="none",t.setAttribute("disabled",!0),document.body.appendChild(t);var e=window.getComputedStyle(t),i=document.createElement("section");i.style.display="none",i.setAttribute("hero",!0),document.body.appendChild(i);var n=window.getComputedStyle(document.querySelector("html")),o=window.getComputedStyle(document.querySelector("html, body")),r=window.getComputedStyle(i);E.columnHeaderBackgroundColor=e.color,E.rowHeaderBackgroundColor=e.color,E.topLeftBackgroundColor=e.color,E.lineColor=e.backgroundColor,E.backgroundColor2=o.backgroundColor,E.color=n.color,E.fontFamily=n.fontFamily,E.backgroundColor=r.backgroundColor,t.setAttribute("disabled",!1),t.setAttribute("secondary",!0),t.setAttribute("raised",!0),e=window.getComputedStyle(t),E.columnHeaderColor=e.color,E.rowHeaderColor=e.color,E.topLeftColor=e.color,E.backgroundSelectionColor=e.backgroundColor,E.foregroundSelectionColor=e.color,t.setAttribute("secondary",!1),t.setAttribute("warning",!0),E.columnHeaderForegroundSelectionColor=e.color,E.columnHeaderBackgroundSelectionColor=e.backgroundColor,E.rowHeaderForegroundSelectionColor=e.color,E.fixedColumnBackgroundSelectionColor=e.backgroundColor,("rgba(0, 0, 0, 0)"===E.columnHeaderBackgroundSelectionColor||"transparent"===E.lineColor)&&l(E),document.body.removeChild(t),document.body.removeChild(i)}function l(t){for(var e in t)t.hasOwnProperty(e)&&delete t[e]}function a(t){var e="function"==typeof t?t():t;return e||0===e?e:""}var u=t("extend-me"),c=t("./lib/deprecated");u.debug=!0;var h=t("finbars"),d=t("fincanvas"),g=t("rectangular").Point,f=t("rectangular").Rectangle,p=t("object-iterators"),v=t("./defaults"),m=t("./lib/Renderer"),C=t("./lib/SelectionModel"),w=t("../css/stylesheets"),y=t("./lib/TableDialog"),b=t("./lib/Formatters"),S=t("./lib/CustomFilter"),x=!1,E=Object.create(v),A=Object.create(E);n.prototype={constructor:n.prototype.constructor,deprecated:c,behavior:null,isWebkit:!0,mouseDown:[],dragExtent:null,vScrollValue:0,hScrollValue:0,rectangular:null,selectionModel:null,cellEditor:null,sbHScroller:null,sbVScroller:null,sbPrevVScrollValue:null,sbPrevHScrollValue:null,cellEditors:null,renderOverridesCache:{},hoverCell:null,scrollingNow:!1,lastEdgeSelection:null,setAttribute:function(t,e){this.div.setAttribute(t,e)},reset:function(){this.lastEdgeSelection=[0,0],this.lnfProperties=Object.create(A),this.selectionModel=new C(this),this.cellEditors=Object.create(this.localCellEditors),this.renderOverridesCache={},this.clearMouseDown(),this.dragExtent=new g(0,0),this.numRows=0,this.numColumns=0,this.vScrollValue=0,this.hScrollValue=0,this.cellEditor=null,this.sbPrevVScrollValue=null,this.sbPrevHScrollValue=null,this.hoverCell=null,this.scrollingNow=!1,this.lastEdgeSelection=[0,0],this.behavior.reset(),this.getRenderer().reset(),this.getCanvas().resize(),this.behaviorChanged()},getProperties:function(){return this.getPrivateState()},_getProperties:function(){return this.lnfProperties},computeCellsBounds:function(){var t=this.getRenderer();t&&t.computeCellsBounds()},initCellEditor:function(t){this.localCellEditors[t.alias]=t,t.grid=this},initLocalCellEditors:function(){var t=["Textfield","Choice","Color","Date","Slider","Spinner","Filter"],e=this;t.forEach(function(t){e.initCellEditor(new n.cellEditors[t])}),this.localCellEditors["int"]=this.localCellEditors.spinner,this.localCellEditors["float"]=this.localCellEditors.spinner,this.localCellEditors.date=this.localCellEditors.date,this.localCellEditors.string=this.localCellEditors.extfield},toggleColumnPicker:function(){this.behavior.toggleColumnPicker()},isHovered:function(t,e){var i=this.getHoverCell();return i&&i.x===t&&i.y===e},registerFormatter:function(t,e){b[t]=e},getFormatter:function(t){var e=b[t];return e?e:b["default"]},formatValue:function(t,e){var i=this.getFormatter(t);return i(e)},isColumnHovered:function(t){var e=this.getHoverCell();return e&&e.x===t},isRowResizeable:function(){return this.resolveProperty("rowResize")},isCheckboxOnlyRowSelections:function(){return this.resolveProperty("checkboxOnlyRowSelections")},isRowHovered:function(t){var e=this.getHoverCell();return e&&e.y===t},getHoverCell:function(){return this.hoverCell},setHoverCell:function(t){var e=this.hoverCell,i=new g(t.x,t.y);e&&e.equals(i)||(this.hoverCell=i,this.fireSyntheticOnCellEnterEvent(i),this.repaint())},addGlobalProperties:function(t){if(A)this._addGlobalProperties(t);else{var e=this;setTimeout(function(){e.addGlobalProperties(t)},10)}},_addGlobalProperties:function(t){p(t).each(function(t,e){A[e]=t})},refreshProperties:function(){this.checkScrollbarVisibility(),this.behavior.defaultRowHeight=null,this.isColumnAutosizing()&&this.behavior.autosizeAllColumns()},addProperties:function(t){var e=this.getProperties();o(e,t),this.refreshProperties()},getPrivateState:function(){return this.behavior.getPrivateState()},setState:function(t){var e=this;this.behavior.setState(t),setTimeout(function(){e.behaviorChanged(),e.synchronizeScrollingBoundries()},100)},getState:function(){return this.behavior.getState()},getMouseDown:function(){var t=this.mouseDown.length-1;return 0>t?null:this.mouseDown[t]},popMouseDown:function(){0!==this.mouseDown.length&&(this.mouseDown.length=this.mouseDown.length-1)},clearMouseDown:function(){this.mouseDown=[new g(-1,-1)],this.dragExtent=null},setMouseDown:function(t){this.mouseDown.push(t)},getDragExtent:function(){return this.dragExtent},setDragExtent:function(t){this.dragExtent=t},pluginsDo:function(t){},getCellProvider:function(){var t=this.behavior.getCellProvider();return t},gridRenderedNotification:function(){this.updateRenderedSizes(),this.cellEditor&&this.cellEditor.gridRenderedNotification(),this.checkColumnAutosizing(),this.fireSyntheticGridRenderedEvent()},checkColumnAutosizing:function(){var t=this.behavior;t.autoSizeRowNumberColumn(),this.isColumnAutosizing()&&t.checkColumnAutosizing(!1)},updateRenderedSizes:function(){this.behavior.setRenderedColumnCount(this.getVisibleColumns()+1),this.behavior.setRenderedRowCount(this.getVisibleRows()+1)},checkClipboardCopy:function(t){if(this.hasFocus()){t.preventDefault();var e=this.getSelectionAsTSV();t.clipboardData.setData("text/plain",e)}},hasSelections:function(){return this.getSelectionModel?this.selectionModel.hasSelections():void 0},getSelectionAsTSV:function(){var t=this.selectionModel;if(t.hasSelections()){var e=this.getSelectionMatrix();return e=e[e.length-1],this.getMatrixSelectionAsTSV(e)}return t.hasRowSelections()?this.getMatrixSelectionAsTSV(this.getRowSelectionMatrix()):t.hasColumnSelections()?this.getMatrixSelectionAsTSV(this.getColumnSelectionMatrix()):void 0},getMatrixSelectionAsTSV:function(t){var e="";if(t.length){var i=t.length,n=t[0].length,o=i*n,r=i-1;if(o>2e4)return alert("selection size is too big to copy to the paste buffer"),"";for(var s=0;n>s;s++)for(var l=0;i>l;l++)e+=t[l][s]+(r>l?"	":"\n")}return e},hasFocus:function(){return this.getCanvas().hasFocus()},clearSelections:function(){var t=this.isCheckboxOnlyRowSelections();this.selectionModel.clear(t),this.clearMouseDown()},clearMostRecentSelection:function(){var t=this.isCheckboxOnlyRowSelections();this.selectionModel.clearMostRecentSelection(t)},clearMostRecentColumnSelection:function(){this.selectionModel.clearMostRecentColumnSelection()},clearMostRecentRowSelection:function(){},clearRowSelection:function(){this.selectionModel.clearRowSelection(),this.behavior.getDataModel().getComponent().clearSelectedData()},select:function(t,e,i,n){0>t||0>e||this.selectionModel.select(t,e,i,n)},isSelected:function(t,e){return this.selectionModel.isSelected(t,e)},isCellSelectedInRow:function(t){var e=this.selectionModel,i=e.isCellSelectedInRow(t);return i},isCellSelectedInColumn:function(t){var e=this.selectionModel,i=e.isCellSelectedInColumn(t);return i},getSelectionModel:function(){return this.deprecated("selectionModel",{since:"0.2"})},getBehavior:function(){return this.deprecated("behavior",{since:"0.2"})},setBehavior:function(t){this.behavior=t,this.behavior.setGrid(this),this.behavior.changed=this.behaviorChanged.bind(this),this.behavior.shapeChanged=this.behaviorShapeChanged.bind(this),this.behavior.stateChanged=this.behaviorStateChanged.bind(this)},behaviorChanged:function(){(this.numColumns!==this.getColumnCount()||this.numRows!==this.getRowCount())&&(this.numColumns=this.getColumnCount(),this.numRows=this.getRowCount(),this.behaviorShapeChanged()),this.computeCellsBounds(),this.repaint()},getBounds:function(){var t=this.getRenderer();return t&&t.getBounds()},resolveProperty:function(t){for(var e=t.split("."),i=this.getProperties();e.length;)i=i[e.shift()];return i},behaviorShapeChanged:function(){this.synchronizeScrollingBoundries()},behaviorStateChanged:function(){this.getRenderer().computeCellsBounds(),this.repaint()},repaint:function(){var t=this.resolveProperty("repaintImmediately"),e=this.getCanvas();e&&(t===!0?e.paintNow():e.repaint())},paintNow:function(){var t=this.getCanvas();t.paintNow()},useHiDPI:function(){return this.resolveProperty("useHiDPI")!==!1},initCanvas:function(t){var e=this,i=this.divCanvas=document.createElement("div");this.div.appendChild(i),this.canvas=new d(i,this.renderer);var o=i.style;o.position="absolute",o.top=t.top,o.right=t.right,o.bottom=t.bottom,o.left=t.left,this.canvas.resizeNotification=function(){e.resized()},this.addEventListener("fin-canvas-mousemove",function(t){if(!e.resolveProperty("readOnly")){var i=t.detail.mouse,n=e.getGridCellFromMousePoint(i);n.primitiveEvent=t,e.delegateMouseMove(n)}}),this.addEventListener("fin-canvas-mousedown",function(t){if(!e.resolveProperty("readOnly")){var i=t.detail.mouse,n=e.getGridCellFromMousePoint(i);n.keys=t.detail.keys,n.primitiveEvent=t,e.mouseDownState=n,e.delegateMouseDown(n),e.fireSyntheticMouseDownEvent(n),e.repaint()}}),this.addEventListener("fin-canvas-mouseup",function(t){if(!e.resolveProperty("readOnly")){e.dragging=!1,e.isScrollingNow()&&e.setScrollingNow(!1),e.columnDragAutoScrolling&&(e.columnDragAutoScrolling=!1);var i=t.detail.mouse,n=e.getGridCellFromMousePoint(i);n.primitiveEvent=t,e.delegateMouseUp(n),e.mouseDownState&&e.fireSyntheticButtonPressedEvent(e.mouseDownState),e.mouseDownState=null,e.fireSyntheticMouseUpEvent(n)}}),this.addEventListener("fin-canvas-dblclick",function(t){if(!e.resolveProperty("readOnly")){var i=t.detail.mouse,n=e.getGridCellFromMousePoint(i);n.primitiveEvent=t,e.fireSyntheticDoubleClickEvent(n,t),e.delegateDoubleClick(n)}}),this.addEventListener("fin-canvas-tap",function(t){if(!e.resolveProperty("readOnly")){var i=t.detail.mouse,n=e.getGridCellFromMousePoint(i);n.primitiveEvent=t,n.keys=t.detail.keys,e.fireSyntheticClickEvent(n),e.delegateTap(n)}}),this.addEventListener("fin-canvas-drag",function(t){if(!e.resolveProperty("readOnly")){e.dragging=!0;var i=t.detail.mouse,n=e.getGridCellFromMousePoint(i);n.primitiveEvent=t,e.delegateMouseDrag(n)}}),this.addEventListener("fin-canvas-keydown",function(t){if(!e.resolveProperty("readOnly")){if(e.resolveProperty("editOnKeydown")){var i,o,r,s,l=t.detail["char"];e.isEditing()||"F2"!==l&&!(i=1===l.length)&&!(o="DELETE"===l||"BACKSPACE"===l)||(r=e.selectionModel.getLastSelection(),r&&(s=e.activateEditor(r.origin.x,r.origin.y),s instanceof n.cellEditors.Simple&&(i?s.input.value=l:o&&(s.input.value=""),t.detail.primitiveEvent.preventDefault())))}e.fireSyntheticKeydownEvent(t),e.delegateKeyDown(t)}}),this.addEventListener("fin-canvas-keyup",function(t){e.resolveProperty("readOnly")||(e.fireSyntheticKeyupEvent(t),e.delegateKeyUp(t))}),this.addEventListener("fin-canvas-track",function(t){if(!e.resolveProperty("readOnly")&&!e.dragging){var i=t.detail.primitiveEvent;Math.abs(i.dy)>Math.abs(i.dx)?i.yDirection>0?e.scrollVBy(-2):i.yDirection<-0&&e.scrollVBy(2):i.xDirection>0?e.scrollHBy(-1):i.xDirection<-0&&e.scrollHBy(1)}}),this.addEventListener("fin-canvas-wheelmoved",function(t){var i=t.detail.mouse,n=e.getGridCellFromMousePoint(i);n.primitiveEvent=t.detail.primitiveEvent,e.delegateWheelMoved(n)}),this.addEventListener("fin-canvas-mouseout",function(t){if(!e.resolveProperty("readOnly")){var i=t.detail.mouse,n=e.getGridCellFromMousePoint(i);n.primitiveEvent=t.detail.primitiveEvent,e.delegateMouseExit(n)}}),this.addEventListener("fin-canvas-context-menu",function(t){var i=t.detail.mouse,n=e.getGridCellFromMousePoint(i);n.primitiveEvent=t.detail.primitiveEvent,e.delegateContextMenu(n)}),this.div.removeAttribute("tabindex")},convertViewPointToDataPoint:function(t){return this.behavior.convertViewPointToDataPoint(t)},convertDataPointToViewPoint:function(t){return this.behavior.convertDataPointToViewPoint(t)},addEventListener:function(t,e){this.canvas.addEventListener(t,e)},addFinEventListener:function(t,e){console.warn(".addEventListener() method is deprecated as of v0.2. Use .addEventListener() instead. (Will be removed in a future release.)"),this.addEventListener(t,e)},setScrollingNow:function(t){this.scrollingNow=t},isScrollingNow:function(){return this.scrollingNow},overColumnDivider:function(t){var e=t.primitiveEvent.detail.mouse.x,i=this.getRenderer().overColumnDivider(e);return i},overRowDivider:function(t){var e=t.primitiveEvent.detail.mouse.y,i=this.getRenderer().overRowDivider(e);return i},beCursor:function(t){t||(t="default"),this.div.style.cursor=t},delegateWheelMoved:function(t){this.behavior.onWheelMoved(this,t)},delegateMouseExit:function(t){this.behavior.handleMouseExit(this,t)},delegateContextMenu:function(t){this.behavior.onContextMenu(this,t)},delegateMouseMove:function(t){this.behavior.onMouseMove(this,t)},delegateMouseDown:function(t){this.behavior.handleMouseDown(this,t)},delegateMouseUp:function(t){this.behavior.onMouseUp(this,t)},delegateTap:function(t){this.behavior.onTap(this,t)},delegateMouseDrag:function(t){this.behavior.onMouseDrag(this,t)},delegateDoubleClick:function(t){this.behavior.onDoubleClick(this,t)},delegateHoldPulse:function(t){this.behavior.onHoldPulse(this,t)},delegateKeyDown:function(t){this.behavior.onKeyDown(this,t)},delegateKeyUp:function(t){this.behavior.onKeyUp(this,t)},stopEditing:function(){this.cellEditor&&this.isEditing()&&(this.cellEditor.stopEditing&&this.cellEditor.stopEditing(),this.cellEditor=null)},registerCellEditor:function(t,e){this.cellEditors[t]=e},getDataBounds:function(){var t=200,e=this.canvas.bounds,i=new f(0,0,e.origin.x+e.extent.x-t,e.origin.y+e.extent.y);return i},getRowNumbersWidth:function(){return this.isShowRowNumbers()?this.getRenderer().getRowNumbersWidth():0},getCanvas:function(){return this.canvas},editAt:function(t,e){this.cellEditor=t;var i=e.gridCell,n=i.x,o=i.y;if(n>=0&&o>=0){var r=new g(n,o);this.setMouseDown(r),this.setDragExtent(new g(0,0)),t.beginEditAt(r)}},isColumnVisible:function(t){return this.getRenderer().isColumnVisible(t)},isDataRowVisible:function(t){return this.getRenderer().isRowVisible(t)},isDataVisible:function(t,e){return this.isDataRowVisible(e)&&this.isColumnVisible(t)},insureModelColIsVisible:function(t,e){var i=this.getColumnCount()-1,n=t+(e>0),o=!this.isColumnVisible(n)||t===i;return o&&this.scrollBy(e,0),o},insureModelRowIsVisible:function(t,e){var i=this.getRowCount()-1,n=t+(e>0),o=!this.isDataRowVisible(n)||t===i;return o&&this.scrollBy(0,e),o},scrollBy:function(t,e){this.scrollHBy(t),this.scrollVBy(e)},scrollVBy:function(t){var e=this.sbVScroller.range.max,i=this.getVScrollValue(),n=Math.min(e,Math.max(0,i+t));n!==i&&this.setVScrollValue(n)},scrollHBy:function(t){var e=this.sbHScroller.range.max,i=this.getHScrollValue(),n=Math.min(e,Math.max(0,i+t));n!==i&&this.setHScrollValue(n)},getGridCellFromMousePoint:function(t){var e=this.getRenderer().getGridCellFromMousePoint(t);return e},getBoundsOfCell:function(t){var e=this.getRenderer().getBoundsOfCell(t),i=new f(e.x,e.y,e.width,e.height);return i},resized:function(){this.synchronizeScrollingBoundries()},cellClicked:function(t){var e=t.gridCell;if(e.x<=this.getColumnCount()&&e.y<=this.getRowCount()){var i=this.getHoverCell(),n=i.x,o=i.y;o>=0&&(o+=this.getVScrollValue()),this.behavior.cellClicked(new g(n,o),t)}},setTotalsValueNotification:function(t,e,i,n){this.fireSyntheticSetTotalsValue(t,e,i,n)},fireSyntheticSetTotalsValue:function(t,e,i,n){var o=new CustomEvent("fin-set-totals-value",{detail:{x:t,y:e,value:i,areas:n}});this.canvas.dispatchEvent(o)},fireSyntheticEditorKeyUpEvent:function(t,e){var i=new CustomEvent("fin-editor-keyup",{detail:{input:t,keyEvent:e}});this.canvas.dispatchEvent(i)},fireSyntheticEditorKeyDownEvent:function(t,e){var i=new CustomEvent("fin-editor-keydown",{detail:{input:t,keyEvent:e}});this.canvas.dispatchEvent(i)},fireSyntheticEditorKeyPressEvent:function(t,e){var i=new CustomEvent("fin-editor-keypress",{detail:{input:t,keyEvent:e}});this.canvas.dispatchEvent(i)},fireSyntheticEditorDataChangeEvent:function(t,e,i){var n=new CustomEvent("fin-editor-data-change",{detail:{input:t,oldValue:e,newValue:i},cancelable:!0});return this.canvas.dispatchEvent(n)},fireSyntheticRowSelectionChangedEvent:function(){var t=new CustomEvent("fin-row-selection-changed",{detail:{rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(t)},fireSyntheticColumnSelectionChangedEvent:function(){var t=new CustomEvent("fin-column-selection-changed",{detail:{rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(t)},selectionChanged:function(){var t=this.getSelectedRows(),e=new CustomEvent("fin-selection-changed",{detail:{rows:t,columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(e)},getRowSelection:function(){function t(t,o){i[o]=a(n.getValue(e,t))}var e,i,n=this,o=this.selectionModel.getSelectedRows(),r=this.getColumnCount(),s={};for(e=0;r>e;e++)i=new Array(o.length),s[this.getField(e)]=i,o.forEach(t);return s},getRowSelectionMatrix:function(){function t(t,n){r[e][n]=a(i.getValue(e,t))}var e,i=this,n=this.selectionModel.getSelectedRows(),o=this.getColumnCount(),r=new Array(o);for(e=0;o>e;e++)r[e]=new Array(n.length),n.forEach(t);return r},getColumnSelectionMatrix:function(){var t=this.getSelectedColumns(),e=this.getRowCount(),i=new Array(t.length),n=this;return t.forEach(function(t,o){i[o]=new Array(e);for(var r=0;e>r;r++)i[o][r]=a(n.getValue(t,r))}),i},getColumnSelection:function(){var t=this.getSelectedColumns(),e={},i=this.getRowCount(),n=this;return t.forEach(function(t){var o=new Array(i);e[n.getField(t)]=o;for(var r=0;i>r;r++)o[r]=a(n.getValue(t,r))}),e},getSelection:function(){var t=this,e=this.getSelections(),i=new Array(e.length);return e.forEach(function(e,n){i[n]=t._getSelection(e)}),i},_getSelection:function(t){t=r(t);for(var e,i=t.extent.x+1,n=t.extent.y+1,o=t.origin.x,s=t.origin.y,l={},u=0;i>u;u++){var c=new Array(n);for(l[this.getField(u+o)]=c,e=0;n>e;e++)c[e]=a(this.getValue(o+u,s+e))}return l},getSelectionMatrix:function(){var t=this,e=this.getSelections(),i=new Array(e.length);return e.forEach(function(e,n){i[n]=t._getSelectionMatrix(e)}),i},_getSelectionMatrix:function(t){t=r(t);for(var e=t.extent.x+1,i=t.extent.y+1,n=t.origin.x,o=t.origin.y,s=[],l=0;e>l;l++){var u=new Array(i);s[l]=u;for(var c=0;i>c;c++)u[c]=a(this.getValue(n+l,o+c))}return s},fireSyntheticContextMenuEvent:function(t){t.gridCell=this.convertViewPointToDataPoint(t.gridCell);var e=new CustomEvent("fin-context-menu",{detail:{gridCell:t.gridCell,mousePoint:t.mousePoint,viewPoint:t.viewPoint,primitiveEvent:t.primitiveEvent,rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(e)},fireSyntheticMouseUpEvent:function(t){var e=new CustomEvent("fin-mouseup",{detail:{gridCell:t.gridCell,mousePoint:t.mousePoint,viewPoint:t.viewPoint,primitiveEvent:t.primitiveEvent,rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(e)},fireSyntheticMouseDownEvent:function(t){this.stopEditing();var e=new CustomEvent("fin-mousedown",{detail:{gridCell:t.gridCell,mousePoint:t.mousePoint,viewPoint:t.viewPoint,primitiveEvent:t.primitiveEvent,rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(e)},isViewableButton:function(t,e){return this.getRenderer().isViewableButton(t,e)},fireSyntheticButtonPressedEvent:function(t){var e=t.dataCell,i=t.gridCell;if(this.isViewableButton(e.x,e.y)){var n=new CustomEvent("fin-button-pressed",{detail:{gridCell:i}});this.canvas.dispatchEvent(n)}},fireSyntheticKeydownEvent:function(t){var e=new CustomEvent("fin-keydown",{detail:t.detail});this.canvas.dispatchEvent(e)},fireSyntheticKeyupEvent:function(t){var e=new CustomEvent("fin-keyup",{detail:t.detail});this.canvas.dispatchEvent(e)},fireSyntheticFilterAppliedEvent:function(t){var e=new CustomEvent("fin-filter-applied",{detail:t});this.canvas&&this.canvas.dispatchEvent(e)},fireSyntheticOnCellEnterEvent:function(t){var e={gridCell:t,time:Date.now(),grid:this},i=new CustomEvent("fin-cell-enter",{detail:e});this.canvas.dispatchEvent(i)},fireSyntheticGroupsChangedEvent:function(t){var e={groups:t,time:Date.now(),grid:this},i=new CustomEvent("fin-groups-changed",{detail:e});this.canvas.dispatchEvent(i)},fireSyntheticOnCellExitEvent:function(t){var e={gridCell:t,time:Date.now(),grid:this},i=new CustomEvent("fin-cell-exit",{detail:e});this.canvas.dispatchEvent(i)},fireSyntheticClickEvent:function(t){var e=t.gridCell,i={gridCell:e,mousePoint:t.mousePoint,keys:t.keys,primitiveEvent:t,time:Date.now(),grid:this};this.behavior.enhanceDoubleClickEvent(i);var n=new CustomEvent("fin-click",{detail:i});this.canvas.dispatchEvent(n)},fireSyntheticDoubleClickEvent:function(t){this.stopEditing();var e=t.gridCell,i={gridCell:e,mousePoint:t.mousePoint,time:Date.now(),grid:this};this.behavior.enhanceDoubleClickEvent(t);var n=new CustomEvent("fin-double-click",{detail:i});this.behavior.cellDoubleClicked(e,t),this.canvas.dispatchEvent(n)},fireSyntheticGridRenderedEvent:function(){var t=new CustomEvent("fin-grid-rendered",{detail:{source:this,time:Date.now()}});this.canvas&&this.canvas.dispatchEvent(t)},fireScrollEvent:function(t,e,i){var n=new CustomEvent(t,{detail:{oldValue:e,value:i,time:Date.now()}});this.canvas.dispatchEvent(n)},setVScrollValue:function(t){t=Math.round(t);var e=this.sbVScroller.range.max;t=Math.min(e,Math.max(0,t));var i=this;if(t!==this.vScrollValue){this.behavior._setScrollPositionY(t);var n=this.vScrollValue;this.vScrollValue=t,this.scrollValueChangedNotification(),setTimeout(function(){i.fireScrollEvent("fin-scroll-y",n,t)})}},getVScrollValue:function(){return this.vScrollValue},setHScrollValue:function(t){t=Math.round(t);var e=this.sbHScroller.range.max;t=Math.min(e,Math.max(0,t));var i=this;if(t!==this.hScrollValue){this.behavior._setScrollPositionX(t);var n=this.hScrollValue;this.hScrollValue=t,this.scrollValueChangedNotification(),setTimeout(function(){i.fireScrollEvent("fin-scroll-x",n,t),i.synchronizeScrollingBoundries()})}},getHScrollValue:function(){return this.hScrollValue},takeFocus:function(){this.isEditing()?this.stopEditing():this.getCanvas().takeFocus()},editorTakeFocus:function(){return this.cellEditor?this.cellEditor.takeFocus():void 0},isEditing:function(){return this.cellEditor&&this.cellEditor.isEditing},initScrollbars:function(){var t=this,e=new h({orientation:"horizontal",onchange:t.setHScrollValue.bind(t),cssStylesheetReferenceElement:this.div}),i=new h({orientation:"vertical",onchange:t.setVScrollValue.bind(t),paging:{up:t.pageUp.bind(t),down:t.pageDown.bind(t)}});this.sbHScroller=e,this.sbVScroller=i;var n=this.resolveProperty("hScrollbarClassPrefix"),o=this.resolveProperty("vScrollbarClassPrefix");n&&""!==n&&(this.sbHScroller.classPrefix=n),o&&""!==o&&(this.sbVScroller.classPrefix=o),this.div.appendChild(e.bar),this.div.appendChild(i.bar),this.resizeScrollbars()},resizeScrollbars:function(){this.sbHScroller.shortenBy(this.sbVScroller).resize(),this.sbVScroller.resize()},setVScrollbarValues:function(t){this.sbVScroller.range={min:0,max:t}},setHScrollbarValues:function(t){this.sbHScroller.range={min:0,max:t}},scrollValueChangedNotification:function(){(this.hScrollValue!==this.sbPrevHScrollValue||this.vScrollValue!==this.sbPrevVScrollValue)&&(this.sbPrevHScrollValue=this.hScrollValue,this.sbPrevVScrollValue=this.vScrollValue,this.cellEditor&&this.cellEditor.scrollValueChangedNotification(),this.computeCellsBounds())},getValue:function(t,e){return this.behavior.getValue(t,e)},setValue:function(t,e,i){this.behavior.setValue(t,e,i)},getColumnAlignment:function(t){return this.behavior.getColumnAlignment(t)},synchronizeScrollingBoundries:function(){var t=this.getFixedColumnCount(),e=this.getFixedRowCount(),i=this.getColumnCount(),n=this.getRowCount(),o=this.getBounds();if(o){for(var r=o.height-this.behavior.getFixedRowsMaxHeight()-15,s=o.width-200-this.behavior.getFixedColumnsMaxWidth()-15,l=0,a=0;i>l;l++){var u=this.getColumnWidth(i-l-1);if(a+=u,a>s)break}for(var c=0,h=0;n>c;c++){var d=this.getRowHeight(n-c-1);if(h+=d,h>r)break}var g=Math.max(0,i-t-l);this.setHScrollbarValues(g);var f=1+Math.max(0,n-e-c);this.setVScrollbarValues(f),this.setHScrollValue(Math.min(this.getHScrollValue(),g)),this.setVScrollValue(Math.min(this.getVScrollValue(),f)),this.computeCellsBounds(),this.repaint(),this.resizeScrollbars()}},getVisibleRows:function(){return this.getRenderer().getVisibleRows()},getVisibleColumns:function(){return this.getRenderer().getVisibleColumns()},initRenderer:function(){this.renderer=new m(this)},getRenderer:function(){return this.renderer},getColumnWidth:function(t){return this.behavior.getColumnWidth(t)},setColumnWidth:function(t,e){this.stopEditing(),this.behavior.setColumnWidth(t,e)},getColumnEdge:function(t){return this.behavior.getColumnEdge(t,this.getRenderer())},getFixedColumnsWidth:function(){return this.behavior.getFixedColumnsWidth()},getRowHeight:function(t){return this.behavior.getRowHeight(t)},setRowHeight:function(t,e){this.stopEditing(),this.behavior.setRowHeight(t,e)},getFixedRowsHeight:function(){return this.behavior.getFixedRowsHeight()},getColumnCount:function(){return this.behavior.getColumnCount()},getRowCount:function(){return this.behavior.getRowCount()},getUnfilteredRowCount:function(){return this.behavior.getUnfilteredRowCount()},getFixedColumnCount:function(){return this.behavior.getFixedColumnCount()},getFixedRowCount:function(){return this.behavior.getFixedRowCount()},topLeftClicked:function(t){this.behavior.topLeftClicked(this,t)},rowHeaderClicked:function(t){this.behavior.rowHeaderClicked(this,t)},columnHeaderClicked:function(t){this.behavior.columnHeaderClicked(this,t)},_activateEditor:function(t){var e=t.gridCell;this.activateEditor(e.x,e.y)},activateEditor:function(t,e){var i;if((this.isEditable()||this.isFilterRow(e))&&(i=this.getCellEditorAt(t,e))){var n=i.getEditorPoint();if(i){if(n.x===t&&n.y===e&&i.isEditing)return;
this.isEditing()&&this.stopEditing(),event.gridCell={x:t,y:e},this.editAt(i,event)}}return i},getCellEditorAt:function(t,e){return this.behavior._getCellEditorAt(t,e)},toggleHiDPI:function(){this.useHiDPI()?this.removeAttribute("hidpi"):this.setAttribute("hidpi",null),this.canvas.resize()},getHiDPI:function(t){if(window.devicePixelRatio&&this.useHiDPI()){var e=window.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1,n=e/i;return n}return 1},getRenderedWidth:function(t){return this.renderer.getRenderedWidth(t)},getRenderedHeight:function(t){return this.renderer.getRenderedHeight(t)},resolveCellEditor:function(t){return this.cellEditors[t]},updateCursor:function(){var t=this.behavior.getCursorAt(-1,-1),e=this.getHoverCell();if(e&&e.x>-1&&e.y>-1){var i=e.x+this.getHScrollValue();t=this.behavior.getCursorAt(i,e.y+this.getVScrollValue())}this.beCursor(t)},repaintCell:function(t,e){this.getRenderer().repaintCell(t,e)},isDraggingColumn:function(){return!!this.renderOverridesCache.dragger},pageUp:function(){var t=this.getRenderer().getPageUpRow();return this.setVScrollValue(t),t},pageDown:function(){var t=this.getRenderer().getPageDownRow();return this.setVScrollValue(t),t},pageLeft:function(){console.log("page left")},pageRight:function(){console.log("page right")},getRenderedData:function(){var t,e=this.behavior,i=this.getRenderer(),n=this.getColumnCount(),o=i.getVisibleRows(),r=new Array(n),s=new Array(o);return r.forEach(function(t,i){r[i]=e.getColumnId(i,0)}),s.forEach(function(i,n){t=s[n]={hierarchy:e.getFixedColumnValue(0,n)},r.forEach(function(i,o){t[i]=e.getValue(o,n)})}),s},getSelectedRow:function(){var t=this.selectionModel.getSelections();if(t.length){for(var e=this.behavior,i=this.getColumnCount(),n=t[0].origin.y,o={},r=0;i>r;r++)o[e.getColumnId(r,0)]=e.getValue(r,n);return o}},fireRequestCellEdit:function(t,e){var i=new CustomEvent("fin-request-cell-edit",{cancelable:!0,detail:{value:e,gridCell:t,time:Date.now()}});return this.canvas.dispatchEvent(i)},fireBeforeCellEdit:function(t,e,i,n){var o=new CustomEvent("fin-before-cell-edit",{cancelable:!0,detail:{oldValue:e,newValue:i,gridCell:t,time:Date.now(),input:n,row:this.getRow(t.y)}}),r=this.canvas.dispatchEvent(o);return r},fireAfterCellEdit:function(t,e,i,n){var o=new CustomEvent("fin-after-cell-edit",{detail:{newValue:i,oldValue:e,gridCell:t,time:Date.now(),input:n,row:this.getRow(t.y)}});this.canvas.dispatchEvent(o)},autosizeColumn:function(t){var e=this.behavior.getColumn(t);e.checkColumnAutosizing(!0),this.computeCellsBounds()},setFocusable:function(t){this.getCanvas().setFocusable(t)},getVisibleColumnsCount:function(){return this.getRenderer().getVisibleColumnsCount()},getVisibleRowsCount:function(){return this.getRenderer().getVisibleRowsCount()},updateSize:function(){this.canvas.checksize()},stopPaintThread:function(){this.canvas.stopPaintThread()},stopResizeThread:function(){this.canvas.stopResizeThread()},restartResizeThread:function(){this.canvas.restartResizeThread()},restartPaintThread:function(){this.canvas.restartPaintThread()},swapColumns:function(t,e){this.behavior.swapColumns(t,e)},endDragColumnNotification:function(){this.behavior.endDragColumnNotification()},getFixedColumnsMaxWidth:function(){return this.behavior.getFixedColumnsMaxWidth()},isMouseDownInHeaderArea:function(){var t=this.getHeaderColumnCount(),e=this.getHeaderRowCount(),i=this.getMouseDown();return i.x<t||i.y<e},isHeaderWrapping:function(){return this.resolveProperty("headerTextWrapping")},_getBoundsOfCell:function(t,e){return this.getRenderer()._getBoundsOfCell(t,e)},getColumnProperties:function(t){return this.behavior.getColumnProperties(t)},setColumnProperties:function(t,e){this.behavior.setColumnProperties(t,e)},moveSingleSelect:function(t,e){this.behavior.moveSingleSelect(this,t,e)},selectCell:function(t,e){this.selectionModel.clear(),this.selectionModel.select(t,e,0,0)},getHeaderColumnCount:function(){return this.behavior.getHeaderColumnCount()},toggleSort:function(t,e){this.stopEditing();var i=this.behavior,n=this;i.toggleSort(t,e),setTimeout(function(){n.synchronizeScrollingBoundries(),n.isColumnAutosizing()&&i.autosizeAllColumns(),n.repaint()},10)},toggleSelectColumn:function(t,e){e=e||[];var i=this.selectionModel,n=i.isColumnSelected(t),o=e.indexOf("CTRL")>-1,r=e.indexOf("SHIFT")>-1;o||r?(o&&(n?i.deselectColumn(t):i.selectColumn(t)),r&&(i.clear(),i.selectColumn(this.lastEdgeSelection[0],t))):(i.clear(),n||i.selectColumn(t)),n||r||(this.lastEdgeSelection[0]=t),this.repaint(),this.fireSyntheticColumnSelectionChangedEvent()},toggleSelectRow:function(t,e){if(t>this.getFilterRowIndex()){e=e||[];var i=this.selectionModel,n=i.isRowSelected(t),o=e.indexOf("SHIFT")>=0;n?i.deselectRow(t):(this.singleSelect(),i.selectRow(t)),o&&(i.clear(),i.selectRow(this.lastEdgeSelection[1],t)),n||o||(this.lastEdgeSelection[1]=t),this.repaint()}},singleSelect:function(){var t=this.isCheckboxOnlyRowSelections(),e=this.isSingleRowSelectionMode(),i=this.mouseDownState.primitiveEvent.detail.primitiveEvent.ctrlKey,n=t&&e||!t&&(!i||e);return n&&this.selectionModel.clearRowSelection(),n},selectViewportCell:function(t,e){var i=this.getHeaderRowCount(),n=this.getRenderer(),o=n.getVisibleColumns()[t],r=n.getVisibleRows()[e];this.clearSelections(),this.select(o,r+i,0,0),this.setMouseDown(this.newPoint(o,r+i)),this.setDragExtent(this.newPoint(0,0)),this.repaint()},selectToViewportCell:function(t,e){var i=this.getSelections();if(i&&i.length){var n=this.getHeaderRowCount(),o=this.getRenderer(),r=o.getVisibleColumns()[t],s=o.getVisibleRows()[e]+n,l=i[0],a=l.origin;this.setDragExtent(this.newPoint(r-a.x,s-a.y)),this.select(a.x,a.y,r-a.x,s-a.y),this.repaint()}},selectFinalCellOfCurrentRow:function(){var t=this.getColumnCount()-1,e=this.getSelectedRows()[0],i=this.getHeaderRowCount();this.clearSelections(),this.scrollBy(this.getColumnCount(),0),this.select(t,e+i,0,0),this.setMouseDown(this.newPoint(t,e+i)),this.setDragExtent(this.newPoint(0,0)),this.repaint()},selectToFinalCellOfCurrentRow:function(){var t=this.getSelections();if(t&&t.length){var e=t[0],i=e.origin,n=e.extent,o=this.getColumnCount();this.scrollBy(o,0),this.clearSelections(),this.select(i.x,i.y,o-i.x-1,n.y),this.repaint()}},selectFirstCellOfCurrentRow:function(){var t=0,e=this.getSelectedRows()[0],i=this.getHeaderRowCount();this.clearSelections(),this.setHScrollValue(0),this.select(t,e+i,0,0),this.setMouseDown(this.newPoint(t,e+i)),this.setDragExtent(this.newPoint(0,0)),this.repaint()},selectToFirstCellOfCurrentRow:function(){var t=this.getSelections();if(t&&t.length){var e=t[0],i=e.origin,n=e.extent;this.clearSelections(),this.select(i.x,i.y,-i.x,n.y),this.setHScrollValue(0),this.repaint()}},selectFinalCell:function(){this.selectCell(this.getColumnCount()-1,this.getRowCount()-1),this.scrollBy(this.getColumnCount(),this.getRowCount()),this.repaint()},selectToFinalCell:function(){var t=this.getSelections();if(t&&t.length){var e=t[0],i=e.origin,n=this.getColumnCount(),o=this.getRowCount();this.clearSelections(),this.select(i.x,i.y,n-i.x-1,o-i.y-1),this.scrollBy(n,o),this.repaint()}},isShowRowNumbers:function(){return this.resolveProperty("showRowNumbers")},isEditable:function(){return this.resolveProperty("editable")===!0},isShowFilterRow:function(){return this.resolveProperty("showFilterRow")},isShowHeaderRow:function(){return this.resolveProperty("showHeaderRow")},getHeaderRowCount:function(){return this.behavior.getHeaderRowCount()},isFilterRow:function(t){return t===this.getFilterRowIndex()},getFilterRowIndex:function(){return this.isShowFilterRow()?this.isShowHeaderRow()?1:0:-1},setGroups:function(t){this.behavior.setGroups(t)},filterClicked:function(t){this.activateEditor(t.gridCell.x,t.gridCell.y)},hasHierarchyColumn:function(){return this.behavior.hasHierarchyColumn()},isHierarchyColumn:function(t){return this.hasHierarchyColumn()&&0===t},checkScrollbarVisibility:function(){},isColumnOrRowSelected:function(){return this.selectionModel.isColumnOrRowSelected()},selectColumn:function(t,e){this.selectionModel.selectColumn(t,e)},selectRow:function(t,e){var i=this.selectionModel,n=this.getFilterRowIndex()+1;this.singleSelect()?t=e:e=e||t;var o=Math.min(t,e);if(o>=n){var r=Math.max(t,e);i.selectRow(o,r)}},isRowNumberAutosizing:function(){return this.resolveProperty("rowNumberAutosizing")},isRowSelected:function(t){return this.selectionModel.isRowSelected(t)},isColumnSelected:function(t){return this.selectionModel.isColumnSelected(t)},lookupFeature:function(t){return this.behavior.lookupFeature(t)},getRow:function(t){return this.behavior.getRow(t)},getFieldName:function(t){return this.behavior.getFieldName(t)},getColumnIndex:function(t){return this.behavior.getColumnIndex(t)},isCellSelection:function(){return this.resolveProperty("cellSelection")===!0},isRowSelection:function(){return this.resolveProperty("rowSelection")===!0},isColumnSelection:function(){return this.resolveProperty("columnSelection")===!0},getComputedRow:function(t){return this.behavior.getComputedRow(t)},isColumnAutosizing:function(){return this.resolveProperty("columnAutosizing")===!0},setGlobalFilter:function(t){this.behavior.setGlobalFilter(t)},selectRowsFromCells:function(){if(!this.isCheckboxOnlyRowSelections()){var t,e=this.mouseDownState.primitiveEvent.detail.primitiveEvent.ctrlKey;e&&!this.isSingleRowSelectionMode()?this.selectionModel.selectRowsFromCells(0,e):(t=this.selectionModel.getLastSelection())?this.selectRow(null,t.corner.y):this.clearRowSelection()}},selectColumnsFromCells:function(){this.selectionModel.selectColumnsFromCells()},getSelectedRows:function(){return this.behavior.getSelectedRows()},getSelectedColumns:function(){return this.behavior.getSelectedColumns()},getSelections:function(){return this.behavior.getSelections()},getLastSelectionType:function(){return this.selectionModel.getLastSelectionType()},isCellSelected:function(t,e){return this.selectionModel.isCellSelected(t,e)},isInCurrentSelectionRectangle:function(t,e){return this.selectionModel.isInCurrentSelectionRectangle(t,e)},selectAllRows:function(){this.selectionModel.selectAllRows()},areAllRowsSelected:function(){return this.selectionModel.areAllRowsSelected()},toggleSelectAllRows:function(){this.areAllRowsSelected()?this.selectionModel.clear():this.selectAllRows(),this.repaint()},getField:function(t){return this.behavior.getField(t)},isSingleRowSelectionMode:function(){return this.resolveProperty("singleRowSelectionMode")},newPoint:function(t,e){return new g(t,e)},newRectangle:function(t,e,i,n){return new f(t,e,i,n)},getFormattedValue:function(t,e){e+=this.getHeaderRowCount();var i=this.getColumnProperties(t).format,n=this.getValue(t,e),o=this.getFormatter(i),r=o(n);return r}},e.exports=n},{"../css/stylesheets":1,"./defaults":47,"./lib/CustomFilter":68,"./lib/Formatters":69,"./lib/Renderer":71,"./lib/SelectionModel":72,"./lib/TableDialog":73,"./lib/deprecated":74,"extend-me":5,finbars:13,fincanvas:14,"object-iterators":21,rectangular:22}],28:[function(t,e,i){"use strict";var n=t("object-iterators"),o=t("../lib/Base"),r=t("./Column"),s=t("../lib/CellProvider"),l=["columnHeader","columnHeaderColumnSelection","filterProperties","rowHeader","rowHeaderRowSelection","rowNumbersProperties","treeColumnProperties","treeColumnPropertiesColumnSelection"],a={isNull:!0},u=o.extend("Behavior",{initialize:function(t){t.setBehavior(this),this.initializeFeatureChain(t),this.getDataModel(),this.cellProvider=this.createCellProvider(),this.renderedColumnCount=30,this.renderedRowCount=60,this.dataUpdates={}},initializeFeatureChain:function(t){var e=this;this.features.forEach(function(t){e.setNextFeature(new t)}),this.featureChain.initializeOn(t)},features:[],tableState:null,grid:null,editorTypes:["choice","textfield","color","slider","spinner","date"],featureChain:null,dataModel:null,baseModel:null,scrollPositionX:0,scrollPositionY:0,featureMap:{},allColumns:[],columns:[],reset:function(){this.cellProvider=this.createCellProvider(),this.renderedColumnCount=30,this.renderedRowCount=60,this.dataUpdates={},this.clearColumns(),this.clearState(),this.getDataModel().reset(),this.createColumns()},clearColumns:function(){this.columns=[],this.allColumns=[],this.columns[-1]=this.newColumn(-1,""),this.columns[-2]=this.newColumn(-2,"Tree"),this.allColumns[-1]=this.columns[-1],this.allColumns[-2]=this.columns[-2]},getColumn:function(t){return this.columns[t]},getColumnId:function(t){return this.getColumn(t).label},newColumn:function(t,e){var i=this.createColumnProperties();return this.getPrivateState().columnProperties[t]=i,new r(this,t,e)},addColumn:function(t,e){var i=this.newColumn(t,e);return this.columns.push(i),this.allColumns.push(i),i},createColumns:function(){},createColumnProperties:function(){var t=this.getPrivateState(),e=Object.create(t);return e.rowNumbersProperties=Object.create(e,{foregroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderForegroundSelectionColor},set:function(t){this.columnHeaderForegroundSelectionColor=t}},backgroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderBackgroundSelectionColor},set:function(t){this.columnHeaderBackgroundSelectionColor=t}}}),e.rowHeader=Object.create(e,{font:{configurable:!0,get:function(){return this.rowHeaderFont},set:function(t){this.rowHeaderFont=t}},color:{configurable:!0,get:function(){return this.rowHeaderColor},set:function(t){this.rowHeaderColor=t}},backgroundColor:{configurable:!0,get:function(){return this.rowHeaderBackgroundColor},set:function(t){this.rowHeaderBackgroundColor=t}},foregroundSelectionColor:{configurable:!0,get:function(){return this.rowHeaderForegroundSelectionColor},set:function(t){this.rowHeaderForegroundSelectionColor=t}},backgroundSelectionColor:{configurable:!0,get:function(){return this.rowHeaderBackgroundSelectionColor},set:function(t){this.rowHeaderBackgroundSelectionColor=t}}}),e.columnHeader=Object.create(e,{format:{value:"default"},font:{configurable:!0,get:function(){return this.columnHeaderFont},set:function(t){this.columnHeaderFont=t}},color:{configurable:!0,get:function(){return this.columnHeaderColor},set:function(t){this.columnHeaderColor=t}},backgroundColor:{configurable:!0,get:function(){return this.columnHeaderBackgroundColor},set:function(t){this.columnHeaderBackgroundColor=t}},foregroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderForegroundSelectionColor},set:function(t){this.columnHeaderForegroundSelectionColor=t}},backgroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderBackgroundSelectionColor},set:function(t){this.columnHeaderBackgroundSelectionColor=t}}}),e.columnHeaderColumnSelection=Object.create(e.columnHeader,{foregroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderForegroundColumnSelectionColor},set:function(t){this.columnHeaderForegroundColumnSelectionColor=t}},backgroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderBackgroundColumnSelectionColor},set:function(t){this.columnHeaderBackgroundColumnSelectionColor=t}}}),e.rowHeaderRowSelection=Object.create(e.rowHeader,{foregroundSelectionColor:{configurable:!0,get:function(){return this.rowHeaderForegroundRowSelectionColor},set:function(t){this.rowHeaderForegroundRowSelectionColor=t}},backgroundSelectionColor:{configurable:!0,get:function(){return this.rowHeaderBackgroundRowSelectionColor},set:function(t){this.rowHeaderBackgroundRowSelectionColor=t}}}),e.filterProperties=Object.create(e,{font:{configurable:!0,get:function(){return this.filterFont},set:function(t){this.filterFont=t}},color:{configurable:!0,get:function(){return this.filterColor},set:function(t){this.filterColor=t}},backgroundColor:{configurable:!0,get:function(){return this.filterBackgroundColor},set:function(t){this.filterBackgroundColor=t}},foregroundSelectionColor:{configurable:!0,get:function(){return this.filterForegroundSelectionColor},set:function(t){this.filterForegroundSelectionColor=t}},backgroundSelectionColor:{configurable:!0,get:function(){return this.filterBackgroundSelectionColor},set:function(t){this.filterBackgroundSelectionColor=t}},cellBorderStyle:{configurable:!0,get:function(){return this.filterCellBorderStyle},set:function(t){this.filterCellBorderStyle=t}},cellBorderThickness:{configurable:!0,get:function(){return this.filterCellBorderThickness},set:function(t){this.filterCellBorderThickness=t}}}),e.treeColumnProperties=Object.create(e,{font:{configurable:!0,get:function(){return this.treeColumnFont},set:function(t){this.treeColumnFont=t}},color:{configurable:!0,get:function(){return this.treeColumnColor},set:function(t){this.treeColumnColor=t}},backgroundColor:{configurable:!0,get:function(){return this.treeColumnBackgroundColor},set:function(t){this.treeColumnBackgroundColor=t}},foregroundSelectionColor:{configurable:!0,get:function(){return this.treeColumnForegroundSelectionColor},set:function(t){this.treeColumnForegroundSelectionColor=t}},backgroundSelectionColor:{configurable:!0,get:function(){return this.treeColumnBackgroundSelectionColor},set:function(t){this.treeColumnBackgroundSelectionColor=t}}}),e.treeColumnPropertiesColumnSelection=Object.create(e.treeColumnProperties,{foregroundSelectionColor:{configurable:!0,get:function(){return this.treeColumnForegroundColumnSelectionColor},set:function(t){this.treeColumnForegroundColumnSelectionColor=t}},backgroundSelectionColor:{configurable:!0,get:function(){return this.treeColumnBackgroundColumnSelectionColor},set:function(t){this.treeColumnBackgroundColumnSelectionColor=t}}}),e},getColumnWidth:function(t){var e=this.getColumn(t);if(!e)return this.resolveProperty("defaultColumnWidth");var i=e.getWidth();return i},setColumnWidth:function(t,e){this.getColumn(t).setWidth(e),this.stateChanged()},getDataModel:function(){if(null===this.dataModel){var t=this.getDefaultDataModel();this.setDataModel(t)}return this.dataModel},getCellRenderer:function(t,e,i){return this.getColumn(e).getCellRenderer(t,i)},setDataModel:function(t){this.dataModel=t},setComplexFilter:function(t,e){var i=this.getColumn(t);i&&i.setComplexFilter(e)},getComplexFilter:function(t){var e=this.getColumn(t);return e&&e.getComplexFilter()},applyAnalytics:function(){},clearObjectProperties:function(t,e){for(var i in t)t.hasOwnProperty(i)&&(void 0===e||!e&&l.indexOf(i)>=0||e&&l.indexOf(i)<0)&&delete t[i]},getPrivateState:function(){return this.tableState||(this.tableState=this.getDefaultState()),this.tableState},getState:function(){var t=JSON.parse(JSON.stringify(this.getPrivateState()));return this.clearObjectProperties(t.columnProperties,!1),t},clearState:function(){this.tableState=null},getDefaultState:function(){var t=this.grid._getProperties(),e=Object.create(t);return n(e).extendOwn({rowHeights:{},cellProperties:{},columnProperties:[]}),e},setState:function(t){if(!t.columnIndexes){var e=this.getFields();t.columnIndexes=[];for(var i=0;i<e.length;i++)t.columnIndexes[i]=i}var o=t.columnProperties;delete t.columnProperties,this.tableState=null;var r=this.getPrivateState();this.createColumns(),this.setColumnOrder(t.columnIndexes),n(r).extendOwn(t),this.setAllColumnProperties(o),t.columnProperties=o,this.setColumnWidth(-1,24.193359375),this.getDataModel().applyState()},setAllColumnProperties:function(t){t=t||[];for(var e=0;e<t.length;e++){var i=this.getPrivateState().columnProperties[e];this.clearObjectProperties(i,!1),n(i).extendOwn(t[e])}},setColumnOrder:function(t){if(!t)return void(this.columns.length=0);this.columns.length=t.length;for(var e=0;e<t.length;e++)this.columns[e]=this.allColumns[t[e]]},applySorts:function(){},resolveProperty:function(t){return this.grid.resolveProperty(t)},cellClicked:function(t,e){this.getDataModel().cellClicked(t,e)},cellDoubleClicked:function(t,e){},setNextFeature:function(t){this.featureMap[t.alias]=t,this.featureChain?this.featureChain.setNext(t):this.featureChain=t},lookupFeature:function(t){return this.featureMap[t]},getCellProvider:function(){return this.cellProvider},setGrid:function(t){this.grid=t,this.getDataModel().setGrid(t),this.clearColumns()},getGrid:function(){return this.deprecated("grid",{since:"0.2"})},createCellProvider:function(){return new s},getValue:function(t,e){var i=this.getColumn(t);return i&&i.getValue(e)},getUnfilteredValue:function(t,e){var i=this.getColumn(t);return i&&i.getUnfilteredValue(e)},setValue:function(t,e,i){var n=this.getColumn(t);return n&&n.setValue(e,i)},getDataValue:function(t,e){return this.getDataModel().getValue(t,e)},setDataValue:function(t,e,i){this.getDataModel().setValue(t,e,i)},getCellProperties:function(t,e){return this.getColumn(t).getCellProperties(e)},setCellProperties:function(t,e,i){var n=this.getColumn(t);n&&n.setCellProperties(e,i)},getRowCount:function(){return this.getDataModel().getRowCount()},getUnfilteredRowCount:function(){return this.getDataModel().getUnfilteredRowCount()},getFixedRowsHeight:function(){for(var t=this.getFixedRowCount(),e=0,i=0;t>i;i++)e+=this.getRowHeight(i);return e},getRowHeight:function(t){var e=this.getPrivateState().rowHeights;return e&&e[t]||this.getDefaultRowHeight()},getDefaultRowHeight:function(){return this.defaultRowHeight||(this.defaultRowHeight=this.resolveProperty("defaultRowHeight")),this.defaultRowHeight},setRowHeight:function(t,e){var i=this.getPrivateState();i.rowHeights[t]=Math.max(5,e),this.stateChanged()},getFixedRowsMaxHeight:function(){return this.getFixedRowsHeight()},getFixedColumnsWidth:function(){var t=this.getFixedColumnCount(),e=0;this.grid.isShowRowNumbers()&&(e=this.getColumnWidth(-1));for(var i=0;t>i;i++)e+=this.getColumnWidth(i);return e},getFixedColumnsMaxWidth:function(){return this.getFixedColumnsWidth()},_setScrollPositionY:function(t){this.setScrollPositionY(t),this.changed()},_setScrollPositionX:function(t){this.setScrollPositionX(t),this.changed()},setRenderedColumnCount:function(t){this.renderedColumnCount=t},setRenderedRowCount:function(t){this.renderedRowCount=t},_fixedRowClicked:function(t,e){var i=this.translateColumnIndex(this.getScrollPositionX()+e.gridCell.x-this.getFixedColumnCount()),n=this.grid.newPoint(i,e.gridCell.y);e.gridCell=n,this.fixedRowClicked(t,e)},_fixedColumnClicked:function(t,e){var i=this.grid.newPoint(e.gridCell.x,this.getScrollPositionY()+e.gridCell.y-this.getFixedRowCount());e.gridCell=i,this.fixedColumnClicked(t,e)},moveSingleSelect:function(t,e,i){this.featureChain&&(this.featureChain.moveSingleSelect(t,e,i),this.setCursor(t))},setCursor:function(t){t.updateCursor(),this.featureChain.setCursor(t)},onMouseMove:function(t,e){this.featureChain&&(this.featureChain.handleMouseMove(t,e),this.setCursor(t))},onTap:function(t,e){this.featureChain&&(this.featureChain.handleTap(t,e),this.setCursor(t))},onContextMenu:function(t,e){var i=t.fireSyntheticContextMenuEvent(e);i&&this.featureChain&&(this.featureChain.handleContextMenu(t,e),this.setCursor(t))},onWheelMoved:function(t,e){this.featureChain&&(this.featureChain.handleWheelMoved(t,e),this.setCursor(t))},onMouseUp:function(t,e){this.featureChain&&(this.featureChain.handleMouseUp(t,e),this.setCursor(t))},onMouseDrag:function(t,e){this.featureChain&&(this.featureChain.handleMouseDrag(t,e),this.setCursor(t))},onKeyDown:function(t,e){this.featureChain&&(this.featureChain.handleKeyDown(t,e),this.setCursor(t))},onKeyUp:function(t,e){this.featureChain&&(this.featureChain.handleKeyUp(t,e),this.setCursor(t))},onDoubleClick:function(t,e){this.featureChain&&(this.featureChain.handleDoubleClick(t,e),this.setCursor(t))},onHoldPulse:function(t,e){this.featureChain&&(this.featureChain.handleHoldPulse(t,e),this.setCursor(t))},toggleColumnPicker:function(){var t=this.grid.dialog,e=this;t.isOpen()?t.close():(this.buildColumnPicker(t.overlay),t.onClose=function(){e.updateFromColumnPicker(t.overlay)},t.open())},handleMouseDown:function(t,e){this.featureChain&&(this.featureChain.handleMouseDown(t,e),this.setCursor(t))},handleMouseExit:function(t,e){this.featureChain&&(this.featureChain.handleMouseExit(t,e),this.setCursor(t))},changed:function(){},shapeChanged:function(){},isColumnReorderable:function(){return!0},getColumnProperties:function(t){var e=this.columns[t];if(!e)return a;var i=e.getProperties();return i?i:a},setColumnProperties:function(t,e){var i=this.allColumns[t].getProperties();n(i).extendOwn(e),this.changed()},getField:function(t){return-1===t?"tree":this.getColumn(t).getField()},getHeader:function(t){return-1===t?"Tree":this.getColumn(t).getHeader()},setColumnDescriptors:function(t){var e,i=t.visible,n=this.getPrivateState(),o=i.length,r=[];for(e=0;o>e;e++)r.push(i[e].id);n.columnIndexes=r,this.changed()},getHiddenColumnDescriptors:function(){for(var t=this.getPrivateState(),e=t.columnIndexes,i=[],n=this.getColumnCount(),o=0;n>o;o++)-1===e.indexOf(o)&&i.push({id:o,label:this.getHeader(o),field:this.getField(o)});return i},hideColumns:function(t){for(var e=this.getPrivateState(),i=e.columnIndexes,n=0;n<t.length;n++){var o=t[n];-1!==i.indexOf(o)&&i.splice(i.indexOf(o),1)}},getFixedColumnCount:function(){return this.getPrivateState().fixedColumnCount||0},setFixedColumnCount:function(t){this.getPrivateState().fixedColumnCount=t},getFixedRowCount:function(){if(!this.tableState)return 0;var t=this.grid.getHeaderRowCount(),e=this.tableState.fixedRowCount||0;return t+e},setFixedRowCount:function(t){this.tableState.fixedRowCount=t},getHeaderRowCount:function(){var t=this.grid.isShowHeaderRow()?1:0,e=this.grid.isShowFilterRow()?1:0,i=this.getTopTotals().length;return t+e+i},getFooterRowCount:function(){return this.getBottomTotals().length},getTopTotals:function(){return this.getDataModel().getTopTotals()},setHeaderRowCount:function(t){this.tableState.headerRowCount=t},getHeaderColumnCount:function(){return this.grid.resolveProperty("headerColumnCount")},setHeaderColumnCount:function(t){this.tableState.headerColumnCount=t},buildColumnPicker:function(t){var e=document.createElement("div"),i=document.createElement("fin-hypergrid-dnd-list"),n=document.createElement("fin-hypergrid-dnd-list");return e.appendChild(i),e.appendChild(n),this.beColumnStyle(i.style),i.title="hidden columns",i.list=this.getHiddenColumnDescriptors(),this.beColumnStyle(n.style),n.style.left="50%",n.title="visible columns",n.list=this.getColumnDescriptors(),t.lists={hidden:i.list,visible:n.list},t.appendChild(e),!0},updateFromColumnPicker:function(t){var e=t.lists;return this.setColumnDescriptors(e),!0},endDragColumnNotification:function(){},beColumnStyle:function(t){t.top="5%",t.position="absolute",t.width="50%",t.height="100%",t.whiteSpace="nowrap"},getCursorAt:function(t,e){return null},getColumnCount:function(){return this.columns.length},getColumnAlignment:function(t){return"center"},setScrollPositionX:function(t){this.scrollPositionX=t},getScrollPositionX:function(){return this.scrollPositionX},setScrollPositionY:function(t){this.scrollPositionY=t},getScrollPositionY:function(){return this.scrollPositionY},_getCellEditorAt:function(t,e){var i=this.getColumn(t).getCellEditorAt(t,e);if(!i){var n=this.getColumn(t),o=this.grid.isFilterRow(e)?n.getFilterType():n.getType();i=this.grid.resolveCellEditor(o)}return i},getCellEditorAt:function(t,e){return this.grid.isFilterRow(e)?this.grid.cellEditors.textfield:this.getDataModel().getCellEditorAt(t,e)},toggleSort:function(t,e){this.getColumn(t).toggleSort(e)},highlightCellOnHover:function(t,e){return t&&e},cellPropertiesPrePaintNotification:function(t){var e=this.getRow(t.y),i=this.getHeader(t.x);t.row=e,t.columnId=i},cellFixedRowPrePaintNotification:function(t){},cellFixedColumnPrePaintNotification:function(t){},cellTopLeftPrePaintNotification:function(t){},enhanceDoubleClickEvent:function(t){},swapColumns:function(t,e){var i=this.columns,n=i[t];i[t]=i[e],i[e]=n,this.changed()},getColumnEdge:function(t,e){return this.getDataModel().getColumnEdge(t,e)},setTotalsValue:function(t,e,i,n){this.grid.setTotalsValueNotification(t,e,i,n)},getRow:function(t){return this.getDataModel().getRow(t)},convertViewPointToDataPoint:function(t){var e=this.getColumn(t.x).index,i=this.grid.newPoint(e,t.y);return i},setGroups:function(t){this.getDataModel().setGroups(t),this.createColumns(),this.changed()},setAggregates:function(t){var e=this;this.getDataModel().setAggregates(t),this.createColumns(),setTimeout(function(){e.changed()},100)},hasHierarchyColumn:function(){return!1},getRowContextFunction:function(t){return function(){return null}},getSelectionMatrixFunction:function(t){return function(){return null}},getFieldName:function(t){return this.getFields()[t]},getColumnIndex:function(t){return this.getFields().indexOf(t)},getComputedRow:function(t){return this.getDataModel().getComputedRow(t)},autosizeAllColumns:function(){this.checkColumnAutosizing(!0),this.changed()},checkColumnAutosizing:function(t){t=t===!0,this.autoSizeRowNumberColumn(),this.allColumns[-2].checkColumnAutosizing(t),this.allColumns.forEach(function(e){e.checkColumnAutosizing(t)})},autoSizeRowNumberColumn:function(){this.grid.isRowNumberAutosizing()&&this.allColumns[-1].checkColumnAutosizing(!0)},setGlobalFilter:function(t){this.getDataModel().setGlobalFilter(t)},getSelectedRows:function(){return this.grid.selectionModel.getSelectedRows()},getSelectedColumns:function(){return this.grid.selectionModel.getSelectedColumns()},getSelections:function(){return this.grid.selectionModel.getSelections()},getData:function(){return this.getDataModel().getData()},getFilteredData:function(){return this.getDataModel().getFilteredData()}});e.exports=u},{"../lib/Base":66,"../lib/CellProvider":67,"./Column":29,"object-iterators":21}],29:[function(t,e,i){"use strict";function n(t,e,i){this.behavior=t,this.dataModel=t.getDataModel(),this.index=e,this.label=i}var o=t("object-iterators");n.prototype={constructor:n.prototype.constructor,getUnfilteredValue:function(t){return this.dataModel.getUnfilteredValue(this.index,t)},getValue:function(t){return this.dataModel.getValue(this.index,t)},setValue:function(t,e){return this.dataModel.setValue(this.index,t,e)},getWidth:function(){var t=this.getProperties();return t&&t.width||this.behavior.resolveProperty("defaultColumnWidth")},setWidth:function(t){this.getProperties().width=Math.max(5,t)},getCellRenderer:function(t,e){return this.dataModel.getCellRenderer(t,this.index,e)},getCellProperties:function(t){return this.behavior.getPrivateState().cellProperties[this.index+","+t]},setCellProperties:function(t,e){this.behavior.getPrivateState().cellProperties[this.index+","+t]=e},setComplexFilter:function(t){this.getProperties().complexFilter=t},getComplexFilter:function(){return this.getProperties().complexFilter},checkColumnAutosizing:function(t){var e,i,n,o=this.getProperties();o&&(e=o.width,i=o.preferredWidth||e,n=o.columnAutosized&&!t,e===i&&n||(o.width=n?Math.max(e,i):i,o.columnAutosized=!isNaN(o.width)))},getCellType:function(t){var e=this.getValue(t),i=this.typeOf(e);return i},getFilterType:function(){return"filter"},getType:function(){var t=this.getProperties(),e=t.type;return e||(e=this.computeColumnType(),"unkknown"!==e&&(t.type=e)),e},computeColumnType:function(){var t=this.behavior.getHeaderRowCount(),e=this.behavior.getRowCount(),i=this.getValue(t),n=this.typeOf(i);if(!n)return"unknown";for(var o=this.typeOf(i),r="number"==typeof i,s=t;e>s;s++)if(i=this.getValue(s),n=this.typeOf(i),o!==n){if(!r||"number"!=typeof i)return"mixed";o="float"}return o},typeOf:function(t){var e=typeof t;switch(e){case"object":return t.constructor.name.toLowerCase();case"number":return parseInt(t)===t?"int":"float";default:return e}},getProperties:function(){return this.behavior.getPrivateState().columnProperties[this.index]},setProperties:function(t){var e=this.behavior.getPrivateState().columnProperties[this.index];this.clearObjectProperties(e,!1),o(e).extendOwn(t)},toggleSort:function(t){this.dataModel.toggleSort(this.index,t)},getCellEditorAt:function(t,e){return this.dataModel.getCellEditorAt(this.index,e);
},getHeader:function(){return this.label},getField:function(){return this.dataModel.getFields()[this.index]}},e.exports=n},{"object-iterators":21}],30:[function(t,e,i){"use strict";function n(t,e){this.setComponent(e),this.setGrid(t)}var o=t("../lib/deprecated");n.prototype={constructor:n.prototype.constructor,deprecated:o,component:null,grid:null,getGrid:function(){return this.deprecated("grid",{since:"0.2"})},setGrid:function(t){this.grid=t,this.getComponent().setGrid(t)},getBehavior:function(){return this.deprecated("grid.behavior",{since:"0.2"})},changed:function(){this.grid.behavior.changed()},getPrivateState:function(){return this.grid.getPrivateState()},applyState:function(){},setComponent:function(t){this.component=t},getComponent:function(){return this.component},setGlobalFilter:function(t){return this.getComponent().setGlobalFilter(t)},getData:function(){return this.getComponent().getData()},getFilteredData:function(){return this.getComponent().getFilteredData()},getValue:function(t,e){return this.getComponent().getValue(t,e)},getUnfilteredValue:function(t,e){return this.getComponent().getUnfilteredValue(t,e)},setValue:function(t,e,i){this.getComponent().setValue(t,e,i)},getColumnCount:function(){return this.getComponent().getColumnCount()},applyAnalytics:function(){return this.getComponent().applyAnalytics()},getRowCount:function(){return this.getComponent().getRowCount()},getCellRenderer:function(t,e,i,n,o){return this.getComponent().getCellRenderer(t,e,i,n,o)},getRowHeight:function(t){return this.getComponent().getRowHeight(t)},getColumnEdge:function(t,e){return this.getComponent().getColumnEdge(t,e)},getColumnWidth:function(t){return this.getComponent().getColumnWidth(t)},setColumnWidth:function(t,e){this.getComponent().setColumnWidth(t,e)},toggleSort:function(t,e){this.getComponent().toggleSort(t,e)},getColumnProperties:function(t){return this.getComponent().getColumnProperties(t)},setColumnProperties:function(t,e){this.getComponent().setColumnProperties(t,e)},getHeaders:function(){return this.getComponent().getHeaders()},getFields:function(){return this.getComponent().getFields()},setFields:function(t){this.getComponent().setFields(t)},getCellProperties:function(t,e){return this.getComponent().getCellProperties(t,e)},setCellProperties:function(t,e,i){this.getComponent().setCellProperties(t,e,i)},getRow:function(t){return this.getComponent().getRow(t)},getTopTotals:function(){return this.getComponent().getTopTotals()},setTopTotals:function(t){this.getComponent().setTopTotals(t)},getBottomTotals:function(){return this.getComponent().getBottomTotals()},setBottomTotals:function(t){this.getComponent().setBottomTotals(t)},setData:function(t){return this.getComponent().setData(t)},hasHierarchyColumn:function(){return this.getComponent().hasHierarchyColumn()},setHeaders:function(t){return this.getComponent().setHeaders(t)},cellClicked:function(t,e){return this.getComponent().cellClicked(t,e)},getAvailableGroups:function(){return this.getComponent().getAvailableGroups()},getGroups:function(){return this.getComponent().getGroups()},setGroups:function(t){this.getComponent().setGroups(t)},getHiddenColumns:function(){return this.getComponent().getHiddenColumns()},getVisibleColumns:function(){return this.getComponent().getVisibleColumns()},setAggregates:function(t){return this.getComponent().setAggregates(t)},reset:function(){this.getComponent().reset()},getCellEditorAt:function(t,e){return this.getComponent().getCellEditorAt(t,e)},getUnfilteredRowCount:function(){return this.getComponent().getUnfilteredRowCount()}},e.exports=n},{"../lib/deprecated":74}],31:[function(t,e,i){"use strict";var n=t("list-dragon"),o=t("./Local"),r=t("./DataModelDecorator"),s=t("../dataModels/JSON"),l=t("../features"),a=t("../../css/stylesheets"),u=t("../local_node_modules/finanalytics").aggregations,c=o.extend("behaviors.JSON",{initialize:function(t,e){this.setData(e)},features:[l.CellSelection,l.KeyPaging,l.ColumnPicker,l.ColumnResizing,l.RowResizing,l.Filters,l.RowSelection,l.ColumnSelection,l.ColumnMoving,l.ColumnSorting,l.CellEditing,l.CellClick,l.OnHover],aggregations:u,createColumns:function(){var t=this.getDataModel(),e=t.getColumnCount(),i=t.getHeaders(),n=t.getFields();this.clearColumns();for(var o=0;e>o;o++){var r=i[o],s=this.addColumn(o,r),l=s.getProperties();l.field=n[o],l.header=r,l.complexFilter=null}},getDefaultDataModel:function(){return new r(this.grid,new s)},applyAnalytics:function(){this.dataModel.applyAnalytics()},setHeaders:function(t){this.getDataModel().setHeaders(t)},getHeaders:function(){return this.getDataModel().getHeaders()},setFields:function(t){this.getDataModel().setFields(t),this.createColumns()},getFields:function(){return this.getDataModel().getFields()},setData:function(t){this.getDataModel().setData(t),this.createColumns();var e=this;this.grid.isColumnAutosizing()?(setTimeout(function(){e.autosizeAllColumns()},100),e.changed()):setTimeout(function(){e.allColumns[-1].checkColumnAutosizing(!0),e.changed()})},setTopTotals:function(t){this.getDataModel().setTopTotals(t)},getTopTotals:function(){return this.getDataModel().getTopTotals()},setBottomTotals:function(t){this.getDataModel().setBottomTotals(t)},getBottomTotals:function(){return this.getDataModel().getBottomTotals()},setColumns:function(t){this.getDataModel().setColumns(t)},enhanceDoubleClickEvent:function(t){t.row=this.getRow(t.gridCell.y)},setDataProvider:function(t){this.getDataModel().setDataProvider(t)},hasHierarchyColumn:function(){return this.getDataModel().hasHierarchyColumn()},getColumnAlignment:function(t){return 0===t&&this.hasHierarchyColumn()?"left":"center"},getRowSelectionMatrix:function(t){return this.getDataModel().getRowSelectionMatrix(t)},getColumnSelectionMatrix:function(t){return this.getDataModel().getColumnSelectionMatrix(t)},getSelectionMatrix:function(t){return this.getDataModel().getSelectionMatrix(t)},getRowSelection:function(){var t=this.getSelectedRows();return this.getDataModel().getRowSelection(t)},getColumnSelection:function(){var t=this.getSelectedColumns();return this.getDataModel().getColumnSelection(t)},getSelection:function(){var t=this.getSelections();return this.getDataModel().getSelection(t)},buildColumnPicker:function(t){if(!this.isColumnReorderable())return!1;var e={cssStylesheetReferenceElement:t},i={models:this.getGroups(),title:"Groups"},o={models:this.getAvailableGroups(),title:"Available Groups"},r={models:this.getHiddenColumns(),title:"Hidden Columns"},s={models:this.getVisibleColumns(),title:"Visible Columns"},l=new n([i,o],e),u=new n([r,s],e),c=[l,u];return a("list-dragon",t),c.forEach(function(e){e.modelLists.forEach(function(e){t.appendChild(e.container)})}),t.lists={group:i.models,availableGroups:o.models,hidden:r.models,visible:s.models},!0},getGroups:function(){return this.getDataModel().getGroups()},getAvailableGroups:function(){return this.getDataModel().getAvailableGroups()},getHiddenColumns:function(){return this.getDataModel().getHiddenColumns()},getVisibleColumns:function(){return this.getDataModel().getVisibleColumns()},setColumnDescriptors:function(t){var e=this.columns[0];this.columns.length=0,e&&"Tree"===e.label&&this.columns.push(e);for(var i=0;i<t.visible.length;i++)this.columns.push(t.visible[i]);var n=t.group.map(function(t){return t.id});this.getDataModel().setGroups(n),this.changed()},getSelectedRows:function(){var t=-this.grid.getHeaderRowCount(),e=this.grid.selectionModel.getSelectedRows(),i=e.map(function(e){return e+t});return i},getSelectedColumns:function(){return this.grid.selectionModel.getSelectedColumns()},getSelections:function(){return this.grid.selectionModel.getSelections()}});e.exports=c},{"../../css/stylesheets":1,"../dataModels/JSON":46,"../features":65,"../local_node_modules/finanalytics":90,"./DataModelDecorator":30,"./Local":32,"list-dragon":18}],32:[function(t,e,i){"use strict";var n=t("./Behavior"),o=n.extend("Local",{});e.exports=o},{"./Behavior":28}],33:[function(t,e,i){"use strict";var n=t("./Behavior"),o=function(){},r=function(){return 0},s=n.extend("Null",{setScrollPositionY:o,setScrollPositionX:o,getColumnCount:r,getFixedColumnCount:r,getFixedColumnsWidth:r,getFixedColumnsMaxWidth:r,setRenderedWidth:r,getRowCount:r,getFixedRowCount:r,getFixedRowsHeight:r,getFixedRowsMaxHeight:r,setRenderedHeight:r,getCellProvider:o,click:o,doubleClick:o});e.exports=s},{"./Behavior":28}],34:[function(t,e,i){"use strict";e.exports={Behavior:t("./Behavior"),JSON:t("./JSON"),Null:t("./Null")}},{"./Behavior":28,"./JSON":31,"./Null":33}],35:[function(t,e,i){"use strict";var n=t("mustache"),o=t("../lib/Base"),r=/\/\*\s*([^]+?)\s+\*\//,s=o.extend("CellEditor",{alias:"base",isEditing:!1,editorPoint:{x:-1,y:-1},checkEditorPositionFlag:!1,grid:null,initialValue:null,getBehavior:function(){return this.deprecated("grid.behavior",{since:"0.2"})},gridRenderedNotification:function(){this.checkEditor()},scrollValueChangedNotification:function(){this.setCheckEditorPositionFlag()},setCheckEditorPositionFlag:function(){this.checkEditorPositionFlag=!0},beginEditAt:function(t){this.editorPoint=t},setEditorValue:function(t){},getEditorPoint:function(){return this.editorPoint},setEditorPoint:function(t){this.editorPoint=t,this.modelPoint=this.grid.convertViewPointToDataPoint(t)},showEditor:function(){},hideEditor:function(){},stopEditing:function(){if(this.isEditing){var t=this.grid.fireSyntheticEditorDataChangeEvent(this,this.initialValue,this.getEditorValue,this);t&&(this.saveEditorValue(),this.isEditing=!1,this.hideEditor())}},cancelEditing:function(){this.isEditing&&(this.isEditing=!1,this.hideEditor())},saveEditorValue:function(){},getEditorValue:function(){},takeFocus:function(){},checkEditor:function(){},getGrid:function(){return this.deprecated("grid",{since:"0.2"})},template:function(){},getHTML:function(){var t=this.template.toString().match(r)[1];return n.render(t,this)}});e.exports=s},{"../lib/Base":66,mustache:20}],36:[function(t,e,i){"use strict";var n=t("./Simple"),o=t("../lib/Mappy"),r=n.extend("Choice",{alias:"choice",items:["a","b","c"],template:function(){},autopopulate:function(){var t=this.grid.behavior,e=this.getEditorPoint(),i=this.grid.getColumnProperties(e.x);if(i.autopopulateEditor){for(var n=this.grid.getHeaderRowCount(),r=this.grid.getUnfilteredRowCount()-n,s=e.x,l=new o,a=0;r>a;a++){var u=t.getUnfilteredValue(s,a);l.set(u,u)}var c=l.values;c.sort(),c.length>0&&c[0].length>0&&c.unshift(""),this.setItems(c)}},showEditor:function(){var t=this;this.input.style.display="inline",setTimeout(function(){t.showDropdown(t.input)},50)},preShowEditorNotification:function(){this.autopopulate(),this.setEditorValue(this.initialValue)},setItems:function(t){this.items=t,this.updateView()},initializeInput:function(t){var e=this;n.prototype.initializeInput.apply(this,[t]),t.onchange=function(){e.stopEditing()}}});e.exports=r},{"../lib/Mappy":70,"./Simple":40}],37:[function(t,e,i){"use strict";var n=t("./Simple"),o=n.extend("Color",{alias:"color",template:function(){}});e.exports=o},{"./Simple":40}],38:[function(t,e,i){"use strict";function n(t){var e=t.match(/(\d+)/g);return new window.Date(e[0],e[1]-1,e[2])}var o=t("./Simple"),r=t("../lib/Formatters"),s=o.extend("Date",{alias:"date",template:function(){},setEditorValue:function(t){null!=t&&"Date"===t.constructor.name&&(t=r.date(t)),this.getInput().value=t+""},getEditorValue:function(){var t=this.getInput().value;return t=n(t)}});e.exports=s},{"../lib/Formatters":69,"./Simple":40}],39:[function(t,e,i){"use strict";var n=t("./CellEditor"),o=n.extend("Filter",{alias:"filter",initialize:function(){var t=document.createElement("div"),e=t.style;e.position="absolute",e.top=e.bottom="44px",e.right=e.left="1em",e.overflowY="scroll";var i=document.createElement("table");t.appendChild(i),e=i.style,e.width=e.height="100%";var n=document.createElement("tr"),o=document.createElement("td");i.appendChild(n),n.appendChild(o),this.title=document.createElement("div"),this.title.innerHTML="Filter Editor",this.dialog=document.createElement("div"),this.content=o,this.buttons=document.createElement("div"),e=this.dialog.style,e.position="absolute",e.top=e.left=e.right=e.bottom=0,e.whiteSpace="nowrap",e=this.title.style,e.position="absolute",e.top=e.left=e.right=0,e.height="44px",e.whiteSpace="nowrap",e.textAlign="center",e.padding="11px",e=this.buttons.style,e.position="absolute",e.left=e.right=e.bottom=0,e.height="44px",e.whiteSpace="nowrap",e.textAlign="center",e.padding="8px",this.dialog.appendChild(this.title),this.dialog.appendChild(t),this.dialog.appendChild(this.buttons),this.ok=document.createElement("button"),this.ok.style.borderRadius="8px",this.ok.style.width="5.5em",this.cancel=document.createElement("button"),this.cancel.style.marginLeft="2em",this.cancel.style.borderRadius="8px",this.cancel.style.width="5.5em",this["delete"]=document.createElement("button"),this["delete"].style.marginLeft="2em",this["delete"].style.borderRadius="8px",this["delete"].style.width="5.5em",this.reset=document.createElement("button"),this.reset.style.marginLeft="2em",this.reset.style.borderRadius="8px",this.reset.style.width="5.5em",this.ok.innerHTML="ok",this.cancel.innerHTML="cancel",this["delete"].innerHTML="delete",this.reset.innerHTML="reset",this.buttons.appendChild(this.ok),this.buttons.appendChild(this.reset),this.buttons.appendChild(this["delete"]),this.buttons.appendChild(this.cancel);var r=this;this.ok.onclick=function(){r.okPressed()},this.cancel.onclick=function(){r.cancelPressed()},this["delete"].onclick=function(){r.deletePressed()},this.reset.onclick=function(){r.resetPressed()}},tearDown:function(){this.content.innerHTML=""},okPressed:function(){var t=this.grid.dialog;t.onOkPressed()},cancelPressed:function(){var t=this.grid.dialog;t.onCancelPressed()},deletePressed:function(){var t=this.grid.dialog;t.onDeletePressed()},resetPressed:function(){var t=this.grid.dialog;t.onResetPressed()},beginEditAt:function(t){var e=this.grid.behavior,i=this.grid.dialog,n=t.x,o=e.getColumnId(n),r=e.getField(n),s=e.getColumn(n).getType(),l=function(){return[{name:r,alias:o,type:s}]};this.title.innerHTML="Manage Filters";var a=this.grid.filter;if(i.isOpen())i.close();else{var u=this;i.clear(),i.overlay.appendChild(this.dialog),a.initialize(l),i.onOkPressed=function(){a.onOk&&a.onOk()||(u.tearDown(),e.setComplexFilter(n,{state:a.getState()}),i.close(),e.applyAnalytics(),e.changed())},i.onCancelPressed=function(){a.onCancel&&a.onCancel()||(u.tearDown(),i.close(),a=void 0)},i.onDeletePressed=function(){a.onDelete&&a.onDelete()||(u.tearDown(),e.setComplexFilter(n,void 0),i.close(),e.applyAnalytics(),e.changed())},i.onResetPressed=function(){a.onReset&&a.onReset()||(u.tearDown(),a.initialize(i),a.onShow&&a.onShow(u.content))};var c=this.grid._getBoundsOfCell(n,t.y),h=this.grid.div.getBoundingClientRect().left-this.grid.divCanvas.getBoundingClientRect().left;c.x=c.x-h,i.openFrom(c);var d=e.getComplexFilter(n);d&&a.setState(d.state),setTimeout(function(){a.onShow&&a.onShow(u.content)},i.getAnimationTime()+10)}}});e.exports=o},{"./CellEditor":35}],40:[function(t,e,i){"use strict";var n=t("./CellEditor.js"),o=n.extend("Simple",{input:null,alias:"simple",initialize:function(){this.editorPoint={x:0,y:0}},specialKeyups:{9:"stopEditing",13:"stopEditing",27:"cancelEditing"},keyup:function(t){if(t){var e=this.specialKeyups[t.keyCode];e&&(t.preventDefault(),this[e](),this.grid.repaint(),this.grid.takeFocus()),this.grid.fireSyntheticEditorKeyUpEvent(this,t)}},initializeInput:function(t){var e=this;t.addEventListener("keyup",this.keyup.bind(this)),t.addEventListener("keydown",function(t){e.grid.fireSyntheticEditorKeyDownEvent(e,t)}),t.addEventListener("keypress",function(t){e.grid.fireSyntheticEditorKeyPressEvent(e,t)}),t.onblur=function(t){e.cancelEditing()},t.style.position="absolute",t.style.display="none",t.style.border="solid 2px black",t.style.outline=0,t.style.padding=0,t.style.boxShadow="white 0px 0px 1px 1px"},getEditorValue:function(){var t=this.getInput().value;return t},setEditorValue:function(t){this.getInput().value=t},clearStopEditing:function(){this.setEditorValue(""),this.stopEditing()},cancelEditing:function(){this.isEditing&&(this.getInput().value=null,this.isEditing=!1,this.hideEditor())},showEditor:function(){this.getInput().style.display="inline"},hideEditor:function(){this.getInput().style.display="none"},takeFocus:function(){var t=this;setTimeout(function(){var e=t.input.style.transform;t.input.style.transform="translate(0,0)",t.input.focus(),t.selectAll(),t.input.style.transform=e})},selectAll:function(){},originOffset:function(){return[0,0]},setBounds:function(t){var e=this.originOffset(),i="translate("+(t.x-1+e[0])+"px,"+(t.y-1+e[1])+"px)",n=this.getInput();n.style.boxSizing="border-box",n.style.webkitTransform=i,n.style.MozTransform=i,n.style.msTransform=i,n.style.OTransform=i,n.style.width=t.width+2+"px",n.style.height=t.height+2+"px"},saveEditorValue:function(){var t=this.getEditorPoint(),e=this.getEditorValue();if(e!==this.initialValue){parseFloat(this.initialValue)===this.initialValue&&(e=parseFloat(e));var i=this.grid.fireBeforeCellEdit(t,this.initialValue,e,this);i&&(this.grid.behavior.setValue(t.x,t.y,e),this.grid.fireAfterCellEdit(t,this.initialValue,e,this))}},_moveEditor:function(){var t=this.getEditorPoint(),e=this.grid._getBoundsOfCell(t.x,t.y),i=this.grid.div.getBoundingClientRect().left-this.grid.divCanvas.getBoundingClientRect().left;e.x=e.x-i,this.setBounds(e)},moveEditor:function(){this._moveEditor(),this.takeFocus()},beginEditAt:function(t){this.isAdded||(this.isAdded=!0,this.attachEditor()),this.setEditorPoint(t);var e=this.grid.behavior.getValue(t.x,t.y);"Array"===e.constructor.name&&(e=e[1]);var i=this.grid.fireRequestCellEdit(t,e);i&&(this.initialValue=e,this.isEditing=!0,this.setCheckEditorPositionFlag(),this.checkEditor())},checkEditor:function(){if(this.checkEditorPositionFlag&&(this.checkEditorPositionFlag=!1,this.isEditing)){var t=this.getEditorPoint();this.grid.isDataVisible(t.x,t.y)?(this.preShowEditorNotification(),this.attachEditor(),this.moveEditor(),this.showEditor()):this.hideEditor()}},attachEditor:function(){var t=this.getInput(),e=this.grid.div,i=e.querySelectorAll(".finbar-horizontal, .finbar-vertical");e.insertBefore(t,i.length?i[0]:null)},preShowEditorNotification:function(){this.setEditorValue(this.initialValue)},getInput:function(){return this.input||(this.input=this.getDefaultInput()),this.input},getDefaultInput:function(){var t=document.createElement("DIV");t.innerHTML=this.getHTML();var e=t.firstChild;return this.initializeInput(e),e},updateView:function(){var t=this.getInput(),e=t.parentNode,i=this.getDefaultInput();this.input=i,e.replaceChild(i,t)},showDropdown:function(t){var e;e=document.createEvent("MouseEvents"),e.initMouseEvent("mousedown",!0,!0,window),t.dispatchEvent(e)}});e.exports=o},{"./CellEditor.js":35}],41:[function(t,e,i){"use strict";var n=t("./Simple"),o=n.extend("Slider",{alias:"slider",template:function(){}});e.exports=o},{"./Simple":40}],42:[function(t,e,i){"use strict";var n=t("./Simple"),o=n.extend("Spinner",{alias:"spinner",template:function(){}});e.exports=o},{"./Simple":40}],43:[function(t,e,i){"use strict";function n(){this.saveEditorValue(),this._moveEditor()}var o=t("./Simple"),r=o.extend("Textfield",{alias:"textfield",template:function(){},selectAll:function(){this.input.setSelectionRange(0,this.input.value.length)},specialKeyups:{9:"stopEditing",13:"stopEditing",27:"cancelEditing"},keyup:function(t){t&&(o.prototype.keyup.call(this,t),this.grid.isFilterRow(this.getEditorPoint().y)&&setTimeout(n.bind(this)))}});e.exports=r},{"./Simple":40}],44:[function(t,e,i){"use strict";e.exports={CellEditor:t("./CellEditor"),Textfield:t("./Textfield"),Choice:t("./Choice"),Color:t("./Color"),Date:t("./Date"),Simple:t("./Simple"),Slider:t("./Slider"),Spinner:t("./Spinner"),Filter:t("./Filter")}},{"./CellEditor":35,"./Choice":36,"./Color":37,"./Date":38,"./Filter":39,"./Simple":40,"./Slider":41,"./Spinner":42,"./Textfield":43}],45:[function(t,e,i){"use strict";var n=t("../lib/Base"),o="A".charCodeAt(0),r=n.extend("DataModel",{next:null,grid:null,setGrid:function(t){this.grid=t},getGrid:function(){return this.deprecated("grid",{since:"0.2"})},getBehavior:function(){return this.deprecated("grid.behavior",{since:"0.2"})},changed:function(){this.grid.behavior.changed()},getPrivateState:function(){return this.grid.getPrivateState()},applyState:function(){},alphaFor:function(t){var e=Math.floor(t/26),i=t%26,n="";return e>0&&(n+=this.alpha(e-1)),n+=this.alpha(i)},alpha:function(t){return String.fromCharCode(o+t)},getCellEditorAt:function(t,e){}});e.exports=r},{"../lib/Base":66}],46:[function(t,e,i){"use strict";function n(t){return"function"==typeof t?t():t}function o(t){return t=t.toLowerCase(),function(e){return e=n(e),(e+"").toLowerCase().indexOf(t)>-1}}function r(){var t=this.selectedData,e=this.grid.selectionModel.hasRowSelections(),i=t.length||e;if(i)var n=this.getFilteredData();t.forEach(function(e,i){n.indexOf(e)>=0&&delete t[i]}),e&&this.grid.getSelectedRows().forEach(function(e){var i=n[e];t.indexOf(i)<0&&t.push(i)})}function s(){if(this.selectedData.length){var t=this.grid.selectionModel,e=this.grid.getHeaderRowCount(),i=this.getFilteredData();t.clearRowSelection(),this.selectedData.forEach(function(n){var o=i.indexOf(n);o>=0&&t.selectRow(e+o)})}}function l(){0===this.analytics.aggregates.length&&this.quietlySetAggregates({}),this.analytics.apply()}function a(){var t=this.getVisibleColumns();this.getGlobalFilterSource().apply(t);var e=[],i=this.getFilterSource(),n=0;i.clearAll(),t.forEach(function(t){var r=t.index,s=this.getFilter(r),l=t.getProperties().format,a=this.grid.getFormatter(l),u=this.getComplexFilter(r),c=u||s.length>0&&o(s);c&&(i.add(r-n,this.createFormattedFilter(a,c)),e.push({column:t.label,format:u?"complex":l}))}.bind(this)),i.applyAll(),this.grid.fireSyntheticFilterAppliedEvent({details:e})}function u(){var t=this.getSortingSource(),e=this.getPrivateState().sorts,i=this.hasAggregates()?1:0;if(e&&0!==e.length)for(var n=0;n<e.length;n++){var o=Math.abs(e[n])-1,r=e[n]<0?-1:1;t.sortOn(o-i,r)}else t.clearSorts();t.applySorts()}var c=t("../local_node_modules/finanalytics"),h=t("./DataModel"),d=t("../../images"),g="▲",f="▼",p={isNullObject:function(){return!0},getFields:function(){return[]},getHeaders:function(){return[]},getColumnCount:function(){return 0},getRowCount:function(){return 0},getAggregateTotals:function(){return[]},hasAggregates:function(){return!1},hasGroups:function(){return!1},getRow:function(){return null}},v=h.extend("dataModels.JSON",{source:p,preglobalfilter:p,prefilter:p,presorter:p,analytics:p,postglobalfilter:p,postfilter:p,postsorter:p,topTotals:[],bottomTotals:[],initialize:function(){this.selectedData=[]},clearSelectedData:function(){this.selectedData.length=0},hasAggregates:function(){return this.analytics.hasAggregates()},hasGroups:function(){return this.analytics.hasGroups()},getDataSource:function(){return this.postsorter},getFilterSource:function(){return this.postfilter},getGlobalFilterSource:function(){return this.postglobalfilter},getSortingSource:function(){return this.postsorter},getData:function(){return this.source.data},getFilteredData:function(){for(var t=this.getDataSource(),e=t.getRowCount(),i=new Array(e),n=0;e>n;n++)i[n]=t.getRow(n);return i},getValue:function(t,e){var i,n=this.hasHierarchyColumn(),o=this.grid.getHeaderRowCount();return n?-2===t&&(t=0):this.hasAggregates()&&(t+=1),i=o>e?this.getHeaderRowValue(t,e):this.getDataSource().getValue(t,e-o)},getHeaderRowValue:function(t,e){var i;if(void 0===e)i=this.getHeaders()[Math.max(t,0)];else if(0>e){var n=this.getBottomTotals();i=n[n.length+e][t]}else{var o=this.grid.isShowFilterRow(),r=this.grid.isShowHeaderRow(),s=(o?1:0)+(r?1:0);if(e>=s)i=this.getTopTotals()[e-s][t];else{if(!r||0!==e){i=this.getFilter(t);var l=d.filter(i.length);return[null,i,l]}i=this.getHeaders()[t];var a=this.getSortImageForColumn(t);a&&(i=a+i)}}return i},setValue:function(t,e,i){var n=this.hasHierarchyColumn(),o=this.grid.getHeaderRowCount();n?-2===t&&(t=0):this.hasAggregates()&&(t+=1),o>e?this.setHeaderRowValue(t,e,i):this.getDataSource().setValue(t,e-o,i),this.changed()},setHeaderRowValue:function(t,e,i){if(void 0===i)return this._setHeader(t,e);var n=this.grid.isShowFilterRow(),o=this.grid.isShowHeaderRow(),r=n&&o,s=(n?1:0)+(o?1:0);if(e>=s)this.getTopTotals()[e-s][t]=i;else{if(-1===t)return;if(r){if(0===e)return this._setHeader(t,i);this.setFilter(t,i)}else{if(!n)return this._setHeader(t,i);this.setFilter(t,i)}}return""},getColumnProperties:function(t){var e=this.grid.behavior.allColumns[t];return e?e.getProperties():void 0},getFilter:function(t){var e,i;return(i=this.getColumnProperties(t))&&(e=i.filter),e||""},getComplexFilter:function(t){var e,i,o,r,s;return(i=this.getColumnProperties(t))&&(o=i.complexFilter)&&(r=this.grid.filter)&&(s=r.create(o.state))&&(e=function(t){var e=n(t);return s(e)}),e},setFilter:function(t,e){var i=this.getColumnProperties(t);i.filter=e,this.applyAnalytics()},getColumnCount:function(){var t=this.grid.resolveProperty("showTreeColumn")===!0,e=this.hasAggregates(),i=e&&!t?-1:0;return this.analytics.getColumnCount()+i},getRowCount:function(){var t=this.getDataSource().getRowCount();return t+=this.grid.getHeaderRowCount()},getHeaders:function(){return this.analytics.getHeaders()},setHeaders:function(t){this.getDataSource().setHeaders(t)},setFields:function(t){this.getDataSource().setFields(t)},getFields:function(){return this.getDataSource().getFields()},setData:function(t){this.source=new c.JSDataSource(t),this.analytics=new c.DataSourceAggregator(this.source),this.postglobalfilter=new c.DataSourceGlobalFilter(this.analytics),this.postfilter=new c.DataSourceFilter(this.postglobalfilter),this.postsorter=new c.DataSourceSorterComposite(this.postfilter),this.applyAnalytics()},setTopTotals:function(t){this.topTotals=t},getTopTotals:function(){return this.hasAggregates()?this.getDataSource().getGrandTotals():this.topTotals},setBottomTotals:function(t){this.bottomTotals=t},getBottomTotals:function(){return this.hasAggregates()?this.getDataSource().getGrandTotals():this.bottomTotals},setGroups:function(t){this.analytics.setGroupBys(t),this.applyAnalytics(),this.grid.fireSyntheticGroupsChangedEvent(this.getGroups())},getGroups:function(){for(var t=this.getHeaders().slice(0),e=this.getFields().slice(0),i=this.analytics.groupBys,n=[],o=0;o<i.length;o++){var r=t[i[o]];n.push({id:i[o],label:r,field:e})}return n},getAvailableGroups:function(){for(var t=this.source.getHeaders().slice(0),e=this.analytics.groupBys,i=[],n=0;n<t.length;n++)if(-1===e.indexOf(n)){var o=t[n];i.push({id:n,label:o,field:o})}return i},getVisibleColumns:function(){var t=this.grid.behavior.columns;return t=t.filter(function(t){return"Tree"!==t.label})},getHiddenColumns:function(){for(var t=this.grid.behavior.columns,e=this.grid.behavior.allColumns,i=[],n=0;n<e.length;n++)-1===t.indexOf(e[n])&&i.push(e[n]);return i.sort(function(t,e){return t.label<e.label}),i},setAggregates:function(t){this.quietlySetAggregates(t),this.applyAnalytics()},quietlySetAggregates:function(t){this.analytics.setAggregates(t)},hasHierarchyColumn:function(){var t=this.grid.resolveProperty("showTreeColumn")===!0;return this.hasAggregates()&&this.hasGroups()&&t},applyAnalytics:function(t){r.call(this),t||l.call(this),a.call(this),u.call(this),s.call(this)},createFormattedFilter:function(t,e){return function(i){var n=t(i);return e(n)}},toggleSort:function(t,e){this.incrementSortState(t,e),this.applyAnalytics()},incrementSortState:function(t,e){t++;var i=this.getPrivateState(),n=e.indexOf("CTRL")>-1;i.sorts=i.sorts||[];var o=i.sorts.indexOf(t);-1===o&&(o=i.sorts.indexOf(-1*t)),o>-1?i.sorts[o]>0?i.sorts[o]=-1*i.sorts[o]:i.sorts.splice(o,1):n||0===i.sorts.length?i.sorts.unshift(t):(i.sorts.length=0,i.sorts.unshift(t)),i.sorts.length>3&&(i.sorts.length=3)},getSortImageForColumn:function(t){t++;var e=!0,i=this.getPrivateState().sorts;if(!i)return null;var n=i.indexOf(t);if(0>n&&(n=i.indexOf(-1*t),e=!1),0>n)return null;var o=i.length-n,r=e?g:f;return o+r+" "},cellClicked:function(t,e){if(this.hasAggregates()&&0===e.gridCell.x){var i=this.grid.getHeaderRowCount(),n=e.gridCell.y-i;this.getDataSource().click(n),this.applyAnalytics(!0),this.changed()}},getRow:function(t){var e=this.grid.getHeaderRowCount();if(e>t&&!this.hasAggregates()){var i=this.getTopTotals();return i[t-(e-i.length)]}return this.getDataSource().getRow(t-e)},buildRow:function(t){var e=this.getColumnCount(),i=[].concat(this.getFields()),n={};this.hasAggregates()&&(n.tree=this.getValue(-2,t),i.shift());for(var o=0;e>o;o++)n[i[o]]=this.getValue(o,t);return n},getComputedRow:function(t){for(var e=this.getRowContextFunction([t]),i=this.getFields(),n={},o=0;o<i.length;o++){var r=i[o];n[r]=e(r)[0]}return n},getValueByField:function(t,e){var i=this.getFields().indexOf(t);return this.hasAggregates()&&(e+=1),this.getDataSource().getValue(i,e)},setGlobalFilter:function(t){var e=this.getGlobalFilterSource();t&&0!==t.length?e.set(o(t)):e.clear(),this.applyAnalytics()},getCellRenderer:function(t,e,i,n,o){var r,s=this.grid.getCellProvider();return t.x=e,t.y=i,t.untranslatedX=n,t.untranslatedY=o,r=s.getCell(t),r.config=t,r},applyState:function(){this.applyAnalytics()},reset:function(){this.setData([])},getUnfilteredValue:function(t,e){return this.source.getValue(t,e)},getUnfilteredRowCount:function(){return this.source.getRowCount()}});e.exports=v},{"../../images":3,"../local_node_modules/finanalytics":90,"./DataModel":45}],47:[function(t,e,i){"use strict";function n(t,e){if(null===e||void 0===e)return 0;if(e+="",0===e.length)return 0;var i=t.font+e,n=l.get(i);return n||(n=t.measureText(e).width,l.set(i,n)),n}function o(t){var e=a[t];if(!e){e={};var i=document.createElement("span");i.textContent="Hg",i.style.font=t;var n=document.createElement("div");n.style.display="inline-block",n.style.width="1px",n.style.height="0px";var o=document.createElement("div");o.appendChild(i),o.appendChild(n),o.style.position="absolute",document.body.appendChild(o);try{n.style.verticalAlign="baseline";var r=n.getBoundingClientRect(),s=i.getBoundingClientRect();e.ascent=r.top-s.top,n.style.verticalAlign="bottom",e.height=r.top-s.top,e.descent=e.height-e.ascent}finally{document.body.removeChild(o)}0!==e.height&&(a[t]=e)}return e}var r=t("lru-cache"),s=t("./lib/renderCellError");e.exports={font:"13px Tahoma, Geneva, sans-serif",color:"rgb(25, 25, 25)",backgroundColor:"rgb(241, 241, 241)",foregroundSelectionColor:"black",backgroundSelectionColor:"rgba(147, 185, 255, 0.45)",columnHeaderFont:"12px Tahoma, Geneva, sans-serif",columnHeaderColor:"rgb(25, 25, 25)",columnHeaderBackgroundColor:"rgb(223, 227, 232)",columnHeaderForegroundSelectionColor:"rgb(25, 25, 25)",columnHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",columnHeaderForegroundColumnSelectionColor:"rgb(25, 25, 25)",columnHeaderBackgroundColumnSelectionColor:"rgb(255, 180, 0)",rowHeaderFont:"12px Tahoma, Geneva, sans-serif",rowHeaderColor:"rgb(25, 25, 25)",rowHeaderBackgroundColor:"rgb(223, 227, 232)",rowHeaderForegroundSelectionColor:"rgb(25, 25, 25)",rowHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",rowHeaderForegroundRowSelectionColor:"rgb(25, 25, 25)",rowHeaderBackgroundRowSelectionColor:"rgb(255, 180, 0)",filterFont:"12px Tahoma, Geneva, sans-serif",filterColor:"rgb(25, 25, 25)",filterBackgroundColor:"white",filterForegroundSelectionColor:"rgb(25, 25, 25)",filterBackgroundSelectionColor:"rgb(255, 220, 97)",filterCellBorderStyle:"rgba(0,0,0,0.8)",filterCellBorderThickness:.4,treeColumnFont:"12px Tahoma, Geneva, sans-serif",treeColumnColor:"rgb(25, 25, 25)",treeColumnBackgroundColor:"rgb(223, 227, 232)",treeColumnForegroundSelectionColor:"rgb(25, 25, 25)",treeColumnBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",treeColumnForegroundColumnSelectionColor:"rgb(25, 25, 25)",treeColumnBackgroundColumnSelectionColor:"rgb(255, 180, 0)",
backgroundColor2:"rgb(201, 201, 201)",voffset:0,scrollbarHoverOver:"visible",scrollbarHoverOff:"hidden",scrollingEnabled:!0,vScrollbarClassPrefix:"",hScrollbarClassPrefix:"",fixedRowAlign:"center",fixedColAlign:"center",cellPadding:5,gridLinesH:!0,gridLinesV:!0,lineColor:"rgb(199, 199, 199)",lineWidth:.4,defaultRowHeight:15,defaultColumnWidth:100,repaintIntervalRate:60,repaintImmediately:!1,useBitBlit:!1,useHiDPI:!0,editorActivationKeys:["alt","esc"],readOnly:!1,getTextWidth:n,getTextHeight:o,fixedColumnCount:0,fixedRowCount:0,headerColumnCount:0,showRowNumbers:!0,showTreeColumn:!0,showHeaderRow:!0,showFilterRow:!0,cellSelection:!0,columnSelection:!0,rowSelection:!0,singleRowSelectionMode:!0,selectionRegionOverlayColor:"rgba(0, 0, 0, 0.2)",selectionRegionOutlineColor:"black",columnAutosizing:!0,rowNumberAutosizing:!0,headerTextWrapping:!1,rowResize:!1,editable:!0,editOnDoubleClick:!0,doubleClickDelay:325,editOnKeydown:!0,renderCellError:s,checkboxOnlyRowSelections:!1,format:"default",hoverCellHighlight:{enabled:!0,backgroundColor:"rgba(160, 160, 40, 0.45)"},hoverRowHighlight:{enabled:!0,backgroundColor:"rgba(100, 100, 25, 0.30)"},hoverColumnHighlight:{enabled:!0,backgroundColor:"rgba(60, 60, 15, 0.15)"},link:!1,strikeThrough:!1};var l=new r(2e3),a={}},{"./lib/renderCellError":75,"lru-cache":19}],48:[function(t,e,i){"use strict";t("object-iterators");var n=t("./Hypergrid");n.images=t("../images"),n.behaviors=t("./behaviors"),n.cellEditors=t("./cellEditors"),n.features=t("./features"),(window.fin=window.fin||{}).Hypergrid=n},{"../images":3,"./Hypergrid":27,"./behaviors":34,"./cellEditors":44,"./features":65,"object-iterators":21}],49:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("CellClick",{alias:"CellClick",handleTap:function(t,e){e.gridCell.y>=t.behavior.getHeaderRowCount()&&e.gridCell.x>=t.behavior.getHeaderColumnCount()?t.cellClicked(e):this.next&&this.next.handleTap(t,e)}});e.exports=o},{"./Feature.js":58}],50:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("CellEditing",{alias:"CellEditing",handleDoubleClick:function(t,e){var i=t.resolveProperty("editOnDoubleClick");this.checkActivateEditor(t,e,i)?t._activateEditor(e):this.next&&this.next.handleDoubleClick(t,e)},handleTap:function(t,e){var i=t.resolveProperty("editOnDoubleClick");this.checkActivateEditor(t,e,!i)?t._activateEditor(e):this.next&&this.next.handleTap(t,e)},handleHoldPulse:function(t,e){var i=t.resolveProperty("editOnDoubleClick");this.checkActivateEditor(t,e,!i)?t._activateEditor(e):this.next&&this.next.handleHoldPulse(t,e)},checkActivateEditor:function(t,e,i){var n=t.behavior.getHeaderRowCount(),o=t.behavior.getHeaderColumnCount(),r=e.gridCell,s=t.isFilterRow(r.y),l=i&&r.x>=o&&(s||r.y>=n);return l}});e.exports=o},{"./Feature.js":58}],51:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("CellSelection",{alias:"CellSelection",currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,handleMouseUp:function(t,e){this.dragging&&(this.dragging=!1),this.next&&this.next.handleMouseUp(t,e)},handleMouseDown:function(t,e){var i=e.primitiveEvent.detail.isRightClick,n=e.gridCell,o=e.viewPoint,r=n.x,s=n.y,l=t.behavior.getHeaderRowCount(),a=t.behavior.getHeaderColumnCount(),u=t.behavior.getColumnCount(),c=o.x>=u,h=l>s||a>r;if(!t.isCellSelection()||i||h||c)this.next&&this.next.handleMouseDown(t,e);else{var d=t.getFixedColumnCount(),g=t.getFixedRowCount();o.x<d&&(r=o.x),o.y<g&&(s=o.y);var f=t.newPoint(r,s),p=e.primitiveEvent,v=p.detail.keys;this.dragging=!0,this.extendSelection(t,f,v)}},handleMouseDrag:function(t,e){var i=e.primitiveEvent.detail.isRightClick;if(t.isCellSelection()&&!i&&this.dragging){var n=t.getFixedColumnCount(),o=t.getFixedRowCount(),r=e.gridCell,s=e.viewPoint,l=r.x,a=r.y;s.x<n&&(l=s.x),s.y<o&&(a=s.y);var u=t.newPoint(l,a),c=e.primitiveEvent;this.currentDrag=c.detail.mouse,this.lastDragCell=u,this.checkDragScroll(t,this.currentDrag),this.handleMouseDragCellSelection(t,u,c.detail.keys)}else this.next&&this.next.handleMouseDrag(t,e)},handleKeyDown:function(t,e){var i="handle"+e.detail["char"];this[i]&&this[i].call(this,t,e.detail)},handleMouseDragCellSelection:function(t,e,i){var n=t.behavior.getHeaderRowCount(),o=t.behavior.getHeaderColumnCount(),r=e.x,s=e.y;r=Math.max(o,r),s=Math.max(n,s);var l=t.getDragExtent(),a=t.getMouseDown(),u=r-a.x,c=s-a.y;(l.x!==u||l.y!==c)&&(t.clearMostRecentSelection(),t.select(a.x,a.y,u,c),t.setDragExtent(t.newPoint(u,c)),t.repaint())},checkDragScroll:function(t,e){if(t.resolveProperty("scrollingEnabled")){var i=t.getDataBounds(),n=i.contains(e);n?t.isScrollingNow()&&t.setScrollingNow(!1):t.isScrollingNow()||(t.setScrollingNow(!0),this.scrollDrag(t))}},scrollDrag:function(t){if(t.isScrollingNow()){var e=t.isMouseDownInHeaderArea(),i=this.lastDragCell,n=t.getDataBounds(),o=0,r=0,s=t.getFixedColumnCount(),l=t.getFixedRowCount(),a=i.x<s,u=i.y<l;e||(this.currentDrag.x<n.origin.x&&(o=-1),this.currentDrag.y<n.origin.y&&(r=-1)),this.currentDrag.x>n.origin.x+n.extent.x&&(o=1),this.currentDrag.y>n.origin.y+n.extent.y&&(r=1);var c=o,h=r;a&&(c=0),u&&(h=0),this.lastDragCell=i.plusXY(c,h),t.scrollBy(o,r),this.handleMouseDragCellSelection(t,i,[]),t.repaint(),setTimeout(this.scrollDrag.bind(this,t),25)}},extendSelection:function(t,e,i){var n=i.indexOf("CTRL")>=0,o=i.indexOf("SHIFT")>=0,r=t.getMouseDown(),s=e.x,l=e.y;if(!(0>s||0>l)){if(n&&s===r.x&&l===r.y)return t.clearMostRecentSelection(),t.popMouseDown(),void t.repaint();n||o||t.clearSelections(),o?(t.clearMostRecentSelection(),t.select(r.x,r.y,s-r.x+1,l-r.y+1),t.setDragExtent(t.newPoint(s-r.x+1,l-r.y))):(t.select(s,l,0,0),t.setMouseDown(t.newPoint(s,l)),t.setDragExtent(t.newPoint(0,0))),t.repaint()}},handleDOWNSHIFT:function(t){this.moveShiftSelect(t,0,1)},handleUPSHIFT:function(t){this.moveShiftSelect(t,0,-1)},handleLEFTSHIFT:function(t){this.moveShiftSelect(t,-1,0)},handleRIGHTSHIFT:function(t){this.moveShiftSelect(t,1,0)},handleDOWN:function(t,e){e.primitiveEvent.preventDefault();var i=this.getAutoScrollAcceleration();this.moveSingleSelect(t,0,i)},handleUP:function(t,e){e.primitiveEvent.preventDefault();var i=this.getAutoScrollAcceleration();this.moveSingleSelect(t,0,-i)},handleLEFT:function(t){this.moveSingleSelect(t,-1,0)},handleRIGHT:function(t){this.moveSingleSelect(t,1,0)},getAutoScrollAcceleration:function(){var t=1,e=this.getAutoScrollDuration()/2e3;return t=Math.max(1,Math.floor(e*e*e*e))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){var t=Date.now();t-this.sbLastAuto>500&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return Date.now()-this.sbLastAuto>500?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(t,e,i){var n=t.getColumnCount()-1,o=t.getRowCount()-1,r=t.getVisibleColumns()-1,s=t.getVisibleRows()-1;t.resolveProperty("scrollingEnabled")||(n=Math.min(n,r),o=Math.min(o,s));var l=t.getMouseDown(),a=t.getDragExtent(),u=a.x+e,c=a.y+i;u=Math.min(n-l.x,Math.max(-l.x,u)),c=Math.min(o-l.y,Math.max(-l.y,c)),t.clearMostRecentSelection(),t.select(l.x,l.y,u,c),t.setDragExtent(t.newPoint(u,c)),t.insureModelColIsVisible(u+l.x,e)&&this.pingAutoScroll(),t.insureModelRowIsVisible(c+l.y,i)&&this.pingAutoScroll(),t.repaint()},moveSingleSelect:function(t,e,i){var n=t.getColumnCount()-1,o=t.getRowCount()-1,r=t.getVisibleColumnsCount()-1,s=t.getVisibleRowsCount()-1,l=t.getHeaderRowCount(),a=t.getHeaderColumnCount();t.resolveProperty("scrollingEnabled")||(n=Math.min(n,r),o=Math.min(o,s));var u=t.getMouseDown().plus(t.getDragExtent()),c=u.x+e,h=u.y+i;c=Math.min(n,Math.max(a,c)),h=Math.min(o,Math.max(l,h)),t.clearSelections(),t.select(c,h,0,0),t.setMouseDown(t.newPoint(c,h)),t.setDragExtent(t.newPoint(0,0)),t.insureModelColIsVisible(c,e)&&this.pingAutoScroll(),t.insureModelRowIsVisible(h,i)&&this.pingAutoScroll(),t.repaint()}});e.exports=o},{"./Feature.js":58}],52:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("ColumnAutosizing",{alias:"ColumnAutosizing",handleDoubleClick:function(t,e){var i=t.getHeaderRowCount(),n=e.gridCell;n.y<=i?t.autosizeColumn(n.x):this.next&&this.next.handleDoubleClick(t,e)}});e.exports=o},{"./Feature.js":58}],53:[function(t,e,i){"use strict";var n,o,r,s,l=t("./Feature.js"),a=150,u=l.extend("ColumnMoving",{alias:"ColumnMoving",floaterAnimationQueue:[],columnDragAutoScrollingRight:!1,columnDragAutoScrollingLeft:!1,dragArmed:!1,dragging:!1,dragCol:-1,dragOffset:0,initializeOn:function(t){this.isFloatingNow=!1,this.initializeAnimationSupport(t),this.next&&this.next.initializeOn(t)},initializeAnimationSupport:function(t){n||(n=document.createElement("canvas"),n.setAttribute("width","0px"),n.setAttribute("height","0px"),document.body.appendChild(n),o=n.getContext("2d")),r||(r=document.createElement("canvas"),r.setAttribute("width","0px"),r.setAttribute("height","0px"),document.body.appendChild(r),s=r.getContext("2d"))},getCanDragCursorName:function(){return"-webkit-grab"},getDraggingCursorName:function(){return"-webkit-grabbing"},handleMouseDrag:function(t,e){var i,n=e.gridCell,o=Math.abs(e.primitiveEvent.detail.dragstart.x-e.primitiveEvent.detail.mouse.x);return 10>o?void(this.next&&this.next.handleMouseDrag(t,e)):(this.isHeaderRow(t,e)&&this.dragArmed&&!this.dragging?(this.dragging=!0,this.dragCol=n.x,this.dragOffset=e.mousePoint.x,this.detachChain(),i=e.primitiveEvent.detail.mouse.x-this.dragOffset,this.createDragColumn(t,i,this.dragCol)):this.next&&this.next.handleMouseDrag(t,e),void(this.dragging&&(i=e.primitiveEvent.detail.mouse.x-this.dragOffset,this.dragColumn(t,i))))},handleMouseDown:function(t,e){t.behavior.isColumnReorderable()&&this.isHeaderRow(t,e)&&-1!==e.gridCell.x&&(this.dragArmed=!0,this.cursor=this.getDraggingCursorName(),t.clearSelections()),this.next&&this.next.handleMouseDown(t,e)},handleMouseUp:function(t,e){if(this.dragging){this.cursor=null;var i=this;this.endDragColumn(t),setTimeout(function(){i.attachChain()},200)}this.dragCol=-1,this.dragging=!1,this.dragArmed=!1,this.cursor=null,t.repaint(),this.next&&this.next.handleMouseUp(t,e)},handleMouseMove:function(t,e){!this.dragging&&e.mousePoint.y<5&&0===e.viewPoint.y?this.cursor=this.getCanDragCursorName():this.cursor=null,this.next&&this.next.handleMouseMove(t,e),this.isHeaderRow(t,e)&&this.dragging&&(this.cursor=this.getDraggingCursorName())},floatColumnTo:function(t,e){this.floatingNow=!0;var i,n,o=t.getRenderer(),r=o.getColumnEdges(),s=t.getHScrollValue(),l=t.renderOverridesCache.floater.columnIndex,a=t.renderOverridesCache.dragger.columnIndex,u=t.renderOverridesCache.dragger.hdpiratio,c=t.getFixedColumnCount(),h=t.getColumnWidth(a),d=t.getColumnWidth(l),g=t.getVisibleColumnsCount(),f=0,p=0;a>=c&&(f=s),l>=c&&(p=s),e?(i=r[Math.min(g,a-f)],n=r[Math.min(g,l-p)],t.renderOverridesCache.dragger.startX=(i+d)*u,t.renderOverridesCache.floater.startX=i*u):(n=r[Math.min(g,l-p)],i=n+h,t.renderOverridesCache.dragger.startX=n*u,t.renderOverridesCache.floater.startX=i*u),t.swapColumns(a,l),t.renderOverridesCache.dragger.columnIndex=l,t.renderOverridesCache.floater.columnIndex=a,this.floaterAnimationQueue.unshift(this.doColumnMoveAnimation(t,n,i)),this.doFloaterAnimation(t)},doColumnMoveAnimation:function(t,e,i){var n=this;return function(){var o=r;o.style.display="inline",n.setCrossBrowserProperty(o,"transform","translate("+e+"px, 0px)"),requestAnimationFrame(function(){n.setCrossBrowserProperty(o,"transition",(n.isWebkit?"-webkit-":"")+"transform "+a+"ms ease"),n.setCrossBrowserProperty(o,"transform","translate("+i+"px, -2px)")}),t.repaint(),setTimeout(function(){n.setCrossBrowserProperty(o,"transition",""),t.renderOverridesCache.floater=null,t.repaint(),n.doFloaterAnimation(t),requestAnimationFrame(function(){o.style.display="none",n.isFloatingNow=!1})},a+50)}},doFloaterAnimation:function(t){if(0===this.floaterAnimationQueue.length)return this.floatingNow=!1,void t.repaint();var e=this.floaterAnimationQueue.pop();e()},createFloatColumn:function(t,e){var i=t.getFixedColumnCount(),n=t.getHScrollValue();i>e&&(n=0);var o=t.getRenderer(),l=o.getColumnEdges(),a=t.getColumnWidth(e),u=t.div.clientHeight,c=r,h=c.style,d=t.div.getBoundingClientRect();h.top=d.top-2+"px",h.left=d.left+"px",h.position="fixed";var g=t.getHiDPI(s);c.setAttribute("width",Math.round(a*g)+"px"),c.setAttribute("height",Math.round(u*g)+"px"),h.boxShadow="0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)",h.width=a+"px",h.height=u+"px",h.borderTop="1px solid "+o.resolveProperty("lineColor"),h.backgroundColor=o.resolveProperty("backgroundColor");var f=l[e-n];f*=g,s.scale(g,g),t.renderOverridesCache.floater={columnIndex:e,ctx:s,startX:f,width:a,height:u,hdpiratio:g},h.zIndex="4",this.setCrossBrowserProperty(c,"transform","translate("+f+"px, -2px)"),h.cursor=this.getDraggingCursorName(),t.repaint()},setCrossBrowserProperty:function(t,e,i){var n=e[0].toUpperCase()+e.substr(1);this.setProp(t,"webkit"+n,i),this.setProp(t,"Moz"+n,i),this.setProp(t,"ms"+n,i),this.setProp(t,"O"+n,i),this.setProp(t,e,i)},setProp:function(t,e,i){e in t.style&&(t.style[e]=i)},createDragColumn:function(t,e,i){var r=t.getFixedColumnCount(),s=t.getHScrollValue();r>i&&(s=0);var l=t.getRenderer(),a=l.getColumnEdges(),u=t.getHiDPI(o),c=t.getColumnWidth(i),h=t.div.clientHeight,d=n,g=t.div.getBoundingClientRect(),f=d.style;f.top=g.top+"px",f.left=g.left+"px",f.position="fixed",f.opacity=.85,f.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)",f.borderTop="1px solid "+l.resolveProperty("lineColor"),f.backgroundColor=t.renderer.resolveProperty("backgroundColor"),d.setAttribute("width",Math.round(c*u)+"px"),d.setAttribute("height",Math.round(h*u)+"px"),f.width=c+"px",f.height=h+"px";var p=a[i-s];p*=u,o.scale(u,u),t.renderOverridesCache.dragger={columnIndex:i,ctx:o,startX:p,width:c,height:h,hdpiratio:u},this.setCrossBrowserProperty(d,"transform","translate("+e+"px, -5px)"),f.zIndex="5",f.cursor=this.getDraggingCursorName(),t.repaint()},dragColumn:function(t,e){var i=this,r=this.columnDragAutoScrollingRight||this.columnDragAutoScrollingLeft,s=t.getHiDPI(o),l=t.renderOverridesCache.dragger.columnIndex,u=t.renderOverridesCache.dragger.width,c=0,h=t.renderer.getFinalVisableColumnBoundary()-u;e=Math.min(e,h+15),e=Math.max(c-15,e);var d=c>e&&0!==l,g=e>h,f=n;this.setCrossBrowserProperty(f,"transition",(i.isWebkit?"-webkit-":"")+"transform 0ms ease, box-shadow "+a+"ms ease"),this.setCrossBrowserProperty(f,"transform","translate("+e+"px, -10px)"),requestAnimationFrame(function(){f.style.display="inline"});var p=t.renderer.getColumnFromPixelX(e+f.width/2/s);d&&(p=0),g&&(p=t.getColumnCount()-1);var v=l>p;if(v=v||p-l>=1,!v||g||r){if(c-10>e&&this.checkAutoScrollToLeft(t,e),e>c-10&&(this.columnDragAutoScrollingLeft=!1),g||e>h+10)return void this.checkAutoScrollToRight(t,e);h+10>e&&(this.columnDragAutoScrollingRight=!1)}else{var m=p>l;if(this.isFloatingNow)return;this.isFloatingNow=!0,this.createFloatColumn(t,p),this.floatColumnTo(t,m)}},checkAutoScrollToRight:function(t,e){this.columnDragAutoScrollingRight||(this.columnDragAutoScrollingRight=!0,this._checkAutoScrollToRight(t,e))},_checkAutoScrollToRight:function(t,e){if(this.columnDragAutoScrollingRight){var i=t.getHScrollValue();if(t.dragging&&!(i>t.sbHScrollConfig.rangeStop-2)){var n=t.renderOverridesCache.dragger.columnIndex;t.scrollBy(1,0);var o=n+1;console.log(o,n),t.swapColumns(o,n),t.renderOverridesCache.dragger.columnIndex=o,setTimeout(this._checkAutoScrollToRight.bind(this,t,e),250)}}},checkAutoScrollToLeft:function(t,e){this.columnDragAutoScrollingLeft||(this.columnDragAutoScrollingLeft=!0,this._checkAutoScrollToLeft(t,e))},_checkAutoScrollToLeft:function(t,e){if(this.columnDragAutoScrollingLeft){var i=t.getHScrollValue();if(t.dragging&&!(1>i)){var n=t.renderOverridesCache.dragger.columnIndex;t.swapColumns(n+i,n+i-1),t.scrollBy(-1,0),setTimeout(this._checkAutoScrollToLeft.bind(this,t,e),250)}}},endDragColumn:function(t){var e=t.getFixedColumnCount(),i=t.getHScrollValue(),o=t.renderOverridesCache.dragger.columnIndex;e>o&&(i=0);var r=t.getRenderer(),s=r.getColumnEdges(),l=this,u=s[o-i],c=n;l.setCrossBrowserProperty(c,"transition",(l.isWebkit?"-webkit-":"")+"transform "+a+"ms ease, box-shadow "+a+"ms ease"),l.setCrossBrowserProperty(c,"transform","translate("+u+"px, -1px)"),c.style.boxShadow="0px 0px 0px #888888",setTimeout(function(){t.renderOverridesCache.dragger=null,t.repaint(),requestAnimationFrame(function(){c.style.display="none",t.endDragColumnNotification()})},a+50)},isHeaderRow:function(t,e){var i=e.viewPoint,n=0===i.y;return n}});e.exports=u},{"./Feature.js":58}],54:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("ColumnPicker",{alias:"ColumnPicker",handleKeyUp:function(t,e){var i=e.detail["char"].toLowerCase(),n=t.resolveProperty("editorActivationKeys");n.indexOf(i)>-1&&t.toggleColumnPicker()}});e.exports=o},{"./Feature.js":58}],55:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("ColumnResizing",{alias:"ColumnResizing",dragIndex:-2,dragStart:-1,dragIndexStartingSize:-1,getMouseValue:function(t){return t.primitiveEvent.detail.mouse.x},getGridCellValue:function(t){return t.y},getScrollValue:function(t){return t.getHScrollValue()},getAreaSize:function(t,e){return t.getColumnWidth(e)},setAreaSize:function(t,e,i){t.setColumnWidth(e,i)},getPreviousAbsoluteSize:function(t,e){return t.getRenderedWidth(e)},overAreaDivider:function(t,e){return t.overColumnDivider(e)},isFirstFixedOtherArea:function(t,e){return this.isFirstFixedRow(t,e)},getCursorName:function(){return"col-resize"},handleMouseDrag:function(t,e){if(this.dragIndex>-2){var i=this.getMouseValue(e),n=this.getScrollValue(t);this.dragIndex<this.getFixedAreaCount(t)&&(n=0);var o=this.getPreviousAbsoluteSize(t,this.dragIndex-n),r=i-o;this.setAreaSize(t,this.dragIndex,r)}else this.next&&this.next.handleMouseDrag(t,e)},getSize:function(t,e){return this.getAreaSize(t,e)},getOtherFixedAreaCount:function(t){return t.getFixedRowCount()},handleMouseDown:function(t,e){var i=this.isEnabled(t),n=this.overAreaDivider(t,e);if(i&&n>-1&&this.isFirstFixedOtherArea(t,e)){var o=this.getScrollValue(t);n<this.getFixedAreaCount(t)&&(o=0),this.dragIndex=n-1+o,this.dragStart=this.getMouseValue(e),this.dragIndexStartingSize=0,this.detachChain()}else this.next&&this.next.handleMouseDown(t,e)},handleMouseUp:function(t,e){var i=this.isEnabled(t);if(i&&this.dragIndex>-2){this.cursor=null,this.dragIndex=-2,e.primitiveEvent.stopPropagation();var n=this;t.synchronizeScrollingBoundries(),setTimeout(function(){n.attachChain()},200)}else this.next&&this.next.handleMouseUp(t,e)},handleMouseMove:function(t,e){this.dragIndex>-2||(this.cursor=null,this.next&&this.next.handleMouseMove(t,e),this.checkForAreaResizeCursorChange(t,e))},checkForAreaResizeCursorChange:function(t,e){var i=this.isEnabled(t);i&&this.overAreaDivider(t,e)>-1&&this.isFirstFixedOtherArea(t,e)?this.cursor=this.getCursorName():this.cursor=null},getFixedAreaCount:function(t){var e=t.getFixedColumnCount()+(t.isShowRowNumbers()?1:0)+(t.hasHierarchyColumn()?1:0);return e},handleDoubleClick:function(t,e){var i=this.isEnabled(t),n=this.overAreaDivider(t,e)>-1,o=t.getHeaderRowCount(),r=e.gridCell;i&&n&&r.y<=o?t.autosizeColumn(r.x-1):this.next&&this.next.handleDoubleClick(t,e)},isEnabled:function(t){return!0}});e.exports=o},{"./Feature.js":58}],56:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=50,r=n.extend("ColumnSelection",{alias:"ColumnSelection",currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,handleMouseUp:function(t,e){this.dragging&&(this.dragging=!1),this.next&&this.next.handleMouseUp(t,e)},handleDoubleClick:function(t,e){this.doubleClickTimer&&(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=void 0),this.next&&this.next.handleDoubleClick(t,e)},handleMouseDown:function(t,e){if(!this.doubleClickTimer){if((!t.isColumnSelection()||e.mousePoint.y<5)&&this.next)return void this.next.handleMouseDown(t,e);var i=e.primitiveEvent.detail.isRightClick,n=e.gridCell,r=e.viewPoint,s=n.x,l=n.y,a=t.isShowHeaderRow()&&0===l&&-1!==s;i||!a?this.next&&this.next.handleMouseDown(t,e):this.doubleClickTimer=setTimeout(function(){this.doubleClickTimer=void 0;var i=t.getFixedColumnCount();r.x<i&&(s=r.x);var n=t.newPoint(s,0),o=e.primitiveEvent,l=o.detail.keys;this.dragging=!0,this.extendSelection(t,n,l)}.bind(this),t.resolveProperty("doubleClickDelay")+o)}},handleMouseDrag:function(t,e){if((!t.isColumnSelection()||this.isColumnDragging(t))&&this.next)return void this.next.handleMouseDrag(t,e);var i=e.primitiveEvent.detail.isRightClick;if(i||!this.dragging)this.next&&this.next.handleMouseDrag(t,e);else{var n=t.getFixedColumnCount(),o=e.gridCell,r=e.viewPoint,s=o.x,l=o.y;r.x<n&&(s=r.x);var a=t.newPoint(s,l),u=e.primitiveEvent;this.currentDrag=u.detail.mouse,this.lastDragCell=a,this.checkDragScroll(t,this.currentDrag),this.handleMouseDragCellSelection(t,a,u.detail.keys)}},handleKeyDown:function(t,e){if("column"!==t.getLastSelectionType())return void(this.next&&this.next.handleKeyDown(t,e));var i="handle"+e.detail["char"];this[i]&&this[i].call(this,t,e.detail)},handleMouseDragCellSelection:function(t,e,i){var n=e.x,o=t.getMouseDown(),r=n-o.x;t.clearMostRecentColumnSelection(),t.selectColumn(o.x,n),t.setDragExtent(t.newPoint(r,0)),t.repaint()},checkDragScroll:function(t,e){if(t.resolveProperty("scrollingEnabled")){var i=t.getDataBounds(),n=i.contains(e);n?t.isScrollingNow()&&t.setScrollingNow(!1):t.isScrollingNow()||(t.setScrollingNow(!0),this.scrollDrag(t))}},scrollDrag:function(t){if(t.isScrollingNow()){var e=this.lastDragCell,i=t.getDataBounds(),n=0,o=0,r=t.getFixedColumnCount(),s=t.getFixedRowCount(),l=e.x<r,a=e.y<s;this.currentDrag.x<i.origin.x&&(n=-1),this.currentDrag.x>i.origin.x+i.extent.x&&(n=1);var u=n,c=o;l&&(u=0),a&&(c=0),this.lastDragCell=e.plusXY(u,c),t.scrollBy(n,o),this.handleMouseDragCellSelection(t,e,[]),t.repaint(),setTimeout(this.scrollDrag.bind(this,t),25)}},extendSelection:function(t,e,i){t.stopEditing();var n=-1!==i.indexOf("SHIFT"),o=t.getMouseDown(),r=e.x,s=e.y;0>r||0>s||(n?(t.clearMostRecentColumnSelection(),t.selectColumn(r,o.x),t.setDragExtent(t.newPoint(r-o.x,0))):(t.toggleSelectColumn(r,i),t.setMouseDown(t.newPoint(r,s)),t.setDragExtent(t.newPoint(0,0))),t.repaint())},handleDOWNSHIFT:function(t){},handleUPSHIFT:function(t){},handleLEFTSHIFT:function(t){this.moveShiftSelect(t,-1)},handleRIGHTSHIFT:function(t){this.moveShiftSelect(t,1)},handleDOWN:function(t){},handleUP:function(t){},handleLEFT:function(t){this.moveSingleSelect(t,-1)},handleRIGHT:function(t){this.moveSingleSelect(t,1)},getAutoScrollAcceleration:function(){var t=1,e=this.getAutoScrollDuration()/2e3;return t=Math.max(1,Math.floor(e*e*e*e))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){var t=Date.now();t-this.sbLastAuto>500&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return Date.now()-this.sbLastAuto>500?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(t,e){var i=t.getColumnCount()-1,n=t.getVisibleColumns()-1;t.resolveProperty("scrollingEnabled")||(i=Math.min(i,n));var o=t.getMouseDown(),r=t.getDragExtent(),s=r.x+e;s=Math.min(i-o.x,Math.max(-o.x,s)),t.clearMostRecentColumnSelection(),t.selectColumn(o.x,o.x+s),t.setDragExtent(t.newPoint(s,0)),t.insureModelColIsVisible(s+o.x,e)&&this.pingAutoScroll(),t.repaint()},moveSingleSelect:function(t,e){var i=t.getColumnCount()-1,n=t.getVisibleColumnsCount()-1;t.resolveProperty("scrollingEnabled")||(i=Math.min(i,n));var o=t.getMouseDown().plus(t.getDragExtent()),r=o.x+e;r=Math.min(i,Math.max(0,r)),t.clearSelections(),t.selectColumn(r),t.setMouseDown(t.newPoint(r,0)),t.setDragExtent(t.newPoint(0,0)),t.insureModelColIsVisible(r,e)&&this.pingAutoScroll(),t.repaint()},isColumnDragging:function(t){var e=t.lookupFeature("ColumnMoving");if(!e)return!1;var i=e.dragging&&!this.dragging;return i}});e.exports=r},{"./Feature.js":58}],57:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("ColumnSorting",{alias:"ColumnSorting",handleDoubleClick:function(t,e){var i=e.gridCell;if(t.isShowHeaderRow()&&0===i.y&&-1!==i.x){var n=e.primitiveEvent.detail.keys;t.toggleSort(i.x,n)}else this.next&&this.next.handleDoubleClick(t,e)},handleMouseMove:function(t,e){var i=e.gridCell.y;this.isFixedRow(t,e)&&1>i?this.cursor="pointer":this.cursor=null,this.next&&this.next.handleMouseMove(t,e)}});e.exports=o},{"./Feature.js":58}],58:[function(t,e,i){"use strict";var n=t("../lib/Base"),o=n.extend("Feature",{next:null,detached:null,cursor:null,currentHoverCell:null,setNext:function(t){this.next?this.next.setNext(t):(this.next=t,this.detached=t)},detachChain:function(){this.next=null},attachChain:function(){this.next=this.detached},handleMouseMove:function(t,e){this.next&&this.next.handleMouseMove(t,e)},handleMouseExit:function(t,e){this.next&&this.next.handleMouseExit(t,e)},handleMouseEnter:function(t,e){this.next&&this.next.handleMouseEnter(t,e)},handleMouseDown:function(t,e){this.next&&this.next.handleMouseDown(t,e)},handleMouseUp:function(t,e){this.next&&this.next.handleMouseUp(t,e)},handleKeyDown:function(t,e){this.next&&this.next.handleKeyDown(t,e)},handleKeyUp:function(t,e){this.next&&this.next.handleKeyUp(t,e)},handleWheelMoved:function(t,e){this.next&&this.next.handleWheelMoved(t,e)},handleDoubleClick:function(t,e){this.next&&this.next.handleDoubleClick(t,e)},handleHoldPulse:function(t,e){this.next&&this.next.handleHoldPulse(t,e)},handleTap:function(t,e){this.next&&this.next.handleTap(t,e)},handleMouseDrag:function(t,e){this.next&&this.next.handleMouseDrag(t,e)},handleContextMenu:function(t,e){this.next&&this.next.handleContextMenu(t,e)},moveSingleSelect:function(t,e,i){this.next&&this.next.moveSingleSelect(t,e,i)},isFixedRow:function(t,e){var i=e.viewPoint,n=i.y<t.getFixedRowCount();return n},isFirstFixedRow:function(t,e){var i=e.viewPoint,n=i.y<1;return n},isFixedColumn:function(t,e){var i=e.viewPoint,n=i.x<t.getFixedColumnCount();return n},isFirstFixedColumn:function(t,e){var i=e.viewPoint,n=t.isShowRowNumbers()?0:1,o=i.x<n;return o},isTopLeft:function(t,e){var i=this.isFixedRow(t,e)&&this.isFixedColumn(t,e);return i},setCursor:function(t){this.next&&this.next.setCursor(t),this.cursor&&t.beCursor(this.cursor)},initializeOn:function(t){this.next&&this.next.initializeOn(t)}});e.exports=o},{"../lib/Base":66}],59:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("Filters",{alias:"Filters",handleDoubleClick:function(t,e){var i=t.resolveProperty("editOnDoubleClick");this.checkActivateEditor(t,e,i)?t._activateEditor(e):this.next&&this.next.handleDoubleClick(t,e)},handleTap:function(t,e){var i=t.resolveProperty("editOnDoubleClick");this.checkActivateEditor(t,e,!i)?t._activateEditor(e):this.next&&this.next.handleTap(t,e)},handleHoldPulse:function(t,e){var i=t.resolveProperty("editOnDoubleClick");this.checkActivateEditor(t,e,!i)?t._activateEditor(e):this.next&&this.next.handleHoldPulse(t,e)},checkActivateEditor:function(t,e,i){var n=t.isFilterRow(e.gridCell.y),o=i&&n;return o}});e.exports=o},{"./Feature.js":58}],60:[function(t,e,i){"use strict";var n=t("./Feature.js"),o={PAGEDOWN:function(t){t.pageDown()},PAGEUP:function(t){t.pageUp()},PAGELEFT:function(t){t.pageLeft()},PAGERIGHT:function(t){t.pageRight()}},r=n.extend("KeyPaging",{alias:"KeyPaging",handleKeyDown:function(t,e){var i=e.detail["char"],n=o[i];n?n(t):this.next&&this.next.handleKeyDown(t,e)}});e.exports=r},{"./Feature.js":58}],61:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("OnHover",{alias:"OnHover",handleMouseMove:function(t,e){var i=t.getHoverCell();e.gridCell.equals(i)?this.next&&this.next.handleMouseMove(t,e):(i&&this.handleMouseExit(t,i),this.handleMouseEnter(t,e),t.setHoverCell(e.gridCell))}});e.exports=o},{"./Feature.js":58}],62:[function(t,e,i){"use strict";var n=t("./ColumnResizing"),o=n.extend("RowResizing",{alias:"RowResizing",dragArea:-1,dragStart:-1,dragAreaStartingSize:-1,getMouseValue:function(t){return t.primitiveEvent.detail.mouse.y},getGridCellValue:function(t){return t.x},getScrollValue:function(t){return t.getVScrollValue()},getAreaSize:function(t,e){return t.getRowHeight(e)},setAreaSize:function(t,e,i){t.setRowHeight(e,i)},overAreaDivider:function(t,e){return t.overRowDivider(e)},isFirstFixedOtherArea:function(t,e){return this.isFirstFixedColumn(t,e)},getCursorName:function(){return"row-resize"},getPreviousAbsoluteSize:function(t,e){return t.getRenderedHeight(e)},getOtherFixedAreaCount:function(t){return t.getFixedColumnCount()},getFixedAreaCount:function(t){return t.getFixedRowCount()+t.getHeaderRowCount()},isEnabled:function(t){return t.isRowResizeable()}});e.exports=o},{"./ColumnResizing":55}],63:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("RowSelection",{alias:"RowSelection",currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,dragArmed:!1,handleMouseUp:function(t,e){this.dragArmed?(this.dragArmed=!1,-1===e.gridCell.x&&0===e.gridCell.y&&t.toggleSelectAllRows(),t.fireSyntheticRowSelectionChangedEvent()):this.dragging?(this.dragging=!1,t.fireSyntheticRowSelectionChangedEvent()):this.next&&this.next.handleMouseUp(t,e)},handleMouseDown:function(t,e){var i=e.primitiveEvent.detail.isRightClick,n=e.gridCell,o=e.viewPoint,r=n.x,s=n.y,l=t.isShowRowNumbers()&&0>r;if(t.isRowSelection()&&!i&&l){var a=t.getFixedRowCount();o.y<a&&(s=o.y);var u=t.newPoint(0,s),c=e.primitiveEvent,h=c.detail.keys;this.dragArmed=!0,this.extendSelection(t,u,h)}else this.next&&this.next.handleMouseDown(t,e)},handleMouseDrag:function(t,e){var i=e.primitiveEvent.detail.isRightClick;if(this.dragArmed&&t.isRowSelection()&&!i){this.dragging=!0;var n=t.getFixedRowCount(),o=e.gridCell,r=e.viewPoint,s=o.y;r.y<n&&(s=r.y);var l=t.newPoint(0,s),a=e.primitiveEvent;this.currentDrag=a.detail.mouse,this.lastDragCell=l,this.checkDragScroll(t,this.currentDrag),this.handleMouseDragCellSelection(t,l,a.detail.keys)}else this.next&&this.next.handleMouseDrag(t,e)},handleKeyDown:function(t,e){if("row"!==t.getLastSelectionType())return void(this.next&&this.next.handleKeyDown(t,e));var i="handle"+e.detail["char"];this[i]&&this[i].call(this,t,e.detail)},handleMouseDragCellSelection:function(t,e,i){var n=e.y,o=t.getMouseDown(),r=n-o.y;t.clearMostRecentRowSelection(),t.selectRow(o.y,n),t.setDragExtent(t.newPoint(0,r)),t.repaint()},checkDragScroll:function(t,e){if(t.resolveProperty("scrollingEnabled")){var i=t.getDataBounds(),n=i.contains(e);n?t.isScrollingNow()&&t.setScrollingNow(!1):t.isScrollingNow()||(t.setScrollingNow(!0),this.scrollDrag(t))}},scrollDrag:function(t){if(t.isScrollingNow()){var e=this.lastDragCell,i=t.getDataBounds(),n=0,o=0,r=t.getFixedColumnCount(),s=t.getFixedRowCount(),l=e.x<r,a=e.y<s;this.currentDrag.y<i.origin.y&&(o=-1),this.currentDrag.y>i.origin.y+i.extent.y&&(o=1);var u=n,c=o;l&&(u=0),a&&(c=0),this.lastDragCell=e.plusXY(u,c),t.scrollBy(n,o),this.handleMouseDragCellSelection(t,e,[]),t.repaint(),setTimeout(this.scrollDrag.bind(this,t),25)}},extendSelection:function(t,e,i){t.stopEditing();var n=-1!==i.indexOf("SHIFT"),o=t.getMouseDown(),r=e.x,s=e.y;0>r||0>s||(n?(t.clearMostRecentRowSelection(),t.selectRow(s,o.y),t.setDragExtent(t.newPoint(0,s-o.y))):(t.toggleSelectRow(s,i),t.setMouseDown(t.newPoint(r,s)),t.setDragExtent(t.newPoint(0,0))),t.repaint())},handleDOWNSHIFT:function(t){this.moveShiftSelect(t,1)},handleUPSHIFT:function(t){this.moveShiftSelect(t,-1)},handleLEFTSHIFT:function(t){},handleRIGHTSHIFT:function(t){},handleDOWN:function(t){this.moveSingleSelect(t,1)},handleUP:function(t){this.moveSingleSelect(t,-1)},handleLEFT:function(t){},handleRIGHT:function(t){var e=t.getMouseDown().plus(t.getDragExtent()),i=t.getColumnCount()-1,n=t.getHeaderColumnCount()+t.getHScrollValue(),o=e.y;n=Math.min(i,n),t.clearSelections(),t.select(n,o,0,0),t.setMouseDown(t.newPoint(n,o)),t.setDragExtent(t.newPoint(0,0)),t.repaint()},getAutoScrollAcceleration:function(){var t=1,e=this.getAutoScrollDuration()/2e3;return t=Math.max(1,Math.floor(e*e*e*e))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now();
},pingAutoScroll:function(){var t=Date.now();t-this.sbLastAuto>500&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return Date.now()-this.sbLastAuto>500?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(t,e){var i=t.getRowCount()-1,n=t.getVisibleRows()-1;t.resolveProperty("scrollingEnabled")||(i=Math.min(i,n));var o=t.getMouseDown(),r=t.getDragExtent(),s=r.y+e;s=Math.min(i-o.y,Math.max(-o.y,s)),t.clearMostRecentRowSelection(),t.selectRow(o.y,o.y+s),t.setDragExtent(t.newPoint(0,s)),t.insureModelRowIsVisible(s+o.y,e)&&this.pingAutoScroll(),t.fireSyntheticRowSelectionChangedEvent(),t.repaint()},moveSingleSelect:function(t,e){var i=t.getRowCount()-1,n=t.getVisibleRowsCount()-1;t.resolveProperty("scrollingEnabled")||(i=Math.min(i,n));var o=t.getMouseDown().plus(t.getDragExtent()),r=o.y+e;r=Math.min(i,Math.max(0,r)),t.clearSelections(),t.selectRow(r),t.setMouseDown(t.newPoint(0,r)),t.setDragExtent(t.newPoint(0,0)),t.insureModelRowIsVisible(r,e)&&this.pingAutoScroll(),t.fireSyntheticRowSelectionChangedEvent(),t.repaint()},isSingleRowSelection:function(){return!0}});e.exports=o},{"./Feature.js":58}],64:[function(t,e,i){"use strict";var n=t("./Feature.js"),o=n.extend("ThumbwheelScrolling",{alias:"ThumbwheelScrolling",handleWheelMoved:function(t,e){if(t.resolveProperty("scrollingEnabled")){var i=e.primitiveEvent,n=i.wheelDeltaY||-i.deltaY,o=i.wheelDeltaX||-i.deltaX;n>0?t.scrollBy(0,-1):-0>n?t.scrollBy(0,1):o>0?t.scrollBy(-1,0):-0>o&&t.scrollBy(1,0)}}});e.exports=o},{"./Feature.js":58}],65:[function(t,e,i){"use strict";e.exports={Feature:t("./Feature"),CellClick:t("./CellClick"),CellEditing:t("./CellEditing"),CellSelection:t("./CellSelection"),ColumnAutosizing:t("./ColumnAutosizing"),ColumnMoving:t("./ColumnMoving"),ColumnResizing:t("./ColumnResizing"),ColumnSelection:t("./ColumnSelection"),ColumnSorting:t("./ColumnSorting"),Filters:t("./Filters"),KeyPaging:t("./KeyPaging"),OnHover:t("./OnHover"),ColumnPicker:t("./ColumnPicker"),RowResizing:t("./RowResizing"),RowSelection:t("./RowSelection"),ThumbwheelScrolling:t("./ThumbwheelScrolling")}},{"./CellClick":49,"./CellEditing":50,"./CellSelection":51,"./ColumnAutosizing":52,"./ColumnMoving":53,"./ColumnPicker":54,"./ColumnResizing":55,"./ColumnSelection":56,"./ColumnSorting":57,"./Feature":58,"./Filters":59,"./KeyPaging":60,"./OnHover":61,"./RowResizing":62,"./RowSelection":63,"./ThumbwheelScrolling":64}],66:[function(t,e,i){"use strict";var n=t("./deprecated"),o=t("extend-me").Base;o.prototype.deprecated=n,e.exports=o},{"./deprecated":74,"extend-me":5}],67:[function(t,e,i){"use strict";function n(t,e){var i="f"===(typeof e)[0],n=i?e(t):e;return n||0===n?n:""}function o(t,e,i,n,o,r){var s=t.getTextWidth(e,i);switch(e.textAlign){case"center":n-=s/2;break;case"right":n-=s}e.lineWidth=r,e.moveTo(n+.5,o+.5),e.lineTo(n+s+.5,o+.5)}function r(t,e,i,n,o,r){var s=t.getTextHeight(t.font),l=t.getTextWidth(e,i);switch(o-=.4*s.height,e.textAlign){case"center":n-=l/2;break;case"right":n-=l}e.lineWidth=r,e.moveTo(n+.5,o+.5),e.lineTo(n+l+.5,o+.5)}function s(t,e,i,n){if(1===i.length)return i;for(var o,r=[i.shift()];(o=e.getTextWidth(t,r.join(" "))<n)&&i.length;)r.push(i.shift());return!o&&r.length>1&&i.unshift(r.pop()),r=[r.join(" ")],i.length&&(r=r.concat(s(t,e,i,n))),r}function l(t,e,i,n){return s(t,e,a(i).split(" "),n)}function a(t){return t.toString().trim().replace(/\s\s+/g," ")}function u(t,e,i,n,o,r,s,l){l||(l=!0),r||(r=5),t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+n-r,i),t.quadraticCurveTo(e+n,i,e+n,i+r),t.lineTo(e+n,i+o-r),t.quadraticCurveTo(e+n,i+o,e+n-r,i+o),t.lineTo(e+r,i+o),t.quadraticCurveTo(e,i+o,e,i+o-r),t.lineTo(e,i+r),t.quadraticCurveTo(e,i,e+r,i),t.closePath(),l&&t.stroke(),s&&t.fill(),t.closePath()}function c(t){if(void 0===t)return 0;var e=t.match(c.regex);if(null===e)return 1;var i=e[4];return void 0===i?0:Number(i)}var h=t("./Base"),d=h.extend("CellProvider",{initialize:function(){this.cellCache={},this.initializeCells()},getCell:function(t){var e=this.cellCache.simpleCellRenderer;return e.config=t,e},getColumnHeaderCell:function(t){var e=this.cellCache.simpleCellRenderer;return e.config=t,e},getRowHeaderCell:function(t){var e=this.cellCache.simpleCellRenderer;return e.config=t,e},paintButton:function(t,e){var i=e.value,n=e.x,o=e.y,r=e.bounds,s=r.x+2,l=r.y+2,a=r.width-3,c=r.height-3,h=c/2,d=t.createLinearGradient(s,l,s,l+c);e.mouseDown?(d.addColorStop(0,"#B5CBED"),d.addColorStop(1,"#4d74ea")):(d.addColorStop(0,"#ffffff"),d.addColorStop(1,"#aaaaaa")),t.fillStyle=d,t.strokeStyle="#000000",u(t,s,l,a,c,h,d,!0);var g=(a-e.getTextWidth(t,i))/2,f=(c-e.getTextHeight(t.font).descent)/2;"middle"!==t.textBaseline&&(t.textBaseline="middle"),t.fillStyle="#000000",e.backgroundColor="rgba(0,0,0,0)",t.fillText(i,s+g,l+f),e.buttonCells[n+","+o]=!0},defaultCellPaint:function(t,e){var i,o,r,s,l,a=e.value,u=e.bounds.x,h=e.bounds.y,d=e.bounds.width,g=e.bounds.height,f=e.headerTextWrapping,p=2,v=0===e.y;a&&a.constructor===Array&&(i=a[0],o=a[2],a=a[1],a&&"object"==typeof a&&"HTMLImageElement"===a.constructor.name&&(r=a,a=null),i&&"IMG"!==i.nodeName&&(i=null),o&&"IMG"!==o.nodeName&&(o=null),r&&"IMG"!==r.nodeName&&(r=null)),a=n(e,a),a=e.formatter(a),t.font!==e.font&&(t.font=e.font),"left"!==t.textAlign&&(t.textAlign="left"),"middle"!==t.textBaseline&&(t.textBaseline="middle");var m,C,w,y;e.isCellHovered&&e.hoverCellHighlight.enabled?w=e.hoverCellHighlight.backgroundColor:e.isRowHovered&&(C=e.hoverRowHighlight).enabled?w=e.isGridColumn||!C.header||void 0===C.header.backgroundColor?C.backgroundColor:C.header.backgroundColor:e.isColumnHovered&&(C=e.hoverColumnHighlight).enabled&&(w=e.isGridRow||!C.header||void 0===C.header.backgroundColor?C.backgroundColor:C.header.backgroundColor),c(w)<1&&(e.isSelected&&(y=n(e,e.backgroundSelectionColor)),c(y)<1&&(m=n(e,e.backgroundColor),c(m)>0&&(t.fillStyle=m,t.fillRect(u,h,d,g))),void 0!==y&&(t.fillStyle=y,t.fillRect(u,h,d,g))),void 0!==w&&(t.fillStyle=w,t.fillRect(u,h,d,g));var b=n(e,e.isSelected?e.foregroundSelectionColor:e.color);t.fillStyle!==b&&(t.fillStyle=b,t.strokeStyle=b),v&&f?this.renderMultiLineText(t,u,h,g,d,e,a):this.renderSingleLineText(t,u,h,g,d,e,a);var S=0;if(i&&(l=Math.round((g-i.height)/2),t.drawImage(i,u+p,h+l),S=Math.max(i.width+2)),o&&d>1.75*g){l=Math.round((g-o.height)/2);var x=u+d-o.width;void 0!==m?(t.fillStyle=m,t.fillRect(x,h,o.width,g)):t.clearRect(x,h,o.width,g),t.drawImage(o,x,h+l),S=Math.max(o.width+2)}r&&(l=Math.round((g-r.height)/2),s=Math.round((d-r.width)/2),t.drawImage(r,u+d-s-r.width,h+l),S=Math.max(r.width+2)),e.cellBorderThickness&&(t.beginPath(),t.rect(u,h,d,g),t.lineWidth=e.cellBorderThickness,t.strokeStyle=e.cellBorderStyle,t.stroke(),t.closePath()),e.minWidth=e.minWidth+2*S},renderMultiLineText:function(t,e,i,n,o,r,s){var u=l(t,r,s,o);if(1===u.length)return this.renderSingleLineText(t,e,i,n,o,r,a(s));var c=r.cellPadding,h=0,d=r.voffset,g=r.halign,f=r.getTextHeight(r.font).height;switch(g){case"right":h=o-c;break;case"center":h=o/2;break;case"left":h=c}var p=0,v=Math.ceil(f/2);d+=Math.ceil((n-(u.length-1)*f)/2),h=Math.max(p,h),d=Math.max(v,d),t.save(),t.rect(e,i,o,n),t.clip(),t.textAlign=g;for(var m=0;m<u.length;m++)t.fillText(u[m],e+h,i+d+m*f);t.restore()},renderSingleLineText:function(t,e,i,n,s,l,a){var u=l.cellPadding,c=0,h=l.voffset,d=l.halign,g=l.isCellHovered,f=l.link,p=l.getTextHeight(l.font),v=l.getTextWidth(t,a);switch(l.minWidth=v+2*u,d){case"right":c=s-u-v;break;case"center":c=(s-v)/2;break;case"left":c=u}c=Math.max(0,c),h+=Math.ceil(n/2),null!==a&&t.fillText(a,e+c,i+h),g&&(t.beginPath(),f&&(o(l,t,a,e+c,i+h+Math.floor(p.height/2),1),t.stroke()),t.closePath()),l.strikeThrough===!0&&(t.beginPath(),r(l,t,a,e+c,i+h+Math.floor(p.height/2),1),t.stroke(),t.closePath())},paintSlider:function(t,e,i,n,o){},paintSparkbar:function(t,e,i,n,o){t.beginPath();var r=this.config.value;if(r&&r.length){var s=r.length,l=n/s,a=this.config.isSelected?this.config.fgSelColor:this.config.fgColor;(this.config.bgColor||this.config.isSelected)&&(t.fillStyle=this.config.isSelected?this.config.bgSelColor:this.config.bgColor,t.fillRect(e,i,n,o)),t.fillStyle=a;for(var u=0;u<r.length;u++){var c=r[u]/110*o;t.fillRect(e+5,i+o-c,.6666*l,c),e+=l}t.closePath(),this.config.minWidth=10*s}},paintSparkline:function(t,e,i,n,o){t.beginPath();var r=this.config.value;if(r&&r.length){var s=r.length,l=n/s,a=this.config.isSelected?this.config.fgSelColor:this.config.fgColor;(this.config.bgColor||this.config.isSelected)&&(t.fillStyle=this.config.isSelected?this.config.bgSelColor:this.config.bgColor,t.fillRect(e,i,n,o)),t.strokeStyle=a,t.fillStyle=a,t.beginPath();for(var u,c=0;c<r.length;c++){var h=r[c]/110*o;u||(u=h),t.lineTo(e+5,i+o-h),t.arc(e+5,i+o-h,1,0,2*Math.PI,!1),e+=l}this.config.minWidth=10*s,t.stroke(),t.closePath()}},treeCellRenderer:function(t,e,i,n,o){var r=this.config.value.data,s=this.config.value.indent,l=this.config.value.icon;if((this.config.bgColor||this.config.isSelected)&&(t.fillStyle=this.config.isSelected?this.config.bgSelColor:this.config.bgColor,t.fillRect(e,i,n,o)),r&&r.length){var a=Math.ceil(o/2);t.fillStyle=this.config.isSelected?this.config.fgSelColor:this.config.fgColor,t.fillText(l+r,e+s,i+a);var u=this.config.getTextWidth(t,l+r),c=e+s+u+10;this.config.minWidth=c}},emptyCellRenderer:function(t,e,i,n,o){},initializeCells:function(){var t=this;this.cellCache.simpleCellRenderer={paint:this.defaultCellPaint,renderSingleLineText:this.renderSingleLineText,renderMultiLineText:this.renderMultiLineText},this.cellCache.sliderCellRenderer={paint:this.paintSlider},this.cellCache.sparkbarCellRenderer={paint:this.paintSparkbar},this.cellCache.sparklineCellRenderer={paint:this.paintSparkline},this.cellCache.treeCellRenderer={paint:this.treeCellRenderer},this.cellCache.emptyCellRenderer={paint:this.emptyCellRenderer},this.cellCache.buttonRenderer={paint:this.paintButton},this.cellCache.linkCellRenderer={paint:function(e,i,n,o,r){t.config=this.config,t.defaultCellPaint(e,i,n,o,r,!0)}}}});c.regex=/^(transparent|((RGB|HSL)A\(.*,\s*([\d\.]+)\)))$/i,e.exports=d},{"./Base":66}],68:[function(t,e,i){"use strict";function n(){this.getDisplayString=function(){return"< "+this.value},this.initialize=function(t){this.fieldsProvider=t,this.filterTree=new o({fields:t()}),delete this.filter},this.onShow=function(t){t.appendChild(this.filterTree.el)},this.onOk=function(){return this.filterTree.validate()},this.getState=function(){var t=JSON.parse(JSON.stringify(this.filterTree));return delete this.filterTree,t},this.onReset=function(){},this.onDelete=function(){delete this.filter,delete this.filterTree},this.onCancel=function(){delete this.filterTree},this.create=function(t){if(!this.filter){var e=this.setState(t),i={},n=this.fieldsProvider()[0],o=n.name||n;e.validate(r)||(this.filter=function(t){return i[o]=t,e.test(i)})}return this.filter},this.setState=function(t){var e={fields:this.fieldsProvider()};return"string"==typeof t?e.state=t:e.json=t,this.filterTree=new o(e)}}var o=t("filter-tree"),r={alert:!1,focus:!1};e.exports=n},{"filter-tree":6}],69:[function(t,e,i){"use strict";function n(t){return(10>t?"-0":"-")+t}e.exports={date:function(t){return t instanceof Date?t.getFullYear()+n(t.getMonth()+1)+n(t.getDate()):t+""},"default":function(t){return t+""}}},{}],70:[function(t,e,i){"use strict";e.exports=function(){function t(){this.keys=[],this.data={},this.values=[]}var e=".~.#%_",i=0,n=function(t){var n=typeof t;switch(n){case"number":return e+n+"_"+t;case"string":return e+n+"_"+t;case"boolean":return e+n+"_"+t;case"symbol":return e+n+"_"+t;case"undefined":return e+"undefined";case"object":case"function":return t.___finhash||(t.___finhash=e+i++),t.___finhash}},o=Object.is||function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e},r=function(t,e){if(e!=e||0===e)for(var i=t.length;i--&&!o(t[i],e););else i=[].indexOf.call(t,e);return i};return t.prototype.set=function(t,e){var i=n(t);void 0===this.data[i]&&(this.keys.push(t),this.values.push(e)),this.data[i]=e},t.prototype.get=function(t){var e=n(t);return this.data[e]},t.prototype.getIfAbsent=function(t,e){var i=this.get(t);return void 0===i&&(i=e(t,this)),i},t.prototype.size=function(){return this.keys.length},t.prototype.clear=function(){this.keys.length=0,this.data={}},t.prototype["delete"]=function(t){var e=n(t);if(void 0!==this.data[e]){var i=r(this.keys,t);this.keys.splice(i,1),this.values.splice(i,1),delete this.data[e]}},t.prototype.forEach=function(t){for(var e=this.keys,i=0;i<e.length;i++){var n=e[i],o=this.get(n);t(o,n,this)}},t.prototype.map=function(e){for(var i=this.keys,n=new t,o=0;o<i.length;o++){var r=i[o],s=this.get(r),l=e(s,r,this);n.set(r,l)}return n},t.prototype.copy=function(){for(var e=this.keys,i=new t,n=0;n<e.length;n++){var o=e[n],r=this.get(o);i.set(o,r)}return i},t}()},{}],71:[function(t,e,i){"use strict";function n(t,e,i){var n=e.getColumnProperties(-1),o=n.rowHeader,r=s.checked;t.font=o.font,n.preferredWidth=r.width+7+o.getTextWidth(t,i+1)}var o=t("object-iterators"),r=t("./Base"),s=t("../../images"),l=r.extend("Renderer",{cell:{x:0,y:0,width:0,height:0},scrollHeight:0,viewHeight:0,reset:function(){this.bounds={width:0,height:0},this.columnEdges=[],this.columnEdgesIndexMap=[],this.renderedColumnMinWidths=[],this.rowEdges=[],this.rowEdgesIndexMap=[],this.visibleColumns=[],this.visibleRows=[],this.insertionBounds=[]},initialize:function(t){this.grid=t,this.reset()},computeCellsBounds:function(){var t,e,i,n,o,r,s,l,a,u,c=this.getScrollTop(),h=this.getScrollLeft(),d=this.getColumnCount(),g=this.getFixedColumnCount(),f=this.getRowCount(),p=this.getFixedRowCount(),v=this.getBounds(),m=this.grid,C=m.behavior.getDataModel().getBottomTotals().length,w=v.width||m.canvas.width,y=v.height-C*m.behavior.getDefaultRowHeight(),b=0,S=0,x=0,E=0,A=0;for(this.getColumnEdges().length=0,this.rowEdges.length=0,this.columnEdges[0]=0,this.rowEdges[0]=0,this.scrollHeight=0,this.visibleColumns.length=0,this.visibleRows.length=0,this.columnEdgesIndexMap=[],this.rowEdgesIndexMap=[],this.insertionBounds=[],this.grid.isShowRowNumbers()&&(x--,this.columnEdges[-1]=-1),t=x;d>t&&(i=t,t>=g&&(i+=h,void 0===s&&(s=i),l=i),!(E>w||i>=d));t++)o=m.getColumnWidth(i),E+=o,this.columnEdges[t+1]=Math.round(E),this.visibleColumns[t]=i,this.columnEdgesIndexMap[i]=t,b=b+Math.round(o/2)+S,this.insertionBounds.push(b),S=Math.round(o/2);for(e=0;f>e&&(n=e,e>=p&&(n+=c,void 0===a&&(a=n),u=n),!(A>y||n>=f));e++)r=m.getRowHeight(n),A+=r,this.rowEdges[e+1]=Math.round(A),this.visibleRows[e]=n,this.rowEdgesIndexMap[n]=e;this.viewHeight=y,this.dataWindow=this.grid.newRectangle(s,a,l-s,u-a)},resolveProperty:function(t){return this.grid.resolveProperty(t)},getGrid:function(){return this.deprecated("grid",{since:"0.2"})},paint:function(t){this.grid&&(this.renderGrid(t),this.grid.gridRenderedNotification())},getVisibleRowsCount:function(){return this.visibleRows.length-1},getVisibleScrollHeight:function(){return this.viewHeight-this.grid.getFixedRowsHeight()},getVisibleRows:function(){return this.visibleRows},getVisibleColumnsCount:function(){return this.visibleColumns.length-1},getVisibleColumns:function(){return this.visibleColumns},overColumnDivider:function(t){t=Math.round(t);var e=this.getColumnEdges(),i=e.indexOf(t-1);return 0>i&&(i=e.indexOf(t)),0>i&&(i=e.indexOf(t-2)),0>i&&(i=e.indexOf(t+1)),0>i&&(i=e.indexOf(t-3)),i},overRowDivider:function(t){t=Math.round(t);var e=this.rowEdges.indexOf(t+1);return 0>e&&(e=this.rowEdges.indexOf(t)),0>e&&(e=this.rowEdges.indexOf(t-1)),e},getBoundsOfCell:function(t){return this._getBoundsOfCell(t.x,t.y)},_getBoundsOfCell:function(t,e){var i,n=!1,o=!1,r=this.cell,s=this.columnEdgesIndexMap[t];void 0===s&&(s=this.columnEdgesIndexMap[t-1],n=!0);var l,a,u,c=this.columnEdges[s],h=this.columnEdges[s+1],d=h-c;if(r.x=n?h:c,r.width=n?0:d,0>e){var g=this.grid.behavior,f=this.getBounds();u=g.getDefaultRowHeight(),l=f.height+e*u,a=l+u}else i=this.rowEdgesIndexMap[e],void 0===i&&(i=this.rowEdgesIndexMap[e-1],o=!0),l=this.rowEdges[i],a=this.rowEdges[i+1],u=a-l;return r.y=o?a:l,r.height=o?0:u,r},getColumnFromPixelX:function(t){for(var e=0,i=this.getFixedColumnCount(),n=this.grid.getHScrollValue(),o=this.getColumnEdges(),r=1;r<o.length-1;r++)if(e=o[r]-(o[r]-o[r-1])/2,e>t)return r>i&&(r+=n),r-1;return r>i&&(r+=n),r-1},getGridCellFromMousePoint:function(t){var e,i,n,o,r=this.grid.behavior,s=0,l=0,a=0,u=this.getColumnEdges(),c=this.getFixedColumnCount(),h=this.getFixedRowCount(),d=this.getScrollLeft(),g=this.getScrollTop();for(n=0;n<u.length;n++){if(s=u[n],t.x<s){e=Math.max(0,t.x-a-2);break}a=s}for(n--,a=0,o=0;o<this.rowEdges.length;o++){if(l=this.rowEdges[o],t.y<l){i=Math.max(0,t.y-a-2);break}a=l}o--,t.x<0&&(n=-1),t.y<0&&(o=-1);var f=this.grid.newPoint(n,o);n>=c&&(n+=d),o>=h&&(o+=g);var p=-1,v=r.getColumn(n);return v&&(p=v.index),{gridCell:this.grid.newPoint(n,o),mousePoint:this.grid.newPoint(e,i),viewPoint:f,dataCell:this.grid.newPoint(p,o)}},isColumnVisible:function(t){var e=-1!==this.visibleColumns.indexOf(t);return e},getFinalVisableColumnBoundary:function(){var t=this.isLastColumnVisible(),e=t?2:1,i=this.getColumnEdges()[this.getColumnEdges().length-e],n=Math.min(i,this.getBounds().width-200);return n},isRowVisible:function(t){var e=-1!==this.visibleRows.indexOf(t);return e},isSelected:function(t,e){return this.grid.isSelected(t,e)},renderGrid:function(t){t.beginPath(),this.paintCells(t),this.paintGridlines(t),this.renderOverrides(t),this.renderFocusCell(t),t.closePath()},focusLineStep:[[5,5],[0,1,5,4],[0,2,5,3],[0,3,5,2],[0,4,5,1],[0,5,5,0],[1,5,4,0],[2,5,3,0],[3,5,2,0],[4,5,1,0]],renderFocusCell:function(t){t.beginPath(),this._renderFocusCell(t),t.closePath()},_renderFocusCell:function(t){var e=this.grid.selectionModel.getSelections();if(e&&0!==e.length){var i=e[e.length-1],n=i.origin;if(-1!==n.x){var o=this.getVisibleColumns(),r=this.getVisibleRows(),s=o[o.length-1],l=r[r.length-1],a=i.extent,u=Math.min(n.x,n.x+a.x),c=Math.min(n.y,n.y+a.y);if(!(u>s||c>l)){var h=Math.max(n.x,n.x+a.x)+1;h=Math.min(h,1+s);var d=Math.max(n.y,n.y+a.y)+1;d=Math.min(d,1+l);var g=this._getBoundsOfCell(u,c),f=Math.round(void 0===g.x?this.grid.getFixedColumnsWidth():g.x),p=Math.round(void 0===g.y?this.grid.getFixedRowsHeight():g.y),v=this._getBoundsOfCell(h,d),m=Math.round(void 0===v.x?this.grid.getFixedColumnsWidth():v.x),C=Math.round(void 0===v.y?this.grid.getFixedRowsHeight():v.y),w=Math.min(f,m),y=Math.min(p,C),b=1+m-f,S=1+C-p;w===m&&(b=f-m),y===C&&(S=p-C),1>b*S||(t.rect(w,y,b,S),t.fillStyle=this.resolveProperty("selectionRegionOverlayColor"),t.fill(),t.lineWidth=1,t.strokeStyle=this.resolveProperty("selectionRegionOutlineColor"),t.stroke())}}}},renderOverrides:function(t){var e=this.grid.renderOverridesCache;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];n&&this.renderOverride(t,n)}},renderOverride:function(t,e){var i=e.hdpiratio,n=e.startX,o=e.width+1,r=e.height,s=e.ctx,l=t.getImageData(n,0,Math.round(o*i),Math.round(r*i));s.putImageData(l,0,0),t.fillStyle=this.resolveProperty("backgroundColor2"),t.fillRect(Math.round(n/i),0,o,r)},getScrollTop:function(){return this.grid.getVScrollValue()},getScrollLeft:function(){return this.grid.getHScrollValue()},getBehavior:function(){return this.deprecated("grid.behavior",{since:"0.2"})},getColumnEdges:function(){return this.columnEdges},getRowEdges:function(){return this.rowEdges},isLastColumnVisible:function(){var t=this.getColumnCount()-1;return-1!==this.visibleColumns.indexOf(t)},getRenderedWidth:function(t){return this.getColumnEdges()[t]},getRenderedHeight:function(t){return this.rowEdges[t]},getCanvas:function(){return this.grid.getCanvas()},isDraggingColumn:function(){return this.grid.isDraggingColumn()},getPageUpRow:function(){for(var t=this.grid,e=this.getVisibleScrollHeight(),i=this.grid.getFixedRowCount(),n=this.dataWindow.origin.y-i,o=0;e>o&&n>-1;)o+=t.getRowHeight(n),n--;return n+1},getPageDownRow:function(){var t=this.grid.getFixedRowCount(),e=this.dataWindow.corner.y-t-1;return e},getColumnCount:function(){return this.grid.getColumnCount()},getRowCount:function(){return this.grid.getRowCount()},getFixedColumnCount:function(){return this.grid.getFixedColumnCount()},getFixedRowCount:function(){return this.grid.getFixedRowCount()},getHeaderRowCount:function(){return this.grid.getHeaderRowCount()},getHeaderColumnCount:function(){return this.grid.getHeaderColumnCount()},paintCells:function(t){var e,i,o,r,s,l,a,u=this.getColumnEdges(),c=this.rowEdges,h=this.getVisibleColumns(),d=this.getVisibleRows(),g=this.grid.behavior,f=0,p=0,v=this.getBounds().height,m=this.grid.isShowRowNumbers()?-1:0,C=h.length;if(this.buttonCells={},C)for(o=m;C>o;o++,f+=a){for(s=h[o],this.renderedColumnMinWidths[s]=0,e=g.getColumnProperties(s).renderCellError,t.save(),a=u[o-m]-f,t.beginPath(),t.rect(f,p,a,v),t.clip(),r=0;r<d.length;r++){l=d[r];try{this._paintCell(t,s,l)}catch(w){if(i=w&&(w.message||w)||"Unknown error.",console.error(i),e){var y=t.gc||t,b=c[r],S=c[r+1]-b;y.save(),y.beginPath(),y.rect(f,b,a,S),y.clip(),e(y,i,f,b,a,S),y.restore()}}}for(r=-g.getDataModel().getBottomTotals().length;r;r++)this._paintCell(t,s,r);t.restore()}n(t,g,this.grid.getRowCount())},paintGridlines:function(t){var e,i,n,o=0,r=this.getColumnEdges(),s=this.rowEdges,l=r[r.length-1],a=this.getBounds().height,u=this.resolveProperty("gridLinesH"),c=this.resolveProperty("gridLinesV"),h=this.resolveProperty("lineColor");if(t.beginPath(),c)for(n=0;n<r.length+1;n++)e=r[n]+.5,t.moveTo(e,0),t.lineTo(e,a);if(u){for(o=0;o<s.length-1;o++)i=s[o]+.5,t.moveTo(0,i),t.lineTo(l,i);var d=this.grid.behavior,g=d.getDefaultRowHeight();for(o=-d.getDataModel().getBottomTotals().length,i=this.getBounds().height;o;o++)i-=g,t.moveTo(0,i),t.lineTo(l,i)}t.closePath(),t.strokeStyle=h,t.lineWidth=this.resolveProperty("lineWidth"),t.stroke()},paintCell:function(t,e,i){t.moveTo(0,0);var n=this.getVisibleColumns()[e],o=this.getVisibleRows()[i];n&&this._paintCell(t,n,o)},_paintCell:function(t,e,i){var n=this.grid,r=n.behavior,l=r.getColumnProperties(e);if(!l.isNull){var a,u=l,c=r.getHeaderRowCount(),h=i>=c,d=0>i,g=!h&&!d,f=n.isFilterRow(i),p=r.getHeaderColumnCount(),v=e>=p,m=n.isShowRowNumbers(),C=n.isHierarchyColumn(e),w=n.isRowSelected(i),y=n.isColumnSelected(e),b=n.isCellSelected(e,i),S=n.isCellSelectedInColumn(e),x=n.isCellSelectedInRow(i),E=n.areAllRowsSelected();m&&-1===e||C?(w?(a=Object.create(l.rowHeaderRowSelection),a.isSelected=!0):(a=Object.create(l.rowHeader),a.isSelected=x),a.isUserDataArea=!1):g||d?(f?(a=Object.create(l.filterProperties),a.isSelected=!1):y?(a=Object.create(l.columnHeaderColumnSelection),a.isSelected=!0):(a=Object.create(l.columnHeader),a.isSelected=S),a.isUserDataArea=!1):C?(a=Object.create(l.rowHeader),a.isSelected=x):(a=Object.create(l),a.isSelected=b||w||y,a.isUserDataArea=!0);var A=i-c+1;if(-1===e?(0===i?a.value=[s.checkbox(E),"",null]:f?a.value=[s.filter(!1),"",null]:g||d?a.value="":a.value=[s.checkbox(w),A,null],a.halign="right"):(a.value=n.getValue(e,i),a.halign=n.getColumnAlignment(e)),a.isGridColumn=v,a.isGridRow=h,a.isColumnHovered=n.isColumnHovered(e)&&v,a.isRowHovered=n.isRowHovered(i)&&h,a.isCellHovered=n.isHovered(e,i)&&v&&h,a.bounds=this._getBoundsOfCell(e,i),a.isCellSelected=b,a.isRowSelected=w,a.isColumnSelected=y,a.isInCurrentSelectionRectangle=n.isInCurrentSelectionRectangle(e,i),n.mouseDownState){var R=n.mouseDownState.gridCell;a.mouseDown=R.x===e&&R.y===i}a.x=e,a.y=i,r.cellPropertiesPrePaintNotification(a);var D=r.getCellRenderer(a,e,i),T=r.getCellProperties(e,i);o(a).extendOwn(T),a.buttonCells=this.buttonCells;var P=a.isUserDataArea?a.format:"default";a.formatter=n.getFormatter(P),D.paint(t,a),this.renderedColumnMinWidths[e]=Math.max(a.minWidth||0,this.renderedColumnMinWidths[e]),u.preferredWidth=this.renderedColumnMinWidths[e]}},isViewableButton:function(t,e){var i=t+","+e;return this.buttonCells[i]===!0},getRowNumbersWidth:function(){var t=this.getColumnEdges();return 0===t.length?0:t[0]},startAnimator:function(){var t=this;requestAnimationFrame(function e(){t.animate(),requestAnimationFrame(e)})},animate:function(){var t=this.getCanvas().canvasCTX;t.beginPath(),t.save(),this.renderFocusCell(t),t.restore(),t.closePath()},getBounds:function(){return this.bounds},setBounds:function(t){return this.bounds=t}});e.exports=l},{"../../images":3,"./Base":66,"object-iterators":21}],72:[function(t,e,i){"use strict";function n(t){this.grid=t,this.selections=[],this.flattenedX=[],this.flattenedY=[],this.rowSelectionModel=new o,this.columnSelectionModel=new o,this.setLastSelectionType("")}var o=t("sparse-boolean-array");n.prototype={constructor:n.prototype.constructor,allRowsSelected:!1,getLastSelection:function(){var t=this.selections,e=t[t.length-1];return e},getLastSelectionType:function(){return this.lastSelectionType},setLastSelectionType:function(t){this.lastSelectionType=t},select:function(t,e,i,n){var o=this.grid.newRectangle(t,e,i,n);this.selections.push(o),this.flattenedX.push(o.flattenXAt(0)),this.flattenedY.push(o.flattenYAt(0)),this.setLastSelectionType("cell"),this.grid.selectionChanged()},toggleSelect:function(t,e,i,n){var o,r;o=this.selections.find(function(o,s){return r=s,o.origin.x===t&&o.origin.y===e&&o.extent.x===i&&o.extent.y===n}),o?(this.selections.splice(r,1),this.flattenedX.splice(r,1),this.flattenedY.splice(r,1),this.grid.selectionChanged()):this.select(t,e,i,n)},clearMostRecentSelection:function(t){t=t===!0,t||this.setAllRowsSelected(!1),this.selections.length&&--this.selections.length,this.flattenedX.length&&--this.flattenedX.length,this.flattenedY.length&&--this.flattenedY.length},clearMostRecentColumnSelection:function(){this.columnSelectionModel.clearMostRecentSelection(),this.setLastSelectionType("column")},clearMostRecentRowSelection:function(){this.rowSelectionModel.clearMostRecentSelection(),this.setLastSelectionType("row")},clearRowSelection:function(){this.rowSelectionModel.clear(),this.setLastSelectionType("row")},getSelections:function(){return this.selections},hasSelections:function(){return 0!==this.selections.length},hasRowSelections:function(){return!this.rowSelectionModel.isEmpty()},hasColumnSelections:function(){return!this.columnSelectionModel.isEmpty()},isCellSelectedInRow:function(t){return this._isCellSelected(this.flattenedX,0,t)},isCellSelectedInColumn:function(t){return this._isCellSelected(this.flattenedY,t,0)},isSelected:function(t,e){return this.isColumnSelected(t)||this.isRowSelected(e)||this._isCellSelected(this.selections,t,e)},isCellSelected:function(t,e){return this._isCellSelected(this.selections,t,e)},_isCellSelected:function(t,e,i){var n=this;return!!t.find(function(t){return n.rectangleContains(t,e,i)})},clear:function(t){t=t===!0,this.selections.length=0,this.flattenedX.length=0,this.flattenedY.length=0,this.columnSelectionModel.clear(),t||(this.setAllRowsSelected(!1),this.rowSelectionModel.clear())},isRectangleSelected:function(t,e,i,n){return!!this.selections.find(function(o){return o.origin.x===t&&o.origin.y===e&&o.extent.x===i&&o.extent.y===n})},isColumnSelected:function(t){return this.columnSelectionModel.isSelected(t)},isRowSelected:function(t){return this.allRowsSelected||this.rowSelectionModel.isSelected(t)},selectColumn:function(t,e){this.columnSelectionModel.select(t,e),this.setLastSelectionType("column")},selectAllRows:function(){this.clear(),this.setAllRowsSelected(!0)},setAllRowsSelected:function(t){this.allRowsSelected=t},areAllRowsSelected:function(){return this.allRowsSelected},selectRow:function(t,e){this.rowSelectionModel.select(t,e),this.setLastSelectionType("row")},deselectColumn:function(t,e){this.columnSelectionModel.deselect(t,e),this.setLastSelectionType("column")},deselectRow:function(t,e){this.rowSelectionModel.deselect(t,e),this.setLastSelectionType("row")},getSelectedRows:function(){if(this.areAllRowsSelected()){for(var t=this.grid.getHeaderRowCount(),e=this.grid.getRowCount()-t,i=new Array(e),n=0;e>n;n++)i[n]=n+t;return i}return this.rowSelectionModel.getSelections()},getSelectedColumns:function(){return this.columnSelectionModel.getSelections()},isColumnOrRowSelected:function(){return!this.columnSelectionModel.isEmpty()||!this.rowSelectionModel.isEmpty()},getFlattenedYs:function(){var t=[],e={};return this.selections.forEach(function(i){for(var n=i.origin.y,o=i.extent.y+1,r=0;o>r;r++){var s=r+n;e[s]||(t.push(s),e[s]=!0)}}),t.sort(function(t,e){return t-e}),t},selectRowsFromCells:function(t,e){t=t||0,e=e===!0;var i=this.rowSelectionModel;e||(this.setAllRowsSelected(!1),i.clear()),this.selections.forEach(function(e){var n=e.origin.y,o=e.extent.y;n+=t,i.select(n,n+o)})},selectColumnsFromCells:function(t){t=t||0;var e=this.columnSelectionModel;e.clear(),this.selections.forEach(function(i){var n=i.origin.x,o=i.extent.x;n+=t,e.select(n,n+o)})},isInCurrentSelectionRectangle:function(t,e){var i=this.selections[this.selections.length-1];return i&&this.rectangleContains(i,t,e)},rectangleContains:function(t,e,i){var n=t.origin.x,o=t.origin.y,r=n+t.extent.x,s=o+t.extent.y;t.extent.x<0&&(n=r,r=t.origin.x),t.extent.y<0&&(o=s,s=t.origin.y);var l=e>=n&&i>=o&&r>=e&&s>=i;return l}},e.exports=n},{"sparse-boolean-array":24}],73:[function(t,e,i){"use strict";var n=t("./Base"),o=500,r=o+"ms ease-in",s=n.extend("TableDialog",{initialize:function(t){this.grid=t,this.initializeOverlaySurface(),this.openNow=!1},isOpen:function(){return this.openNow},open:function(){if(!this.isOpen()){this.openNow=!0;var t=this;this.overlay.style.backgroundColor=this.grid.resolveProperty("backgroundColor"),this.overlay.style.top=this.overlay.style.bottom=this.overlay.style.right=this.overlay.style.left=0,t.overlay.style.webkitTransition="",this.overlay.style.margin="15px 35px 35px 15px",this.overlay.style.opacity=0,this.overlay.style.zIndex=100,this.closeTransition=function(){this.overlay.style.opacity=0},this._closer||(this._closer=function(e){var i=t.getCharFor(e.keyCode).toLowerCase(),n=t.grid.resolveProperty("editorActivationKeys");(n.indexOf(i)>-1||27===e.keyCode)&&(e.preventDefault(),t.close())}),requestAnimationFrame(function(){t.overlay.style.webkitTransition="opacity "+o+"ms ease-in",requestAnimationFrame(function(){document.addEventListener("keydown",t._closer,!1),t.overlay.style.opacity=.95})}),setTimeout(function(){t.overlay.focus()},100)}},openFrom:function(t){if(!this.isOpen()){this.openNow=!0;var e=this,i=this.overlay.style;i.backgroundColor=this.grid.resolveProperty("backgroundColor");var n=this.grid.div.getBoundingClientRect(),o=t.y+"px "+(n.width-(t.x+t.width))+"px "+(n.height-(t.y+t.height))+"px "+t.x+"px";i.webkitTransition="",i.top=i.right=i.bottom=i.left=0,i.margin=o,i.zIndex=100,i.opacity=1,this.closeTransition=function(){i.margin=o},this._closer||(this._closer=function(t){var i=e.getCharFor(t.keyCode).toLowerCase(),n=e.grid.resolveProperty("editorActivationKeys");(n.indexOf(i)>-1||27===t.keyCode)&&(t.preventDefault(),e.close())}),requestAnimationFrame(function(){document.addEventListener("keydown",e._closer,!1),requestAnimationFrame(function(){requestAnimationFrame(function(){i.webkitTransition="margin-top "+r+", margin-right "+r+", margin-bottom "+r+", margin-left "+r,i.margin="15px 35px 35px 15px"})})}),setTimeout(function(){e.overlay.focus()},100)}},close:function(){this.openNow=!1,document.removeEventListener("keydown",this._closer,!1);var t=this;requestAnimationFrame(function(){t.closeTransition()}),setTimeout(function(){t.clear(),t.overlay.style.zIndex=-1e3,t.onClose&&(t.onClose(),t.onClose=void 0),t.grid.takeFocus()},o)},initializeOverlaySurface:function(){this.overlay=document.createElement("div"),this.overlay.setAttribute("tabindex",0),this.overlay.addEventListener("wheel",function(t){t.stopPropagation()});var t=this.overlay.style;t.outline="none",t.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)",t.position="absolute",t.margin=0,t.overflow="hidden",t.opacity=0,t.zIndex=10,this.grid.div.appendChild(this.overlay)},getCharFor:function(t){var e=this.grid.getCanvas().getCharMap();return e[t][0]},clear:function(){this.overlay.innerHTML=""},querySelector:function(t){
var e=this.overlay.querySelector(t);return e},getAnimationTime:function(){return o}});e.exports=s},{"./Base":66}],74:[function(t,e,i){"use strict";console.warn||(console.warn=function(){console.log.apply(console,["WARNING:"].concat(Array.prototype.slice.call(arguments)))});var n=function(t,e){var i,n=t.split("."),o=n[n.length-1],r=e&&e.asOfVersion,s=this;return o="get"+o[0].toUpperCase()+o.substr(1),i="."+o+"() method is deprecated",r&&(i+=" as of v"+e.asOfVersion),i+=". Use ."+t,")"!==t[t.length-1]&&(i+=" property"),i+=" instead. (Will be removed in a future release.)",console.warn(i),n.forEach(function(t){s=s[t]}),s};e.exports=n},{}],75:[function(t,e,i){"use strict";function n(t,e,i,n,r,s){t.fillStyle="#FFD500",t.fill(),t.strokeStyle=t.createPattern(o.caution,"repeat"),t.lineWidth=5,t.beginPath(),t.moveTo(i,n),t.lineTo(i+r,n),t.lineTo(i+r,n+s),t.lineTo(i,n+s),t.lineTo(i,n),t.stroke(),t.beginPath(),t.rect(i,n,r-2,s),t.clip(),t.fillStyle="#A00",t.textAlign="start",t.textBaseline="middle",t.font='bold 6pt "arial narrow", verdana, geneva',t.fillText(e,i+4,n+s/2+.5)}var o=t("../../images");e.exports=n},{"../../images":3}],76:[function(t,e,i){"use strict";e.exports=function(){function t(t){this.label=t,this.data=[""],this.rowIndexes=[],this.hasChildren=!1,this.depth=0,this.height=1,this.expanded=!1}var e="                                                                                ";return t.prototype.isNullObject=!1,t.prototype.getValue=function(t){return this.data[t]},t.prototype.prune=function(t){this.depth=t,this.data[0]=this.computeDepthString()},t.prototype.computeDepthString=function(){var t=e.substring(0,2+3*this.depth)+this.label;return t},t.prototype.computeHeight=function(){return 1},t.prototype.getAllRowIndexes=function(){return this.rowIndexes},t.prototype.computeAggregates=function(t){this.applyAggregates(t)},t.prototype.applyAggregates=function(t){var e=t.hasGroups()?1:0,i=this.getAllRowIndexes();if(0!==i.length){var n=t.aggregates,o=this.data;o.length=n.length+e;var r=t.sorterInstance;r.indexes=i;for(var s=0;s<n.length;s++){var l=n[s];o[s+e]=l(r)}this.data=o}},t.prototype.buildView=function(t){t.view.push(this)},t.prototype.toggleExpansionState=function(){},t}()},{}],77:[function(t,e,i){"use strict";var n=t("./Map"),o=t("./DataNodeBase");e.exports=function(){function t(t){o.call(this,t),this.children=new n}var e={"true":"▾","false":"▸"},i="                                                                                ";return t.prototype=Object.create(o.prototype),t.prototype.prune=function(t){this.depth=t,this.children=this.children.values;for(var e=0;e<this.children.length;e++){var i=this.children[e];i.prune(this.depth+1)}this.data[0]=this.computeDepthString()},t.prototype.computeDepthString=function(){var t=e[this.expanded+""],n=i.substring(0,3*this.depth)+t+" "+this.label;return n},t.prototype.getAllRowIndexes=function(){return 0===this.rowIndexes.length&&(this.rowIndexes=this.computeAllRowIndexes()),this.rowIndexes},t.prototype.computeAllRowIndexes=function(){for(var t=[],e=0;e<this.children.length;e++){var i=this.children[e],n=i.getAllRowIndexes();Array.prototype.splice.apply(t,[t.length,0].concat(n))}return t},t.prototype.toggleExpansionState=function(t){this.expanded=!this.expanded,this.data[0]=this.computeDepthString(),this.expanded&&this.computeAggregates(t)},t.prototype.computeAggregates=function(t){if(this.applyAggregates(t),this.expanded)for(var e=0;e<this.children.length;e++)this.children[e].computeAggregates(t)},t.prototype.buildView=function(t){if(t.view.push(this),this.expanded)for(var e=0;e<this.children.length;e++){var i=this.children[e];i.buildView(t)}},t.prototype.computeHeight=function(){var t=1;if(this.expanded){for(var e=0;e<this.children.length;e++)t+=this.children[e].computeHeight();this.height=t}else this.height=1;return this.height},t}()},{"./DataNodeBase":76,"./Map":87}],78:[function(t,e,i){"use strict";var n=t("./DataNodeBase");e.exports=function(){function t(t){n.call(this,t)}return t.prototype=Object.create(n.prototype),t.prototype.prune=function(t){this.depth=t,this.data[0]=this.computeDepthString()},t.prototype.computeHeight=function(){return 1},t.prototype.getAllRowIndexes=function(){return this.rowIndexes},t.prototype.computeAggregates=function(t){this.applyAggregates(t)},t.prototype.buildView=function(t){t.view.push(this)},t}()},{"./DataNodeBase":76}],79:[function(t,e,i){"use strict";var n=t("./DataNodeGroup");e.exports=function(){function t(t){n.call(this,t),this.height=0,this.expanded=!0}return t.prototype=Object.create(n.prototype),t.prototype.prune=function(){this.children=this.children.values;for(var t=0;t<this.children.length;t++){var e=this.children[t];e.prune(0)}},t.prototype.buildView=function(t){for(var e=0;e<this.children.length;e++){var i=this.children[e];i.buildView(t)}},t.prototype.computeHeight=function(){for(var t=1,e=0;e<this.children.length;e++)t+=this.children[e].computeHeight();return this.height=t,this.height},t}()},{"./DataNodeGroup":77}],80:[function(t,e,i){"use strict";var n=t("./DataSourceSorter"),o=t("./DataNodeTree"),r=t("./DataNodeGroup"),s=t("./DataNodeLeaf");e.exports=function(){function t(t){this.tree=new o("Totals"),this.indexes=[],this.dataSource=t,this.aggregates=[],this.headers=[],this.groupBys=[],this.view=[],this.sorterInstance={},this.presortGroups=!0,this.lastAggregate={},this.setAggregates({})}var e=function(t){var e=t.replace(/[_-]/g," ").replace(/[A-Z]/g," $&").split(" ").map(function(t){return(t.charAt(0).toUpperCase()+t.slice(1)).trim()});return e=e.filter(function(t){return 0!==t.length}),e.join(" ").trim()};return t.prototype.isNullObject=!1,t.prototype.setAggregates=function(t){this.lastAggregate=t;var e,i=[];this.clearAggregations(),this.headers.length=0;for(var n in t)i.push([n,t[n]]);for(this.hasGroups()&&this.headers.push("Tree"),e=0;e<i.length;e++){var o=i[e];this.addAggregate(o[0],o[1])}},t.prototype.addAggregate=function(t,i){this.headers.push(e(t)),this.aggregates.push(i)},t.prototype.setGroupBys=function(t){this.groupBys.length=0;for(var e=0;e<t.length;e++)this.groupBys.push(t[e]);this.setAggregates(this.lastAggregate)},t.prototype.addGroupBy=function(t){this.groupBys.push(t)},t.prototype.hasGroups=function(){return this.groupBys.length>0},t.prototype.hasAggregates=function(){return this.aggregates.length>0},t.prototype.apply=function(){this.buildGroupTree()},t.prototype.clearGroups=function(){this.groupBys.length=0},t.prototype.clearAggregations=function(){this.aggregates.length=0,this.headers.length=0},t.prototype.buildGroupTree=function(){var t,e,i,l,a,u=function(t,e){return l=new r(t),e.set(t,l),l},c=function(t,e){return l=new s(t),e.set(t,l),l},h=this.groupBys,d=this.dataSource,g=d.getRowCount();if(this.presortGroups)for(t=0;t<h.length;t++)i=h[h.length-t-1],d=new n(d),d.sortOn(i);var f=this.tree=new o("Totals"),p=f,v=h.length-1;for(e=0;g>e;e++){for(t=0;t<h.length;t++)i=h[t],l=d.getValue(i,e),a=t===v?c:u,p=p.children.getIfAbsent(l,a);p.rowIndexes.push(e),p=f}this.sorterInstance=new n(d),f.prune(),this.tree.computeAggregates(this),this.buildView()},t.prototype.buildView=function(){this.view.length=0,this.tree.computeHeight(),this.tree.buildView(this)},t.prototype.viewMakesSense=function(){return this.hasAggregates()},t.prototype.getValue=function(t,e){if(!this.viewMakesSense())return this.dataSource.getValue(t,e);var i=this.view[e];return i?i.getValue(t):null},t.prototype.setValue=function(t,e,i){return this.viewMakesSense()?void 0:this.dataSource.setValue(t,e,i)},t.prototype.getColumnCount=function(){if(!this.viewMakesSense())return this.dataSource.getColumnCount();var t=this.getHeaders().length;return t},t.prototype.getRowCount=function(){return this.viewMakesSense()?this.view.length:this.dataSource.getRowCount()},t.prototype.click=function(t){var e=this.view[t];e.toggleExpansionState(this),this.buildView()},t.prototype.getHeaders=function(){return this.viewMakesSense()?this.headers:this.dataSource.getHeaders()},t.prototype.setHeaders=function(t){this.dataSource.setHeaders(t)},t.prototype.getFields=function(){return this.dataSource.getFields()},t.prototype.setFields=function(t){return this.dataSource.setFields(t)},t.prototype.getGrandTotals=function(){var t=this.tree;return[t.data]},t.prototype.getRow=function(t){if(!this.viewMakesSense())return this.dataSource.getRow(t);var e=this.view[t];return e?e:this.tree},t.prototype.setData=function(t){this.dataSource.setData(t),this.apply()},t}()},{"./DataNodeGroup":77,"./DataNodeLeaf":78,"./DataNodeTree":79,"./DataSourceSorter":84}],81:[function(t,e,i){"use strict";e.exports=function(){function t(t){this.dataSource=t,this.indexes=[]}return t.prototype.isNullObject=!1,t.prototype.transposeY=function(t){return 0!==this.indexes.length?this.indexes[t]:t},t.prototype.getValue=function(t,e){var i=this.dataSource.getValue(t,this.transposeY(e));return i},t.prototype.getRow=function(t){return this.dataSource.getRow(this.transposeY(t))},t.prototype.setValue=function(t,e,i){this.dataSource.setValue(t,this.transposeY(e),i)},t.prototype.getColumnCount=function(){return this.dataSource.getColumnCount()},t.prototype.getFields=function(){return this.dataSource.getFields()},t.prototype.setFields=function(t){return this.dataSource.setFields(t)},t.prototype.click=function(t){return this.dataSource.click(this.transposeY(t))},t.prototype.getRowCount=function(){return 0!==this.indexes.length?this.indexes.length:this.dataSource.getRowCount()},t.prototype.setHeaders=function(t){return this.dataSource.setHeaders(t)},t.prototype.getHeaders=function(){return this.dataSource.getHeaders()},t.prototype.getGrandTotals=function(){return this.dataSource.getGrandTotals()},t.prototype.initializeIndexVector=function(){for(var t=this.dataSource.getRowCount(),e=new Array(t),i=0;t>i;i++)e[i]=i;this.indexes=e},t.prototype.setData=function(t){this.dataSource.setData(t)},t}()},{}],82:[function(t,e,i){"use strict";var n=t("./DataSourceDecorator");e.exports=function(){function t(t){n.call(this,t,!1),this.filters=[]}return t.prototype=Object.create(n.prototype),t.prototype.add=function(t,e){e.columnIndex=t,this.filters.push(e)},t.prototype.set=function(t,e){e.columnIndex=t,this.filters.push(e)},t.prototype.clearAll=function(){this.filters.length=0,this.indexes.length=0},t.prototype.applyAll=function(){if(0===this.filters.length)return void(this.indexes.length=0);var t=this.indexes;t.length=0;for(var e=this.dataSource.getRowCount(),i=0;e>i;i++)this.applyFiltersTo(i)&&t.push(i)},t.prototype.applyFiltersTo=function(t){for(var e=this.filters,i=!0,n=0;n<e.length;n++){var o=e[n],r=this.dataSource.getRow(t);i=i&&o(this.dataSource.getValue(o.columnIndex,t),r,t)}return i},t.prototype.getRowCount=function(){return 0!==this.indexes.length?this.indexes.length:0!==this.filters.length?0:this.dataSource.getRowCount()},t}()},{"./DataSourceDecorator":81}],83:[function(t,e,i){"use strict";var n=t("./DataSourceDecorator");e.exports=function(){function t(t){n.call(this,t,!1),this.filter=null}return t.prototype=Object.create(n.prototype),t.prototype.set=function(t){this.filter=t},t.prototype.clear=function(){this.filter=null,this.indexes.length=0},t.prototype.getRowCount=function(){return 0!==this.indexes.length?this.indexes.length:this.filter?0:this.dataSource.getRowCount()},t.prototype.apply=function(t){if(!this.filter)return void(this.indexes.length=0);var e=this.visibleColumnMap=[];t.forEach(function(t){e.push(t.index)});var i=this.indexes;i.length=0;for(var n=this.dataSource.getRowCount(),o=0;n>o;o++)this.applyFilterTo(o)&&i.push(o)},t.prototype.applyFilterTo=function(t){for(var e=!1,i=this.filter,n=this.visibleColumnMap.length,o=this.dataSource.getRow(t),r=0;n>r;r++){var s=this.visibleColumnMap[r];if(e=e||i(this.dataSource.getValue(s,t),o,t))return!0}return!1},t}()},{"./DataSourceDecorator":81}],84:[function(t,e,i){"use strict";var n=t("./Utils.js"),o=t("./DataSourceDecorator"),r=function(t){var e="f"===(typeof t)[0],i=e?t():t;return i};e.exports=function(){function t(t){o.call(this,t),this.descendingSort=!1}return t.prototype=Object.create(o.prototype),t.prototype.sortOn=function(t,e){if(0===e)return void(this.indexes.length=0);this.initializeIndexVector();var i=this;n.stableSort(this.indexes,function(e){var n=i.dataSource.getValue(t,e);return n=r(n)},e)},t}()},{"./DataSourceDecorator":81,"./Utils.js":88}],85:[function(t,e,i){"use strict";var n=t("./DataSourceDecorator"),o=t("./DataSourceSorter");e.exports=function(){function t(t){n.call(this,t),this.sorts=[],this.last=this.dataSource}return t.prototype=Object.create(n.prototype),t.prototype.getRow=function(t){return this.last.getRow(t)},t.prototype.sortOn=function(t,e){this.sorts.push([t,e])},t.prototype.applySorts=function(){for(var t=this.sorts,e=this.dataSource,i=0;i<t.length;i++){var n=t[i];e=new o(e),e.sortOn(n[0],n[1])}this.last=e},t.prototype.clearSorts=function(){this.sorts.length=0,this.last=this.dataSource},t.prototype.getValue=function(t,e){return this.last.getValue(t,e)},t.prototype.setValue=function(t,e,i){this.last.setValue(t,e,i)},t}()},{"./DataSourceDecorator":81,"./DataSourceSorter":84}],86:[function(t,e,i){"use strict";e.exports=function(){function t(t,e){this.fields=e||i(t[0]),this.headers=[],this.data=t}var e=function(t){var e=t.replace(/[_-]/g," ").replace(/[A-Z]/g," $&").split(" ").map(function(t){return t.charAt(0).toUpperCase()+t.slice(1)});return e.join(" ")},i=function(t){if(!t)return[];var e=[].concat(Object.getOwnPropertyNames(t).filter(function(t){return"__"!==t.substr(0,2)}));return e};return t.prototype.isNullObject=!1,t.prototype.getValue=function(t,e){var i=this.data[e];if(!i)return null;var n=i[this.fields[t]];return n},t.prototype.getRow=function(t){return this.data[t]},t.prototype.setValue=function(t,e,i){this.data[e][this.fields[t]]=i},t.prototype.getColumnCount=function(){return this.getFields().length},t.prototype.getRowCount=function(){return this.data.length},t.prototype.getFields=function(){return this.fields},t.prototype.getHeaders=function(){return this.headers&&0!==this.headers.length||(this.headers=this.getDefaultHeaders().map(function(t){return e(t)})),this.headers},t.prototype.getDefaultHeaders=function(){return this.getFields()},t.prototype.setFields=function(t){this.fields=t},t.prototype.setHeaders=function(t){this.headers=t},t.prototype.getGrandTotals=function(){},t.prototype.setData=function(t){this.data=t},t}()},{}],87:[function(t,e,i){e.exports=t(70)},{}],88:[function(t,e,i){"use strict";var n=t("./stableSort.js"),o=t("./Map.js");e.exports=function(){return{stableSort:n,Map:o}}()},{"./Map.js":87,"./stableSort.js":91}],89:[function(t,e,i){"use strict";e.exports=function(){return{count:function(){return function(t){var e=t.getRowCount();return e}},sum:function(t){return function(e){for(var i=0,n=e.getRowCount(),o=0;n>o;o++)i+=e.getValue(t,o);return i}},min:function(t){return function(e){for(var i=1/0,n=e.getRowCount(),o=0;n>o;o++)i=Math.min(i,e.getValue(t,o));return i}},max:function(t){return function(e){for(var i=-(1/0),n=e.getRowCount(),o=0;n>o;o++)i=Math.max(i,e.getValue(t,o));return i}},avg:function(t){return function(e){for(var i=0,n=e.getRowCount(),o=0;n>o;o++)i+=e.getValue(t,o);return i/n}},first:function(t){return function(e){return e.getValue(t,0)}},last:function(t){return function(e){var i=e.getRowCount();return e.getValue(t,i-1)}},stddev:function(t){return function(e){var i,n=0,o=e.getRowCount();for(i=0;o>i;i++)n+=e.getValue(t,i);var r=n/o,s=0;for(i=0;o>i;i++){var l=e.getValue(t,i)-r;s+=l*l}var a=Math.sqrt(s/o);return a}}}}()},{}],90:[function(t,e,i){"use strict";var n=t("./JSDataSource"),o=t("./DataSourceSorter"),r=t("./DataSourceSorterComposite"),s=t("./DataSourceFilter"),l=t("./DataSourceGlobalFilter"),a=t("./DataSourceAggregator"),u=t("./aggregations");e.exports=function(){return{JSDataSource:n,DataSourceSorter:o,DataSourceSorterComposite:r,DataSourceFilter:s,DataSourceGlobalFilter:l,DataSourceAggregator:a,aggregations:u}}()},{"./DataSourceAggregator":80,"./DataSourceFilter":82,"./DataSourceGlobalFilter":83,"./DataSourceSorter":84,"./DataSourceSorterComposite":85,"./JSDataSource":86,"./aggregations":89}],91:[function(t,e,i){"use strict";var n=function(t,e){return function(i,n){var o=i[0],r=n[0];if(o===r)o=e?n[1]:i[1],r=e?i[1]:n[1];else{if(null===r)return-1;if(null===o)return 1}return t(o,r)}},o=function(t,e){return t-e},r=function(t,e){return e-t},s=function(t,e){return e>t?-1:1},l=function(t,e){return t>e?-1:1},a=function(t){return"number"===t?n(o,!1):n(s,!1)},u=function(t){return"number"===t?n(r,!0):n(l,!0)};e.exports=function(){function t(t,e,i){var n,o;if(0!==t.length&&(void 0===i&&(i=1),0!==i)){var r=typeof e(0);n=1===i?a(r):u(r);var s=new Array(t.length);for(o=0;o<t.length;o++)s[o]=[e(o),o];for(s.sort(n),o=0;o<t.length;o++)t[o]=s[o][1]}}return t}()},{}]},{},[48]);