!function e(t,i,n){function o(s,a){if(!i[s]){if(!t[s]){var l="function"==typeof require&&require;if(!a&&l)return l(s,!0);if(r)return r(s,!0);throw new Error("Cannot find module '"+s+"'")}var u=i[s]={exports:{}};t[s][0].call(u.exports,function(e){var i=t[s][1][e];return o(i?i:e)},u,u.exports,e,t,i,n)}return i[s].exports}for(var r="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}({1:[function(e,t,i){"use strict";function n(e,t){o(r[e],e,t)}var o=e("css-injector"),r={grid:["div#grid-container {","    position: relative;","    display: inline-block;","    -webkit-user-select: none;","    -moz-user-select: none;","    -ms-user-select: none;","    -o-user-select: none;","    user-select: none;","    overflow: hidden; }","visible { opacity: 0.75; }","hidden { opacity: 0.0; }","editor {","    position: absolute;","    display: none;","    border: solid 2px black;","    outline: 0;","    padding: 0;","    z-index: 1000; }"],"list-dragon":["div.dragon-list, li.dragon-pop {","    font-family: Roboto, sans-serif;","    text-transform: capitalize; }","div.dragon-list {","    position: absolute;","    top: 4%;","    left: 4%;","    height: 92%;","    width: 20%; }","div.dragon-list:nth-child(2) { left: 28%; }","div.dragon-list:nth-child(3) { left: 52%; }","div.dragon-list:nth-child(4) { left: 76%; }","div.dragon-list > div, div.dragon-list > ul > li, li.dragon-pop { line-height: 46px; }","div.dragon-list > ul { top: 46px; }","div.dragon-list > ul > li:not(:last-child)::before, li.dragon-pop::before {","    content: '\\2b24';","    color: #b6b6b6;","    font-size: 30px;","    margin: 8px 14px 8px 8px; }","li.dragon-pop { opacity:.8; }"]};t.exports=n},{"css-injector":4}],2:[function(e,t,i){t.exports={calendar:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAYAAACNMs+9AAAAc0lEQVR4nIXQwQkCMRSE4U9ZLMCT9Xjaq2AfNhfYU5oQLMAOtoN48EWei5iBIRPe/yYQ3qrhf1lFG7iKcEaJxSfukUvMWgdHavt0uWHtg2QwxXnAnJZ2uOLyVZtybzzhgWNmfoFl0/YB87NbzR1cjP9xeQHSDC6mcL1xFQAAAABJRU5ErkJggg=="},checked:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA0AAAAPCAYAAAA/I0V3AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAYJJREFUOE+NkstLglEQxf0fahG0iFrUxm2ElFDYLohCqCDaCAkWPaxIRbFFEJEaGEKLDCoMETRFUAMLyaIHBUG6sSKIMtKFqEhLT818ZUgmDhzu3DPn9z0uV1RrmUwmyGQyqNVqfFvViwBxu5RFPZuLSyGMKhz/qlEsRV19K8xm6y+w7bpBPFnAferjj3bdQX6DpHcAUwavAHUN2RGIZxBJZHH2mC/TUeydwwTZvBegLENNgw7sX6Wh1FswNmPEmjPCDyGRRwCtW9E3tMgdAtQw7GZjYcNX+gza2wJ3ZXsSZUuQ0vWCOV8SHfJJ/uluhbHUj1v8PKNMszIoQNRMHCShD6Wh8zyhrbOPwz8w+STKlCCJ7oRNUzQH63kBs5thBghePXxlj2aUoSxDPcuXPNiLAc5EEZ6HIkbmV2DYiXBPHs0o079+K0DTVj/s11mE00A0L+g4VcDp10qKZMAzytBhMaTRaPmYg885DlcSzSij0eoEiIouoUqlqqqaL2rlEok+Ad4vlfzPoVDsAAAAAElFTkSuQmCC"},"down-rectangle":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAAkAAAAECAYAAABcDxXOAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAABpJREFUGFdjgIL/eDAKIKgABggqgAE0BQwMAPTlD/Fpi0JfAAAAAElFTkSuQmCC"},"filter-off":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAAChSURBVChTzZHBCoUgFET9TqEiskgyWoutQvRLRIr+cR7XQAjiJW/1BgZmMUevXsY5xy9OoDEGMcYiUzeB67qibVuwQjVNA6311V+WBeM4vsLDMEApde/1fY9pmtI453neHEKAlBJd1z0fXtc16PbjODK07zvmeUZVVd8nooc75zJIOX3Gm6i0bVsGKf8xKIRIuyJTLgJJ3nvQzsjW2geIsQ/pr9hMVrSncAAAAABJRU5ErkJggg=="},"filter-on":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAMCAYAAABSgIzaAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuNWWFMmUAAACoSURBVChTY3BqfP2fHAzWmDbj7f8p294RhVOBasEa02e+/e/VBmQQCTxaX/9PnvYGoj5ywpv/Qd2ENft3vv4f1gfVBAP+nW/+h/a+ATtn1q73KHjytvdgg3070DTBgHvL6/8g22fsQGiaDmSHA21xaybgIpDHixa8hWssnA8NDEIApCh3LkIjiD2INYJCL2X6W3B8gdhEaQQBUOCA4gyE8+e9xaKJgQEA/74BNE3cElkAAAAASUVORK5CYII="},unchecked:{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA0AAAAPCAYAAAA/I0V3AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwgAADsIBFShKgAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAARBJREFUOE+9krtug1AQRPldSio7FQ1tZImOkoKOBomGT0EURC5ino54yTw90WywQhTkIkVWGoF2zuxdrlD+t0zThKZpT0Vmxb8CQRCg6zr0fb8rer7vfwcPxxdcrx+YpgnzPGNZlh9ibxxHlGUJshLSdV0at9tNpg7DIBrX5+OkPM9BVkKGYSBJEtR1jbZrBdiqbVtUVYU0TUFWQq+nE+I4xvvlImGaW7FHjwxZCVmWhbfzGVmWoSgKWXUr9uiRISshx3FkEldomubXauzRI0NWQp7nyUR+NG/rfr/jUXxnjx5vmKyEbNuWox9Xvid6ZMhK6HA4wnVdhGGIKIp2RY8MWQmx+JuoqvpUZFb8L6UonyYL3uOtrFH+AAAAAElFTkSuQmCC"},"up-down-spin":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGJJREFUOE+lkwEKACEIBH2Zb/PnHsoGeaVJDUjGOgRRpKpkiIj+y4MME3eDR7kaKOVNsJyMNjIHzGy9YnW6J7qIcrriQimeCqORNABd0fpRTkt8uVUj7EsxC6vs/q3e/Q6iD2bwnByjPXHNAAAAAElFTkSuQmCC"},"up-down":{type:"image/png",data:"iVBORw0KGgoAAAANSUhEUgAAAA4AAAAPCAYAAADUFP50AAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOwQAADsEBuJFr7QAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC41ZYUyZQAAAGFJREFUOE+lkkEKQCEIRD2ZJ3Ph3iN4WD9GflpYhj0YYowpGgJmbikd3gjMDFokwbuT1iAiurG5nomgqo5QaPo9ERQRI6Jf7sfGjudy2je23+i0Wl2oQ85TOdlfrJQOazF8br+rqTXQKn0AAAAASUVORK5CYII="}}},{}],3:[function(e,t,i){"use strict";var n=e("object-iterators"),o=e("./images");n(o).each(function(e,t){var i=new Image;i.src="data:"+e.type+";base64,"+e.data,o[t]=i}),o.checkbox=function(e){return o[e?"checked":"unchecked"]},o.filter=function(e){return o[e?"filter-on":"filter-off"]},t.exports=o},{"./images":2,"object-iterators":24}],4:[function(e,t,i){"use strict";function n(e,t,i){if("string"==typeof i){if(i=document.querySelector(i),!i)throw"Cannot find reference element for CSS injection."}else if(i&&!(i instanceof Element))throw"Given value not a reference element.";var o=i&&i.parentNode||document.head||document.getElementsByTagName("head")[0];if(!t||(t=n.idPrefix+t,!o.querySelector("#"+t))){var r=document.createElement("style");return r.type="text/css",t&&(r.id=t),e instanceof Array&&(e=e.join("\n")),e="\n"+e+"\n",r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e)),void 0===i&&(i=o.firstChild),o.insertBefore(r,i),r}}n.idPrefix="injected-stylesheet-",t.exports=n},{}],5:[function(e,t,i){"use strict";function n(e,t){function i(){t.preInitialize&&t.preInitialize.apply(this,arguments),o.apply(this,arguments),t.postInitialize&&t.postInitialize.apply(this,arguments)}function r(e,i){s[i]=t[e]}switch(arguments.length){case 0:t={};break;case 1:if(t=e,"object"!=typeof t)throw"Single parameter overload must be object.";e=void 0;break;case 2:if("string"!=typeof e||"object"!=typeof t)throw"Two parameter overload must be string, object.";break;default:throw"Too many parameters"}i.extend=n;var s=i.prototype=Object.create(this.prototype);s.constructor=i,e&&n.debug&&(s.$$CLASS_NAME=e);for(var a in t)if(t.hasOwnProperty(a)){var l=t[a];switch(a){case"initializeOwn":break;case"aliases":for(var u in l)l.hasOwnProperty(u)&&r(l[u],u);break;default:"string"==typeof l&&"#"===l[0]?r(l,a.substr(1)):s[a]=l}}return i}function o(){function e(n){var o=Object.getPrototypeOf(n);o.constructor!==Object&&(e(o),o.hasOwnProperty("initialize")&&o.initialize.apply(t,i))}var t=this,i=arguments;e(t)}n.Base=function(){},n.Base.extend=n,t.exports=n},{}],6:[function(e,t,i){"use strict";var n=e("object-iterators"),o=e("pop-menu"),r=e("./js/FilterNode"),s=e("./js/FilterTree"),a=e("./js/conditionals"),l=e("./js/copy-input"),u=e("./js/template");s.conditionals=a,s.FilterTreeError=r.FilterTreeError,s._=n,s.popMenu=o,s.copy=l,s.template=u,t.exports=s},{"./js/FilterNode":8,"./js/FilterTree":9,"./js/conditionals":10,"./js/copy-input":11,"./js/template":14,"object-iterators":24,"pop-menu":25}],7:[function(e,t,i){"use strict";function n(e){var t=e.target;if(t.classList.remove("filter-tree-error"),u.setWarningClass(t),t===this.view.column&&r.call(this,t.value),t.value){if(!t.multiple)for(;(t=t.nextElementSibling)&&(!("name"in t)||""!==t.value.trim()););t&&""===t.value.trim()&&(t.value="",u.clickIn(t))}this.eventHandler&&this.eventHandler(e)}function o(e){var t=l.findItem(this.schema,e);return!t&&[]||t.opMenu||this.typeOpMenu&&this.typeOpMenu[t.type]||this.treeOpMenu}function r(e){var t=o.call(this,e);if(t!==this.oldOpMenu){var i=this.makeElement(t,"operator");i.value=this.view.operator.value,this.el.replaceChild(i,this.view.operator),this.view.operator=i,u.setWarningClass(i),this.opMenu=t}}function s(e){setTimeout(function(){e.classList.add("filter-tree-error"),u.clickIn(e)},0)}function a(e){var t,i;switch(e.type){case"checkbox":case"radio":for(e=document.querySelectorAll("input[name='"+e.name+"']:enabled:checked"),t=[],i=0;i<e.length;i++)t.push(e[i].value);break;case"select-multiple":for(e=e.options,t=[],i=0;i<e.length;i++)!e.disabled&&e.selected&&t.push(e[i].value);break;default:t=e.value}return t}var l=e("pop-menu"),u=e("./FilterNode"),c=e("./template"),h=e("./conditionals"),d={to:Number,not:isNaN},g={to:function(e){return new Date(e)},not:isNaN},f=u.extend("FilterLeaf",{name:"column = value",destroy:function(){if(this.view)for(var e in this.view)this.view[e].removeEventListener("change",this.onChange)},createView:function(){var e=this.el=document.createElement("span");if(e.className="filter-tree-editor filter-tree-default",this.state.column);else var t=this.schema&&1===this.schema.length&&this.schema[0],i=t&&(t.name||t);this.view={column:this.makeElement(this.schema,"column",this.sortColumnMenu),operator:this.makeElement(o.call(this,i),"operator"),literal:this.makeElement()},e.appendChild(document.createElement("br"))},loadState:function(){var e=this.state;if(e){var t,i,n,o,s,a=[];for(var l in e)if(!u.optionsSchema[l])switch(t=this[l]=e[l],i=this.view[l],i.type){case"checkbox":case"radio":for(i=document.querySelectorAll("input[name='"+i.name+"']"),n=0;n<i.length;n++)i[n].checked=t.indexOf(i[n].value)>=0;break;case"select-multiple":for(i=i.options,n=0,o=!1;n<i.length;n++,o=o||s)s=t.indexOf(i[n].value)>=0,i[n].selected=s;u.setWarningClass(i,o);break;default:i.value=t,u.setWarningClass(i)!==t?a.push({key:l,value:t}):"column"===l&&r.call(this,t)}if(a.length){var h=a.length>1,d=c(h?"notes":"note"),g=d.querySelector(".footnote");a.forEach(function(e){var t=h?document.createElement("li"):g;for(e=c("optionMissing",e.key,e.value);e.length;)t.appendChild(e[0]);h&&g.appendChild(t)})}this.notesEl=d}},converters:{number:d,"int":d,"float":d,date:g},invalid:function(e){var t,i;for(t in this.view){var n=this.view[t],o=a(n).trim();if(""===o){var r=e&&e.focus;throw(void 0===r||r)&&s(n),new u.FilterTreeError("Blank "+t+" control.\nComplete the filter or delete it.",this)}this[t]=o}this.op=h.operators[this.operator],this.converter=this.converters[this.type||this.op.type||(i=l.findItem(this.schema,this[this.view.column]))&&i.type]},p:function(e){return e[this.column]},q:function(){return this.literal},test:function(e){var t,i,n,o,r;return void 0===(t=this.p(e))||void 0===(i=this.q(e))?!1:!(r=this.converter)||r.not(n=r.to(t))||r.not(o=r.to(i))?this.op.test(t+"",i+""):this.op.test(n,o)},toJSON:function(){var e={};this.editor&&(e.editor=this.editor);for(var t in this.view)e[t]=this[t];return this.schema!==this.parent.schema&&(e.schema=this.schema),e},getState:function(e,t){var i="",n=e&&e.syntax||"object";switch(n){case"object":i=this.toJSON();break;case"JSON":i=JSON.stringify(this,null,t&&t.space)||"";break;case"SQL":i=this.getSyntax(h.sqlOperators);break;case"CQL":i=this.getSyntax(h.filterCellOperators),"="===i[0]&&(i=i.substr(1));break;default:throw new u.FilterTreeError('Unknown syntax option "'+n[0]+'"')}return i},getSyntax:function(e){return e[this.operator].make.call(e,this.column,this.literal)},makeElement:function(e,t,i){for(var o,r,s,a=e,d=e?"SELECT":"INPUT";a instanceof Array;)a=1!==a.length||l.isGroupProxy(a[0])?void 0:a[0];return a?(o=c("lockedColumn",a.alias||a.name||a,a.name||a.alias||a),r=o.querySelector("input")):(s={prompt:t,sort:i,group:function(e){return h.groups[e]}},o=l.build(d,e,s),"text"===o.type&&this.eventHandler&&this.el.addEventListener("keyup",this.eventHandler),this.onChange=this.onChange||n.bind(this),this.el.addEventListener("change",this.onChange),u.setWarningClass(o),r=o),this.el.appendChild(o),r}});t.exports=f},{"./FilterNode":8,"./conditionals":10,"./template":14,"pop-menu":25}],8:[function(e,t,i){"use strict";function n(e,t){this.message=e,this.node=t}function o(e,t){if(e){if("string"==typeof e){p.test(e)&&(e=document.querySelector(e).value);var i=t&&t.syntax||v.test(e)&&"JSON";switch(i){case"JSON":try{e=JSON.parse(e)}catch(o){throw new n("JSON parser: "+o)}break;case"SQL":try{e=h(e,t)}catch(o){throw new n("SQL WHERE clause parser: "+o)}}}if("object"!=typeof e)throw new n("Unexpected input state.")}return e}var r=e("object-iterators"),s=e("extend-me"),a=s.Base;s.debug=!0;var l=e("./css"),u=e("./template"),c=e("./conditionals"),h=e("./sql-where-parse"),d="OL",g="LI",f=a.extend({initialize:function(e){var t=this,i=e&&e.state&&o(e.state),n=e&&e.parent;this.state=i,this.parent=n,this.root=n&&n.root||this,this.root.stylesheet=this.root.stylesheet||l(e&&e.cssStylesheetReferenceElement),r(f.optionsSchema).each(function(o,r){if(!t.hasOwnProperty(r)&&!o.ignore){var s=e&&e[r]||i&&i[r]||!o.own&&(n&&n[r]||o["default"]);s&&(t[r]=s)}}),r(e).each(function(e,i){f.optionsSchema[i]||(t[i]=e)}),this.setState(i,e)},render:function(){if(this.parent){var e=document.createElement(g);if(this.notesEl&&e.appendChild(this.notesEl),!this.state||!this.state.locked){var t=u("removeButton");t.addEventListener("click",this.remove.bind(this)),e.appendChild(t)}e.appendChild(this.el),this.parent.el.querySelector(d).appendChild(e)}},setState:function(e,t){var i=this.el;if(this.state=o(e,t),this.createView(),this.loadState(),this.render(),i){var n=this.el;this.parent&&(i=i.parentNode,n=n.parentNode),i.parentNode.replaceChild(n,i)}},remove:function(){var e=this.parent;e&&(this.eventHandler&&this.eventHandler({type:"delete"}),e.persist||e.children.length>1?(this.el.parentNode.remove(),e.children.splice(e.children.indexOf(this),1)):e.remove())}});f.optionsSchema={cssStylesheetReferenceElement:{ignore:!0},ownSchema:{own:!0},schema:{},editor:{},eventHandler:{},type:{own:!0},persist:{own:!0},treeOpMenu:{"default":c.defaultOpMenu},typeOpMenu:{},sortColumnMenu:{}},f.setWarningClass=function(e,t){return arguments.length<2&&(t=e.value),e.classList[t?"remove":"add"]("filter-tree-warning"),t},n.prototype=Object.create(Error.prototype),n.prototype.name="FilterTreeError",f.FilterTreeError=n,f.clickIn=function(e){e&&("SELECT"===e.tagName?setTimeout(function(){e.dispatchEvent(new MouseEvent("mousedown"))},0):e.focus())};var p=/^[#\.]?\w+(\s*[ \.\-|*+#:~^$>]+\s*\w+.*)?$/,v=/^\s*[\[\{]/;t.exports=f},{"./conditionals":10,"./css":12,"./sql-where-parse":13,"./template":14,"extend-me":5,"object-iterators":24}],9:[function(e,t,i){"use strict";function n(e){var t=e.target;t.parentElement===this.el&&("subexp"===t.value?this.children.push(new f({parent:this})):this.add({state:{editor:t.value},focus:!0}),t.selectedIndex=0)}function o(e){var t=e.target;if("filter-tree-op-choice"===t.className){this.operator=t.value;var i=this.el.querySelectorAll("label>input.filter-tree-op-choice[name="+t.name+"]");Array.prototype.forEach.call(i,function(e){e.parentElement.style.textDecoration=e.checked?"none":"line-through"});for(var n in h)this.el.classList.remove(n);this.el.classList.add(this.operator)}}function r(e){this.children.forEach(function(t){t instanceof u?t.invalid(e):t.children.length&&r.call(t,e)})}var s=e("pop-menu"),a=e("unstrungify"),l=e("./FilterNode"),u=e("./FilterLeaf"),c=e("./template"),h=e("./tree-operators"),d=e("./conditionals"),g=0,f=l.extend("FilterTree",{editors:{Default:u},addEditor:function(e,t){t?this.editors[e]=u.extend(t):delete this.editors[e]},createView:function(){this.el=c(this.type||"subtree",++g,s.formatItem(this.schema[0]));var e=this.el.querySelector(":scope>select");if(e){var t,i,r=this.editors;1===e.length&&1===this.editors.length?t=e:(t=i=document.createElement("optgroup"),i.label="Conditional Expressions"),Object.keys(r).forEach(function(e){var i=r[e].prototype.name||e;t.appendChild(new Option(i,e))}),i&&e.add(i),this.el.addEventListener("change",n.bind(this))}this.el.addEventListener("click",o.bind(this))},loadState:function(){var e=this.state;if(this.operator="op-and",this.children=[],e){if(!(e.children instanceof Array))throw new l.FilterTreeError("Expected `children` property to be an array.");if(e.operator){if(!h[e.operator])throw new l.FilterTreeError("Expected `operator` property to be one of: "+Object.keys(h));this.operator=e.operator}e.children.forEach(this.add.bind(this))}else this.add()},render:function(){var e=this.el.querySelector(":scope > label > input[value="+this.operator+"]"),t=this.el.querySelector(".filter-tree-add-conditional");e&&(e.checked=!0,o.call(this,{target:e})),t&&!this.children.length&&Object.keys(this.editors).length>1&&this["filter-tree-add-conditional"]({target:t}),l.prototype.render.call(this)},add:function(e){var t,i;return e=e||{},e.state||(e={state:e}),t=e.state.children?this.constructor:this.editors[e.state.editor||"Default"],e.parent=this,i=new t(e),this.children.push(i),e.focus&&setTimeout(function(){i.invalid({alert:!1})},750),i},invalid:function(e){e=e||{};var t,i=void 0===e.alert||e.alert,n=e.rethrow;try{r.call(this,e)}catch(o){if(t=o,n||!(o instanceof l.FilterTreeError))throw o;i&&window.alert(o.message)}return t},test:function p(e){var t=h[this.operator],i=t.seed,n=!0;return this.children.find(function(o){return o?(n=!1,o instanceof u?i=t.reduce(i,o.test(e)):o.children.length&&(i=t.reduce(i,p.call(o,e))),i===t.abort):!1}),n||(t.negate?!i:i)},getState:function v(e){var t="",i=e&&e.syntax||"object";switch(i){case"object":t=a.call(this);break;case"JSON":t=JSON.stringify(this,null,e&&e.space)||"";break;case"SQL":var n=h[this.operator].SQL,o=!this.parent&&e&&e.sqlIdQts;o&&d.pushSqlIdQts(o),this.children.forEach(function(i,o){var r=o?" "+n.op+" ":"";i&&(i instanceof u?t+=r+i.getState(e):i.children.length&&(t+=r+v.call(i,e)))}),o&&d.popSqlIdQts(),t=n.beg+(t||"NULL IS NULL")+n.end;break;case"CQL":var r=h[this.operator].filterCell.op;this.children.forEach(function(i,n){if(i)if(i instanceof u)n&&(t+=" "+r+" "),t+=i.getState(e);else if(i.children.length)throw new l.FilterTreeError("Expected conditional but found subexpression (not supported in filter cell syntax).")});break;default:throw new l.FilterTreeError('Unknown syntax option "'+i+'"')}return t},toJSON:function m(){var e={operator:this.operator,children:[]};return this.children.forEach(function(t){if(t)if(t instanceof u)e.children.push(t);else{var i=m.call(t);for(var n in l.optionsSchema)l.optionsSchema.hasOwnProperty(n)&&t[n]&&(l.optionsSchema[n].own||t[n]!==t.parent[n])&&(i[n]=t[n]);e.children.push(i)}}),e}});t.exports=f},{"./FilterLeaf":7,"./FilterNode":8,"./conditionals":10,"./template":14,"./tree-operators":15,"pop-menu":25,unstrungify:30}],10:[function(e,t,i){"use strict";function n(e){return R.unshift(e)}function o(){return R.shift()}function r(e){throw"Pure virtual method `Conditionals.prototype."+e+"` has no implementation on this instance."}function s(e,t){return t.trim().replace(/\s*,\s*/g,",").split(",").indexOf(e+"")}function a(e,t){return(e+"").toLowerCase().indexOf((t+"").toLowerCase())}function l(e,t){return(e+"").toLowerCase().substr(0,t)}function u(e,t){return(e+"").toLowerCase().substr(-t,t)}function c(e){return e.replace(/'/g,S+S)}function h(e){return S+c(e)+S}function d(e){return R[0].beg+e+R[0].end}function g(e){return e.literal?h(e.literal):d(e.identifier?e.identifier:e)}function f(e){return e.identifier?d(e.identifier):h(e.literal?e.literal:e)}var p=e("extend-me").Base,v=e("object-iterators"),m=e("regexp-like"),C="IN",w="NOT "+C,b="LIKE",y="NOT "+b,x="%",S="'",E=" ",A="",R=[];n({beg:'"',end:'"'});var k=p.extend({undefined:{test:function(){return!0},make:function(){return""}},"<":{test:function(e,t){return t>e},make:function(e,t){return this.makeDiadic("<",e,t)}},"<=":{test:function(e,t){return t>=e},make:function(e,t){return this.makeDiadic("<=",e,t)}},"=":{test:function(e,t){return e===t},make:function(e,t){return this.makeDiadic("=",e,t)}},">=":{test:function(e,t){return e>=t},make:function(e,t){return this.makeDiadic(">=",e,t)}},">":{test:function(e,t){return e>t},make:function(e,t){return this.makeDiadic(">",e,t)}},"≠":{test:function(e,t){return e!==t},make:function(e,t){return this.makeDiadic("<>",e,t)}},LIKE:{test:function(e,t){return m.cached(t,!0).test(e)},make:function(e,t){return this.makeDiadic(b,e,t)},type:"string"},"NOT LIKE":{test:function(e,t){return!m.cached(t,!0).test(e)},make:function(e,t){return this.makeDiadic(y,e,t)},type:"string"},IN:{test:function(e,t){return s(e,t)>=0},make:function(e,t){return this.makeIN(C,e,t)},type:"string"},"NOT IN":{test:function(e,t){return s(e,t)<0},make:function(e,t){return this.makeIN(w,e,t)},type:"string"},CONTAINS:{test:function(e,t){return a(e,t)>=0},make:function(e,t){return this.makeLIKE(x,x,b,e,t)},type:"string"},"NOT CONTAINS":{test:function(e,t){return a(e,t)<0},make:function(e,t){return this.makeLIKE(x,x,y,e,t)},type:"string"},BEGINS:{test:function(e,t){return t=(t+"").toLowerCase(),l(e,t.length)===t},make:function(e,t){return this.makeLIKE(A,x,b,e,t)},type:"string"},"NOT BEGINS":{test:function(e,t){return t=(t+"").toLowerCase(),l(e,t.length)!==t},make:function(e,t){return this.makeLIKE(A,x,y,e,t)},type:"string"},ENDS:{test:function(e,t){return t=(t+"").toLowerCase(),u(e,t.length)===t},make:function(e,t){return this.makeLIKE(x,A,b,e,t)},type:"string"},"NOT ENDS":{test:function(e,t){return t=(t+"").toLowerCase(),u(e,t.length)!==t},make:function(e,t){return this.makeLIKE(x,A,y,e,t)},type:"string"},makeLIKE:r.bind(this,"makeLIKE"),makeIN:r.bind(this,"makeIN"),makeDiadic:r.bind(this,"makeDiadic")});k.prototype["≤"]=k.prototype["<="],k.prototype["≥"]=k.prototype[">="];var M=k.extend({makeLIKE:function(e,t,i,n,o){var r=o.replace(/([\[_%\]])/g,"[$1]");return g(n)+E+i+E+h(e+r+t)},makeIN:function(e,t,i){return g(t)+E+e+E+"("+S+c(i).replace(/\s*,\s*/g,S+", "+S)+S+")"},makeDiadic:function(e,t,i){return g(t)+E+e+E+f(i)}}),T=k.extend({makeLIKE:function(e,t,i,n,o){var r=o.replace(/([\[_%\]])/g,"[$1]");return i.toLowerCase()+E+e+r+t},makeIN:function(e,t,i){return e.toLowerCase()+E+i.replace(/\s*,\s*/g,",")},makeDiadic:function(e,t,i){return e+i}}),P={equality:{label:"Equality",submenu:["="]},inequalities:{label:"Inequalities",submenu:["<","≤","≠","≥",">"]},sets:{label:"Set scans",submenu:["IN","NOT IN"]},strings:{label:"String scans",submenu:["CONTAINS","NOT CONTAINS","BEGINS","NOT BEGINS","ENDS","NOT ENDS"]},patterns:{label:"Pattern scans",submenu:["LIKE","NOT LIKE"]}};v(P).each(function(e,t){e.name=t}),t.exports={operators:new k,sqlOperators:new M,filterCellOperators:new T,groups:P,defaultOpMenu:[P.equality,P.inequalities,P.sets,P.strings,P.patterns],pushSqlIdQts:n,popSqlIdQts:o}},{"extend-me":5,"object-iterators":24,"regexp-like":27}],11:[function(e,t,i){"use strict";function n(e,t,i,s,a){var l,u,c=[];Array.prototype.forEach.call((e||document).querySelectorAll(n.selector),function(e){u=(a||r)(e.value),u&&c.push(u),l=e}),l&&o(l,(t||"")+c.join(i||"")+(s||""))}function o(e,t){var i,n;t?(n=e.value,e.value=t):t=e.value,e.value=r(t);try{e.select(),i=document.execCommand("copy")}catch(o){i=!1}finally{void 0!==n&&(e.value=n),e.blur()}return i}function r(e){return e.replace(/^\s* (.*?)\s*$/,"$1")}n.selector="input:not([type]), input[type=text], textarea",o.all=n,o.multiLineTrim=r,t.exports=o},{}],12:[function(e,t,i){"use strict";var n,o=e("css-injector");n=".filter-tree{font-family:sans-serif;font-size:10pt;line-height:1.5em}.filter-tree label{font-weight:400}.filter-tree input[type=checkbox],.filter-tree input[type=radio]{left:3px;margin-right:3px}.filter-tree ol{margin-top:0}.filter-tree>select{float:right;border:1px dotted grey;background-color:transparent;box-shadow:none}.filter-tree-remove-button{display:inline-block;width:15px;height:15px;border-radius:8px;background-color:#e88;font-size:11.5px;color:#fff;text-align:center;line-height:normal;font-style:normal;font-family:sans-serif;margin-right:4px;cursor:pointer}.filter-tree-remove-button:hover{background-color:transparent;color:#e88;font-weight:700;box-shadow:red 0 0 2px inset}.filter-tree-remove-button::before{content:'\\d7'}.filter-tree li::after{font-size:70%;font-style:italic;font-weight:700;color:#080}.filter-tree>ol>li:last-child::after{display:none}.op-and>ol,.op-nor>ol,.op-or>ol{padding-left:5px;margin-left:27px}.op-or>ol>li::after{margin-left:2.5em;content:'— OR —'}.op-and>ol>li::after{margin-left:2.5em;content:'— AND —'}.op-nor>ol>li::after{margin-left:2.5em;content:'— NOR —'}.filter-tree-editor>*{font-weight:700}.filter-tree-editor>span{font-size:smaller}.filter-tree-editor>input[type=text]{width:8em;padding:1px 5px 2px}.filter-tree-warning{background-color:#ffc!important;border-color:#edb!important;font-weight:400!important}.filter-tree-error{background-color:#fcc!important;border-color:#c99!important;font-weight:400!important}.filter-tree-default>:enabled{margin:0 .4em;background-color:#ddd;border:1px solid transparent}.filter-tree.filter-tree-type-column-filters>ol>li:not(:last-child){padding-bottom:.75em;border-bottom:3px double #080;margin-bottom:.75em}.filter-tree .footnotes{margin:0 0 6px;font-size:8pt;font-weight:400;line-height:normal;white-space:normal;color:#c00}.filter-tree .footnotes>p{margin:0}.filter-tree .footnotes>ul{margin:-3px 0 0;padding-left:17px;text-index:-6px}.filter-tree .footnotes>ul>li{margin:2px 0}.filter-tree .footnotes .field-name,.filter-tree .footnotes .field-value{font-weight:700;font-style:normal}.filter-tree .footnotes .field-value{font-family:monospace;color:#000;background-color:#ddd;padding:0 5px;margin:0 3px;border-radius:3px}.filter-tree-chooser{position:absolute;outline:0;box-shadow:5px 5px 10px grey;z-index:0;border:1px solid #000;border-radius:0 5px 5px;background-color:#ffffe0;font-style:italic;font-size:90%}.filter-tree-chooser>option{padding:4px 6px}.filter-tree-chooser>option:not(:last-child){border-bottom:1px dashed #666}",t.exports=o.bind(this,n,"filter-tree-base")},{"css-injector":4}],13:[function(e,t,i){"use strict";function n(e){return l=new RegExp("^("+e.beg+"(.+?)"+e.end+"|([A-Z_][A-Z_@\\$#]*)\\b)","i"),m.unshift(e)}function o(){return m.shift()}function r(e,t){var i;return t&&n(t),i=s(a(e)),t&&o(),i}function s(e){var t,i,n,o,r,a,v=[],m=0;for(e=e.trim();m<e.length;){if(t=e.substr(m).match(p)){var C=!!t[1];m+=t[0].length;for(var w=m,b=1;w<e.length&&b;++w)"("===e[w]?++b:")"===e[w]&&--b;if(b)throw'Expected ")"';if(a=s(e.substr(m,w-1-m)),"object"!=typeof a)return a;if(C){if("op-or"!==a.operator)throw"Expected OR in NOT(...) subexpression but found "+a.operator.substr(3).toUpperCase()+".";a.operator="op-nor"}m=w}else{if(t=e.substr(m).match(l),!t)throw"Expected identifier or quoted identifier.";if(i=t[2]||t[3],/^[A-Z_]/i.test(e[m])||(m+=2),m+=i.length," "===e[m]&&++m,t=e.substr(m).match(c),!t)throw"Expected relational operator.";if(n=t[1].toUpperCase(),m+=n.length," "===e[m]&&++m,t[4]&&"IN"===t[4].toUpperCase()){if(t=e.substr(m).match(g),!t)throw"Expected parenthesized list.";for(o=t[1],m+=o.length+2;t=o.match(d);)o=o.replace(d,u[t[1]])}else{if(t=e.substr(m).match(h),!t)throw"Expected string literal.";o=t[1],m+=o.length+2,o=u[o]}a={column:i,operator:n,literal:o}}if(v.push(a),m<e.length){if(" "===e[m]&&++m,t=e.substr(m).match(f),!t)throw"Expected boolean opearator.";if(r=t[1].toLowerCase(),m+=r.length,r="op-"+r,v.operator&&v.operator!==r)throw"Expected same boolean operator throughout subexpression.";v.operator=r}" "===e[m]&&++m}return 1===v.length?v[0]:{operator:v.operator,children:v}}function a(e){var t,i=0,n=0;for(u=[];(n=e.indexOf(v,n))>=0;){t=n;do if(t=e.indexOf(v,t+1),0>t)throw"Expected "+v+" (single quote).";while(e[++t]===v);u.push(e.slice(++n,--t).replace(/''/g,v)),e=e.substr(0,n)+i+e.substr(t),n=n+1+(i+"").length+1,i++}return e}var l,u,c=/^((=|>=?|<[>=]?)|(NOT )?(LIKE|IN)\b)/i,h=/^'(\d+)'/,d=/'(\d+)'/,g=/^\((.*?)\)/,f=/^(AND|OR)\b/i,p=/^(NOT ?)?\(/i,v="'",m=[];n({beg:'"',end:'"'}),r.pushSqlIdQts=n,r.popSqlIdQts=o,t.exports=r},{}],14:[function(e,t,i){"use strict";function n(e){var t=document.createElement("div"),i=s[e].toString().match(a)[1],n=Array.prototype.slice.call(arguments,1);return i=o(i,l,function(e){t.textContent=n[e],n[e]=t.innerHTML}),t.innerHTML=r.apply(this,[i].concat(n)),1===t.children.length&&1===t.childNodes.length?t.firstChild:t.childNodes}function o(e,t,i){var n,o={};for(t.lastIndex=0;n=t.exec(e);)o[n[1]]=!0;return n=Object.keys(o),n.length&&(n.forEach(i),e=e.replace(t,"{$1}")),e}var r=e("templex"),s={subtree:function(){},columnFilter:function(){},columnFilters:function(){},lockedColumn:function(){},"column-CQL-syntax":function(){},"column-SQL-syntax":function(){},removeButton:function(){},note:function(){},notes:function(){},optionMissing:function(){}},a=/\/\*\s*([^]+?)\s+\*\//,l=/\{(\d+)\:encode\}/g;t.exports=n},{templex:29}],15:[function(e,t,i){"use strict";function n(e,t){return e&&t}function o(e,t){return e||t}var r={"op-and":{reduce:n,seed:!0,abort:!1,negate:!1,filterCell:{op:"and"},SQL:{op:"AND",beg:"(",end:")"}},"op-or":{reduce:o,seed:!1,abort:!0,negate:!1,filterCell:{op:"or"},SQL:{op:"OR",beg:"(",end:")"}},"op-nor":{reduce:o,seed:!1,abort:!0,negate:!0,filterCell:{op:"nor"},SQL:{op:"OR",beg:"NOT (",end:")"}}};t.exports=r},{}],16:[function(e,t,i){"use strict";function n(e){var t=this._bound={};for(s in u)t[s]=u[s].bind(this);var i=document.createElement("div");i.classList.add("thumb"),i.onclick=t.shortStop,i.onmouseover=t.onmouseover,this.thumb=i;var o=document.createElement("div");o.classList.add("finbar-vertical"),o.appendChild(i),this.paging&&(o.onclick=t.onclick),this.bar=o,e=e||{},this.orientation="vertical",this._min=this._index=0,this._max=100;for(var s in e)if(e.hasOwnProperty(s)){var c=e[s];switch(s){case"index":this._index=c;break;case"range":r(c),this._min=c.min,this._max=c.max,this.contentSize=c.max-c.min+1;break;default:"_"!==s.charAt(0)&&"function"!=typeof n.prototype[s]&&(this[s]=c)}}a(l,"finbar-base",e.cssStylesheetReferenceElement)}function o(e){for(var t=1;t<arguments.length;++t){var i=arguments[t];if(i)for(var n in i)e[n]=i[n]}return e}function r(e){var t=Object.keys(e),i=2===t.length&&"number"==typeof e.min&&"number"==typeof e.max&&e.min<=e.max;i||s("Invalid .range object.")}function s(e){throw"finbars: "+e}var a=e("css-injector");n.prototype={set orientation(e){e!==this._orientation&&(this._orientation=e,this.oh=c[this._orientation],this.oh||s("Invalid value for `options._orientation."),this.deltaProp=this.oh.delta,this.bar.className=this.bar.className.replace(/(vertical|horizontal)/g,e),(this.bar.style.cssText||this.thumb.style.cssText)&&(this.bar.removeAttribute("style"),this.thumb.removeAttribute("style"),this.resize()))},get orientation(){return this._orientation},onchange:null,set classPrefix(e){this._classPrefix&&this.bar.classList.remove(this._classPrefix+this.orientation),this._classPrefix=e,e&&this.bar.classList.add(e+"-"+this.orientation)},get classPrefix(){return this._classPrefix},increment:1,barStyles:null,set style(e){var t=Object.keys(e=o({},e,this._auxStyles));if(t.length){var i=this.bar,n=i.getBoundingClientRect(),r=this.container||i.parentElement,s=r.getBoundingClientRect(),a=this.oh;i.removeAttribute("style"),t.forEach(function(t){var o=e[t];if(t in a&&(t=a[t]),isNaN(Number(o))){if(/%$/.test(o)){var r=h[t],l=n[r.marginLeading]+n[r.marginTrailing];l&&(o=parseInt(o,10)/100*s[r.size]-l+"px")}}else o=(o||0)+"px";i.style[t]=o})}},paging:!0,set range(e){r(e),this._min=e.min,this._max=e.max,this.contentSize=e.max-e.min+1,this.index=this.index},get range(){return{min:this._min,max:this._max}},set index(e){e=Math.min(this._max,Math.max(this._min,e)),this._setScroll(e)},get index(){return this._index},_setScroll:function(e,t){this._index=e,this.testPanelItem&&this.testPanelItem.index instanceof Element&&(this.testPanelItem.index.innerHTML=Math.round(e)),
this.onchange&&this.onchange.call(this,Math.round(e)),void 0===t&&(t=(e-this._min)/(this._max-this._min)*this._thumbMax),this.thumb.style[this.oh.leading]=t+"px"},scrollRealContent:function(e){var t=this.content.parentElement.getBoundingClientRect(),i=this.oh.size,n=Math.max(0,this.content[i]-t[i]),o=(e-this._min)/(this._max-this._min)*n;this.content.style[this.oh.leading]=-o+"px"},resize:function(e,t){var i=this.bar;if(i.parentNode){var n=this.container||i.parentElement,o=n.getBoundingClientRect();"object"==typeof e&&(t=e,e=void 0),this.style=this.barStyles=t||this.barStyles,this.content&&(this.onchange||(this.onchange=this.scrollRealContent,this.contentSize=this.content[this.oh.size],this._min=0,this._max=this.contentSize-1)),this.onchange===this.scrollRealContent?(this.containerSize=o[this.oh.size],this.increment=this.containerSize/(this.contentSize-this.containerSize)*(this._max-this._min)):(this.containerSize=1,this.increment=e||this.increment);var r=this.index;return this.testPanelItem=this.testPanelItem||this._addTestPanelItem(),this._setThumbSize(),this.index=r,null!==this.deltaProp&&n.addEventListener("wheel",this._bound.onwheel),this}},shortenBy:function(e){return this.shortenEndBy("trailing",e)},foreshortenBy:function(e){return this.shortenEndBy("leading",e)},shortenEndBy:function(e,t){if(t){if(t instanceof n&&t.orientation!==this.orientation){var i=window.getComputedStyle(t.bar),o=c[t.orientation];this._auxStyles={},this._auxStyles[e]=i[o.thickness]}}else delete this._auxStyles;return this},_setThumbSize:function(){var e=this.oh,t=window.getComputedStyle(this.thumb),i=parseInt(t[e.marginLeading]),n=parseInt(t[e.marginTrailing]),o=i+n,r=this.bar.getBoundingClientRect()[e.size],s=Math.max(20,r*this.containerSize/this.contentSize);this.containerSize<this.contentSize?(this.bar.style.visibility="visible",this.thumb.style[e.size]=s+"px"):this.bar.style.visibility="hidden",this._thumbMax=r-s-o,this._thumbMarginLeading=i},remove:function(){this._removeEvt("mousedown"),this._removeEvt("mousemove"),this._removeEvt("mouseup"),(this.container||this.bar.parentElement)._removeEvt("wheel",this._bound.onwheel),this.bar.onclick=this.thumb.onclick=this.thumb.onmouseover=this.thumb.transitionend=this.thumb.onmouseout=null,this.bar.remove()},_addTestPanelItem:function(){var e,t=document.querySelector("."+this._classPrefix+".test-panel")||document.querySelector(".test-panel");if(t){var i=["mousedown","mousemove","mouseup","index"],n=document.createElement("li");i.forEach(function(e){n.innerHTML+='<span class="'+e+'">'+e.replace("mouse","")+"</span>"}),t.appendChild(n),e={},i.forEach(function(t){e[t]=n.getElementsByClassName(t)[0]})}return e},_addEvt:function(e){var t=this.testPanelItem&&this.testPanelItem[e];t&&t.classList.add("listening"),window.addEventListener(e,this._bound["on"+e])},_removeEvt:function(e){var t=this.testPanelItem&&this.testPanelItem[e];t&&t.classList.remove("listening"),window.removeEventListener(e,this._bound["on"+e])}};var l,u={shortStop:function(e){e.stopPropagation()},onwheel:function(e){this.index+=e[this.deltaProp],e.stopPropagation(),e.preventDefault()},onclick:function(e){var t=this.thumb.getBoundingClientRect(),i=e[this.oh.coordinate]<t[this.oh.leading];"object"==typeof this.paging?this.index=this.paging[i?"up":"down"](Math.round(this.index)):this.index+=i?-this.increment:this.increment,this.thumb.classList.add("hover");var n=this;this.thumb.addEventListener("transitionend",function o(){this.removeEventListener("transitionend",o),n._bound.onmouseup(e)}),e.stopPropagation()},onmouseover:function(){this.thumb.classList.add("hover"),this.thumb.onmouseout=this._bound.onmouseout,this._addEvt("mousedown")},onmouseout:function(){this._removeEvt("mousedown"),this.thumb.onmouseover=this._bound.onmouseover,this.thumb.classList.remove("hover")},onmousedown:function(e){this._removeEvt("mousedown"),this.thumb.onmouseover=this.thumb.onmouseout=null;var t=this.thumb.getBoundingClientRect();this.pinOffset=e[this.oh.axis]-t[this.oh.leading]+this.bar.getBoundingClientRect()[this.oh.leading]+this._thumbMarginLeading,document.documentElement.style.cursor="default",this._addEvt("mousemove"),this._addEvt("mouseup"),e.stopPropagation(),e.preventDefault()},onmousemove:function(e){var t=Math.min(this._thumbMax,Math.max(0,e[this.oh.axis]-this.pinOffset)),i=t/this._thumbMax*(this._max-this._min)+this._min;this._setScroll(i,t),e.stopPropagation(),e.preventDefault()},onmouseup:function(e){this._removeEvt("mousemove"),this._removeEvt("mouseup"),document.documentElement.style.cursor="auto";var t=this.thumb.getBoundingClientRect();t.left<=e.clientX&&e.clientX<=t.right&&t.top<=e.clientY&&e.clientY<=t.bottom?this._bound.onmouseover(e):this._bound.onmouseout(e),e.stopPropagation(),e.preventDefault()}},c={vertical:{coordinate:"clientY",axis:"pageY",size:"height",outside:"right",inside:"left",leading:"top",trailing:"bottom",marginLeading:"marginTop",marginTrailing:"marginBottom",thickness:"width",delta:"deltaY"},horizontal:{coordinate:"clientX",axis:"pageX",size:"width",outside:"bottom",inside:"top",leading:"left",trailing:"right",marginLeading:"marginLeft",marginTrailing:"marginRight",thickness:"height",delta:"deltaX"}},h={top:"vertical",bottom:"vertical",height:"vertical",left:"horizontal",right:"horizontal",width:"horizontal"};l="div.finbar-horizontal,div.finbar-vertical{position:absolute;margin:3px}div.finbar-horizontal>.thumb,div.finbar-vertical>.thumb{position:absolute;background-color:#d3d3d3;-webkit-box-shadow:0 0 1px #000;-moz-box-shadow:0 0 1px #000;box-shadow:0 0 1px #000;border-radius:4px;margin:2px;opacity:.4;transition:opacity .5s}div.finbar-horizontal>.thumb.hover,div.finbar-vertical>.thumb.hover{opacity:1;transition:opacity .5s}div.finbar-vertical{top:0;bottom:0;right:0;width:11px}div.finbar-vertical>.thumb{top:0;right:0;width:7px}div.finbar-horizontal{left:0;right:0;bottom:0;height:11px}div.finbar-horizontal>.thumb{left:0;bottom:0;height:7px}",t.exports=n},{"css-injector":4}],17:[function(e,t,i){"use strict";function n(e,t,i){var n=this;this.div=e,this.component=t,i=i||{},this.doubleClickDelay=i.doubleClickDelay||325,this.dragEndtime=Date.now(),this.canvas=document.createElement("canvas"),this.div.appendChild(this.canvas),this.canvas.style.outline="none",this.canvasCTX=this.canvas.getContext("2d"),this.gc=new u(this.canvasCTX),this.buffer=document.createElement("canvas"),this.bufferCTX=this.buffer.getContext("2d"),this.bufferGC=new u(this.bufferCTX),this.mouseLocation=new a.Point(-1,-1),this.dragstart=new a.Point(-1,-1),this.bounds=new a.Rectangle(0,0,0,0),this.hasMouse=!1,document.addEventListener("mousemove",function(e){(n.hasMouse||n.isDragging())&&n.finmousemove(e)}),document.addEventListener("mouseup",function(e){n.finmouseup(e)}),document.addEventListener("wheel",function(e){n.finwheelmoved(e)}),document.addEventListener("keydown",function(e){n.finkeydown(e)}),document.addEventListener("keyup",function(e){n.finkeyup(e)}),this.canvas.onmouseover=function(){n.hasMouse=!0},this.canvas.addEventListener("focus",function(e){n.finfocusgained(e)}),this.canvas.addEventListener("blur",function(e){n.finfocuslost(e)}),this.canvas.addEventListener("mousedown",function(e){n.finmousedown(e)}),this.canvas.addEventListener("mouseout",function(e){n.hasMouse=!1,n.finmouseout(e)}),this.canvas.addEventListener("click",function(e){n.finclick(e)}),this.canvas.addEventListener("contextmenu",function(e){return n.fincontextmenu(e),e.preventDefault(),!1}),l.addEventListener(this.canvas,"tap",function(e){n.fintap(e)}),l.addEventListener(this.canvas,"holdpulse",function(e){n.finholdpulse(e)}),l.addEventListener(this.canvas,"flick",function(e){n.finflick(e)}),l.addEventListener(this.canvas,"release",function(e){n.finrelease(e)}),l.addEventListener(this.canvas,"trackstart",function(e){n.fintrackstart(e)}),l.addEventListener(this.canvas,"track",function(e){n.fintrack(e)}),l.addEventListener(this.canvas,"trackend",function(e){n.fintrackend(e)}),this.canvas.setAttribute("tabindex",0),this.canvas.contentEditable=!0,this.resize(),this.beginResizing(),this.beginPainting()}function o(e){if(g){for(var t=0;t<h.length;t++)try{h[t].tickPainter(e)}catch(i){console.error(i)}requestAnimationFrame(o)}}function r(e){if(f)for(var t=0;t<d.length;t++)try{d[t].tickResizer(e)}catch(i){console.error(i)}}function s(){for(var e=[],t=["",""],i=0;256>i;i++)e[i]=t;return e[27]=["ESC","ESCSHIFT"],e[192]=["`","~"],e[49]=["1","!"],e[50]=["2","@"],e[51]=["3","#"],e[52]=["4","$"],e[53]=["5","%"],e[54]=["6","^"],e[55]=["7","&"],e[56]=["8","*"],e[57]=["9","("],e[48]=["0",")"],e[189]=["-","_"],e[187]=["=","+"],e[8]=["BACKSPACE","BACKSPACESHIFT"],e[46]=["DELETE","DELETESHIFT"],e[9]=["TAB","TABSHIFT"],e[81]=["q","Q"],e[87]=["w","W"],e[69]=["e","E"],e[82]=["r","R"],e[84]=["t","T"],e[89]=["y","Y"],e[85]=["u","U"],e[73]=["i","I"],e[79]=["o","O"],e[80]=["p","P"],e[219]=["[","{"],e[221]=["]","}"],e[220]=["\\","|"],e[220]=["CAPSLOCK","CAPSLOCKSHIFT"],e[65]=["a","A"],e[83]=["s","S"],e[68]=["d","D"],e[70]=["f","F"],e[71]=["g","G"],e[72]=["h","H"],e[74]=["j","J"],e[75]=["k","K"],e[76]=["l","L"],e[186]=[";",":"],e[222]=["'","|"],e[13]=["RETURN","RETURNSHIFT"],e[16]=["SHIFT","SHIFT"],e[90]=["z","Z"],e[88]=["x","X"],e[67]=["c","C"],e[86]=["v","V"],e[66]=["b","B"],e[78]=["n","N"],e[77]=["m","M"],e[188]=[",","<"],e[190]=[".",">"],e[191]=["/","?"],e[16]=["SHIFT","SHIFT"],e[17]=["CTRL","CTRLSHIFT"],e[18]=["ALT","ALTSHIFT"],e[91]=["COMMANDLEFT","COMMANDLEFTSHIFT"],e[32]=["SPACE","SPACESHIFT"],e[93]=["COMMANDRIGHT","COMMANDRIGHTSHIFT"],e[18]=["ALT","ALTSHIFT"],e[38]=["UP","UPSHIFT"],e[37]=["LEFT","LEFTSHIFT"],e[40]=["DOWN","DOWNSHIFT"],e[39]=["RIGHT","RIGHTSHIFT"],e[33]=["PAGEUP","PAGEUPSHIFT"],e[34]=["PAGEDOWN","PAGEDOWNSHIFT"],e[35]=["PAGERIGHT","PAGERIGHTSHIFT"],e[36]=["PAGELEFT","PAGELEFTSHIFT"],e[112]=["F1","F1SHIFT"],e[113]=["F2","F2SHIFT"],e[114]=["F3","F3SHIFT"],e[115]=["F4","F4SHIFT"],e[116]=["F5","F5SHIFT"],e[117]=["F6","F6SHIFT"],e[118]=["F7","F7SHIFT"],e[119]=["F8","F8SHIFT"],e[120]=["F9","F9SHIFT"],e[121]=["F10","F10SHIFT"],e[122]=["F11","F1S1HIFT"],e[123]=["F12","F121HIFT"],e}var a=e("rectangular"),l=e("./js/polymergestures.dev.js"),u=e("./js/GraphicsContext.js"),c=200,h=[],d=[],g=!0,f=!0,p=s();n.prototype={constructor:n.prototype.constructor,div:null,component:null,gestures:l,canvas:null,canvasCTX:null,focuser:null,buffer:null,ctx:null,mouseLocation:null,holdPulseCount:-1,dragstart:null,origin:null,bounds:null,dirty:!1,size:null,mousedown:!1,dragging:!1,repeatKeyCount:0,repeatKey:null,repeatKeyStartTime:0,currentKeys:[],hasMouse:!1,lastDoubleClickTime:0,dragEndTime:0,lastRepaintTime:0,addEventListener:function(e,t){this.canvas.addEventListener(e,t)},stopPaintLoop:function(){g=!1},restartPaintLoop:function(){g||(g=!0,requestAnimationFrame(o))},stopResizeLoop:function(){f=!1},restartResizeLoop:function(){f||(f=!0,setInterval(r,200))},detached:function(){this.stopPainting(),this.stopResizing()},useHiDPI:function(){return this.component.resolveProperty("useHiDPI")},useBitBlit:function(){return this.component.resolveProperty("useBitBlit")},getFPS:function(){var e=this.component.resolveProperty("repaintIntervalRate");return e?parseInt(e):0},tickPaint:function(e){var t=this.getFPS();if(0!==t){var i=1e3/t,n=e-this.lastRepaintTime;n>i&&this.dirty&&(this.lastRepaintTime=e-n%i,this.paintNow())}},beginPainting:function(){var e=this;this.dirty=!0,this.tickPainter=function(t){e.tickPaint(t)},h.push(this)},stopPainting:function(){h.splice(h.indexOf(this),1)},beginResizing:function(){var e=this;this.tickResizer=function(){e.checksize()},d.push(this)},stopResizing:function(){d.splice(d.indexOf(this),1)},start:function(){this.beginPainting(),this.beginResizing()},stop:function(){this.stopPainting(),this.stopResizing()},checksize:function(){var e=this.div.getBoundingClientRect();(e.width!==this.size.width||e.height!==this.size.height)&&this.sizeChangedNotification()},sizeChangedNotification:function(){this.resize()},resize:function(){var e=this.size=this.div.getBoundingClientRect();this.canvas.width=this.buffer.width=e.width,this.canvas.height=this.buffer.height=e.height;var t=1,i=this.useBitBlit(),n=window.devicePixelRatio&&this.useHiDPI();if(n){var o=window.devicePixelRatio||1,r=this.canvasCTX.webkitBackingStorePixelRatio||this.canvasCTX.mozBackingStorePixelRatio||this.canvasCTX.msBackingStorePixelRatio||this.canvasCTX.oBackingStorePixelRatio||this.canvasCTX.backingStorePixelRatio||1;t=o/r}var s=this.canvas.getAttribute("width"),l=this.canvas.getAttribute("height");this.canvas.width=this.buffer.width=s*t,this.canvas.height=this.buffer.height=l*t,this.canvas.style.width=this.buffer.style.width=s+"px",this.canvas.style.height=this.buffer.style.height=l+"px",this.bufferCTX.scale(t,t),n&&!i&&this.canvasCTX.scale(t,t),this.bounds=new a.Rectangle(0,0,e.width,e.height);var u=this.component;u&&u.setBounds(this.bounds),this.resizeNotification(),this.paintNow()},resizeNotification:function(){},getBounds:function(){return this.bounds},paintNow:function(){var e=this;this.safePaintImmediately(function(t){t.clearRect(0,0,e.canvas.width,e.canvas.height);var i=e.component;i&&i.paint(t),e.dirty=!1})},safePaintImmediately:function(e){var t=this.useBitBlit(),i=t?this.bufferGC:this.gc;try{i.save(),e(i)}catch(n){console.error(n)}finally{i.restore()}t&&this.flushBuffer()},flushBuffer:function(){this.buffer.width>0&&this.buffer.height>0&&this.canvasCTX.drawImage(this.buffer,0,0)},dispatchNewEvent:function(e,t,i){return i={detail:i||{}},i.detail.primitiveEvent=e,this.canvas.dispatchEvent(new CustomEvent(t,i))},dispatchNewMouseKeysEvent:function(e,t,i){return i=i||{},i.mouse=this.mouseLocation,i.keys=this.currentKeys,this.dispatchNewEvent(e,t,i)},finmousemove:function(e){!this.isDragging()&&this.mousedown&&(this.beDragging(),this.dispatchNewMouseKeysEvent(e,"fin-canvas-dragstart",{isRightClick:this.isRightClick(e)}),this.dragstart=new a.Point(this.mouseLocation.x,this.mouseLocation.y)),this.mouseLocation=this.getLocal(e),this.isDragging()&&this.dispatchNewMouseKeysEvent(e,"fin-canvas-drag",{dragstart:this.dragstart,isRightClick:this.isRightClick(e)}),this.bounds.contains(this.mouseLocation)&&this.dispatchNewMouseKeysEvent(e,"fin-canvas-mousemove")},finmousedown:function(e){this.mouseLocation=this.mouseDownLocation=this.getLocal(e),this.mousedown=!0,this.dispatchNewMouseKeysEvent(e,"fin-canvas-mousedown",{isRightClick:this.isRightClick(e)}),this.takeFocus()},finmouseup:function(e){this.isDragging()&&(this.dispatchNewMouseKeysEvent(e,"fin-canvas-dragend",{dragstart:this.dragstart,isRightClick:this.isRightClick(e)}),this.beNotDragging(),this.dragEndtime=Date.now()),this.mousedown=!1,this.dispatchNewMouseKeysEvent(e,"fin-canvas-mouseup",{isRightClick:this.isRightClick(e)})},finmouseout:function(e){this.mousedown||(this.mouseLocation=new a.Point(-1,-1)),this.dispatchNewMouseKeysEvent(e,"fin-canvas-mouseout")},finwheelmoved:function(e){!this.isDragging()&&this.hasFocus()&&(e.preventDefault(),this.dispatchNewMouseKeysEvent(e,"fin-canvas-wheelmoved",{isRightClick:this.isRightClick(e)}))},finclick:function(e){this.doubleClickTimer&&Date.now()-this.lastClickTime<this.doubleClickDelay?(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=void 0,this.findblclick(e)):(this.lastClickTime=Date.now(),this.doubleClickTimer=setTimeout(function(){this.doubleClickTimer=void 0,this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-click",{isRightClick:this.isRightClick(e)})}.bind(this),this.doubleClickDelay))},finrelease:function(e){this.holdPulseCount=0,this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-release")},finflick:function(e){this.hasFocus()&&(this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-flick",{isRightClick:this.isRightClick(e)}))},fintrackstart:function(e){this.hasFocus()&&(this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-trackstart"))},fintrack:function(e){this.hasFocus()&&(this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-track"))},fintrackend:function(e){this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-trackend")},finhold:function(e){this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-hold",{isRightClick:this.isRightClick(e)})},finholdpulse:function(e){this.mouseLocation=this.getLocal(e),this.dispatchNewMouseKeysEvent(e,"fin-canvas-holdpulse",{count:this.holdPulseCount++})},fintap:function(e){var t=this,i=Date.now(),n=i-this.lastDoubleClickTime;300>n||i-this.dragEndtime<100||setTimeout(function(){t._fintap(e)},180)},_fintap:function(e){var t=Date.now(),i=t-this.lastDoubleClickTime;300>i||(this.mouseDownLocation&&(this.mouseLocation=this.mouseDownLocation,this.mouseDownLocation=void 0),this.dispatchNewMouseKeysEvent(e,"fin-canvas-tap",{isRightClick:this.isRightClick(e)}))},findblclick:function(e){this.mouseLocation=this.getLocal(e),this.lastDoubleClickTime=Date.now(),this.dispatchNewMouseKeysEvent(e,"fin-canvas-dblclick",{isRightClick:this.isRightClick(e)})},getCharMap:function(){return p},finkeydown:function(e){if(this.hasFocus()){var t=e.shiftKey?p[e.keyCode][1]:p[e.keyCode][0];e.repeat?this.repeatKey===t?this.repeatKeyCount++:(this.repeatKey=t,this.repeatKeyStartTime=Date.now()):(this.repeatKey=null,this.repeatKeyCount=0,this.repeatKeyStartTime=0),-1===this.currentKeys.indexOf(t)&&this.currentKeys.push(t),this.dispatchNewEvent(e,"fin-canvas-keydown",{alt:e.altKey,ctrl:e.ctrlKey,"char":t,code:e.charCode,key:e.keyCode,meta:e.metaKey,repeatCount:this.repeatKeyCount,repeatStartTime:this.repeatKeyStartTime,shift:e.shiftKey,identifier:e.keyIdentifier,currentKeys:this.currentKeys.slice(0)})}},finkeyup:function(e){var t=e.shiftKey?p[e.keyCode][1]:p[e.keyCode][0];this.currentKeys.splice(this.currentKeys.indexOf(t),1),this.hasFocus()&&(this.repeatKeyCount=0,this.repeatKey=null,this.repeatKeyStartTime=0,this.dispatchNewEvent(e,"fin-canvas-keyup",{alt:e.altKey,ctrl:e.ctrlKey,"char":t,code:e.charCode,key:e.keyCode,meta:e.metaKey,repeat:e.repeat,shift:e.shiftKey,identifier:e.keyIdentifier,currentKeys:this.currentKeys.slice(0)}))},finfocusgained:function(e){this.dispatchNewEvent(e,"fin-canvas-focus-gained")},finfocuslost:function(e){this.dispatchNewEvent(e,"fin-canvas-focus-lost")},fincontextmenu:function(e){e.ctrlKey&&-1===this.currentKeys.indexOf("CTRL")&&this.currentKeys.push("CTRL"),this.doubleRightClickTimer&&Date.now()-this.lastClickTime<this.doubleClickDelay?(clearTimeout(this.doubleRightClickTimer),this.doubleRightClickTimer=void 0,this.findblclick(e)):(this.lastClickTime=Date.now(),this.doubleRightClickTimer=setTimeout(function(){this.doubleRightClickTimer=void 0,this.dispatchNewMouseKeysEvent(e,"fin-canvas-context-menu",{isRightClick:this.isRightClick(e)})}.bind(this),this.doubleClickDelay))},repaint:function(){var e=this.getFPS();this.dirty=!0,g&&0!==e||this.paintNow()},getMouseLocation:function(){return this.mouseLocation},getOrigin:function(){var e=this.canvas.getBoundingClientRect(),t=new a.Point(e.left,e.top);return t},getLocal:function(e){var t=this.canvas.getBoundingClientRect(),i=new a.Point(e.clientX-t.left,e.clientY-t.top);return i},hasFocus:function(){return document.activeElement===this.canvas},takeFocus:function(){var e=this;this.hasFocus()||setTimeout(function(){e.canvas.focus()},10)},beDragging:function(){this.dragging=!0,this.disableDocumentElementSelection()},beNotDragging:function(){this.dragging=!1,this.enableDocumentElementSelection()},isDragging:function(){return this.dragging},disableDocumentElementSelection:function(){var e=document.body.style;e.cssText=e.cssText+"-webkit-user-select: none"},enableDocumentElementSelection:function(){var e=document.body.style;e.cssText=e.cssText.replace("-webkit-user-select: none","")},setFocusable:function(e){this.focuser.style.display=e?"":"none"},isRightClick:function(e){var t;return e=e||window.event,"which"in e?t=3===e.which:"button"in e&&(t=2===e.button),t},dispatchEvent:function(e){return this.canvas.dispatchEvent(e)}},requestAnimationFrame(o),setInterval(r,c),t.exports=n},{"./js/GraphicsContext.js":18,"./js/polymergestures.dev.js":20,rectangular:26}],18:[function(e,t,i){"use strict";function n(e,t){function i(i){i in n.prototype||s.test(i)||("function"==typeof e[i]?r[i]=t?function(){return t(i,arguments,e[i].apply(e,arguments))}:e[i].bind(e):Object.defineProperty(r,i,{get:function(){var n=e[i];return t?t(i,"getter",n):n},set:function(n){e[i]=t?t(i,"setter",n):n}}))}this.gc=e;var r=this,s=/^webkit/;switch(typeof t){case"string":t=o.bind(void 0,t+".");break;case"boolean":t===!0&&(t=o.bind(void 0,"gc."));break;case"function":if(3!==t.length)throw"GraphicsContext: User-supplied API logger function does not accept three parameters.";break;default:t=!1}Object.keys(Object.getPrototypeOf(e)).forEach(i),Object.keys(e).forEach(i)}var o=e("./gc-console-logger");t.exports=n},{"./gc-console-logger":19}],19:[function(e,t,i){"use strict";function n(e,t,i,n){var r=n;switch("string"==typeof n&&(r='"'+r+'"'),t=e+t,i){case"getter":console.log(t,"=",r);break;case"setter":console.log(t,o,r);break;default:t+="("+Array.prototype.slice.call(i).join(", ")+")",void 0===r?console.log(t):console.log(t,o,r)}return n}var o="⟹";t.exports=n},{}],20:[function(e,t,i){!function(e){var t=!1,i=document.createElement("meta");if(i.createShadowRoot){var n=i.createShadowRoot(),o=document.createElement("span");n.appendChild(o),i.addEventListener("testpath",function(e){e.path&&(t=e.path[0]===o),e.stopPropagation()});var r=new CustomEvent("testpath",{bubbles:!0});document.head.appendChild(i),o.dispatchEvent(r),i.parentNode.removeChild(i),n=o=null}i=null;var s={shadow:function(e){return e?e.shadowRoot||e.webkitShadowRoot:void 0},canTarget:function(e){return e&&Boolean(e.elementFromPoint)},targetingShadow:function(e){var t=this.shadow(e);return this.canTarget(t)?t:void 0},olderShadow:function(e){var t=e.olderShadowRoot;if(!t){var i=e.querySelector("shadow");i&&(t=i.olderShadowRoot)}return t},allShadows:function(e){for(var t=[],i=this.shadow(e);i;)t.push(i),i=this.olderShadow(i);return t},searchRoot:function(e,t,i){var n,o;return e?(n=e.elementFromPoint(t,i),n?o=this.targetingShadow(n):e!==document&&(o=this.olderShadow(e)),this.searchRoot(o,t,i)||n):void 0},owner:function(e){if(!e)return document;for(var t=e;t.parentNode;)t=t.parentNode;return t.nodeType!=Node.DOCUMENT_NODE&&t.nodeType!=Node.DOCUMENT_FRAGMENT_NODE&&(t=document),t},findTarget:function(e){if(t&&e.path&&e.path.length)return e.path[0];var i=e.clientX,n=e.clientY,o=this.owner(e.target);return o.elementFromPoint(i,n)||(o=document),this.searchRoot(o,i,n)},findTouchAction:function(e){var i;if(t&&e.path&&e.path.length){for(var n=e.path,o=0;o<n.length;o++)if(i=n[o],i.nodeType===Node.ELEMENT_NODE&&i.hasAttribute("touch-action"))return i.getAttribute("touch-action")}else for(i=e.target;i;){if(i.nodeType===Node.ELEMENT_NODE&&i.hasAttribute("touch-action"))return i.getAttribute("touch-action");i=i.parentNode||i.host}return"auto"},LCA:function(e,t){if(e===t)return e;if(e&&!t)return e;if(t&&!e)return t;if(!t&&!e)return document;if(e.contains&&e.contains(t))return e;if(t.contains&&t.contains(e))return t;var i=this.depth(e),n=this.depth(t),o=i-n;for(o>=0?e=this.walk(e,o):t=this.walk(t,-o);e&&t&&e!==t;)e=e.parentNode||e.host,t=t.parentNode||t.host;return e},walk:function(e,t){for(var i=0;e&&t>i;i++)e=e.parentNode||e.host;return e},depth:function(e){for(var t=0;e;)t++,e=e.parentNode||e.host;return t},deepContains:function(e,t){var i=this.LCA(e,t);return i===e},insideNode:function(e,t,i){var n=e.getBoundingClientRect();return n.left<=t&&t<=n.right&&n.top<=i&&i<=n.bottom},path:function(e){var i;if(t&&e.path&&e.path.length)i=e.path;else{i=[];for(var n=this.findTarget(e);n;)i.push(n),n=n.parentNode||n.host}return i}};e.targetFinding=s,e.findTarget=s.findTarget.bind(s),e.deepContains=s.deepContains.bind(s),e.insideNode=s.insideNode}(i),function(){function e(e){return"html /deep/ "+t(e)}function t(e){return'[touch-action="'+e+'"]'}function i(e){return"{ -ms-touch-action: "+e+"; touch-action: "+e+";}"}var n=["none","auto","pan-x","pan-y",{rule:"pan-x pan-y",selectors:["pan-x pan-y","pan-y pan-x"]},"manipulation"],o="",r="string"==typeof document.head.style.touchAction,s=!window.ShadowDOMPolyfill&&document.head.createShadowRoot;if(r){n.forEach(function(n){String(n)===n?(o+=t(n)+i(n)+"\n",s&&(o+=e(n)+i(n)+"\n")):(o+=n.selectors.map(t)+i(n.rule)+"\n",s&&(o+=n.selectors.map(e)+i(n.rule)+"\n"))});var a=document.createElement("style");a.textContent=o,document.head.appendChild(a)}}(),function(e){var t=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","pageX","pageY"],i=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0],n=function(){return function(){}},o={preventTap:n,makeBaseEvent:function(e,t){var i=document.createEvent("Event");return i.initEvent(e,t.bubbles||!1,t.cancelable||!1),i.preventTap=o.preventTap(i),i},makeGestureEvent:function(e,t){t=t||Object.create(null);for(var i,n=this.makeBaseEvent(e,t),o=0,r=Object.keys(t);o<r.length;o++)i=r[o],"bubbles"!==i&&"cancelable"!==i&&(n[i]=t[i]);return n},makePointerEvent:function(e,n){n=n||Object.create(null);for(var o,r=this.makeBaseEvent(e,n),s=2;s<t.length;s++)o=t[s],r[o]=n[o]||i[s];r.buttons=n.buttons||0;var a=0;return a=n.pressure?n.pressure:r.buttons?.5:0,r.x=r.clientX,r.y=r.clientY,r.pointerId=n.pointerId||0,r.width=n.width||0,r.height=n.height||0,r.pressure=a,r.tiltX=n.tiltX||0,r.tiltY=n.tiltY||0,r.pointerType=n.pointerType||"",r.hwTimestamp=n.hwTimestamp||0,r.isPrimary=n.isPrimary||!1,r._source=n._source||"",r}};e.eventFactory=o}(i),function(e){function t(){if(i){var e=new Map;return e.pointers=n,e}this.keys=[],this.values=[]}var i=window.Map&&window.Map.prototype.forEach,n=function(){return this.size};t.prototype={set:function(e,t){var i=this.keys.indexOf(e);i>-1?this.values[i]=t:(this.keys.push(e),this.values.push(t))},has:function(e){return this.keys.indexOf(e)>-1},"delete":function(e){var t=this.keys.indexOf(e);t>-1&&(this.keys.splice(t,1),this.values.splice(t,1))},get:function(e){var t=this.keys.indexOf(e);return this.values[t]},clear:function(){this.keys.length=0,this.values.length=0},forEach:function(e,t){this.values.forEach(function(i,n){e.call(t,i,this.keys[n],this)},this)},pointers:function(){return this.keys.length}},e.PointerMap=t}(i),function(e){var t,i=["bubbles","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","buttons","pointerId","width","height","pressure","tiltX","tiltY","pointerType","hwTimestamp","isPrimary","type","target","currentTarget","which","pageX","pageY","timeStamp","preventTap","tapPrevented","_source"],n=[!1,!1,null,null,0,0,0,0,!1,!1,!1,!1,0,null,0,0,0,0,0,0,0,"",0,!1,"",null,null,0,0,0,0,function(){},!1],o="undefined"!=typeof SVGElementInstance,r=e.eventFactory,s={IS_IOS:!1,pointermap:new e.PointerMap,requiredGestures:new e.PointerMap,eventMap:Object.create(null),eventSources:Object.create(null),eventSourceList:[],gestures:[],dependencyMap:{down:{listeners:0,index:-1},up:{listeners:0,index:-1}},gestureQueue:[],registerSource:function(e,t){var i=t,n=i.events;n&&(n.forEach(function(e){i[e]&&(this.eventMap[e]=i[e].bind(i))},this),this.eventSources[e]=i,this.eventSourceList.push(i))},registerGesture:function(e,t){var i=Object.create(null);i.listeners=0,i.index=this.gestures.length;for(var n,o=0;o<t.exposes.length;o++)n=t.exposes[o].toLowerCase(),this.dependencyMap[n]=i;this.gestures.push(t)},register:function(e,t){for(var i,n=this.eventSourceList.length,o=0;n>o&&(i=this.eventSourceList[o]);o++)i.register.call(i,e,t)},unregister:function(e){for(var t,i=this.eventSourceList.length,n=0;i>n&&(t=this.eventSourceList[n]);n++)t.unregister.call(t,e)},down:function(e){this.requiredGestures.set(e.pointerId,t),this.fireEvent("down",e)},move:function(e){e.type="move",this.fillGestureQueue(e)},up:function(e){this.fireEvent("up",e),this.requiredGestures["delete"](e.pointerId)},cancel:function(e){e.tapPrevented=!0,this.fireEvent("up",e),this.requiredGestures["delete"](e.pointerId)},addGestureDependency:function(e,t){var i=e._pgEvents;if(i&&t)for(var n,o,r,s=Object.keys(i),a=0;a<s.length;a++)r=s[a],i[r]>0&&(n=this.dependencyMap[r],o=n?n.index:-1,t[o]=!0)},eventHandler:function(i){var n=i.type;if("touchstart"===n||"mousedown"===n||"pointerdown"===n||"MSPointerDown"===n)if(i._handledByPG||(t={}),this.IS_IOS){var o=i;if("touchstart"===n){var r=i.changedTouches[0];o={target:i.target,clientX:r.clientX,clientY:r.clientY,path:i.path}}for(var s,a=i.path||e.targetFinding.path(o),l=0;l<a.length;l++)s=a[l],this.addGestureDependency(s,t)}else this.addGestureDependency(i.currentTarget,t);if(!i._handledByPG){var u=this.eventMap&&this.eventMap[n];u&&u(i),i._handledByPG=!0}},listen:function(e,t){for(var i,n=0,o=t.length;o>n&&(i=t[n]);n++)this.addEvent(e,i)},unlisten:function(e,t){for(var i,n=0,o=t.length;o>n&&(i=t[n]);n++)this.removeEvent(e,i)},addEvent:function(e,t){e.addEventListener(t,this.boundHandler)},removeEvent:function(e,t){e.removeEventListener(t,this.boundHandler)},makeEvent:function(e,t){var i=r.makePointerEvent(e,t);return i.preventDefault=t.preventDefault,i.tapPrevented=t.tapPrevented,i._target=i._target||t.target,i},fireEvent:function(e,t){var i=this.makeEvent(e,t);return this.dispatchEvent(i)},cloneEvent:function(e){for(var t,r=Object.create(null),s=0;s<i.length;s++)t=i[s],r[t]=e[t]||n[s],("target"===t||"relatedTarget"===t)&&o&&r[t]instanceof SVGElementInstance&&(r[t]=r[t].correspondingUseElement);return r.preventDefault=function(){e.preventDefault()},r},dispatchEvent:function(e){var t=e._target;if(t){t.dispatchEvent(e);var i=this.cloneEvent(e);i.target=t,this.fillGestureQueue(i)}},gestureTrigger:function(){for(var e,t,i=0;i<this.gestureQueue.length;i++)if(e=this.gestureQueue[i],t=e._requiredGestures)for(var n,o,r=0;r<this.gestures.length;r++)t[r]&&(n=this.gestures[r],o=n[e.type],o&&o.call(n,e));this.gestureQueue.length=0},fillGestureQueue:function(e){this.gestureQueue.length||requestAnimationFrame(this.boundGestureTrigger),e._requiredGestures=this.requiredGestures.get(e.pointerId),this.gestureQueue.push(e)}};s.boundHandler=s.eventHandler.bind(s),s.boundGestureTrigger=s.gestureTrigger.bind(s),e.dispatcher=s,e.activateGesture=function(e,t){var i=t.toLowerCase(),n=s.dependencyMap[i];if(n){var o=s.gestures[n.index];if(e._pgListeners||(s.register(e),e._pgListeners=0),o){var r,a=o.defaultActions&&o.defaultActions[i];switch(e.nodeType){case Node.ELEMENT_NODE:r=e;break;case Node.DOCUMENT_FRAGMENT_NODE:r=e.host;break;default:r=null}a&&r&&!r.hasAttribute("touch-action")&&r.setAttribute("touch-action",a)}e._pgEvents||(e._pgEvents={}),e._pgEvents[i]=(e._pgEvents[i]||0)+1,e._pgListeners++}return Boolean(n)},e.addEventListener=function(t,i,n,o){n&&(e.activateGesture(t,i),t.addEventListener(i,n,o))},e.deactivateGesture=function(e,t){var i=t.toLowerCase(),n=s.dependencyMap[i];return n&&(e._pgListeners>0&&e._pgListeners--,0===e._pgListeners&&s.unregister(e),e._pgEvents&&(e._pgEvents[i]>0?e._pgEvents[i]--:e._pgEvents[i]=0)),Boolean(n)},e.removeEventListener=function(t,i,n,o){n&&(e.deactivateGesture(t,i),t.removeEventListener(i,n,o))}}(i),function(e){var t=e.dispatcher,i=t.pointermap,n=25,o=[0,1,4,2],r=0,s=/Linux.*Firefox\//i,a=function(){if(s.test(navigator.userAgent))return!1;try{return 1===new MouseEvent("test",{buttons:1}).buttons}catch(e){return!1}}(),l={POINTER_ID:1,POINTER_TYPE:"mouse",events:["mousedown","mousemove","mouseup"],exposes:["down","up","move"],register:function(e){t.listen(e,this.events)},unregister:function(e){e.nodeType!==Node.DOCUMENT_NODE&&t.unlisten(e,this.events)},lastTouches:[],isEventSimulatedFromTouch:function(e){for(var t,i=this.lastTouches,o=e.clientX,r=e.clientY,s=0,a=i.length;a>s&&(t=i[s]);s++){var l=Math.abs(o-t.x),u=Math.abs(r-t.y);if(n>=l&&n>=u)return!0}},prepareEvent:function(e){
var i=t.cloneEvent(e);if(i.pointerId=this.POINTER_ID,i.isPrimary=!0,i.pointerType=this.POINTER_TYPE,i._source="mouse",!a){var n=e.type,s=o[e.which]||0;"mousedown"===n?r|=s:"mouseup"===n&&(r&=~s),i.buttons=r}return i},mousedown:function(n){if(!this.isEventSimulatedFromTouch(n)){var o=(i.has(this.POINTER_ID),this.prepareEvent(n));o.target=e.findTarget(n),i.set(this.POINTER_ID,o.target),t.down(o)}},mousemove:function(e){if(!this.isEventSimulatedFromTouch(e)){var n=i.get(this.POINTER_ID);if(n){var o=this.prepareEvent(e);o.target=n,0===(a?o.buttons:o.which)?(a||(r=o.buttons=0),t.cancel(o),this.cleanupMouse(o.buttons)):t.move(o)}}},mouseup:function(n){if(!this.isEventSimulatedFromTouch(n)){var o=this.prepareEvent(n);o.relatedTarget=e.findTarget(n),o.target=i.get(this.POINTER_ID),t.up(o),this.cleanupMouse(o.buttons)}},cleanupMouse:function(e){0===e&&i["delete"](this.POINTER_ID)}};e.mouseEvents=l}(i),function(e){var t=e.dispatcher,i=(e.targetFinding.allShadows.bind(e.targetFinding),t.pointermap),n=(Array.prototype.map.call.bind(Array.prototype.map),2500),o=25,r=200,s=20,a=!1,l={IS_IOS:!1,events:["touchstart","touchmove","touchend","touchcancel"],exposes:["down","up","move"],register:function(e,i){(this.IS_IOS?i:!i)&&t.listen(e,this.events)},unregister:function(e){this.IS_IOS||t.unlisten(e,this.events)},scrollTypes:{EMITTER:"none",XSCROLLER:"pan-x",YSCROLLER:"pan-y"},touchActionToScrollType:function(e){var t=e,i=this.scrollTypes;return t===i.EMITTER?"none":t===i.XSCROLLER?"X":t===i.YSCROLLER?"Y":"XY"},POINTER_TYPE:"touch",firstTouch:null,isPrimaryTouch:function(e){return this.firstTouch===e.identifier},setPrimaryTouch:function(e){(0===i.pointers()||1===i.pointers()&&i.has(1))&&(this.firstTouch=e.identifier,this.firstXY={X:e.clientX,Y:e.clientY},this.firstTarget=e.target,this.scrolling=null,this.cancelResetClickCount())},removePrimaryPointer:function(e){e.isPrimary&&(this.firstTouch=null,this.firstXY=null,this.resetClickCount())},clickCount:0,resetId:null,resetClickCount:function(){var e=function(){this.clickCount=0,this.resetId=null}.bind(this);this.resetId=setTimeout(e,r)},cancelResetClickCount:function(){this.resetId&&clearTimeout(this.resetId)},typeToButtons:function(e){var t=0;return("touchstart"===e||"touchmove"===e)&&(t=1),t},findTarget:function(t,n){if("touchstart"===this.currentTouchEvent.type){if(this.isPrimaryTouch(t)){var o={clientX:t.clientX,clientY:t.clientY,path:this.currentTouchEvent.path,target:this.currentTouchEvent.target};return e.findTarget(o)}return e.findTarget(t)}return i.get(n)},touchToPointer:function(e){var i=this.currentTouchEvent,n=t.cloneEvent(e),o=n.pointerId=e.identifier+2;n.target=this.findTarget(e,o),n.bubbles=!0,n.cancelable=!0,n.detail=this.clickCount,n.buttons=this.typeToButtons(i.type),n.width=e.webkitRadiusX||e.radiusX||0,n.height=e.webkitRadiusY||e.radiusY||0,n.pressure=e.webkitForce||e.force||.5,n.isPrimary=this.isPrimaryTouch(e),n.pointerType=this.POINTER_TYPE,n._source="touch";var r=this;return n.preventDefault=function(){r.scrolling=!1,r.firstXY=null,i.preventDefault()},n},processTouches:function(e,t){var n=e.changedTouches;this.currentTouchEvent=e;for(var o,r,s=0;s<n.length;s++)o=n[s],r=this.touchToPointer(o),"touchstart"===e.type&&i.set(r.pointerId,r.target),i.has(r.pointerId)&&t.call(this,r),("touchend"===e.type||e._cancel)&&this.cleanUpPointer(r)},shouldScroll:function(t){if(this.firstXY){var i,n=e.targetFinding.findTouchAction(t),o=this.touchActionToScrollType(n);if("none"===o)i=!1;else if("XY"===o)i=!0;else{var r=t.changedTouches[0],s=o,a="Y"===o?"X":"Y",l=Math.abs(r["client"+s]-this.firstXY[s]),u=Math.abs(r["client"+a]-this.firstXY[a]);i=l>=u}return i}},findTouch:function(e,t){for(var i,n=0,o=e.length;o>n&&(i=e[n]);n++)if(i.identifier===t)return!0},vacuumTouches:function(e){var t=e.touches;if(i.pointers()>=t.length){var n=[];i.forEach(function(e,i){if(1!==i&&!this.findTouch(t,i-2)){var o=e;n.push(o)}},this),n.forEach(function(e){this.cancel(e),i["delete"](e.pointerId)},this)}},touchstart:function(e){this.vacuumTouches(e),this.setPrimaryTouch(e.changedTouches[0]),this.dedupSynthMouse(e),this.scrolling||(this.clickCount++,this.processTouches(e,this.down))},down:function(e){t.down(e)},touchmove:function(e){if(a)e.cancelable&&this.processTouches(e,this.move);else if(this.scrolling){if(this.firstXY){var t=e.changedTouches[0],i=t.clientX-this.firstXY.X,n=t.clientY-this.firstXY.Y,o=Math.sqrt(i*i+n*n);o>=s&&(this.touchcancel(e),this.scrolling=!0,this.firstXY=null)}}else null===this.scrolling&&this.shouldScroll(e)?this.scrolling=!0:(this.scrolling=!1,e.preventDefault(),this.processTouches(e,this.move))},move:function(e){t.move(e)},touchend:function(e){this.dedupSynthMouse(e),this.processTouches(e,this.up)},up:function(i){i.relatedTarget=e.findTarget(i),t.up(i)},cancel:function(e){t.cancel(e)},touchcancel:function(e){e._cancel=!0,this.processTouches(e,this.cancel)},cleanUpPointer:function(e){i["delete"](e.pointerId),this.removePrimaryPointer(e)},dedupSynthMouse:function(t){var i=e.mouseEvents.lastTouches,o=t.changedTouches[0];if(this.isPrimaryTouch(o)){var r={x:o.clientX,y:o.clientY};i.push(r);var s=function(e,t){var i=e.indexOf(t);i>-1&&e.splice(i,1)}.bind(null,i,r);setTimeout(s,n)}}},u=Event.prototype.stopImmediatePropagation||Event.prototype.stopPropagation;document.addEventListener("click",function(t){var i=t.clientX,n=t.clientY,r=function(e){var t=Math.abs(i-e.x),r=Math.abs(n-e.y);return o>=t&&o>=r},s=e.mouseEvents.lastTouches.some(r),a=e.targetFinding.path(t);if(s){for(var c=0;c<a.length;c++)if(a[c]===l.firstTarget)return;t.preventDefault(),u.call(t)}},!0),e.touchEvents=l}(i),function(e){var t=e.dispatcher,i=t.pointermap,n=window.MSPointerEvent&&"number"==typeof window.MSPointerEvent.MSPOINTER_TYPE_MOUSE,o={events:["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"],register:function(e){t.listen(e,this.events)},unregister:function(e){e.nodeType!==Node.DOCUMENT_NODE&&t.unlisten(e,this.events)},POINTER_TYPES:["","unavailable","touch","pen","mouse"],prepareEvent:function(e){var i=e;return i=t.cloneEvent(e),n&&(i.pointerType=this.POINTER_TYPES[e.pointerType]),i._source="ms",i},cleanup:function(e){i["delete"](e)},MSPointerDown:function(n){var o=this.prepareEvent(n);o.target=e.findTarget(n),i.set(n.pointerId,o.target),t.down(o)},MSPointerMove:function(e){var n=i.get(e.pointerId);if(n){var o=this.prepareEvent(e);o.target=n,t.move(o)}},MSPointerUp:function(n){var o=this.prepareEvent(n);o.relatedTarget=e.findTarget(n),o.target=i.get(o.pointerId),t.up(o),this.cleanup(n.pointerId)},MSPointerCancel:function(n){var o=this.prepareEvent(n);o.relatedTarget=e.findTarget(n),o.target=i.get(o.pointerId),t.cancel(o),this.cleanup(n.pointerId)}};e.msEvents=o}(i),function(e){var t=e.dispatcher,i=t.pointermap,n={events:["pointerdown","pointermove","pointerup","pointercancel"],prepareEvent:function(e){var i=t.cloneEvent(e);return i._source="pointer",i},register:function(e){t.listen(e,this.events)},unregister:function(e){e.nodeType!==Node.DOCUMENT_NODE&&t.unlisten(e,this.events)},cleanup:function(e){i["delete"](e)},pointerdown:function(n){var o=this.prepareEvent(n);o.target=e.findTarget(n),i.set(o.pointerId,o.target),t.down(o)},pointermove:function(e){var n=i.get(e.pointerId);if(n){var o=this.prepareEvent(e);o.target=n,t.move(o)}},pointerup:function(n){var o=this.prepareEvent(n);o.relatedTarget=e.findTarget(n),o.target=i.get(o.pointerId),t.up(o),this.cleanup(n.pointerId)},pointercancel:function(n){var o=this.prepareEvent(n);o.relatedTarget=e.findTarget(n),o.target=i.get(o.pointerId),t.cancel(o),this.cleanup(n.pointerId)}};e.pointerEvents=n}(i),function(e){var t=e.dispatcher,i=window.navigator;window.PointerEvent?t.registerSource("pointer",e.pointerEvents):i.msPointerEnabled?t.registerSource("ms",e.msEvents):(t.registerSource("mouse",e.mouseEvents),void 0!==window.ontouchstart&&t.registerSource("touch",e.touchEvents));var n=navigator.userAgent,o=n.match(/iPad|iPhone|iPod/)&&"ontouchstart"in window;t.IS_IOS=o,e.touchEvents.IS_IOS=o,t.register(document,!0)}(i),function(e){var t=e.dispatcher,i=e.eventFactory,n=new e.PointerMap,o={events:["down","move","up"],exposes:["trackstart","track","trackx","tracky","trackend"],defaultActions:{track:"none",trackx:"pan-y",tracky:"pan-x"},WIGGLE_THRESHOLD:4,clampDir:function(e){return e>0?1:-1},calcPositionDelta:function(e,t){var i=0,n=0;return e&&t&&(i=t.pageX-e.pageX,n=t.pageY-e.pageY),{x:i,y:n}},fireTrack:function(e,t,n){var o=n,r=this.calcPositionDelta(o.downEvent,t),s=this.calcPositionDelta(o.lastMoveEvent,t);if(s.x)o.xDirection=this.clampDir(s.x);else if("trackx"===e)return;if(s.y)o.yDirection=this.clampDir(s.y);else if("tracky"===e)return;var a={bubbles:!0,cancelable:!0,trackInfo:o.trackInfo,relatedTarget:t.relatedTarget,pointerType:t.pointerType,pointerId:t.pointerId,_source:"track"};"tracky"!==e&&(a.x=t.x,a.dx=r.x,a.ddx=s.x,a.clientX=t.clientX,a.pageX=t.pageX,a.screenX=t.screenX,a.xDirection=o.xDirection),"trackx"!==e&&(a.dy=r.y,a.ddy=s.y,a.y=t.y,a.clientY=t.clientY,a.pageY=t.pageY,a.screenY=t.screenY,a.yDirection=o.yDirection);var l=i.makeGestureEvent(e,a);o.downTarget.dispatchEvent(l)},down:function(e){if(e.isPrimary&&("mouse"===e.pointerType?1===e.buttons:!0)){var t={downEvent:e,downTarget:e.target,trackInfo:{},lastMoveEvent:null,xDirection:0,yDirection:0,tracking:!1};n.set(e.pointerId,t)}},move:function(e){var t=n.get(e.pointerId);if(t){if(!t.tracking){var i=this.calcPositionDelta(t.downEvent,e),o=i.x*i.x+i.y*i.y;o>this.WIGGLE_THRESHOLD&&(t.tracking=!0,t.lastMoveEvent=t.downEvent,this.fireTrack("trackstart",e,t))}t.tracking&&(this.fireTrack("track",e,t),this.fireTrack("trackx",e,t),this.fireTrack("tracky",e,t)),t.lastMoveEvent=e}},up:function(e){var t=n.get(e.pointerId);t&&(t.tracking&&this.fireTrack("trackend",e,t),n["delete"](e.pointerId))}};t.registerGesture("track",o)}(i),function(e){var t=e.dispatcher,i=e.eventFactory,n={HOLD_DELAY:200,WIGGLE_THRESHOLD:16,events:["down","move","up"],exposes:["hold","holdpulse","release"],heldPointer:null,holdJob:null,pulse:function(){var e=Date.now()-this.heldPointer.timeStamp,t=this.held?"holdpulse":"hold";this.fireHold(t,e),this.held=!0},cancel:function(){clearInterval(this.holdJob),this.held&&this.fireHold("release"),this.held=!1,this.heldPointer=null,this.target=null,this.holdJob=null},down:function(e){e.isPrimary&&!this.heldPointer&&(this.heldPointer=e,this.target=e.target,this.holdJob=setInterval(this.pulse.bind(this),this.HOLD_DELAY))},up:function(e){this.heldPointer&&this.heldPointer.pointerId===e.pointerId&&this.cancel()},move:function(e){if(this.heldPointer&&this.heldPointer.pointerId===e.pointerId){var t=e.clientX-this.heldPointer.clientX,i=e.clientY-this.heldPointer.clientY;t*t+i*i>this.WIGGLE_THRESHOLD&&this.cancel()}},fireHold:function(e,t){var n={bubbles:!0,cancelable:!0,pointerType:this.heldPointer.pointerType,pointerId:this.heldPointer.pointerId,x:this.heldPointer.clientX,y:this.heldPointer.clientY,_source:"hold"};t&&(n.holdTime=t);var o=i.makeGestureEvent(e,n);this.target.dispatchEvent(o)}};t.registerGesture("hold",n)}(i),function(e){var t=e.dispatcher,i=e.eventFactory,n=new e.PointerMap,o={events:["down","up"],exposes:["tap"],down:function(e){e.isPrimary&&!e.tapPrevented&&n.set(e.pointerId,{target:e.target,buttons:e.buttons,x:e.clientX,y:e.clientY})},shouldTap:function(e,t){var i=!0;return"mouse"===e.pointerType&&(i=1^e.buttons&&1&t.buttons),i&&!e.tapPrevented},up:function(t){var o=n.get(t.pointerId);if(o&&this.shouldTap(t,o)){var r=e.targetFinding.LCA(o.target,t.relatedTarget);if(r){var s=i.makeGestureEvent("tap",{bubbles:!0,cancelable:!0,x:t.clientX,y:t.clientY,detail:t.detail,pointerType:t.pointerType,pointerId:t.pointerId,altKey:t.altKey,ctrlKey:t.ctrlKey,metaKey:t.metaKey,shiftKey:t.shiftKey,_source:"tap"});r.dispatchEvent(s)}}n["delete"](t.pointerId)}};i.preventTap=function(e){return function(){e.tapPrevented=!0,n["delete"](e.pointerId)}},t.registerGesture("tap",o)}(i),function(e){var t=e.dispatcher,i=e.eventFactory,n=new e.PointerMap,o=180/Math.PI,r={events:["down","up","move","cancel"],exposes:["pinchstart","pinch","pinchend","rotate"],defaultActions:{pinch:"none",rotate:"none"},reference:{},down:function(t){if(n.set(t.pointerId,t),2==n.pointers()){var i=this.calcChord(),o=this.calcAngle(i);this.reference={angle:o,diameter:i.diameter,target:e.targetFinding.LCA(i.a.target,i.b.target)},this.firePinch("pinchstart",i.diameter,i)}},up:function(e){var t=n.get(e.pointerId),i=n.pointers();if(t){if(2===i){var o=this.calcChord();this.firePinch("pinchend",o.diameter,o)}n["delete"](e.pointerId)}},move:function(e){n.has(e.pointerId)&&(n.set(e.pointerId,e),n.pointers()>1&&this.calcPinchRotate())},cancel:function(e){this.up(e)},firePinch:function(e,t,n){var o=t/this.reference.diameter,r=i.makeGestureEvent(e,{bubbles:!0,cancelable:!0,scale:o,centerX:n.center.x,centerY:n.center.y,_source:"pinch"});this.reference.target.dispatchEvent(r)},fireRotate:function(e,t){var n=Math.round((e-this.reference.angle)%360),o=i.makeGestureEvent("rotate",{bubbles:!0,cancelable:!0,angle:n,centerX:t.center.x,centerY:t.center.y,_source:"pinch"});this.reference.target.dispatchEvent(o)},calcPinchRotate:function(){var e=this.calcChord(),t=e.diameter,i=this.calcAngle(e);t!=this.reference.diameter&&this.firePinch("pinch",t,e),i!=this.reference.angle&&this.fireRotate(i,e)},calcChord:function(){var e=[];n.forEach(function(t){e.push(t)});for(var t,i,o,r=0,s={a:e[0],b:e[1]},a=0;a<e.length;a++)for(var l=e[a],u=a+1;u<e.length;u++){var c=e[u];t=Math.abs(l.clientX-c.clientX),i=Math.abs(l.clientY-c.clientY),o=t+i,o>r&&(r=o,s={a:l,b:c})}return t=Math.abs(s.a.clientX+s.b.clientX)/2,i=Math.abs(s.a.clientY+s.b.clientY)/2,s.center={x:t,y:i},s.diameter=r,s},calcAngle:function(e){var t=e.a.clientX-e.b.clientX,i=e.a.clientY-e.b.clientY;return(360+Math.atan2(i,t)*o)%360}};t.registerGesture("pinch",r)}(i)},{}],21:[function(e,t,i){"use strict";function n(e,t){if(!(this instanceof n))throw d('Not called with "new" keyword.');var i,o,s=this;t=t||{},"string"==typeof e?(o=r(document.querySelectorAll(e)),i=c(o)):e[0]instanceof Element?(o=r(e),i=c(o)):(o=[],i=u(e,t),i.forEach(function(e){o=o.concat(r(e.element.querySelectorAll("li")))})),i.forEach(function(e){e.element.addEventListener("wheel",h)}),o.forEach(function(e,t){var i=e!==e.parentElement.lastElementChild?s.addEvt(e,"mousedown",e,!0):{element:e};o[t]=i}),g="transform"in o[0].element.style?"transform":"-webkit-transform",this.modelLists=i,this.items=o,this.bindings={},this.callback={},m(v,"list-dragon-base",t.cssStylesheetReferenceElement)}function o(e,t,i){if(e){var n=0>p&&e>=0||0===p&&0!==e||p>0&&0>=e;p=e>0?Math.min(50,e):Math.max(-50,e),n&&(clearInterval(f),f=setInterval(function(e){var t=i.scrollTop+p;0>p&&e>t||p>0&&t>e?(i.scrollTop=e,clearInterval(f)):i.scrollTop=t},125))}else clearInterval(f),p=0}function r(e){return Array.prototype.slice.call(e)}function s(e,t){return t.top<=e.y&&e.y<=t.bottom&&t.left<=e.x&&e.x<=t.right}function a(e,t){return"translate("+Math.floor(e+window.scrollX)+"px,"+Math.floor(t+window.scrollY)+"px)"}function l(e){var t=document.createTextNode(e);return document.createElement("a").appendChild(t).parentNode.innerHTML}function u(e,t){var i=t.label||"{label}";return e.forEach(function(n,o){var r=n.label||i,s=void 0!==n.htmlEncode&&n.htmlEncode||t.htmlEncode,a=document.createElement("div"),u=document.createElement("ul");if(n.models)Object.keys(n).forEach(function(e){"models"!==e&&(n.models[e]=n[e])}),e[o]=n=n.models;else{if(!(n instanceof Array))throw d("List [{1}] not an array of models (with or without additional properties) OR an object (with a `models` property containing an array of models).",o);n.models=n}n.forEach(function(e){var i=e.label||r,o=void 0!==e.htmlEncode&&e.htmlEncode||s,a="object"==typeof e?e:{label:e},c=C.call([a,n,t],i),h=document.createElement("li");h.innerHTML=o?l(c):c,u.appendChild(h)});var c=document.createElement("li");if(c.innerHTML="&nbsp;",u.appendChild(c),n.title){var h=document.createElement("div");h.innerHTML=s?l(n.title):n.title,a.appendChild(h)}a.appendChild(u),a.className=n.cssClassNames||t.cssClassNames||"dragon-list",n.element=u,n.container=a}),e}function c(e){var t=[];return e.forEach(function(e){var i=e.parentElement,n=i.parentElement,o=[];t.find(function(e){return e.element===i})||(r(i.querySelectorAll("li")).forEach(function(e){e!==i.lastElementChild&&o.push(e.innerHTML)}),o.element=i,o.container=n,t.push(o))}),t}function h(e){e.stopPropagation()}function d(){return"list-dragon: "+C.apply(this,Array.prototype.slice.call(arguments))}var g,f,p,v,m=e("css-injector"),C=e("templex"),w=null;v="div.dragon-list{position:relative;background-color:#fff}div.dragon-list>div,div.dragon-list>ul{position:absolute;left:0;right:0}div.dragon-list>div{text-align:center;background-color:#00796b;color:#fff;box-shadow:0 3px 6px rgba(0,0,0,.16),0 3px 6px rgba(0,0,0,.23);overflow:hidden;white-space:nowrap}div.dragon-list>ul{overflow-y:auto;bottom:0;margin:0;padding:0;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24)}div.dragon-list>ul>li,li.dragon-pop{white-space:nowrap;list-style-type:none;border:0 solid #f4f4f4;border-bottom:1px solid #e0e0e0;cursor:move;transition:border-top-width .2s}div.dragon-list>ul>li:last-child{height:0;border-bottom:none}li.dragon-pop{position:fixed;background-color:#fff;border:1px solid #e0e0e0;left:0;top:0;overflow-x:hidden;box-shadow:rgba(0,0,0,.188235) 0 10px 20px,rgba(0,0,0,.227451) 0 6px 6px}",n.prototype={addEvt:function(e,t,i,n){var o={handler:b[t].bind(e,this),element:i||window};return n||(this.bindings[t]=o),o.element.addEventListener(t,o.handler),o},removeEvt:function(e){var t=this.bindings[e];delete this.bindings[e],t.element.removeEventListener(e,t.handler)},removeAllEventListeners:function(){for(var e in this.bindings){var t=this.bindings[e];t.element.removeEventListener(e,t.handler)}this.items.forEach(function(e){e.handler&&e.element.removeEventListener("mousedown",e.handler)}),this.modelLists.forEach(function(e){e.element.removeEventListener("wheel",h)})},pointInListRects:function(e){return this.modelLists.find(function(t){var i=t.element.getBoundingClientRect();return i={left:window.scrollX+i.left,top:window.scrollY+i.top,right:window.scrollX+i.right,bottom:window.scrollY+i.bottom,width:i.width,height:i.height},t.rect=i,s(e,i)?(t.rect=i,!0):!1})},pointInItemRects:function(e,t,i){return this.items.find(function(n){var o=n.element;return o!==t&&o!==i&&s(e,n.rect)})},getAllItemBoundingRects:function(){var e,t=this.modelLists;this.items.forEach(function(i){var n=i.element,o=n.parentElement,r=t.find(function(e){return e.element===o});if(void 0===r.isDropTarget||"function"==typeof r.isDropTarget&&r.isDropTarget()||r.isDropTarget){var s=n.getBoundingClientRect(),a=s.bottom;n===o.lastElementChild?(a=o.getBoundingClientRect().bottom,a<s.top&&(a=s.top+(e||50))):e=s.height,s={left:window.scrollX+s.left,right:window.scrollX+s.right,top:window.scrollY+s.top+o.scrollTop,bottom:window.scrollY+a+o.scrollTop},i.rect=s}})},reinsert:function(e){var t=e.style;t.width=t[g]=t.transition=w,e.classList.remove("dragon-pop"),this.drop.style.transitionDuration="0s",this.drop.style.borderTopWidth=w,this.drop.parentElement.insertBefore(e,this.drop),delete this.drop},itemCoordinates:function(e){for(var t=e.parentElement,i={item:0};e=e.previousElementSibling;)++i.item;return this.modelLists.find(function(e,n){return i.list=n,e.element===t}),i}};var b={mousedown:function(e,t){if(t.stopPropagation(),t.preventDefault(),!e.drop){var i=this.getBoundingClientRect();if(e.rect=i={left:Math.round(i.left-1),top:Math.round(i.top-1),right:Math.round(i.right),bottom:Math.round(i.bottom),width:Math.round(i.width),height:Math.round(i.height)},e.pin={x:window.scrollX+t.clientX,y:window.scrollY+t.clientY},e.origin=e.itemCoordinates(this),e.callback.grabbed&&e.callback.grabbed.call(this,e),e.getAllItemBoundingRects(),e.drop=this.nextElementSibling,e.drop.style.transitionDuration="0s",e.drop.style.borderTopWidth=i.height+"px",this.style.width=i.width+"px",this.style.transitionDuration="0s",this.style[g]=a(i.left-window.scrollX,i.top-window.scrollY),this.classList.add("dragon-pop"),this.style.zIndex=window.getComputedStyle(e.modelLists[0].container.parentElement).zIndex,!e.container){for(var n=this;n.parentNode&&(n=n.parentNode,!("undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot||"BODY"===n.tagName)););e.container=n}e.container.appendChild(this),i.left+=window.scrollX,i.top+=window.scrollY,i.right+=window.scrollX,i.bottom+=window.scrollY,e.addEvt(this,"mousemove"),e.addEvt(this,"mouseup")}},mousemove:function(e,t){e.drop.style.transition=w;var i=e.pointInListRects({x:t.clientX,y:t.clientY})||e.mostRecentHoverList;if(i){var n=t.clientX-e.pin.x,r=t.clientY-e.pin.y;e.mostRecentHoverList=i;var s,l=i.element.scrollHeight-i.rect.height,u=t.clientY+window.scrollY;l>0&&(i.element.scrollTop>0&&(s=u-(i.rect.top+5))<0?o(s,0,i.element):i.element.scrollTop<l&&(s=u-(i.rect.bottom-1-5))>0?o(s,l,i.element):o());var c=e.pointInItemRects({x:t.clientX,y:e.rect.bottom+window.scrollY+r+i.element.scrollTop},this,e.drop);if(this.style[g]=a(e.rect.left-window.scrollX+n,e.rect.top-window.scrollY+r),c){var h=c.element;h.style.transition=w,h.style.borderTopWidth=e.drop.style.borderTopWidth,e.drop.style.borderTopWidth=null,e.drop=h}}},mouseup:function(e,t){o(),e.removeEvt("mousemove"),e.removeEvt("mouseup"),t.stopPropagation();var i=this.getBoundingClientRect();if(window.scrollX+i.left===e.rect.left&&window.scrollY+i.top===e.rect.top)e.reinsert(this);else{var n=e.drop.getBoundingClientRect();e.addEvt(this,"transitionend",this),this.style.transitionDuration=w,this.style.transitionProperty=g,this.style[g]=a(n.left-window.scrollX,n.top-window.scrollY)}},transitionend:function(e,t){if(t.propertyName===g){e.removeEvt("transitionend"),e.reinsert(this),this.style.transitionProperty=w;var i=e.modelLists[e.origin.list].splice(e.origin.item,1)[0],n=e.itemCoordinates(this);e.modelLists[n.list].splice(n.item,0,i),e.callback.dropped&&e.callback.dropped.call(this,e)}}};t.exports=n},{"css-injector":4,templex:29}],22:[function(e,t,i){!function(){function e(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function i(){return 1}function n(e){d||"string"==typeof e||"number"==typeof e||(d=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof e).stack))}function o(e){return this instanceof o?("number"==typeof e&&(e={max:e}),e||(e={}),this._max=e.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=e.length||i,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=i),this._allowStale=e.stale||!1,this._maxAge=e.maxAge||null,this._dispose=e.dispose,void this.reset()):new o(e)}function r(e,t,i){n(t);var o=e._cache[t];return o&&(s(e,o)?(c(e,o),e._allowStale||(o=void 0)):i&&a(e,o),o&&(o=o.value)),o}function s(e,t){if(!t||!t.maxAge&&!e._maxAge)return!1;var i=!1,n=Date.now()-t.now;return i=t.maxAge?n>t.maxAge:e._maxAge&&n>e._maxAge}function a(e,t){u(e,t),t.lu=e._mru++,e._lruList[t.lu]=t}function l(e){for(;e._lru<e._mru&&e._length>e._max;)c(e,e._lruList[e._lru])}function u(e,t){for(delete e._lruList[t.lu];e._lru<e._mru&&!e._lruList[e._lru];)e._lru++}function c(e,t){t&&(e._dispose&&e._dispose(t.key,t.value),e._length-=t.length,e._itemCount--,delete e._cache[t.key],u(e,t))}function h(e,t,i,n,o,r){this.key=e,this.value=t,this.lu=i,this.length=n,this.now=o,r&&(this.maxAge=r)}"object"==typeof t&&t.exports?t.exports=o:this.LRUCache=o;var d=!1;Object.defineProperty(o.prototype,"max",{set:function(e){(!e||"number"!=typeof e||0>=e)&&(e=1/0),this._max=e,this._length>this._max&&l(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(o.prototype,"lengthCalculator",{set:function(e){if("function"!=typeof e){this._lengthCalculator=i,this._length=this._itemCount;for(var t in this._cache)this._cache[t].length=1}else{this._lengthCalculator=e,this._length=0;for(var t in this._cache)this._cache[t].length=this._lengthCalculator(this._cache[t].value),this._length+=this._cache[t].length}this._length>this._max&&l(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(o.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(o.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),o.prototype.forEach=function(e,t){t=t||this;for(var i=0,n=this._itemCount,o=this._mru-1;o>=0&&n>i;o--)if(this._lruList[o]){i++;var r=this._lruList[o];s(this,r)&&(c(this,r),this._allowStale||(r=void 0)),r&&e.call(t,r.value,r.key,this)}},o.prototype.keys=function(){for(var e=new Array(this._itemCount),t=0,i=this._mru-1;i>=0&&t<this._itemCount;i--)if(this._lruList[i]){var n=this._lruList[i];e[t++]=n.key}return e},o.prototype.values=function(){for(var e=new Array(this._itemCount),t=0,i=this._mru-1;i>=0&&t<this._itemCount;i--)if(this._lruList[i]){var n=this._lruList[i];e[t++]=n.value}return e},o.prototype.reset=function(){if(this._dispose&&this._cache)for(var e in this._cache)this._dispose(e,this._cache[e].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},o.prototype.dump=function(){for(var e=[],t=0,i=this._mru-1;i>=0&&t<this._itemCount;i--)if(this._lruList[i]){var n=this._lruList[i];s(this,n)||(++t,e.push({k:n.key,v:n.value,e:n.now+(n.maxAge||0)}))}return e},o.prototype.dumpLru=function(){return this._lruList},o.prototype.set=function(t,i,o){o=o||this._maxAge,n(t);var r=o?Date.now():0,s=this._lengthCalculator(i);if(e(this._cache,t))return s>this._max?(c(this,this._cache[t]),!1):(this._dispose&&this._dispose(t,this._cache[t].value),this._cache[t].now=r,this._cache[t].maxAge=o,this._cache[t].value=i,this._length+=s-this._cache[t].length,this._cache[t].length=s,this.get(t),this._length>this._max&&l(this),!0);var a=new h(t,i,this._mru++,s,r,o);return a.length>this._max?(this._dispose&&this._dispose(t,i),!1):(this._length+=a.length,this._lruList[a.lu]=this._cache[t]=a,this._itemCount++,this._length>this._max&&l(this),!0)},o.prototype.has=function(t){if(n(t),!e(this._cache,t))return!1;var i=this._cache[t];return s(this,i)?!1:!0},o.prototype.get=function(e){return n(e),r(this,e,!0)},o.prototype.peek=function(e){return n(e),r(this,e,!1)},o.prototype.pop=function(){var e=this._lruList[this._lru];return c(this,e),e||null},o.prototype.del=function(e){n(e),c(this,this._cache[e])},o.prototype.load=function(e){this.reset();for(var t=Date.now(),i=e.length-1;i>=0;i--){var o=e[i];n(o.k);var r=o.e||0;if(0===r)this.set(o.k,o.v);else{var s=r-t;s>0&&this.set(o.k,o.v,s)}}}}()},{}],23:[function(e,t,i){!function(e,t){"object"==typeof i&&i&&"string"!=typeof i.nodeName?t(i):"function"==typeof define&&define.amd?define(["exports"],t):(e.Mustache={},t(e.Mustache))}(this,function(e){function t(e){return"function"==typeof e}function i(e){return p(e)?"array":typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}function r(e,t){return v.call(e,t)}function s(e){return!r(m,e)}function a(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return C[e]})}function l(t,i){function o(){if(m&&!C)for(;v.length;)delete f[v.pop()];else v=[];m=!1,C=!1}function r(e){if("string"==typeof e&&(e=e.split(b,2)),!p(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(n(e[0])+"\\s*"),l=new RegExp("\\s*"+n(e[1])),d=new RegExp("\\s*"+n("}"+e[1]))}if(!t)return[];var a,l,d,g=[],f=[],v=[],m=!1,C=!1;r(i||e.tags);for(var E,A,R,k,M,T,P=new h(t);!P.eos();){if(E=P.pos,R=P.scanUntil(a))for(var D=0,F=R.length;F>D;++D)k=R.charAt(D),s(k)?v.push(f.length):C=!0,f.push(["text",k,E,E+1]),E+=1,"\n"===k&&o();if(!P.scan(a))break;if(m=!0,A=P.scan(S)||"name",P.scan(w),"="===A?(R=P.scanUntil(y),P.scan(y),P.scanUntil(l)):"{"===A?(R=P.scanUntil(d),P.scan(x),P.scanUntil(l),A="&"):R=P.scanUntil(l),!P.scan(l))throw new Error("Unclosed tag at "+P.pos);if(M=[A,R,E,P.pos],f.push(M),"#"===A||"^"===A)g.push(M);else if("/"===A){if(T=g.pop(),!T)throw new Error('Unopened section "'+R+'" at '+E);if(T[1]!==R)throw new Error('Unclosed section "'+T[1]+'" at '+E)}else"name"===A||"{"===A||"&"===A?C=!0:"="===A&&r(R)}if(T=g.pop())throw new Error('Unclosed section "'+T[1]+'" at '+P.pos);return c(u(f))}function u(e){for(var t,i,n=[],o=0,r=e.length;r>o;++o)t=e[o],t&&("text"===t[0]&&i&&"text"===i[0]?(i[1]+=t[1],i[3]=t[3]):(n.push(t),i=t));return n}function c(e){for(var t,i,n=[],o=n,r=[],s=0,a=e.length;a>s;++s)switch(t=e[s],t[0]){case"#":case"^":o.push(t),r.push(t),o=t[4]=[];break;case"/":i=r.pop(),i[5]=t[2],o=r.length>0?r[r.length-1][4]:n;break;default:o.push(t)}return n}function h(e){this.string=e,this.tail=e,this.pos=0}function d(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.cache={}}var f=Object.prototype.toString,p=Array.isArray||function(e){return"[object Array]"===f.call(e)},v=RegExp.prototype.test,m=/\S/,C={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},w=/\s*/,b=/\s+/,y=/\s*=/,x=/\s*\}/,S=/#|\^|\/|>|\{|&|=|!/;h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var i=t[0];return this.tail=this.tail.substring(i.length),this.pos+=i.length,i},h.prototype.scanUntil=function(e){var t,i=this.tail.search(e);switch(i){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,i),this.tail=this.tail.substring(i)}return this.pos+=t.length,t},d.prototype.push=function(e){return new d(e,this)},d.prototype.lookup=function(e){var i,n=this.cache;if(n.hasOwnProperty(e))i=n[e];else{for(var r,s,a=this,l=!1;a;){if(e.indexOf(".")>0)for(i=a.view,r=e.split("."),s=0;null!=i&&s<r.length;)s===r.length-1&&(l=o(i,r[s])),i=i[r[s++]];else i=a.view[e],l=o(a.view,e);if(l)break;a=a.parent}n[e]=i}return t(i)&&(i=i.call(this.view)),i},g.prototype.clearCache=function(){this.cache={}},g.prototype.parse=function(e,t){var i=this.cache,n=i[e];return null==n&&(n=i[e]=l(e,t)),n},g.prototype.render=function(e,t,i){var n=this.parse(e),o=t instanceof d?t:new d(t);return this.renderTokens(n,o,i,e)},g.prototype.renderTokens=function(e,t,i,n){for(var o,r,s,a="",l=0,u=e.length;u>l;++l)s=void 0,o=e[l],r=o[0],"#"===r?s=this.renderSection(o,t,i,n):"^"===r?s=this.renderInverted(o,t,i,n):">"===r?s=this.renderPartial(o,t,i,n):"&"===r?s=this.unescapedValue(o,t):"name"===r?s=this.escapedValue(o,t):"text"===r&&(s=this.rawValue(o)),void 0!==s&&(a+=s);return a},g.prototype.renderSection=function(e,i,n,o){function r(e){return s.render(e,i,n)}var s=this,a="",l=i.lookup(e[1]);if(l){if(p(l))for(var u=0,c=l.length;c>u;++u)a+=this.renderTokens(e[4],i.push(l[u]),n,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)a+=this.renderTokens(e[4],i.push(l),n,o);else if(t(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");l=l.call(i.view,o.slice(e[3],e[5]),r),null!=l&&(a+=l)}else a+=this.renderTokens(e[4],i,n,o);return a}},g.prototype.renderInverted=function(e,t,i,n){var o=t.lookup(e[1]);return!o||p(o)&&0===o.length?this.renderTokens(e[4],t,i,n):void 0},g.prototype.renderPartial=function(e,i,n){if(n){var o=t(n)?n(e[1]):n[e[1]];return null!=o?this.renderTokens(this.parse(o),i,n,o):void 0}},g.prototype.unescapedValue=function(e,t){var i=t.lookup(e[1]);return null!=i?i:void 0},g.prototype.escapedValue=function(t,i){var n=i.lookup(t[1]);return null!=n?e.escape(n):void 0},g.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.2.1",e.tags=["{{","}}"];var E=new g;e.clearCache=function(){return E.clearCache()},e.parse=function(e,t){return E.parse(e,t)},e.render=function(e,t,n){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+i(e)+'" was given as the first argument for mustache#render(template, view, partials)');return E.render(e,t,n)},e.to_html=function(i,n,o,r){
var s=e.render(i,n,o);return t(r)?void r(s):s},e.escape=a,e.Scanner=h,e.Context=d,e.Writer=g})},{}],24:[function(e,t,i){"use strict";function n(e){return e instanceof n?e:this instanceof n?(this.originalValue=e,void(this.o=e||{})):new n(e)}n.chain=function(e){var t=n(e);return t.chaining=!0,t},n.prototype={value:function(){return this.originalValue},each:function(e,t){var i=this.o;return Object.keys(i).forEach(function(t){e.call(this,i[t],t,i)},t||i),this},find:function(e,t){var i,n=this.o;return n&&(i=Object.keys(n).find(function(t){return e.call(this,n[t],t,n)},t||n),void 0!==i&&(i=n[i])),i},filter:function(e,t){var i=this.o,n=[];return i&&Object.keys(i).forEach(function(t){e.call(this,i[t],t,i)&&n.push(i[t])},t||i),n},map:function(e,t){var i=this.o,n=[];return i&&Object.keys(i).forEach(function(t){n.push(e.call(this,i[t],t,i))},t||i),n},reduce:function(e,t,i){var n=this.o;return n&&Object.keys(n).forEach(function(i,o){t=o||void 0!==t?e(t,n[i],i,n):n[i]},i||n),t},extend:function(e){var t=this.o;return Array.prototype.slice.call(arguments).forEach(function(e){if(e)for(var i in e)t[i]=e[i]}),this.chaining?this:t},extendOwn:function(e){var t=this.o;return Array.prototype.slice.call(arguments).forEach(function(e){n(e).each(function(e,i){t[i]=e})}),this.chaining?this:t}},Array.prototype.find||(Array.prototype.find=function(e){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var t,i=Object(this),n=i.length>>>0,o=arguments[1],r=0;n>r;r++)if(t=i[r],e.call(o,t,r,i))return t}),t.exports=n},{}],25:[function(e,t,i){"use strict";function n(e,t,i){i=i||{};var r,s=i.prompt,a=i.blacklist,l=i.sort,c=i.breadcrumbs||[],h=c?c.join(".")+".":"";if(e instanceof Element?(r=e.tagName,i.append||(e.innerHTML="")):(r=e,e=document.createElement(r)),t){var d,g;"SELECT"===r?(d=e.add,s?(g=new Option(s,""),g.innerHTML+="&hellip;",e.add(g)):null!==s&&e.add(new Option)):(d=e.appendChild,e.label=s),l&&(t=t.slice().sort(o)),t.forEach(function(t,o){if(i&&"string"==typeof t){var r=t.match(u);if(r){var s=r[1],g=r[2],f=i[s];if("function"!=typeof f)throw"build: Expected options."+s+" to be a function.";t=f(g)}}var p=t.submenu||t;if(p instanceof Array){var v={breadcrumbs:c.concat(o+1),prompt:t.label||"Group "+h+(o+1),options:l,blacklist:a},m=n("OPTGROUP",p,v);m.childElementCount&&e.add(m)}else if("object"!=typeof t)a&&a.indexOf(t)>=0||d.call(e,new Option(t));else if(!t.hidden){var C=t.name||t.alias;a&&a.indexOf(C)>=0||d.call(e,new Option(t.alias||t.name,C))}})}else e.type="text";return e}function o(e,t){return e=e.alias||e.name||e.label||e,t=t.alias||t.name||t.label||t,t>e?-1:e>t?1:0}function r(e,t){var i,n,o;return i=e.find(function(e){var i=e.submenu||e;return i instanceof Array?n=r(i,t):(e.name||e)===t}),o=n||i,o&&(o.name?o:{name:o})}function s(e,t){var i=0;return e.forEach(function(e){var n=e.submenu||e;n instanceof Array?i+=s(n,t):(t(e.name?e:{name:e},i),i+=1)}),i}function a(e){var t=e.name||e;return e.alias&&(t='"'+e.alias+'" ('+t+")"),t}function l(e){return u.test(e)}var u=/^(\w+)\((\w+)\)$/,c={build:n,walk:s,findItem:r,formatItem:a,isGroupProxy:l};t.exports=c},{}],26:[function(e,t,i){"use strict";function n(e,t){Object.defineProperty(this,e,{value:t,writable:!1,enumerable:!0,configurable:!1})}function o(e,t){n.call(this,"x",Number(e)||0),n.call(this,"y",Number(t)||0)}function r(e,t,i,r){e=Number(e)||0,t=Number(t)||0,i=Number(i)||0,r=Number(r)||0,0>i&&(e+=i,i=-i),0>r&&(t+=r,r=-r),n.call(this,"origin",new o(e,t)),n.call(this,"extent",new o(i,r)),n.call(this,"corner",new o(e+i,t+r)),n.call(this,"center",new o(e+i/2,t+r/2))}o.prototype={plus:function(e){return new o(this.x+e.x,this.y+e.y)},plusXY:function(e,t){return new o(this.x+(e||0),this.y+(t||0))},minus:function(e){return new o(this.x-e.x,this.y-e.y)},min:function(e){return new o(Math.min(this.x,e.x),Math.min(this.y,e.y))},max:function(e){return new o(Math.max(this.x,e.x),Math.max(this.y,e.y))},distance:function(e){var t=e.x-this.x,i=e.y-this.y;return Math.sqrt(t*t+i*i)},equals:function(e){var t=!1;return e&&(t=this.x===e.x&&this.y===e.y),t},greaterThan:function(e){return this.x>e.x&&this.y>e.y},lessThan:function(e){return this.x<e.x&&this.y<e.y},greaterThanOrEqualTo:function(e){return this.x>=e.x&&this.y>=e.y},lessThanOrEqualTo:function(e){return this.x<=e.x&&this.y<=e.y},within:function(e){var t=e.origin.x,i=t+e.extent.x,n=e.origin.y,o=n+e.extent.y;return e.extent.x<0&&(t=i,i=e.origin.x),e.extent.y<0&&(n=o,o=e.origin.y),t<=this.x&&this.x<i&&n<=this.y&&this.y<o}},o.prototype.EQ=o.prototype.equals,o.prototype.GT=o.prototype.greaterThan,o.prototype.LT=o.prototype.lessThan,o.prototype.GE=o.prototype.greaterThanOrEqualTo,o.prototype.LE=o.prototype.lessThanOrEqualTo,r.prototype={get top(){return this.origin.y},get left(){return this.origin.x},get bottom(){return this.corner.y},get right(){return this.corner.x},get width(){return this.extent.x},get height(){return this.extent.y},get area(){return this.width*this.height},flattenXAt:function(e){return new r(e,this.origin.y,0,this.extent.y)},flattenYAt:function(e){return new r(this.origin.x,e,this.extent.x,0)},contains:function(e){return e.within(this)},within:function(e){return e.origin.lessThanOrEqualTo(this.origin)&&e.corner.greaterThanOrEqualTo(this.corner)},growBy:function(e){return new r(this.origin.x+e,this.origin.y+e,this.extent.x-e-e,this.extent.y-e-e)},shrinkBy:function(e){return this.growBy(-e)},union:function(e){var t=this.origin.min(e.origin),i=this.corner.max(e.corner),n=i.minus(t);return new r(t.x,t.y,n.x,n.y)},forEach:function(e,t){t=t||this;for(var i=this.origin.x,n=this.corner.x;n>i;i++)for(var o=this.origin.y,r=this.corner.y;r>o;o++)e.call(t,i,o)},intersect:function(e,t,i){var n=null,o=this.origin.max(e.origin),s=this.corner.min(e.corner),a=s.minus(o);return a.x>0&&a.y>0?n=new r(o.x,o.y,a.x,a.y):"function"==typeof t&&(n=t.call(i||this,e)),n},intersects:function(e){return e.corner.x>this.origin.x&&e.corner.y>this.origin.y&&e.origin.x<this.corner.x&&e.origin.y<this.corner.y}},i.Point=o,i.Rectangle=r},{}],27:[function(e,t,i){"use strict";function n(e,t){var i,o;if(o=e.match(c)){for(i=0;i<o.length;++i)"["===o[i][0]&&(o[i]=n.reserve(o[i])),o[i]="("+o[i]+")";for(o=e.match(new RegExp(a+o.join(a)+a)),o.shift(),i=1;i<o.length;i+=2){var h=o[i];switch(h){case u:h=r;break;case l:h=s;break;default:var d="^"===h[1]?2:1;h="["+n.reserve(h.substr(d,h.length-(d+1)))+"]"}o[i]=h}}else o=[e];for(i=0;i<o.length;i+=2)o[i]=n.reserve(o[i]);return o=o.join(""),o=o.substr(0,2)===r?o.substr(2):"^"+o,o.substr(-2,2)===r?o=o.substr(0,o.length-2):o+="$",new RegExp(o,t?"i":void 0)}var o=/([\.\\\+\*\?\^\$\(\)\{\}\=\!\<\>\|\:\[\]])/g,r=".*",s=".",a="("+r+")",l="_",u="%",c=new RegExp("("+[l,u,"\\[\\^?[^-\\]]+]","\\[\\^?[^-\\]]\\-[^\\]]]"].join("|")+")","g");n.reserve=function(e){return e.replace(o,"\\$1")};var h,d;(n.clearCache=function(e){return e?h[e]&&(delete h[e],d--):(h={},d=0),d})(),n.getCacheSize=function(){return d},n.cached=function(e,t,i){"string"==typeof e&&(i=t,t=e,e=!1);var o=t+(i?"i":"c"),r=h[o];if(r)r.when=(new Date).getTime(),void 0!==e&&(r.keep=e);else{if(d===n.cacheMax){var s,a,l=[],u=0;for(s in h)if(r=h[s],!r.keep){for(a=0;u>a&&!(r.when<l[a].item.when);++a);l.splice(a,0,{key:s,item:r}),u++}if(!l.length)return n(t,i);for(a=Math.ceil(l.length/10),d-=a;a--;)delete h[l[a].key]}r=h[o]={regex:n(t,i),keep:e,when:(new Date).getTime()},d++}return r.regex},t.exports=n},{}],28:[function(e,t,i){"use strict";(function(e){function t(){this.selection=[],this.states=[],this.storeState=function(){for(var e,t=this.selection,i=[],n=0;n<t.length;n++)e=[].concat(t[n]),i.push(e);this.states.push(i)}}function i(e,t){return e instanceof Array?i.apply(this,e):void 0===t?[e,e]:t>=e?[e,t]:[t,e]}function n(e,t){return e[0]<=t[0]&&t[0]<=e[1]||e[0]<=t[1]&&t[1]<=e[1]||t[0]<e[0]&&e[1]<t[1]}function o(e,t){return e[1]===t[0]-1||t[1]===e[0]-1}function r(e,t){var i=e[0],n=e[1],o=t[0],r=t[1],s=[];return i>=o&&n>r?s.push([r+1,n]):o>i&&r>=n?s.push([i,o-1]):o>i&&n>r?(s.push([i,o-1]),s.push([r+1,n])):(i>r||o>n)&&s.push(e),s}function s(e,t){var i=Math.min(Math.min.apply(Math,e),Math.min.apply(Math,t)),n=Math.max(Math.max.apply(Math,e),Math.max.apply(Math,t));return[i,n]}t.prototype={select:function(e,t){this.storeState();var r=i(e,t),a=[0,1];return this.selection.forEach(function(e){n(e,r)||o(e,r)?r=s(e,r):a.push(e)}),a.push(r),a[1]=this.selection.length,this.selection.splice.apply(this.selection,a),this},deselect:function(e,t){var o=i(e,t),s=[0,0];return this.selection.forEach(function(e){if(n(e,o)){var t=r(e,o);s=s.concat(t)}else s.push(e)}),s[1]=this.selection.length,this.selection.splice.apply(this.selection,s),this},clear:function(){return this.states.length=0,this.selection.length=0,this},clearMostRecentSelection:function(){0!==this.states.length&&(this.selection=this.states.pop())},isSelected:function(e){return this.selection.some(function(t){return t[0]<=e&&e<=t[1]})},isEmpty:function(){return 0===this.selection.length},getSelections:function(){var e=[];return this.selection.forEach(function(t){for(var i=t[0];i<=t[1];i++)e.push(i)}),e.sort(function(e,t){return e-t}),e}},e.exports=t})("object"==typeof t&&t||(window.RangeSelectionModel={}),"object"==typeof t&&t.exports||(window.RangeSelectionModel.exports={}))||"object"==typeof t||(window.RangeSelectionModel=window.RangeSelectionModel.exports)},{}],29:[function(require,module,exports){function templex(e){var t=this instanceof Array?this:[this];return arguments.length>1&&t.unshift(arguments),e.replace(templex.regexp,templex.merger.bind(t))}templex.regexp=/\{(.*?)\}/g,templex["with"]=function(e,t){return"with(this["+e+"]){"+t+"}"},templex.cache=[],templex.deref=function(key){if(!(this.length in templex.cache)){for(var code="return eval(expr)",i=0;i<this.length;++i)code=templex["with"](i,code);templex.cache[this.length]=eval("(function(expr){"+code+"})")}return templex.cache[this.length].call(this,key)},templex.merger=function(e,t){var i;try{i=isNaN(t)?templex.deref.call(this,t):this[0][t]}catch(n){i="{"+t+"}"}return i},module.exports=templex},{}],30:[function(e,t,i){"use strict";function n(e){var t,i,o="function"==typeof this.toJSON?this.toJSON():this;return n.isArray(o)?(t=[],i=e&&e.nullElements,o.forEach(function(e){var o=n.call(e);void 0!==o?t.push(o):i&&t.push(null)})):"object"==typeof o?(t={},i=e&&e.nullProperties,Object.keys(o).forEach(function(e){var r=o[e];void 0!==r&&(r=n.call(o[e])),void 0!==r?t[e]=r:i&&(t[e]=null)})):t=o,t}n.isArray=function(e){return e.constructor===Array},n.crossFramesIsArray=function(e){return o.call(e)===r};var o=Object.prototype.toString,r="[object Array]";t.exports=n},{}],31:[function(e,t,i){"use strict";function n(e,t,i){var n=this;this.div="string"==typeof e?document.querySelector(e):e,w("grid"),this.lastEdgeSelection=[0,0],this.lnfProperties=Object.create(E),this.isWebkit=navigator.userAgent.toLowerCase().indexOf("webkit")>-1,this.selectionModel=new C(this),this.localCellEditors={},this.cellEditors=Object.create(this.localCellEditors),this.renderOverridesCache={},this.behavior=t(this),this.div.oncontextmenu=function(e){return e.preventDefault(),!1},this.clearMouseDown(),this.dragExtent=new g(0,0),this.numRows=0,this.numColumns=0,this.pluginsDo(function(e){e.installOn&&e.installOn(n)}),i=i||{},i.top=i.top||0,i.right=i.right||"-200px",i.bottom=i.bottom||0,i.left=i.left||0,x||(x=!0,s()),this.initRenderer(),this.initCanvas(i),this.initScrollbars(),this.initLocalCellEditors(),document.body.addEventListener("copy",function(e){n.checkClipboardCopy(e)}),this.getCanvas().resize(),this.dialog=new b(this)}function o(e,t){return p(t).each(function(t,i){"object"==typeof e[i]&&"object"==typeof t?o(e[i],t):void 0===t?delete e[i]:e[i]=t}),e}function r(e){var t=e.origin,i=e.corner,n=Math.min(t.x,i.x),o=Math.min(t.y,i.y),r=Math.max(t.x,i.x),s=Math.max(t.y,i.y),a=new f(n,o,r-n,s-o);return a}function s(){a(S);var e=document.createElement("paper-button");e.style.display="none",e.setAttribute("disabled",!0),document.body.appendChild(e);var t=window.getComputedStyle(e),i=document.createElement("section");i.style.display="none",i.setAttribute("hero",!0),document.body.appendChild(i);var n=window.getComputedStyle(document.querySelector("html")),o=window.getComputedStyle(document.querySelector("html, body")),r=window.getComputedStyle(i);S.columnHeaderBackgroundColor=t.color,S.rowHeaderBackgroundColor=t.color,S.topLeftBackgroundColor=t.color,S.lineColor=t.backgroundColor,S.backgroundColor2=o.backgroundColor,S.color=n.color,S.fontFamily=n.fontFamily,S.backgroundColor=r.backgroundColor,e.setAttribute("disabled",!1),e.setAttribute("secondary",!0),e.setAttribute("raised",!0),t=window.getComputedStyle(e),S.columnHeaderColor=t.color,S.rowHeaderColor=t.color,S.topLeftColor=t.color,S.backgroundSelectionColor=t.backgroundColor,S.foregroundSelectionColor=t.color,e.setAttribute("secondary",!1),e.setAttribute("warning",!0),S.columnHeaderForegroundSelectionColor=t.color,S.columnHeaderBackgroundSelectionColor=t.backgroundColor,S.rowHeaderForegroundSelectionColor=t.color,S.fixedColumnBackgroundSelectionColor=t.backgroundColor,("rgba(0, 0, 0, 0)"===S.columnHeaderBackgroundSelectionColor||"transparent"===S.lineColor)&&a(S),document.body.removeChild(e),document.body.removeChild(i)}function a(e){for(var t in e)e.hasOwnProperty(t)&&delete e[t]}function l(e){var t="f"===(typeof e)[0]?e():e;return t||0===t?t:""}var u=e("extend-me"),c=e("./lib/deprecated");u.debug=!0;var h=e("finbars"),d=e("fincanvas"),g=e("rectangular").Point,f=e("rectangular").Rectangle,p=e("object-iterators"),v=e("./defaults"),m=e("./lib/Renderer"),C=e("./lib/SelectionModel"),w=e("../css/stylesheets"),b=e("./lib/TableDialog"),y=e("./lib/Formatters"),x=!1,S=Object.create(v),E=Object.create(S);n.prototype={constructor:n.prototype.constructor,deprecated:c,behavior:null,isWebkit:!0,mouseDown:[],dragExtent:null,vScrollValue:0,hScrollValue:0,rectangular:null,selectionModel:null,cellEditor:null,sbHScroller:null,sbVScroller:null,sbPrevVScrollValue:null,sbPrevHScrollValue:null,cellEditors:null,renderOverridesCache:{},hoverCell:null,scrollingNow:!1,lastEdgeSelection:null,setAttribute:function(e,t){this.div.setAttribute(e,t)},reset:function(){this.lastEdgeSelection=[0,0],this.lnfProperties=Object.create(E),this.selectionModel=new C(this),this.cellEditors=Object.create(this.localCellEditors),this.renderOverridesCache={},this.clearMouseDown(),this.dragExtent=new g(0,0),this.numRows=0,this.numColumns=0,this.vScrollValue=0,this.hScrollValue=0,this.cellEditor=null,this.sbPrevVScrollValue=null,this.sbPrevHScrollValue=null,this.hoverCell=null,this.scrollingNow=!1,this.lastEdgeSelection=[0,0],this.behavior.reset(),this.getRenderer().reset(),this.getCanvas().resize(),this.behaviorChanged()},getProperties:function(){return this.getPrivateState()},_getProperties:function(){return this.lnfProperties},computeCellsBounds:function(){var e=this.getRenderer();e&&e.computeCellsBounds()},initCellEditor:function(e){this.localCellEditors[e.$$CLASS_NAME.toLowerCase()]=e,e.grid=this},initLocalCellEditors:function(){var e=["Textfield","Choice","Color","Date","Slider","Spinner","Filter"],t=this;e.forEach(function(e){t.initCellEditor(new n.cellEditors[e])}),this.localCellEditors["int"]=this.localCellEditors.spinner,this.localCellEditors["float"]=this.localCellEditors.spinner,this.localCellEditors.date=this.localCellEditors.date,this.localCellEditors.string=this.localCellEditors.extfield},toggleColumnPicker:function(){this.behavior.toggleColumnPicker()},isHovered:function(e,t){var i=this.getHoverCell();return i&&i.x===e&&i.y===t},registerFormatter:function(e,t){y[e]=t},getFormatter:function(e){var t=y[e];return t?t:y["default"]},formatValue:function(e,t){var i=this.getFormatter(e);return i(t)},isColumnHovered:function(e){var t=this.getHoverCell();return t&&t.x===e},isRowResizeable:function(){return this.resolveProperty("rowResize")},isCheckboxOnlyRowSelections:function(){return this.resolveProperty("checkboxOnlyRowSelections")},isRowHovered:function(e){var t=this.getHoverCell();return t&&t.y===e},getHoverCell:function(){return this.hoverCell},setHoverCell:function(e){var t=this.hoverCell,i=new g(e.x,e.y);t&&t.equals(i)||(this.hoverCell=i,this.fireSyntheticOnCellEnterEvent(i),this.repaint())},addGlobalProperties:function(e){if(E)this._addGlobalProperties(e);else{var t=this;setTimeout(function(){t.addGlobalProperties(e)},10)}},_addGlobalProperties:function(e){p(e).each(function(e,t){E[t]=e})},refreshProperties:function(){this.checkScrollbarVisibility(),this.behavior.defaultRowHeight=null,this.isColumnAutosizing()&&this.behavior.autosizeAllColumns()},addProperties:function(e){var t=this.getProperties();o(t,e),this.refreshProperties()},getPrivateState:function(){return this.behavior.getPrivateState()},setState:function(e){var t=this;this.behavior.setState(e),setTimeout(function(){t.behaviorChanged(),t.synchronizeScrollingBoundries()},100)},getState:function(){return this.behavior.getState()},getMouseDown:function(){var e=this.mouseDown.length-1;return 0>e?null:this.mouseDown[e]},popMouseDown:function(){0!==this.mouseDown.length&&(this.mouseDown.length=this.mouseDown.length-1)},clearMouseDown:function(){this.mouseDown=[new g(-1,-1)],this.dragExtent=null},setMouseDown:function(e){this.mouseDown.push(e)},getDragExtent:function(){return this.dragExtent},setDragExtent:function(e){this.dragExtent=e},pluginsDo:function(e){},getCellProvider:function(){var e=this.behavior.getCellProvider();return e},gridRenderedNotification:function(){this.updateRenderedSizes(),this.cellEditor&&this.cellEditor.gridRenderedNotification(),this.checkColumnAutosizing(),this.fireSyntheticGridRenderedEvent()},checkColumnAutosizing:function(){var e=this.behavior;e.autoSizeRowNumberColumn(),this.isColumnAutosizing()&&e.checkColumnAutosizing(!1)},updateRenderedSizes:function(){this.behavior.setRenderedColumnCount(this.getVisibleColumns()+1),this.behavior.setRenderedRowCount(this.getVisibleRows()+1)},checkClipboardCopy:function(e){if(this.hasFocus()){e.preventDefault();var t=this.getSelectionAsTSV();e.clipboardData.setData("text/plain",t)}},hasSelections:function(){return this.getSelectionModel?this.selectionModel.hasSelections():void 0},getSelectionAsTSV:function(){var e=this.selectionModel;if(e.hasSelections()){var t=this.getSelectionMatrix();return t=t[t.length-1],this.getMatrixSelectionAsTSV(t)}return e.hasRowSelections()?this.getMatrixSelectionAsTSV(this.getRowSelectionMatrix()):e.hasColumnSelections()?this.getMatrixSelectionAsTSV(this.getColumnSelectionMatrix()):void 0},getMatrixSelectionAsTSV:function(e){var t="";if(e.length){var i=e.length,n=e[0].length,o=i*n,r=i-1;if(o>2e4)return alert("selection size is too big to copy to the paste buffer"),"";for(var s=0;n>s;s++)for(var a=0;i>a;a++)t+=e[a][s]+(r>a?"	":"\n")}return t},hasFocus:function(){return this.getCanvas().hasFocus()},clearSelections:function(){var e=this.isCheckboxOnlyRowSelections();this.selectionModel.clear(e),this.clearMouseDown()},clearMostRecentSelection:function(){var e=this.isCheckboxOnlyRowSelections();this.selectionModel.clearMostRecentSelection(e)},clearMostRecentColumnSelection:function(){this.selectionModel.clearMostRecentColumnSelection()},clearMostRecentRowSelection:function(){},clearRowSelection:function(){this.selectionModel.clearRowSelection(),this.behavior.dataModel.clearSelectedData()},select:function(e,t,i,n){0>e||0>t||this.selectionModel.select(e,t,i,n)},isSelected:function(e,t){return this.selectionModel.isSelected(e,t)},isCellSelectedInRow:function(e){var t=this.selectionModel,i=t.isCellSelectedInRow(e);return i},isCellSelectedInColumn:function(e){var t=this.selectionModel,i=t.isCellSelectedInColumn(e);return i},getSelectionModel:function(){return this.deprecated("selectionModel",{since:"0.2"})},getBehavior:function(){return this.deprecated("behavior",{since:"0.2"})},setBehavior:function(e){e.changed=this.behaviorChanged.bind(this),e.shapeChanged=this.behaviorShapeChanged.bind(this),e.stateChanged=this.behaviorStateChanged.bind(this),this.behavior=e},behaviorChanged:function(){(this.numColumns!==this.getColumnCount()||this.numRows!==this.getRowCount())&&(this.numColumns=this.getColumnCount(),this.numRows=this.getRowCount(),this.behaviorShapeChanged()),this.computeCellsBounds(),this.repaint()},getBounds:function(){var e=this.getRenderer();return e&&e.getBounds()},resolveProperty:function(e){for(var t=e.split("."),i=this.getProperties();t.length;)i=i[t.shift()];return i},behaviorShapeChanged:function(){this.synchronizeScrollingBoundries()},behaviorStateChanged:function(){this.getRenderer().computeCellsBounds(),this.repaint()},repaint:function(){var e=this.resolveProperty("repaintImmediately"),t=this.getCanvas();t&&(e===!0?t.paintNow():t.repaint())},paintNow:function(){var e=this.getCanvas();e.paintNow()},useHiDPI:function(){return this.resolveProperty("useHiDPI")!==!1},initCanvas:function(e){var t=this,i=this.divCanvas=document.createElement("div");this.div.appendChild(i),this.canvas=new d(i,this.renderer);var o=i.style;o.position="absolute",o.top=e.top,o.right=e.right,o.bottom=e.bottom,o.left=e.left,this.canvas.resizeNotification=function(){t.resized()},this.addEventListener("fin-canvas-mousemove",function(e){if(!t.resolveProperty("readOnly")){var i=e.detail.mouse,n=t.getGridCellFromMousePoint(i);n.primitiveEvent=e,t.delegateMouseMove(n)}}),this.addEventListener("fin-canvas-mousedown",function(e){if(!t.resolveProperty("readOnly")){var i=e.detail.mouse,n=t.getGridCellFromMousePoint(i);n.keys=e.detail.keys,n.primitiveEvent=e,t.mouseDownState=n,t.delegateMouseDown(n),t.fireSyntheticMouseDownEvent(n),t.repaint()}}),this.addEventListener("fin-canvas-mouseup",function(e){if(!t.resolveProperty("readOnly")){t.dragging=!1,t.isScrollingNow()&&t.setScrollingNow(!1),t.columnDragAutoScrolling&&(t.columnDragAutoScrolling=!1);var i=e.detail.mouse,n=t.getGridCellFromMousePoint(i);n.primitiveEvent=e,t.delegateMouseUp(n),t.mouseDownState&&t.fireSyntheticButtonPressedEvent(t.mouseDownState),t.mouseDownState=null,t.fireSyntheticMouseUpEvent(n)}}),this.addEventListener("fin-canvas-dblclick",function(e){if(!t.resolveProperty("readOnly")){var i=e.detail.mouse,n=t.getGridCellFromMousePoint(i);n.primitiveEvent=e,t.fireSyntheticDoubleClickEvent(n,e),t.delegateDoubleClick(n)}}),this.addEventListener("fin-canvas-tap",function(e){if(!t.resolveProperty("readOnly")){var i=e.detail.mouse,n=t.getGridCellFromMousePoint(i);n.primitiveEvent=e,n.keys=e.detail.keys,t.fireSyntheticClickEvent(n),t.delegateTap(n)}}),this.addEventListener("fin-canvas-drag",function(e){if(!t.resolveProperty("readOnly")){t.dragging=!0;var i=e.detail.mouse,n=t.getGridCellFromMousePoint(i);n.primitiveEvent=e,t.delegateMouseDrag(n)}}),this.addEventListener("fin-canvas-keydown",function(e){if(!t.resolveProperty("readOnly")){if(t.resolveProperty("editOnKeydown")){var i,o,r,s,a=e.detail["char"];if(!t.isEditing()&&("F2"===a||(i=1===a.length)||(o="DELETE"===a||"BACKSPACE"===a))&&(r=t.selectionModel.getLastSelection())){var l={gridCell:r.origin};s=t.onEditorActivate(l),s instanceof n.cellEditors.Simple&&(i?s.input.value=a:o&&(s.input.value=""),e.detail.primitiveEvent.preventDefault())}}t.fireSyntheticKeydownEvent(e),t.delegateKeyDown(e)}}),this.addEventListener("fin-canvas-keyup",function(e){t.resolveProperty("readOnly")||(t.fireSyntheticKeyupEvent(e),t.delegateKeyUp(e))}),this.addEventListener("fin-canvas-track",function(e){if(!t.resolveProperty("readOnly")&&!t.dragging){var i=e.detail.primitiveEvent;Math.abs(i.dy)>Math.abs(i.dx)?i.yDirection>0?t.scrollVBy(-2):i.yDirection<-0&&t.scrollVBy(2):i.xDirection>0?t.scrollHBy(-1):i.xDirection<-0&&t.scrollHBy(1)}}),this.addEventListener("fin-canvas-wheelmoved",function(e){var i=e.detail.mouse,n=t.getGridCellFromMousePoint(i);n.primitiveEvent=e.detail.primitiveEvent,t.delegateWheelMoved(n)}),this.addEventListener("fin-canvas-mouseout",function(e){if(!t.resolveProperty("readOnly")){var i=e.detail.mouse,n=t.getGridCellFromMousePoint(i);n.primitiveEvent=e.detail.primitiveEvent,t.delegateMouseExit(n)}}),this.addEventListener("fin-canvas-context-menu",function(e){var i=e.detail.mouse,n=t.getGridCellFromMousePoint(i);n.primitiveEvent=e.detail.primitiveEvent,t.delegateContextMenu(n)}),this.div.removeAttribute("tabindex")},convertViewPointToDataPoint:function(e){return this.behavior.convertViewPointToDataPoint(e)},convertDataPointToViewPoint:function(e){return this.behavior.convertDataPointToViewPoint(e)},addEventListener:function(e,t){this.canvas.addEventListener(e,t)},addFinEventListener:function(e,t){console.warn(".addFinEventListener() method is deprecated as of v0.2. Use .addEventListener() instead. (Will be removed in a future release.)"),this.addEventListener(e,t)},setScrollingNow:function(e){this.scrollingNow=e},isScrollingNow:function(){return this.scrollingNow},overColumnDivider:function(e){var t=e.primitiveEvent.detail.mouse.x,i=this.getRenderer().overColumnDivider(t);return i},overRowDivider:function(e){var t=e.primitiveEvent.detail.mouse.y,i=this.getRenderer().overRowDivider(t);return i},beCursor:function(e){e||(e="default"),this.div.style.cursor=e},delegateWheelMoved:function(e){this.behavior.onWheelMoved(this,e)},delegateMouseExit:function(e){this.behavior.handleMouseExit(this,e)},delegateContextMenu:function(e){this.behavior.onContextMenu(this,e)},delegateMouseMove:function(e){this.behavior.onMouseMove(this,e)},delegateMouseDown:function(e){this.behavior.handleMouseDown(this,e)},delegateMouseUp:function(e){this.behavior.onMouseUp(this,e)},delegateTap:function(e){this.behavior.onTap(this,e)},delegateMouseDrag:function(e){this.behavior.onMouseDrag(this,e)},delegateDoubleClick:function(e){this.behavior.onDoubleClick(this,e)},delegateHoldPulse:function(e){this.behavior.onHoldPulse(this,e)},delegateKeyDown:function(e){this.behavior.onKeyDown(this,e)},delegateKeyUp:function(e){this.behavior.onKeyUp(this,e)},stopEditing:function(){this.cellEditor&&this.isEditing()&&(this.cellEditor.stopEditing&&this.cellEditor.stopEditing(),this.cellEditor=null)},registerCellEditor:function(e,t){this.cellEditors[e]=t},getDataBounds:function(){var e=200,t=this.canvas.bounds,i=new f(0,0,t.origin.x+t.extent.x-e,t.origin.y+t.extent.y);return i},getRowNumbersWidth:function(){return this.isShowRowNumbers()?this.getRenderer().getRowNumbersWidth():0},getCanvas:function(){return this.canvas},editAt:function(e,t){this.cellEditor=e,t.x>=0&&t.y>=0&&(this.setMouseDown(t),this.setDragExtent(new g(0,0)),e.beginEditAt(t))},isColumnVisible:function(e){return this.getRenderer().isColumnVisible(e)},isDataRowVisible:function(e){return this.getRenderer().isRowVisible(e)},isDataVisible:function(e,t){return this.isDataRowVisible(t)&&this.isColumnVisible(e)},insureModelColIsVisible:function(e,t){var i=this.getColumnCount()-1,n=e+(t>0),o=!this.isColumnVisible(n)||e===i;return o&&this.scrollBy(t,0),o},insureModelRowIsVisible:function(e,t){var i=this.getRowCount()-1,n=e+(t>0),o=!this.isDataRowVisible(n)||e===i;return o&&this.scrollBy(0,t),o},scrollBy:function(e,t){this.scrollHBy(e),this.scrollVBy(t)},scrollVBy:function(e){var t=this.sbVScroller.range.max,i=this.getVScrollValue(),n=Math.min(t,Math.max(0,i+e));n!==i&&this.setVScrollValue(n)},scrollHBy:function(e){var t=this.sbHScroller.range.max,i=this.getHScrollValue(),n=Math.min(t,Math.max(0,i+e));n!==i&&this.setHScrollValue(n)},getGridCellFromMousePoint:function(e){var t=this.getRenderer().getGridCellFromMousePoint(e);return t},getBoundsOfCell:function(e){var t=this.getRenderer().getBoundsOfCell(e),i=new f(t.x,t.y,t.width,t.height);return i},resized:function(){this.synchronizeScrollingBoundries()},cellClicked:function(e){var t=e.gridCell;if(t.x<=this.getColumnCount()&&t.y<=this.getRowCount()){var i=this.getHoverCell(),n=i.x,o=i.y;o>=0&&(o+=this.getVScrollValue()),this.behavior.cellClicked(new g(n,o),e)}},setTotalsValueNotification:function(e,t,i,n){this.fireSyntheticSetTotalsValue(e,t,i,n)},fireSyntheticSetTotalsValue:function(e,t,i,n){var o=new CustomEvent("fin-set-totals-value",{detail:{x:e,y:t,value:i,areas:n}});this.canvas.dispatchEvent(o)},fireSyntheticEditorKeyUpEvent:function(e,t){var i=new CustomEvent("fin-editor-keyup",{detail:{input:e,keyEvent:t}});this.canvas.dispatchEvent(i)},fireSyntheticEditorKeyDownEvent:function(e,t){var i=new CustomEvent("fin-editor-keydown",{detail:{input:e,keyEvent:t}});this.canvas.dispatchEvent(i)},fireSyntheticEditorKeyPressEvent:function(e,t){var i=new CustomEvent("fin-editor-keypress",{detail:{input:e,keyEvent:t}});this.canvas.dispatchEvent(i)},fireSyntheticEditorDataChangeEvent:function(e,t,i){var n=new CustomEvent("fin-editor-data-change",{detail:{input:e,oldValue:t,newValue:i},cancelable:!0});return this.canvas.dispatchEvent(n)},fireSyntheticRowSelectionChangedEvent:function(){var e=new CustomEvent("fin-row-selection-changed",{detail:{rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(e)},fireSyntheticColumnSelectionChangedEvent:function(){var e=new CustomEvent("fin-column-selection-changed",{detail:{rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(e)},selectionChanged:function(){var e=this.getSelectedRows(),t=new CustomEvent("fin-selection-changed",{detail:{rows:e,columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(t)},getRowSelection:function(){function e(e,o){i[o]=l(n.getValue(t,e))}var t,i,n=this,o=this.selectionModel.getSelectedRows(),r=this.getColumnCount(),s={};for(t=0;r>t;t++)i=new Array(o.length),s[this.getField(t)]=i,o.forEach(e);return s},getRowSelectionMatrix:function(){function e(e,n){r[t][n]=l(i.getValue(t,e))}var t,i=this,n=this.selectionModel.getSelectedRows(),o=this.getColumnCount(),r=new Array(o);for(t=0;o>t;t++)r[t]=new Array(n.length),n.forEach(e);return r},getColumnSelectionMatrix:function(){var e=this.getSelectedColumns(),t=this.getRowCount(),i=new Array(e.length),n=this;return e.forEach(function(e,o){i[o]=new Array(t);for(var r=0;t>r;r++)i[o][r]=l(n.getValue(e,r))}),i},getColumnSelection:function(){var e=this.getSelectedColumns(),t={},i=this.getRowCount(),n=this;return e.forEach(function(e){var o=new Array(i);t[n.getField(e)]=o;for(var r=0;i>r;r++)o[r]=l(n.getValue(e,r))}),t},getSelection:function(){var e=this,t=this.getSelections(),i=new Array(t.length);return t.forEach(function(t,n){i[n]=e._getSelection(t)}),i},_getSelection:function(e){e=r(e);for(var t,i=e.extent.x+1,n=e.extent.y+1,o=e.origin.x,s=e.origin.y,a={},u=0;i>u;u++){var c=new Array(n);for(a[this.getField(u+o)]=c,t=0;n>t;t++)c[t]=l(this.getValue(o+u,s+t))}return a},getSelectionMatrix:function(){var e=this,t=this.getSelections(),i=new Array(t.length);return t.forEach(function(t,n){i[n]=e._getSelectionMatrix(t)}),i},_getSelectionMatrix:function(e){e=r(e);for(var t=e.extent.x+1,i=e.extent.y+1,n=e.origin.x,o=e.origin.y,s=[],a=0;t>a;a++){var u=new Array(i);s[a]=u;for(var c=0;i>c;c++)u[c]=l(this.getValue(n+a,o+c))}return s},fireSyntheticContextMenuEvent:function(e){e.gridCell=this.convertViewPointToDataPoint(e.gridCell);var t=new CustomEvent("fin-context-menu",{detail:{gridCell:e.gridCell,mousePoint:e.mousePoint,viewPoint:e.viewPoint,primitiveEvent:e.primitiveEvent,rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(t)},fireSyntheticMouseUpEvent:function(e){var t=new CustomEvent("fin-mouseup",{detail:{gridCell:e.gridCell,mousePoint:e.mousePoint,viewPoint:e.viewPoint,primitiveEvent:e.primitiveEvent,rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(t)},fireSyntheticMouseDownEvent:function(e){this.stopEditing();var t=new CustomEvent("fin-mousedown",{detail:{gridCell:e.gridCell,mousePoint:e.mousePoint,viewPoint:e.viewPoint,
primitiveEvent:e.primitiveEvent,rows:this.getSelectedRows(),columns:this.getSelectedColumns(),selections:this.selectionModel.getSelections()}});this.canvas.dispatchEvent(t)},isViewableButton:function(e,t){return this.getRenderer().isViewableButton(e,t)},fireSyntheticButtonPressedEvent:function(e){var t=e.dataCell,i=e.gridCell;if(this.isViewableButton(t.x,t.y)){var n=new CustomEvent("fin-button-pressed",{detail:{gridCell:i}});this.canvas.dispatchEvent(n)}},fireSyntheticKeydownEvent:function(e){var t=new CustomEvent("fin-keydown",{detail:e.detail});this.canvas.dispatchEvent(t)},fireSyntheticKeyupEvent:function(e){var t=new CustomEvent("fin-keyup",{detail:e.detail});this.canvas.dispatchEvent(t)},fireSyntheticFilterAppliedEvent:function(e){var t=new CustomEvent("fin-filter-applied",{detail:e});this.canvas&&this.canvas.dispatchEvent(t)},fireSyntheticOnCellEnterEvent:function(e){var t={gridCell:e,time:Date.now(),grid:this},i=new CustomEvent("fin-cell-enter",{detail:t});this.canvas.dispatchEvent(i)},fireSyntheticGroupsChangedEvent:function(e){var t={groups:e,time:Date.now(),grid:this},i=new CustomEvent("fin-groups-changed",{detail:t});this.canvas.dispatchEvent(i)},fireSyntheticOnCellExitEvent:function(e){var t={gridCell:e,time:Date.now(),grid:this},i=new CustomEvent("fin-cell-exit",{detail:t});this.canvas.dispatchEvent(i)},fireSyntheticClickEvent:function(e){var t=e.gridCell,i={gridCell:t,mousePoint:e.mousePoint,keys:e.keys,primitiveEvent:e,time:Date.now(),grid:this};this.behavior.enhanceDoubleClickEvent(i);var n=new CustomEvent("fin-click",{detail:i});this.canvas.dispatchEvent(n)},fireSyntheticDoubleClickEvent:function(e){this.stopEditing();var t=e.gridCell,i={gridCell:t,mousePoint:e.mousePoint,time:Date.now(),grid:this};this.behavior.enhanceDoubleClickEvent(e);var n=new CustomEvent("fin-double-click",{detail:i});this.behavior.cellDoubleClicked(t,e),this.canvas.dispatchEvent(n)},fireSyntheticGridRenderedEvent:function(){var e=new CustomEvent("fin-grid-rendered",{detail:{source:this,time:Date.now()}});this.canvas&&this.canvas.dispatchEvent(e)},fireScrollEvent:function(e,t,i){var n=new CustomEvent(e,{detail:{oldValue:t,value:i,time:Date.now()}});this.canvas.dispatchEvent(n)},setVScrollValue:function(e){e=Math.round(e);var t=this.sbVScroller.range.max;e=Math.min(t,Math.max(0,e));var i=this;if(e!==this.vScrollValue){this.behavior._setScrollPositionY(e);var n=this.vScrollValue;this.vScrollValue=e,this.scrollValueChangedNotification(),setTimeout(function(){i.fireScrollEvent("fin-scroll-y",n,e)})}},getVScrollValue:function(){return this.vScrollValue},setHScrollValue:function(e){e=Math.round(e);var t=this.sbHScroller.range.max;e=Math.min(t,Math.max(0,e));var i=this;if(e!==this.hScrollValue){this.behavior._setScrollPositionX(e);var n=this.hScrollValue;this.hScrollValue=e,this.scrollValueChangedNotification(),setTimeout(function(){i.fireScrollEvent("fin-scroll-x",n,e),i.synchronizeScrollingBoundries()})}},getHScrollValue:function(){return this.hScrollValue},takeFocus:function(){this.isEditing()?this.stopEditing():this.getCanvas().takeFocus()},editorTakeFocus:function(){return this.cellEditor?this.cellEditor.takeFocus():void 0},isEditing:function(){return this.cellEditor&&this.cellEditor.isEditing},initScrollbars:function(){var e=this,t=new h({orientation:"horizontal",onchange:e.setHScrollValue.bind(e),cssStylesheetReferenceElement:this.div}),i=new h({orientation:"vertical",onchange:e.setVScrollValue.bind(e),paging:{up:e.pageUp.bind(e),down:e.pageDown.bind(e)}});this.sbHScroller=t,this.sbVScroller=i;var n=this.resolveProperty("hScrollbarClassPrefix"),o=this.resolveProperty("vScrollbarClassPrefix");n&&""!==n&&(this.sbHScroller.classPrefix=n),o&&""!==o&&(this.sbVScroller.classPrefix=o),this.div.appendChild(t.bar),this.div.appendChild(i.bar),this.resizeScrollbars()},resizeScrollbars:function(){this.sbHScroller.shortenBy(this.sbVScroller).resize(),this.sbVScroller.resize()},setVScrollbarValues:function(e){this.sbVScroller.range={min:0,max:e}},setHScrollbarValues:function(e){this.sbHScroller.range={min:0,max:e}},scrollValueChangedNotification:function(){(this.hScrollValue!==this.sbPrevHScrollValue||this.vScrollValue!==this.sbPrevVScrollValue)&&(this.sbPrevHScrollValue=this.hScrollValue,this.sbPrevVScrollValue=this.vScrollValue,this.cellEditor&&this.cellEditor.scrollValueChangedNotification(),this.computeCellsBounds())},getValue:function(e,t){return this.behavior.getValue(e,t)},setValue:function(e,t,i){this.behavior.setValue(e,t,i)},getColumnAlignment:function(e){return this.behavior.getColumnAlignment(e)},synchronizeScrollingBoundries:function(){var e=this.getFixedColumnCount(),t=this.getFixedRowCount(),i=this.getColumnCount(),n=this.getRowCount(),o=this.getBounds();if(o){for(var r=o.height-this.behavior.getFixedRowsMaxHeight()-15,s=o.width-200-this.behavior.getFixedColumnsMaxWidth()-15,a=0,l=0;i>a;a++){var u=this.getColumnWidth(i-a-1);if(l+=u,l>s)break}for(var c=0,h=0;n>c;c++){var d=this.getRowHeight(n-c-1);if(h+=d,h>r)break}var g=Math.max(0,i-e-a);this.setHScrollbarValues(g);var f=1+Math.max(0,n-t-c);this.setVScrollbarValues(f),this.setHScrollValue(Math.min(this.getHScrollValue(),g)),this.setVScrollValue(Math.min(this.getVScrollValue(),f)),this.computeCellsBounds(),this.repaint(),this.resizeScrollbars()}},getVisibleRows:function(){return this.getRenderer().getVisibleRows()},getVisibleColumns:function(){return this.getRenderer().getVisibleColumns()},initRenderer:function(){this.renderer=new m(this)},getRenderer:function(){return this.renderer},getColumnWidth:function(e){return this.behavior.getColumnWidth(e)},setColumnWidth:function(e,t){this.stopEditing(),this.behavior.setColumnWidth(e,t)},getColumnEdge:function(e){return this.behavior.getColumnEdge(e,this.getRenderer())},getFixedColumnsWidth:function(){return this.behavior.getFixedColumnsWidth()},getRowHeight:function(e){return this.behavior.getRowHeight(e)},setRowHeight:function(e,t){this.stopEditing(),this.behavior.setRowHeight(e,t)},getFixedRowsHeight:function(){return this.behavior.getFixedRowsHeight()},getColumnCount:function(){return this.behavior.getColumnCount()},getRowCount:function(){return this.behavior.getRowCount()},getUnfilteredRowCount:function(){return this.behavior.getUnfilteredRowCount()},getFixedColumnCount:function(){return this.behavior.getFixedColumnCount()},getFixedRowCount:function(){return this.behavior.getFixedRowCount()},topLeftClicked:function(e){this.behavior.topLeftClicked(this,e)},rowHeaderClicked:function(e){this.behavior.rowHeaderClicked(this,e)},columnHeaderClicked:function(e){this.behavior.columnHeaderClicked(this,e)},onEditorActivate:function(e){var t=e.gridCell;if(this.isEditable()||this.isFilterRow(t.y)){var i=e.primitiveEvent,n=i&&"fin-canvas-dblclick"===i.type,o=this.getCellEditorAt(t.x,t.y,n),r=o.getEditorPoint(),s=t.equals(r),a=s&&o.isEditing;a?o=void 0:(this.isEditing()&&this.stopEditing(),this.editAt(o,t))}return o},getCellEditorAt:function(e,t,i){return this.behavior._getCellEditorAt(e,t,i)},toggleHiDPI:function(){this.useHiDPI()?this.removeAttribute("hidpi"):this.setAttribute("hidpi",null),this.canvas.resize()},getHiDPI:function(e){if(window.devicePixelRatio&&this.useHiDPI()){var t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1,n=t/i;return n}return 1},getRenderedWidth:function(e){return this.renderer.getRenderedWidth(e)},getRenderedHeight:function(e){return this.renderer.getRenderedHeight(e)},resolveCellEditor:function(e){return this.cellEditors[e]},updateCursor:function(){var e=this.behavior.getCursorAt(-1,-1),t=this.getHoverCell();if(t&&t.x>-1&&t.y>-1){var i=t.x+this.getHScrollValue();e=this.behavior.getCursorAt(i,t.y+this.getVScrollValue())}this.beCursor(e)},repaintCell:function(e,t){this.getRenderer().repaintCell(e,t)},isDraggingColumn:function(){return!!this.renderOverridesCache.dragger},pageUp:function(){var e=this.getRenderer().getPageUpRow();return this.setVScrollValue(e),e},pageDown:function(){var e=this.getRenderer().getPageDownRow();return this.setVScrollValue(e),e},pageLeft:function(){console.log("page left")},pageRight:function(){console.log("page right")},getRenderedData:function(){var e,t=this.behavior,i=this.getRenderer(),n=this.getColumnCount(),o=i.getVisibleRows(),r=new Array(n),s=new Array(o);return r.forEach(function(e,i){r[i]=t.getColumnId(i,0)}),s.forEach(function(i,n){e=s[n]={hierarchy:t.getFixedColumnValue(0,n)},r.forEach(function(i,o){e[i]=t.getValue(o,n)})}),s},getSelectedRow:function(){var e=this.selectionModel.getSelections();if(e.length){for(var t=this.behavior,i=this.getColumnCount(),n=e[0].origin.y,o={},r=0;i>r;r++)o[t.getColumnId(r,0)]=t.getValue(r,n);return o}},fireRequestCellEdit:function(e,t){var i=new CustomEvent("fin-request-cell-edit",{cancelable:!0,detail:{value:t,gridCell:e,time:Date.now()}});return this.canvas.dispatchEvent(i)},fireBeforeCellEdit:function(e,t,i,n){var o=new CustomEvent("fin-before-cell-edit",{cancelable:!0,detail:{oldValue:t,newValue:i,gridCell:e,time:Date.now(),input:n,row:this.getRow(e.y)}}),r=this.canvas.dispatchEvent(o);return r},fireAfterCellEdit:function(e,t,i,n){var o=new CustomEvent("fin-after-cell-edit",{detail:{newValue:i,oldValue:t,gridCell:e,time:Date.now(),input:n,row:this.getRow(e.y)}});this.canvas.dispatchEvent(o)},autosizeColumn:function(e){var t=this.behavior.getColumn(e);t.checkColumnAutosizing(!0),this.computeCellsBounds()},setFocusable:function(e){this.getCanvas().setFocusable(e)},getVisibleColumnsCount:function(){return this.getRenderer().getVisibleColumnsCount()},getVisibleRowsCount:function(){return this.getRenderer().getVisibleRowsCount()},updateSize:function(){this.canvas.checksize()},stopPaintThread:function(){this.canvas.stopPaintThread()},stopResizeThread:function(){this.canvas.stopResizeThread()},restartResizeThread:function(){this.canvas.restartResizeThread()},restartPaintThread:function(){this.canvas.restartPaintThread()},swapColumns:function(e,t){this.behavior.swapColumns(e,t)},endDragColumnNotification:function(){this.behavior.endDragColumnNotification()},getFixedColumnsMaxWidth:function(){return this.behavior.getFixedColumnsMaxWidth()},isMouseDownInHeaderArea:function(){var e=this.getHeaderColumnCount(),t=this.getHeaderRowCount(),i=this.getMouseDown();return i.x<e||i.y<t},isHeaderWrapping:function(){return this.resolveProperty("headerTextWrapping")},_getBoundsOfCell:function(e,t){return this.getRenderer()._getBoundsOfCell(e,t)},getColumnProperties:function(e){return this.behavior.getColumnProperties(e)},setColumnProperties:function(e,t){this.behavior.setColumnProperties(e,t)},moveSingleSelect:function(e,t){this.behavior.moveSingleSelect(this,e,t)},selectCell:function(e,t){this.selectionModel.clear(),this.selectionModel.select(e,t,0,0)},getHeaderColumnCount:function(){return this.behavior.getHeaderColumnCount()},toggleSort:function(e,t){this.stopEditing();var i=this.behavior,n=this;i.toggleSort(e,t),setTimeout(function(){n.synchronizeScrollingBoundries(),n.isColumnAutosizing()&&i.autosizeAllColumns(),n.repaint()},10)},toggleSelectColumn:function(e,t){t=t||[];var i=this.selectionModel,n=i.isColumnSelected(e),o=t.indexOf("CTRL")>-1,r=t.indexOf("SHIFT")>-1;o||r?(o&&(n?i.deselectColumn(e):i.selectColumn(e)),r&&(i.clear(),i.selectColumn(this.lastEdgeSelection[0],e))):(i.clear(),n||i.selectColumn(e)),n||r||(this.lastEdgeSelection[0]=e),this.repaint(),this.fireSyntheticColumnSelectionChangedEvent()},toggleSelectRow:function(e,t){if(e>this.getFilterRowIndex()){t=t||[];var i=this.selectionModel,n=i.isRowSelected(e),o=t.indexOf("SHIFT")>=0;n?i.deselectRow(e):(this.singleSelect(),i.selectRow(e)),o&&(i.clear(),i.selectRow(this.lastEdgeSelection[1],e)),n||o||(this.lastEdgeSelection[1]=e),this.repaint()}},singleSelect:function(){var e=this.isCheckboxOnlyRowSelections(),t=this.isSingleRowSelectionMode(),i=this.mouseDownState.primitiveEvent.detail.primitiveEvent.ctrlKey,n=e&&t||!e&&(!i||t);return n&&this.selectionModel.clearRowSelection(),n},selectViewportCell:function(e,t){var i=this.getHeaderRowCount(),n=this.getRenderer(),o=n.getVisibleColumns()[e],r=n.getVisibleRows()[t];this.clearSelections(),this.select(o,r+i,0,0),this.setMouseDown(this.newPoint(o,r+i)),this.setDragExtent(this.newPoint(0,0)),this.repaint()},selectToViewportCell:function(e,t){var i=this.getSelections();if(i&&i.length){var n=this.getHeaderRowCount(),o=this.getRenderer(),r=o.getVisibleColumns()[e],s=o.getVisibleRows()[t]+n,a=i[0],l=a.origin;this.setDragExtent(this.newPoint(r-l.x,s-l.y)),this.select(l.x,l.y,r-l.x,s-l.y),this.repaint()}},selectFinalCellOfCurrentRow:function(){var e=this.getColumnCount()-1,t=this.getSelectedRows()[0],i=this.getHeaderRowCount();this.clearSelections(),this.scrollBy(this.getColumnCount(),0),this.select(e,t+i,0,0),this.setMouseDown(this.newPoint(e,t+i)),this.setDragExtent(this.newPoint(0,0)),this.repaint()},selectToFinalCellOfCurrentRow:function(){var e=this.getSelections();if(e&&e.length){var t=e[0],i=t.origin,n=t.extent,o=this.getColumnCount();this.scrollBy(o,0),this.clearSelections(),this.select(i.x,i.y,o-i.x-1,n.y),this.repaint()}},selectFirstCellOfCurrentRow:function(){var e=0,t=this.getSelectedRows()[0],i=this.getHeaderRowCount();this.clearSelections(),this.setHScrollValue(0),this.select(e,t+i,0,0),this.setMouseDown(this.newPoint(e,t+i)),this.setDragExtent(this.newPoint(0,0)),this.repaint()},selectToFirstCellOfCurrentRow:function(){var e=this.getSelections();if(e&&e.length){var t=e[0],i=t.origin,n=t.extent;this.clearSelections(),this.select(i.x,i.y,-i.x,n.y),this.setHScrollValue(0),this.repaint()}},selectFinalCell:function(){this.selectCell(this.getColumnCount()-1,this.getRowCount()-1),this.scrollBy(this.getColumnCount(),this.getRowCount()),this.repaint()},selectToFinalCell:function(){var e=this.getSelections();if(e&&e.length){var t=e[0],i=t.origin,n=this.getColumnCount(),o=this.getRowCount();this.clearSelections(),this.select(i.x,i.y,n-i.x-1,o-i.y-1),this.scrollBy(n,o),this.repaint()}},isShowRowNumbers:function(){return this.resolveProperty("showRowNumbers")},isEditable:function(){return this.resolveProperty("editable")===!0},isShowFilterRow:function(){return this.resolveProperty("showFilterRow")},isShowHeaderRow:function(){return this.resolveProperty("showHeaderRow")},getHeaderRowCount:function(){return this.behavior.getHeaderRowCount()},isFilterRow:function(e){return e===this.getFilterRowIndex()},getFilterRowIndex:function(){return this.isShowFilterRow()?this.isShowHeaderRow()?1:0:-1},setGroups:function(e){this.behavior.setGroups(e)},hasHierarchyColumn:function(){return this.behavior.hasHierarchyColumn()},isHierarchyColumn:function(e){return this.hasHierarchyColumn()&&0===e},checkScrollbarVisibility:function(){},isColumnOrRowSelected:function(){return this.selectionModel.isColumnOrRowSelected()},selectColumn:function(e,t){this.selectionModel.selectColumn(e,t)},selectRow:function(e,t){var i=this.selectionModel,n=this.getFilterRowIndex()+1;this.singleSelect()?e=t:t=t||e;var o=Math.min(e,t);if(o>=n){var r=Math.max(e,t);i.selectRow(o,r)}},isRowNumberAutosizing:function(){return this.resolveProperty("rowNumberAutosizing")},isRowSelected:function(e){return this.selectionModel.isRowSelected(e)},isColumnSelected:function(e){return this.selectionModel.isColumnSelected(e)},lookupFeature:function(e){return this.behavior.lookupFeature(e)},getRow:function(e){return this.behavior.getRow(e)},getFieldName:function(e){return this.behavior.getFieldName(e)},getColumnIndex:function(e){return this.behavior.getColumnIndex(e)},isCellSelection:function(){return this.resolveProperty("cellSelection")===!0},isRowSelection:function(){return this.resolveProperty("rowSelection")===!0},isColumnSelection:function(){return this.resolveProperty("columnSelection")===!0},getComputedRow:function(e){return this.behavior.getComputedRow(e)},isColumnAutosizing:function(){return this.resolveProperty("columnAutosizing")===!0},getGlobalFilter:function(){return this.behavior.getGlobalFilter()},setGlobalFilter:function(e){this.behavior.setGlobalFilter(e)},selectRowsFromCells:function(){if(!this.isCheckboxOnlyRowSelections()){var e,t=this.mouseDownState.primitiveEvent.detail.primitiveEvent.ctrlKey;t&&!this.isSingleRowSelectionMode()?this.selectionModel.selectRowsFromCells(0,t):(e=this.selectionModel.getLastSelection())?this.selectRow(null,e.corner.y):this.clearRowSelection()}},selectColumnsFromCells:function(){this.selectionModel.selectColumnsFromCells()},getSelectedRows:function(){return this.behavior.getSelectedRows()},getSelectedColumns:function(){return this.behavior.getSelectedColumns()},getSelections:function(){return this.behavior.getSelections()},getLastSelectionType:function(){return this.selectionModel.getLastSelectionType()},isCellSelected:function(e,t){return this.selectionModel.isCellSelected(e,t)},isInCurrentSelectionRectangle:function(e,t){return this.selectionModel.isInCurrentSelectionRectangle(e,t)},selectAllRows:function(){this.selectionModel.selectAllRows()},areAllRowsSelected:function(){return this.selectionModel.areAllRowsSelected()},toggleSelectAllRows:function(){this.areAllRowsSelected()?this.selectionModel.clear():this.selectAllRows(),this.repaint()},getField:function(e){return this.behavior.getField(e)},isSingleRowSelectionMode:function(){return this.resolveProperty("singleRowSelectionMode")},newPoint:function(e,t){return new g(e,t)},newRectangle:function(e,t,i,n){return new f(e,t,i,n)},getFormattedValue:function(e,t){t+=this.getHeaderRowCount();var i=this.getColumnProperties(e).format,n=this.getValue(e,t),o=this.getFormatter(i),r=o(n);return r}},t.exports=n},{"../css/stylesheets":1,"./defaults":50,"./lib/Formatters":73,"./lib/Renderer":75,"./lib/SelectionModel":76,"./lib/TableDialog":77,"./lib/deprecated":78,"extend-me":5,finbars:16,fincanvas:17,"object-iterators":24,rectangular:26}],32:[function(e,t,i){"use strict";var n=e("object-iterators"),o=e("../lib/Base"),r=e("./Column"),s=e("../lib/CellProvider"),a=["columnHeader","columnHeaderColumnSelection","filterProperties","rowHeader","rowHeaderRowSelection","rowNumbersProperties","treeColumnProperties","treeColumnPropertiesColumnSelection"],l={isNull:!0},u=o.extend("Behavior",{initialize:function(e){this.setGrid(e),this.initializeFeatureChain(e),this.cellProvider=this.createCellProvider(),this.renderedColumnCount=30,this.renderedRowCount=60,this.dataUpdates={}},initializeFeatureChain:function(e){var t=this;this.features.forEach(function(e){t.setNextFeature(new e)}),this.featureChain.initializeOn(e)},features:[],tableState:null,grid:null,editorTypes:["choice","textfield","color","slider","spinner","date"],featureChain:null,dataModel:null,baseModel:null,scrollPositionX:0,scrollPositionY:0,featureMap:{},allColumns:[],columns:[],reset:function(){this.cellProvider=this.createCellProvider(),this.renderedColumnCount=30,this.renderedRowCount=60,this.dataUpdates={},this.clearColumns(),this.clearState(),this.dataModel.reset(),this.createColumns()},clearColumns:function(){this.columns=[],this.allColumns=[],this.columns[-1]=this.newColumn(-1,""),this.columns[-2]=this.newColumn(-2,"Tree"),this.allColumns[-1]=this.columns[-1],this.allColumns[-2]=this.columns[-2]},getColumn:function(e){return this.columns[e]},getColumnId:function(e){return this.getColumn(e).label},newColumn:function(e,t){var i=this.createColumnProperties();return this.getPrivateState().columnProperties[e]=i,new r(this,e,t)},addColumn:function(e,t){var i=this.newColumn(e,t);return this.columns.push(i),this.allColumns.push(i),i},createColumns:function(){},createColumnProperties:function(){var e=this.getPrivateState(),t=Object.create(e);return t.rowNumbersProperties=Object.create(t,{foregroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderForegroundSelectionColor},set:function(e){this.columnHeaderForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderBackgroundSelectionColor},set:function(e){this.columnHeaderBackgroundSelectionColor=e}}}),t.rowHeader=Object.create(t,{font:{configurable:!0,get:function(){return this.rowHeaderFont},set:function(e){this.rowHeaderFont=e}},color:{configurable:!0,get:function(){return this.rowHeaderColor},set:function(e){this.rowHeaderColor=e}},backgroundColor:{configurable:!0,get:function(){return this.rowHeaderBackgroundColor},set:function(e){this.rowHeaderBackgroundColor=e}},foregroundSelectionFont:{configurable:!0,get:function(){return this.rowHeaderForegroundSelectionFont},set:function(e){this.rowHeaderForegroundSelectionFont=e}},foregroundSelectionColor:{configurable:!0,get:function(){return this.rowHeaderForegroundSelectionColor},set:function(e){this.rowHeaderForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,get:function(){return this.rowHeaderBackgroundSelectionColor},set:function(e){this.rowHeaderBackgroundSelectionColor=e}}}),t.columnHeader=Object.create(t,{format:{value:"default"},font:{configurable:!0,get:function(){return this.columnHeaderFont},set:function(e){this.columnHeaderFont=e}},color:{configurable:!0,get:function(){return this.columnHeaderColor},set:function(e){this.columnHeaderColor=e}},backgroundColor:{configurable:!0,get:function(){return this.columnHeaderBackgroundColor},set:function(e){this.columnHeaderBackgroundColor=e}},foregroundSelectionFont:{configurable:!0,get:function(){return this.columnHeaderForegroundSelectionFont},set:function(e){this.columnHeaderForegroundSelectionFont=e}},foregroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderForegroundSelectionColor},set:function(e){this.columnHeaderForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderBackgroundSelectionColor},set:function(e){this.columnHeaderBackgroundSelectionColor=e}}}),t.columnHeaderColumnSelection=Object.create(t.columnHeader,{foregroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderForegroundColumnSelectionColor},set:function(e){this.columnHeaderForegroundColumnSelectionColor=e}},backgroundSelectionColor:{configurable:!0,get:function(){return this.columnHeaderBackgroundColumnSelectionColor},set:function(e){this.columnHeaderBackgroundColumnSelectionColor=e}}}),t.rowHeaderRowSelection=Object.create(t.rowHeader,{foregroundSelectionColor:{configurable:!0,get:function(){return this.rowHeaderForegroundRowSelectionColor},set:function(e){this.rowHeaderForegroundRowSelectionColor=e}},backgroundSelectionColor:{configurable:!0,get:function(){return this.rowHeaderBackgroundRowSelectionColor},set:function(e){this.rowHeaderBackgroundRowSelectionColor=e}}}),t.filterProperties=Object.create(t,{font:{configurable:!0,get:function(){return this.filterFont},set:function(e){this.filterFont=e}},color:{configurable:!0,get:function(){return this.filterColor},set:function(e){this.filterColor=e}},backgroundColor:{configurable:!0,get:function(){return this.filterBackgroundColor},set:function(e){this.filterBackgroundColor=e}},foregroundSelectionColor:{configurable:!0,get:function(){return this.filterForegroundSelectionColor},set:function(e){this.filterForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,get:function(){return this.filterBackgroundSelectionColor},set:function(e){this.filterBackgroundSelectionColor=e}},cellBorderStyle:{configurable:!0,get:function(){return this.filterCellBorderStyle},set:function(e){this.filterCellBorderStyle=e}},cellBorderThickness:{configurable:!0,get:function(){return this.filterCellBorderThickness},set:function(e){this.filterCellBorderThickness=e}}}),t.treeColumnProperties=Object.create(t,{font:{configurable:!0,get:function(){return this.treeColumnFont},set:function(e){this.treeColumnFont=e}},color:{configurable:!0,get:function(){return this.treeColumnColor},set:function(e){this.treeColumnColor=e}},backgroundColor:{configurable:!0,get:function(){return this.treeColumnBackgroundColor},set:function(e){this.treeColumnBackgroundColor=e}},foregroundSelectionColor:{configurable:!0,get:function(){return this.treeColumnForegroundSelectionColor},set:function(e){this.treeColumnForegroundSelectionColor=e}},backgroundSelectionColor:{configurable:!0,get:function(){return this.treeColumnBackgroundSelectionColor},set:function(e){this.treeColumnBackgroundSelectionColor=e}}}),t.treeColumnPropertiesColumnSelection=Object.create(t.treeColumnProperties,{foregroundSelectionColor:{configurable:!0,get:function(){return this.treeColumnForegroundColumnSelectionColor},set:function(e){this.treeColumnForegroundColumnSelectionColor=e}},backgroundSelectionColor:{configurable:!0,get:function(){return this.treeColumnBackgroundColumnSelectionColor},set:function(e){this.treeColumnBackgroundColumnSelectionColor=e}}}),t},getColumnWidth:function(e){var t=this.getColumn(e);if(!t)return this.resolveProperty("defaultColumnWidth");var i=t.getWidth();return i},setColumnWidth:function(e,t){this.getColumn(e).setWidth(t),this.stateChanged()},getDataModel:function(){return this.deprecated("dataModel",{since:"0.2.1"})},getCellRenderer:function(e,t,i){return this.getColumn(t).getCellRenderer(e,i)},applyAnalytics:function(){this.dataModel.applyAnalytics()},clearObjectProperties:function(e,t){for(var i in e)e.hasOwnProperty(i)&&(void 0===t||!t&&a.indexOf(i)>=0||t&&a.indexOf(i)<0)&&delete e[i]},getPrivateState:function(){return this.tableState||(this.tableState=this.getDefaultState()),this.tableState},getState:function(){var e=JSON.parse(JSON.stringify(this.getPrivateState()));return this.clearObjectProperties(e.columnProperties,!1),e},clearState:function(){this.tableState=null},getDefaultState:function(){var e=this.grid._getProperties(),t=Object.create(e);return n(t).extendOwn({rowHeights:{},cellProperties:{},columnProperties:[]}),t},setState:function(e){if(!e.columnIndexes){var t=this.getFields();e.columnIndexes=[];for(var i=0;i<t.length;i++)e.columnIndexes[i]=i}var o=e.columnProperties;delete e.columnProperties,this.tableState=null;var r=this.getPrivateState();this.createColumns(),this.setColumnOrder(e.columnIndexes),n(r).extendOwn(e),this.setAllColumnProperties(o),e.columnProperties=o,this.setColumnWidth(-1,24.193359375),this.dataModel.applyState()},setAllColumnProperties:function(e){e=e||[];for(var t=0;t<e.length;t++){var i=this.getPrivateState().columnProperties[t];this.clearObjectProperties(i,!1),n(i).extendOwn(e[t])}},setColumnOrder:function(e){if(!e)return void(this.columns.length=0);this.columns.length=e.length;for(var t=0;t<e.length;t++)this.columns[t]=this.allColumns[e[t]]},applySorts:function(){},resolveProperty:function(e){return this.grid.resolveProperty(e)},cellClicked:function(e,t){this.dataModel.cellClicked(e,t)},cellDoubleClicked:function(e,t){},setNextFeature:function(e){this.featureMap[e.$$CLASS_NAME]=e,this.featureChain?this.featureChain.setNext(e):this.featureChain=e},lookupFeature:function(e){return this.featureMap[e]},getCellProvider:function(){return this.cellProvider},setGrid:function(e){this.grid=e,this.dataModel=this.dataModel||this.getDefaultDataModel(),this.dataModel.setGrid(e),e.setBehavior(this),this.clearColumns()},getGrid:function(){return this.deprecated("grid",{since:"0.2"})},createCellProvider:function(){return new s},getValue:function(e,t){var i=this.getColumn(e);return i&&i.getValue(t)},getUnfilteredValue:function(e,t){var i=this.getColumn(e);return i&&i.getUnfilteredValue(t)},setValue:function(e,t,i){var n=this.getColumn(e);return n&&n.setValue(t,i)},getDataValue:function(e,t){return this.dataModel.getValue(e,t)},setDataValue:function(e,t,i){this.dataModel.setValue(e,t,i)},getCellProperties:function(e,t){return this.getColumn(e).getCellProperties(t)},setCellProperties:function(e,t,i){var n=this.getColumn(e);n&&n.setCellProperties(t,i)},getRowCount:function(){return this.dataModel.getRowCount()},getUnfilteredRowCount:function(){return this.dataModel.getUnfilteredRowCount()},getFixedRowsHeight:function(){for(var e=this.getFixedRowCount(),t=0,i=0;e>i;i++)t+=this.getRowHeight(i);return t},getRowHeight:function(e){var t=this.getPrivateState().rowHeights;return t&&t[e]||this.getDefaultRowHeight()},getDefaultRowHeight:function(){return this.defaultRowHeight||(this.defaultRowHeight=this.resolveProperty("defaultRowHeight")),this.defaultRowHeight},setRowHeight:function(e,t){var i=this.getPrivateState();i.rowHeights[e]=Math.max(5,t),this.stateChanged()},getFixedRowsMaxHeight:function(){return this.getFixedRowsHeight()},getFixedColumnsWidth:function(){var e=this.getFixedColumnCount(),t=0;this.grid.isShowRowNumbers()&&(t=this.getColumnWidth(-1));for(var i=0;e>i;i++)t+=this.getColumnWidth(i);return t},getFixedColumnsMaxWidth:function(){return this.getFixedColumnsWidth()},_setScrollPositionY:function(e){this.setScrollPositionY(e),this.changed()},_setScrollPositionX:function(e){this.setScrollPositionX(e),this.changed()},setRenderedColumnCount:function(e){this.renderedColumnCount=e},setRenderedRowCount:function(e){this.renderedRowCount=e},_fixedRowClicked:function(e,t){var i=this.translateColumnIndex(this.getScrollPositionX()+t.gridCell.x-this.getFixedColumnCount()),n=this.grid.newPoint(i,t.gridCell.y);t.gridCell=n,this.fixedRowClicked(e,t)},_fixedColumnClicked:function(e,t){var i=this.grid.newPoint(t.gridCell.x,this.getScrollPositionY()+t.gridCell.y-this.getFixedRowCount());t.gridCell=i,this.fixedColumnClicked(e,t)},moveSingleSelect:function(e,t,i){this.featureChain&&(this.featureChain.moveSingleSelect(e,t,i),this.setCursor(e))},setCursor:function(e){e.updateCursor(),this.featureChain.setCursor(e)},onMouseMove:function(e,t){this.featureChain&&(this.featureChain.handleMouseMove(e,t),this.setCursor(e))},onTap:function(e,t){this.featureChain&&(this.featureChain.handleTap(e,t),this.setCursor(e))},onContextMenu:function(e,t){var i=e.fireSyntheticContextMenuEvent(t);i&&this.featureChain&&(this.featureChain.handleContextMenu(e,t),this.setCursor(e))},onWheelMoved:function(e,t){this.featureChain&&(this.featureChain.handleWheelMoved(e,t),this.setCursor(e))},onMouseUp:function(e,t){this.featureChain&&(this.featureChain.handleMouseUp(e,t),this.setCursor(e))},onMouseDrag:function(e,t){this.featureChain&&(this.featureChain.handleMouseDrag(e,t),this.setCursor(e))},onKeyDown:function(e,t){this.featureChain&&(this.featureChain.handleKeyDown(e,t),this.setCursor(e))},onKeyUp:function(e,t){this.featureChain&&(this.featureChain.handleKeyUp(e,t),this.setCursor(e))},onDoubleClick:function(e,t){this.featureChain&&(this.featureChain.handleDoubleClick(e,t),this.setCursor(e))},onHoldPulse:function(e,t){this.featureChain&&(this.featureChain.handleHoldPulse(e,t),this.setCursor(e))},toggleColumnPicker:function(){var e=this.grid.dialog,t=this;e.isOpen()?e.close():(this.buildColumnPicker(e.overlay),e.onClose=function(){t.updateFromColumnPicker(e.overlay)},e.open())},handleMouseDown:function(e,t){this.featureChain&&(this.featureChain.handleMouseDown(e,t),this.setCursor(e))},handleMouseExit:function(e,t){this.featureChain&&(this.featureChain.handleMouseExit(e,t),this.setCursor(e))},changed:function(){},shapeChanged:function(){},isColumnReorderable:function(){return!0},getColumnProperties:function(e){var t=this.columns[e];if(!t)return l;var i=t.getProperties();return i?i:l},setColumnProperties:function(e,t){var i=this.allColumns[e].getProperties();n(i).extendOwn(t),this.changed()},getField:function(e){return-1===e?"tree":this.getColumn(e).getField()},getHeader:function(e){return-1===e?"Tree":this.getColumn(e).getHeader()},setColumnDescriptors:function(e){var t,i=e.visible,n=this.getPrivateState(),o=i.length,r=[];for(t=0;o>t;t++)r.push(i[t].id);n.columnIndexes=r,this.changed()},getHiddenColumnDescriptors:function(){for(var e=this.getPrivateState(),t=e.columnIndexes,i=[],n=this.getColumnCount(),o=0;n>o;o++)-1===t.indexOf(o)&&i.push({id:o,label:this.getHeader(o),field:this.getField(o)});return i},hideColumns:function(e){for(var t=this.getPrivateState(),i=t.columnIndexes,n=0;n<e.length;n++){var o=e[n];-1!==i.indexOf(o)&&i.splice(i.indexOf(o),1);
}},getFixedColumnCount:function(){return this.getPrivateState().fixedColumnCount||0},setFixedColumnCount:function(e){this.getPrivateState().fixedColumnCount=e},getFixedRowCount:function(){if(!this.tableState)return 0;var e=this.grid.getHeaderRowCount(),t=this.tableState.fixedRowCount||0;return e+t},setFixedRowCount:function(e){this.tableState.fixedRowCount=e},getHeaderRowCount:function(){var e=this.grid.isShowHeaderRow()?1:0,t=this.grid.isShowFilterRow()?1:0,i=this.getTopTotals().length;return e+t+i},getFooterRowCount:function(){return this.getBottomTotals().length},getTopTotals:function(){return this.dataModel.getTopTotals()},setHeaderRowCount:function(e){this.tableState.headerRowCount=e},getHeaderColumnCount:function(){return this.grid.resolveProperty("headerColumnCount")},setHeaderColumnCount:function(e){this.tableState.headerColumnCount=e},buildColumnPicker:function(e){var t=document.createElement("div"),i=document.createElement("fin-hypergrid-dnd-list"),n=document.createElement("fin-hypergrid-dnd-list");return t.appendChild(i),t.appendChild(n),this.beColumnStyle(i.style),i.title="hidden columns",i.list=this.getHiddenColumnDescriptors(),this.beColumnStyle(n.style),n.style.left="50%",n.title="visible columns",n.list=this.getColumnDescriptors(),e.lists={hidden:i.list,visible:n.list},e.appendChild(t),!0},updateFromColumnPicker:function(e){var t=e.lists;return this.setColumnDescriptors(t),!0},endDragColumnNotification:function(){},beColumnStyle:function(e){e.top="5%",e.position="absolute",e.width="50%",e.height="100%",e.whiteSpace="nowrap"},getCursorAt:function(e,t){return null},getColumnCount:function(){return this.columns.length},getColumnAlignment:function(e){return"center"},setScrollPositionX:function(e){this.scrollPositionX=e},getScrollPositionX:function(){return this.scrollPositionX},setScrollPositionY:function(e){this.scrollPositionY=e},getScrollPositionY:function(){return this.scrollPositionY},_getCellEditorAt:function(e,t,i){var n,o=this.grid.isFilterRow(t);if(o?i||(n=this.grid.cellEditors.textfield):n=this.getColumn(e).getCellEditorAt(e,t),!n){var r=this.getColumn(e),s=o?r.getFilterType():r.getType();n=this.grid.resolveCellEditor(s)}return n},getCellEditorAt:function(e,t){return this.grid.isFilterRow(t)?this.grid.cellEditors.textfield:this.dataModel.getCellEditorAt(e,t)},toggleSort:function(e,t){this.getColumn(e).toggleSort(t)},highlightCellOnHover:function(e,t){return e&&t},cellPropertiesPrePaintNotification:function(e){var t=this.getRow(e.y),i=this.getHeader(e.x);e.row=t,e.columnId=i},cellFixedRowPrePaintNotification:function(e){},cellFixedColumnPrePaintNotification:function(e){},cellTopLeftPrePaintNotification:function(e){},enhanceDoubleClickEvent:function(e){},swapColumns:function(e,t){var i=this.columns,n=i[e];i[e]=i[t],i[t]=n,this.changed()},getColumnEdge:function(e,t){return this.dataModel.getColumnEdge(e,t)},setTotalsValue:function(e,t,i,n){this.grid.setTotalsValueNotification(e,t,i,n)},getRow:function(e){return this.dataModel.getRow(e)},convertViewPointToDataPoint:function(e){var t=this.getColumn(e.x).index,i=this.grid.newPoint(t,e.y);return i},setGroups:function(e){this.dataModel.setGroups(e),this.createColumns(),this.changed()},setAggregates:function(e){var t=this;this.dataModel.setAggregates(e),this.createColumns(),setTimeout(function(){t.changed()},100)},hasHierarchyColumn:function(){return!1},getRowContextFunction:function(e){return function(){return null}},getSelectionMatrixFunction:function(e){return function(){return null}},getFieldName:function(e){return this.getFields()[e]},getColumnIndex:function(e){return this.getFields().indexOf(e)},getComputedRow:function(e){return this.dataModel.getComputedRow(e)},autosizeAllColumns:function(){this.checkColumnAutosizing(!0),this.changed()},checkColumnAutosizing:function(e){e=e===!0,this.autoSizeRowNumberColumn(),this.allColumns[-2].checkColumnAutosizing(e),this.allColumns.forEach(function(t){t.checkColumnAutosizing(e)})},autoSizeRowNumberColumn:function(){this.grid.isRowNumberAutosizing()&&this.allColumns[-1].checkColumnAutosizing(!0)},getGlobalFilter:function(){return this.dataModel.getGlobalFilter()},setGlobalFilter:function(e){this.dataModel.setGlobalFilter(e)},getSelectedRows:function(){return this.grid.selectionModel.getSelectedRows()},getSelectedColumns:function(){return this.grid.selectionModel.getSelectedColumns()},getSelections:function(){return this.grid.selectionModel.getSelections()},getData:function(){return this.dataModel.getData()},getFilteredData:function(){return this.dataModel.getFilteredData()}});t.exports=u},{"../lib/Base":69,"../lib/CellProvider":70,"./Column":33,"object-iterators":24}],33:[function(e,t,i){"use strict";function n(e,t,i){this.behavior=e,this.dataModel=e.dataModel,this.index=t,this.label=i}var o=e("object-iterators");n.prototype={constructor:n.prototype.constructor,getUnfilteredValue:function(e){return this.dataModel.getUnfilteredValue(this.index,e)},getValue:function(e){return this.dataModel.getValue(this.index,e)},setValue:function(e,t){return this.dataModel.setValue(this.index,e,t)},getWidth:function(){var e=this.getProperties();return e&&e.width||this.behavior.resolveProperty("defaultColumnWidth")},setWidth:function(e){this.getProperties().width=Math.max(5,e)},getCellRenderer:function(e,t){return this.dataModel.getCellRenderer(e,this.index,t)},getCellProperties:function(e){return this.behavior.getPrivateState().cellProperties[this.index+","+e]},setCellProperties:function(e,t){this.behavior.getPrivateState().cellProperties[this.index+","+e]=t},checkColumnAutosizing:function(e){var t,i,n,o=this.getProperties();o&&(t=o.width,i=o.preferredWidth||t,n=o.columnAutosized&&!e,t===i&&n||(o.width=n?Math.max(t,i):i,o.columnAutosized=!isNaN(o.width)))},getCellType:function(e){var t=this.getValue(e),i=this.typeOf(t);return i},getFilterType:function(){return"filter"},getType:function(){var e=this.getProperties(),t=e.type;return t||(t=this.computeColumnType(),"unknown"!==t&&(e.type=t)),t},computeColumnType:function(){var e=this.behavior.getHeaderRowCount(),t=this.behavior.getRowCount(),i=this.getValue(e),n=this.typeOf(i);if(!n)return"unknown";for(var o=this.typeOf(i),r="number"==typeof i,s=e;t>s;s++)if(i=this.getValue(s),n=this.typeOf(i),o!==n){if(!r||"number"!=typeof i)return"mixed";o="float"}return o},typeOf:function(e){var t=typeof e;switch(t){case"object":return e.constructor.name.toLowerCase();case"number":return parseInt(e)===e?"int":"float";default:return t}},getProperties:function(){return this.behavior.getPrivateState().columnProperties[this.index]},setProperties:function(e){var t=this.behavior.getPrivateState().columnProperties[this.index];this.clearObjectProperties(t,!1),o(t).extendOwn(e)},toggleSort:function(e){this.dataModel.toggleSort(this.index,e)},getCellEditorAt:function(e,t){return this.dataModel.getCellEditorAt(this.index,t)},getHeader:function(){return this.label},getField:function(){return this.dataModel.getFields()[this.index]}},t.exports=n},{"object-iterators":24}],34:[function(e,t,i){"use strict";var n=e("list-dragon"),o=e("./Local"),r=e("../dataModels/JSON"),s=e("../features"),a=e("../../css/stylesheets"),l=e("../local_node_modules/hyper-analytics").util.aggregations,u=o.extend("behaviors.JSON",{initialize:function(e,t){this.setData(t)},features:[s.CellSelection,s.KeyPaging,s.ColumnPicker,s.ColumnResizing,s.RowResizing,s.Filters,s.RowSelection,s.ColumnSelection,s.ColumnMoving,s.ColumnSorting,s.CellEditing,s.CellClick,s.OnHover],aggregations:l,createColumns:function(){var e=this.dataModel,t=e.getColumnCount(),i=e.getHeaders(),n=e.getFields();this.clearColumns();for(var o=0;t>o;o++){var r=i[o],s=this.addColumn(o,r),a=s.getProperties();a.field=n[o],a.header=r,a.complexFilter=null}},getDefaultDataModel:function(){return new r(this.grid)},applyAnalytics:function(){this.dataModel.applyAnalytics()},setHeaders:function(e){this.dataModel.setHeaders(e)},getHeaders:function(){return this.dataModel.getHeaders()},setFields:function(e){this.dataModel.setFields(e),this.createColumns()},getFields:function(){return this.dataModel.getFields()},setData:function(e){this.dataModel.setData(e),this.createColumns();var t=this;this.grid.isColumnAutosizing()?(setTimeout(function(){t.autosizeAllColumns()},100),t.changed()):setTimeout(function(){t.allColumns[-1].checkColumnAutosizing(!0),t.changed()})},setTopTotals:function(e){this.dataModel.setTopTotals(e)},getTopTotals:function(){return this.dataModel.getTopTotals()},setBottomTotals:function(e){this.dataModel.setBottomTotals(e)},getBottomTotals:function(){return this.dataModel.getBottomTotals()},setColumns:function(e){this.dataModel.setColumns(e)},enhanceDoubleClickEvent:function(e){e.row=this.getRow(e.gridCell.y)},setDataProvider:function(e){this.dataModel.setDataProvider(e)},hasHierarchyColumn:function(){return this.dataModel.hasHierarchyColumn()},getColumnAlignment:function(e){return 0===e&&this.hasHierarchyColumn()?"left":"center"},getRowSelectionMatrix:function(e){return this.dataModel.getRowSelectionMatrix(e)},getColumnSelectionMatrix:function(e){return this.dataModel.getColumnSelectionMatrix(e)},getSelectionMatrix:function(e){return this.dataModel.getSelectionMatrix(e)},getRowSelection:function(){var e=this.getSelectedRows();return this.dataModel.getRowSelection(e)},getColumnSelection:function(){var e=this.getSelectedColumns();return this.dataModel.getColumnSelection(e)},getSelection:function(){var e=this.getSelections();return this.dataModel.getSelection(e)},buildColumnPicker:function(e){if(!this.isColumnReorderable())return!1;var t={cssStylesheetReferenceElement:e},i={models:this.getGroups(),title:"Groups"},o={models:this.getAvailableGroups(),title:"Available Groups"},r={models:this.getHiddenColumns(),title:"Hidden Columns"},s={models:this.getVisibleColumns(),title:"Visible Columns"},l=new n([i,o],t),u=new n([r,s],t),c=[l,u];return a("list-dragon",e),c.forEach(function(t){t.modelLists.forEach(function(t){e.appendChild(t.container)})}),e.lists={group:i.models,availableGroups:o.models,hidden:r.models,visible:s.models},!0},getGroups:function(){return this.dataModel.getGroups()},getAvailableGroups:function(){return this.dataModel.getAvailableGroups()},getHiddenColumns:function(){return this.dataModel.getHiddenColumns()},getVisibleColumns:function(){return this.dataModel.getVisibleColumns()},setColumnDescriptors:function(e){var t=this.columns[0];this.columns.length=0,t&&"Tree"===t.label&&this.columns.push(t);for(var i=0;i<e.visible.length;i++)this.columns.push(e.visible[i]);var n=e.group.map(function(e){return e.id});this.dataModel.setGroups(n),this.changed()},getSelectedRows:function(){var e=-this.grid.getHeaderRowCount(),t=this.grid.selectionModel.getSelectedRows(),i=t.map(function(t){return t+e});return i},getSelectedColumns:function(){return this.grid.selectionModel.getSelectedColumns()},getSelections:function(){return this.grid.selectionModel.getSelections()}});t.exports=u},{"../../css/stylesheets":1,"../dataModels/JSON":49,"../features":68,"../local_node_modules/hyper-analytics":91,"./Local":35,"list-dragon":21}],35:[function(e,t,i){"use strict";var n=e("./Behavior"),o=n.extend("Local",{});t.exports=o},{"./Behavior":32}],36:[function(e,t,i){"use strict";var n=e("./Behavior"),o=function(){},r=function(){return 0},s=n.extend("Null",{setScrollPositionY:o,setScrollPositionX:o,getColumnCount:r,getFixedColumnCount:r,getFixedColumnsWidth:r,getFixedColumnsMaxWidth:r,setRenderedWidth:r,getRowCount:r,getFixedRowCount:r,getFixedRowsHeight:r,getFixedRowsMaxHeight:r,setRenderedHeight:r,getCellProvider:o,click:o,doubleClick:o});t.exports=s},{"./Behavior":32}],37:[function(e,t,i){"use strict";t.exports={Behavior:e("./Behavior"),JSON:e("./JSON"),Null:e("./Null")}},{"./Behavior":32,"./JSON":34,"./Null":36}],38:[function(e,t,i){"use strict";var n=e("mustache"),o=e("../lib/Base"),r=/\/\*\s*([^]+?)\s+\*\//,s=o.extend("CellEditor",{isEditing:!1,editorPoint:{x:-1,y:-1},checkEditorPositionFlag:!1,grid:null,initialValue:null,getBehavior:function(){return this.deprecated("grid.behavior",{since:"0.2"})},gridRenderedNotification:function(){this.checkEditor()},scrollValueChangedNotification:function(){this.setCheckEditorPositionFlag()},setCheckEditorPositionFlag:function(){this.checkEditorPositionFlag=!0},beginEditAt:function(e){this.editorPoint=e},setEditorValue:function(e){},getEditorPoint:function(){return this.editorPoint},setEditorPoint:function(e){this.editorPoint=e,this.modelPoint=this.grid.convertViewPointToDataPoint(e)},showEditor:function(){},hideEditor:function(){},stopEditing:function(){if(this.isEditing){var e=this.grid.fireSyntheticEditorDataChangeEvent(this,this.initialValue,this.getEditorValue,this);e&&(this.saveEditorValue(),this.isEditing=!1,this.hideEditor())}},cancelEditing:function(){this.isEditing&&(this.isEditing=!1,this.hideEditor())},saveEditorValue:function(){},getEditorValue:function(){},takeFocus:function(){},checkEditor:function(){},getGrid:function(){return this.deprecated("grid",{since:"0.2"})},template:function(){},getHTML:function(){var e=this.template.toString().match(r)[1];return n.render(e,this)}});t.exports=s},{"../lib/Base":69,mustache:23}],39:[function(e,t,i){"use strict";var n=e("./Simple"),o=e("../lib/Mappy"),r=n.extend("Choice",{items:["a","b","c"],template:function(){},autopopulate:function(){var e=this.grid.behavior,t=this.getEditorPoint(),i=this.grid.getColumnProperties(t.x);if(i.autopopulateEditor){for(var n=this.grid.getHeaderRowCount(),r=this.grid.getUnfilteredRowCount()-n,s=t.x,a=new o,l=0;r>l;l++){var u=e.getUnfilteredValue(s,l);a.set(u,u)}var c=a.values;c.sort(),c.length>0&&c[0].length>0&&c.unshift(""),this.setItems(c)}},showEditor:function(){var e=this;this.input.style.display="inline",setTimeout(function(){e.showDropdown(e.input)},50)},preShowEditorNotification:function(){this.autopopulate(),this.setEditorValue(this.initialValue)},setItems:function(e){this.items=e,this.updateView()},initializeInput:function(e){var t=this;n.prototype.initializeInput.apply(this,[e]),e.onchange=function(){t.stopEditing()}}});t.exports=r},{"../lib/Mappy":74,"./Simple":43}],40:[function(e,t,i){"use strict";var n=e("./Simple"),o=n.extend("Color",{template:function(){}});t.exports=o},{"./Simple":43}],41:[function(e,t,i){"use strict";function n(e){var t=e.match(/(\d+)/g);return new window.Date(t[0],t[1]-1,t[2])}var o=e("./Simple"),r=e("../lib/Formatters"),s=o.extend("Date",{template:function(){},setEditorValue:function(e){null!=e&&"Date"===e.constructor.name&&(e=r.date(e)),this.getInput().value=e+""},getEditorValue:function(){var e=this.getInput().value;return e=n(e)}});t.exports=s},{"../lib/Formatters":73,"./Simple":43}],42:[function(e,t,i){"use strict";var n=e("./CellEditor"),o=n.extend("Filter",{initialize:function(){var e=document.createElement("div"),t=e.style;t.position="absolute",t.top=t.bottom="44px",t.right=t.left="1em",t.overflowY="scroll";var i=document.createElement("table");e.appendChild(i),t=i.style,t.width=t.height="100%";var n=document.createElement("tr"),o=document.createElement("td");i.appendChild(n),n.appendChild(o),this.title=document.createElement("div"),this.title.innerHTML="Filter Editor",this.dialog=document.createElement("div"),this.content=o,this.buttons=document.createElement("div"),t=this.dialog.style,t.position="absolute",t.top=t.left=t.right=t.bottom=0,t.whiteSpace="nowrap",t=this.title.style,t.position="absolute",t.top=t.left=t.right=0,t.height="44px",t.whiteSpace="nowrap",t.textAlign="center",t.padding="11px",t=this.buttons.style,t.position="absolute",t.left=t.right=t.bottom=0,t.height="44px",t.whiteSpace="nowrap",t.textAlign="center",t.padding="8px",this.dialog.appendChild(this.title),this.dialog.appendChild(e),this.dialog.appendChild(this.buttons),this.ok=document.createElement("button"),this.ok.style.borderRadius="8px",this.ok.style.width="5.5em",this.cancel=document.createElement("button"),this.cancel.style.marginLeft="2em",this.cancel.style.borderRadius="8px",this.cancel.style.width="5.5em",this["delete"]=document.createElement("button"),this["delete"].style.marginLeft="2em",this["delete"].style.borderRadius="8px",this["delete"].style.width="5.5em",this.reset=document.createElement("button"),this.reset.style.marginLeft="2em",this.reset.style.borderRadius="8px",this.reset.style.width="5.5em",this.ok.innerHTML="ok",this.cancel.innerHTML="cancel",this["delete"].innerHTML="delete",this.reset.innerHTML="reset",this.buttons.appendChild(this.ok),this.buttons.appendChild(this.reset),this.buttons.appendChild(this["delete"]),this.buttons.appendChild(this.cancel);var r=this;this.ok.onclick=function(){r.okPressed()},this.cancel.onclick=function(){r.cancelPressed()},this["delete"].onclick=function(){r.deletePressed()},this.reset.onclick=function(){r.resetPressed()}},tearDown:function(){this.content.innerHTML=""},okPressed:function(){var e=this.grid.dialog;e.onOkPressed()},cancelPressed:function(){var e=this.grid.dialog;e.onCancelPressed()},deletePressed:function(){var e=this.grid.dialog;e.onDeletePressed()},resetPressed:function(){var e=this.grid.dialog;e.onResetPressed()},beginEditAt:function(e){var t=this.grid.behavior,i=this.grid.dialog,n=e.x;this.title.innerHTML="Manage Filters";var o=t.getGlobalFilter();if(i.isOpen())i.close();else{var r=this;i.clear(),i.overlay.appendChild(this.dialog),o.initializeDialog(),i.onOkPressed=function(){o.onOk&&o.onOk()||(r.tearDown(),i.close(),t.applyAnalytics(),t.changed())},i.onCancelPressed=function(){o.onCancel&&o.onCancel()||(r.tearDown(),i.close(),o=void 0)},i.onDeletePressed=function(){o.onDelete&&o.onDelete()||(r.tearDown(),i.close(),t.applyAnalytics(),t.changed())},i.onResetPressed=function(){o.onReset&&o.onReset()||(r.tearDown(),o.initializeDialog(i),o.onShow&&o.onShow(r.content))};var s=this.grid._getBoundsOfCell(n,e.y),a=this.grid.div.getBoundingClientRect().left-this.grid.divCanvas.getBoundingClientRect().left;s.x=s.x-a,i.openFrom(s),setTimeout(function(){o.onShow&&o.onShow(r.content)},i.getAnimationTime()+10)}}});t.exports=o},{"./CellEditor":38}],43:[function(e,t,i){"use strict";var n=e("./CellEditor.js"),o=n.extend("Simple",{input:null,initialize:function(){this.editorPoint={x:0,y:0}},specialKeyups:{9:"stopEditing",13:"stopEditing",27:"cancelEditing"},keyup:function(e){if(e){var t=this.specialKeyups[e.keyCode];t&&(e.preventDefault(),this[t](),this.grid.repaint(),this.grid.takeFocus()),this.grid.fireSyntheticEditorKeyUpEvent(this,e)}},initializeInput:function(e){var t=this;e.addEventListener("keyup",this.keyup.bind(this)),e.addEventListener("keydown",function(e){t.grid.fireSyntheticEditorKeyDownEvent(t,e)}),e.addEventListener("keypress",function(e){t.grid.fireSyntheticEditorKeyPressEvent(t,e)}),e.onblur=function(e){t.cancelEditing()},e.style.position="absolute",e.style.display="none",e.style.border="solid 2px black",e.style.outline=0,e.style.padding=0,e.style.boxShadow="white 0px 0px 1px 1px"},getEditorValue:function(){var e=this.getInput().value;return e},setEditorValue:function(e){this.getInput().value=e},clearStopEditing:function(){this.setEditorValue(""),this.stopEditing()},cancelEditing:function(){this.isEditing&&(this.getInput().value=null,this.isEditing=!1,this.hideEditor())},showEditor:function(){this.getInput().style.display="inline"},hideEditor:function(){this.getInput().style.display="none"},takeFocus:function(){var e=this;setTimeout(function(){var t=e.input.style.transform;e.input.style.transform="translate(0,0)",e.input.focus(),e.selectAll(),e.input.style.transform=t})},selectAll:function(){},originOffset:function(){return[0,0]},setBounds:function(e){var t=this.originOffset(),i="translate("+(e.x-1+t[0])+"px,"+(e.y-1+t[1])+"px)",n=this.getInput();n.style.boxSizing="border-box",n.style.webkitTransform=i,n.style.MozTransform=i,n.style.msTransform=i,n.style.OTransform=i,n.style.width=e.width+2+"px",n.style.height=e.height+2+"px"},saveEditorValue:function(){var e=this.getEditorPoint(),t=this.getEditorValue().trim();if(!t||t!==this.initialValue){parseFloat(this.initialValue)===this.initialValue&&(t=parseFloat(t));var i=this.grid.fireBeforeCellEdit(e,this.initialValue,t,this);i&&(this.grid.behavior.setValue(e.x,e.y,t),this.grid.fireAfterCellEdit(e,this.initialValue,t,this))}},_moveEditor:function(){var e=this.getEditorPoint(),t=this.grid._getBoundsOfCell(e.x,e.y),i=this.grid.div.getBoundingClientRect().left-this.grid.divCanvas.getBoundingClientRect().left;t.x=t.x-i,this.setBounds(t)},moveEditor:function(){this._moveEditor(),this.takeFocus()},beginEditAt:function(e){this.isAdded||(this.isAdded=!0,this.attachEditor()),this.setEditorPoint(e);var t=this.grid.behavior.getValue(e.x,e.y);"Array"===t.constructor.name&&(t=t[1]);var i=this.grid.fireRequestCellEdit(e,t);i&&(this.initialValue=t,this.isEditing=!0,this.setCheckEditorPositionFlag(),this.checkEditor())},checkEditor:function(){if(this.checkEditorPositionFlag&&(this.checkEditorPositionFlag=!1,this.isEditing)){var e=this.getEditorPoint();this.grid.isDataVisible(e.x,e.y)?(this.preShowEditorNotification(),this.attachEditor(),this.moveEditor(),this.showEditor()):this.hideEditor()}},attachEditor:function(){var e=this.getInput(),t=this.grid.div,i=t.querySelectorAll(".finbar-horizontal, .finbar-vertical");t.insertBefore(e,i.length?i[0]:null)},preShowEditorNotification:function(){this.setEditorValue(this.initialValue)},getInput:function(){return this.input||(this.input=this.getDefaultInput()),this.input},getDefaultInput:function(){var e=document.createElement("DIV");e.innerHTML=this.getHTML();var t=e.firstChild;return this.initializeInput(t),t},updateView:function(){var e=this.getInput(),t=e.parentNode,i=this.getDefaultInput();this.input=i,t.replaceChild(i,e)},showDropdown:function(e){var t;t=document.createEvent("MouseEvents"),t.initMouseEvent("mousedown",!0,!0,window),e.dispatchEvent(t)}});t.exports=o},{"./CellEditor.js":38}],44:[function(e,t,i){"use strict";var n=e("./Simple"),o=n.extend("Slider",{template:function(){}});t.exports=o},{"./Simple":43}],45:[function(e,t,i){"use strict";var n=e("./Simple"),o=n.extend("Spinner",{template:function(){}});t.exports=o},{"./Simple":43}],46:[function(e,t,i){"use strict";function n(){this.saveEditorValue(),this._moveEditor()}var o=e("./Simple"),r=o.extend("Textfield",{template:function(){},selectAll:function(){this.input.setSelectionRange(0,this.input.value.length)},specialKeyups:{9:"stopEditing",13:"stopEditing",27:"cancelEditing"},keyup:function(e){e&&(o.prototype.keyup.call(this,e),this.grid.isFilterRow(this.getEditorPoint().y)&&setTimeout(n.bind(this)))}});t.exports=r},{"./Simple":43}],47:[function(e,t,i){"use strict";t.exports={CellEditor:e("./CellEditor"),Textfield:e("./Textfield"),Choice:e("./Choice"),Color:e("./Color"),Date:e("./Date"),Simple:e("./Simple"),Slider:e("./Slider"),Spinner:e("./Spinner"),Filter:e("./Filter")}},{"./CellEditor":38,"./Choice":39,"./Color":40,"./Date":41,"./Filter":42,"./Simple":43,"./Slider":44,"./Spinner":45,"./Textfield":46}],48:[function(e,t,i){"use strict";var n=e("../lib/Base"),o="A".charCodeAt(0),r=n.extend("DataModel",{next:null,grid:null,initialize:function(e){this.setGrid(e)},setGrid:function(e){this.grid=e},getGrid:function(){return this.deprecated("grid",{since:"0.2"})},getBehavior:function(){return this.deprecated("grid.behavior",{since:"0.2"})},changed:function(){this.grid.behavior.changed()},getPrivateState:function(){return this.grid.getPrivateState()},applyState:function(){},alphaFor:function(e){var t=Math.floor(e/26),i=e%26,n="";return t>0&&(n+=this.alpha(t-1)),n+=this.alpha(i)},alpha:function(e){return String.fromCharCode(o+e)},getCellEditorAt:function(e,t){}});t.exports=r},{"../lib/Base":69}],49:[function(e,t,i){"use strict";function n(){var e=this.selectedData,t=this.grid.selectionModel.hasRowSelections(),i=e.length||t;if(i)var n=this.getFilteredData();e.forEach(function(t,i){n.indexOf(t)>=0&&delete e[i]}),t&&this.grid.getSelectedRows().forEach(function(t){var i=n[t];e.indexOf(i)<0&&e.push(i)})}function o(){if(this.selectedData.length){var e=this.grid.selectionModel,t=this.grid.getHeaderRowCount(),i=this.getFilteredData();e.clearRowSelection(),this.selectedData.forEach(function(n){var o=i.indexOf(n);o>=0&&e.selectRow(t+o)})}}function r(){0===this.analytics.aggregates.length&&this.quietlySetAggregates({}),this.analytics.apply()}function s(){this.getGlobalFilterDataSource().apply();var e=[];this.grid.fireSyntheticFilterAppliedEvent({details:e})}function a(){var e=this.getSortDataSource(),t=this.getPrivateState().sorts,i=this.hasAggregates()?1:0;if(t&&0!==t.length)for(var n=0;n<t.length;n++){var o=Math.abs(t[n])-1,r=t[n]<0?-1:1;e.sortOn(o-i,r)}else e.clearSorts();e.applySorts()}var l=e("../local_node_modules/hyper-analytics"),u=e("./DataModel"),c=e("../../images"),h=e("../lib/CustomFilter"),d="▲",g="▼",f={isNullObject:function(){return!0},getFields:function(){return[]},getHeaders:function(){return[]},getColumnCount:function(){return 0},getRowCount:function(){return 0},getAggregateTotals:function(){return[]},hasAggregates:function(){return!1},hasGroups:function(){return!1},getRow:function(){return null}},p=u.extend("dataModels.JSON",{source:f,preglobalfilter:f,presorter:f,analytics:f,postglobalfilter:f,postsorter:f,topTotals:[],bottomTotals:[],initialize:function(){this.selectedData=[]},clearSelectedData:function(){this.selectedData.length=0},hasAggregates:function(){return this.analytics.hasAggregates()},hasGroups:function(){return this.analytics.hasGroups()},getDataSource:function(){return this.postsorter},getGlobalFilterDataSource:function(){return this.postglobalfilter},getSortDataSource:function(){return this.postsorter},getData:function(){return this.source.data},getFilteredData:function(){for(var e=this.getDataSource(),t=e.getRowCount(),i=new Array(t),n=0;t>n;n++)i[n]=e.getRow(n);return i},getValue:function(e,t){var i,n=this.hasHierarchyColumn(),o=this.grid.getHeaderRowCount();return n?-2===e&&(e=0):this.hasAggregates()&&(e+=1),i=o>t?this.getHeaderRowValue(e,t):this.getDataSource().getValue(e,t-o)},getHeaderRowValue:function(e,t){var i;if(void 0===t)i=this.getHeaders()[Math.max(e,0)];else if(0>t){var n=this.getBottomTotals();i=n[n.length+t][e]}else{var o=this.grid.isShowFilterRow(),r=this.grid.isShowHeaderRow(),s=(o?1:0)+(r?1:0);if(t>=s)i=this.getTopTotals()[t-s][e];else{if(!r||0!==t){var a=this.getGlobalFilter();i=a?a.getColumnFilterState(this.getFields()[e]):"";var l=c.filter(i.length);return[null,i,l]}i=this.getHeaders()[e];var u=this.getSortImageForColumn(e);u&&(i=u+i)}}return i},setValue:function(e,t,i){var n=this.hasHierarchyColumn(),o=this.grid.getHeaderRowCount();n?-2===e&&(e=0):this.hasAggregates()&&(e+=1),o>t?this.setHeaderRowValue(e,t,i):this.getDataSource().setValue(e,t-o,i),this.changed()},setHeaderRowValue:function(e,t,i){if(void 0===i)return this._setHeader(e,t);var n=this.grid.isShowFilterRow(),o=this.grid.isShowHeaderRow(),r=n&&o,s=(n?1:0)+(o?1:0);if(t>=s)this.getTopTotals()[t-s][e]=i;else{if(-1===e)return;if(r){if(0===t)return this._setHeader(e,i);this.setFilter(e,i)}else{if(!n)return this._setHeader(e,i);this.setFilter(e,i)}}return""},setFilter:function(e,t){var i=this.getGlobalFilter(),n=this.getFields()[e];i.setColumnFilterState(n,t),this.applyAnalytics()},getColumnProperties:function(e){var t=this.grid.behavior.allColumns[e];return t?t.getProperties():void 0},getColumnCount:function(){var e=this.grid.resolveProperty("showTreeColumn")===!0,t=this.hasAggregates(),i=t&&!e?-1:0;return this.analytics.getColumnCount()+i},getRowCount:function(){var e=this.getDataSource().getRowCount();return e+=this.grid.getHeaderRowCount()},getHeaders:function(){return this.analytics.getHeaders()},setHeaders:function(e){this.getDataSource().setHeaders(e)},setFields:function(e){this.getDataSource().setFields(e)},getFields:function(){return this.getDataSource().getFields()},setData:function(e){this.source=new l.JSDataSource(e),this.analytics=new l.DataSourceAggregator(this.source),this.postglobalfilter=new l.DataSourceGlobalFilter(this.analytics),this.postsorter=new l.DataSourceSorterComposite(this.postglobalfilter),this.applyAnalytics()},setTopTotals:function(e){this.topTotals=e},getTopTotals:function(){return this.hasAggregates()?this.getDataSource().getGrandTotals():this.topTotals},setBottomTotals:function(e){this.bottomTotals=e},getBottomTotals:function(){return this.hasAggregates()?this.getDataSource().getGrandTotals():this.bottomTotals},setGroups:function(e){this.analytics.setGroupBys(e),this.applyAnalytics(),this.grid.fireSyntheticGroupsChangedEvent(this.getGroups())},getGroups:function(){for(var e=this.getHeaders().slice(0),t=this.getFields().slice(0),i=this.analytics.groupBys,n=[],o=0;o<i.length;o++){var r=e[i[o]];n.push({id:i[o],label:r,field:t})}return n},getAvailableGroups:function(){for(var e=this.source.getHeaders().slice(0),t=this.analytics.groupBys,i=[],n=0;n<e.length;n++)if(-1===t.indexOf(n)){var o=e[n];i.push({id:n,label:o,field:o})}return i},getVisibleColumns:function(){var e=this.grid.behavior.columns;return e=e.filter(function(e){return"Tree"!==e.label})},getHiddenColumns:function(){for(var e=this.grid.behavior.columns,t=this.grid.behavior.allColumns,i=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&i.push(t[n]);return i.sort(function(e,t){return e.label<t.label}),i},setAggregates:function(e){this.quietlySetAggregates(e),this.applyAnalytics()},quietlySetAggregates:function(e){this.analytics.setAggregates(e)},hasHierarchyColumn:function(){var e=this.grid.resolveProperty("showTreeColumn")===!0;return this.hasAggregates()&&this.hasGroups()&&e},applyAnalytics:function(e){n.call(this),e||r.call(this),s.call(this),a.call(this),o.call(this)},toggleSort:function(e,t){this.incrementSortState(e,t),this.applyAnalytics()},incrementSortState:function(e,t){e++;var i=this.getPrivateState(),n=t.indexOf("CTRL")>-1;i.sorts=i.sorts||[];var o=i.sorts.indexOf(e);-1===o&&(o=i.sorts.indexOf(-1*e)),o>-1?i.sorts[o]>0?i.sorts[o]=-1*i.sorts[o]:i.sorts.splice(o,1):n||0===i.sorts.length?i.sorts.unshift(e):(i.sorts.length=0,i.sorts.unshift(e)),i.sorts.length>3&&(i.sorts.length=3)},getSortImageForColumn:function(e){e++;var t=!0,i=this.getPrivateState().sorts;if(!i)return null;var n=i.indexOf(e);if(0>n&&(n=i.indexOf(-1*e),t=!1),0>n)return null;var o=i.length-n,r=t?d:g;return o+r+" "},cellClicked:function(e,t){if(this.hasAggregates()&&0===t.gridCell.x){var i=this.grid.getHeaderRowCount(),n=t.gridCell.y-i;this.getDataSource().click(n),this.applyAnalytics(!0),this.changed()}},getRow:function(e){var t=this.grid.getHeaderRowCount();if(t>e&&!this.hasAggregates()){var i=this.getTopTotals();return i[e-(t-i.length)]}return this.getDataSource().getRow(e-t)},buildRow:function(e){var t=this.getColumnCount(),i=[].concat(this.getFields()),n={};this.hasAggregates()&&(n.tree=this.getValue(-2,e),i.shift());for(var o=0;t>o;o++)n[i[o]]=this.getValue(o,e);return n},getComputedRow:function(e){for(var t=this.getRowContextFunction([e]),i=this.getFields(),n={},o=0;o<i.length;o++){var r=i[o];n[r]=t(r)[0]}return n},getValueByField:function(e,t){var i=this.getFields().indexOf(e);return this.hasAggregates()&&(t+=1),this.getDataSource().getValue(i,t)},getGlobalFilter:function(){return this.getGlobalFilterDataSource().get()},setGlobalFilter:function(e){var t=this.getGlobalFilterDataSource();if(e){var i;e instanceof h?i=e:(i=new h(e),i.invalid()),t.set(i)}else t.clear();this.applyAnalytics()},getCellRenderer:function(e,t,i,n,o){var r,s=this.grid.getCellProvider();return e.x=t,e.y=i,e.untranslatedX=n,e.untranslatedY=o,r=s.getCell(e),r.config=e,r},applyState:function(){this.applyAnalytics()},reset:function(){this.setData([])},getUnfilteredValue:function(e,t){return this.source.getValue(e,t)},getUnfilteredRowCount:function(){return this.source.getRowCount()}});t.exports=p},{"../../images":3,"../lib/CustomFilter":72,"../local_node_modules/hyper-analytics":91,"./DataModel":48}],50:[function(e,t,i){"use strict";function n(e,t){if(null===t||void 0===t)return 0;if(t+="",0===t.length)return 0;var i=e.font+t,n=a.get(i);return n||(n=e.measureText(t).width,a.set(i,n)),n}function o(e){
var t=l[e];if(!t){t={};var i=document.createElement("span");i.textContent="Hg",i.style.font=e;var n=document.createElement("div");n.style.display="inline-block",n.style.width="1px",n.style.height="0px";var o=document.createElement("div");o.appendChild(i),o.appendChild(n),o.style.position="absolute",document.body.appendChild(o);try{n.style.verticalAlign="baseline";var r=n.getBoundingClientRect(),s=i.getBoundingClientRect();t.ascent=r.top-s.top,n.style.verticalAlign="bottom",t.height=r.top-s.top,t.descent=t.height-t.ascent}finally{document.body.removeChild(o)}0!==t.height&&(l[e]=t)}return t}var r=e("lru-cache"),s=e("./lib/renderCellError");t.exports={font:"13px Tahoma, Geneva, sans-serif",color:"rgb(25, 25, 25)",backgroundColor:"rgb(241, 241, 241)",foregroundSelectionFont:"bold 13px Tahoma, Geneva, sans-serif",foregroundSelectionColor:"rgb(0, 0, 128)",backgroundSelectionColor:"rgba(147, 185, 255, 0.625)",columnHeaderFont:"12px Tahoma, Geneva, sans-serif",columnHeaderColor:"rgb(25, 25, 25)",columnHeaderForegroundSelectionFont:"bold 12px Tahoma, Geneva, sans-serif",columnHeaderBackgroundColor:"rgb(223, 227, 232)",columnHeaderForegroundSelectionColor:"rgb(80, 80, 80)",columnHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",columnHeaderForegroundColumnSelectionColor:"rgb(25, 25, 25)",columnHeaderBackgroundColumnSelectionColor:"rgb(255, 180, 0)",rowHeaderFont:"12px Tahoma, Geneva, sans-serif",rowHeaderColor:"rgb(25, 25, 25)",rowHeaderBackgroundColor:"rgb(223, 227, 232)",rowHeaderForegroundSelectionColor:"rgb(80, 80, 80)",rowHeaderForegroundSelectionFont:"bold 12px Tahoma, Geneva, sans-serif",rowHeaderBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",rowHeaderForegroundRowSelectionColor:"rgb(25, 25, 25)",rowHeaderBackgroundRowSelectionColor:"rgb(255, 180, 0)",filterFont:"12px Tahoma, Geneva, sans-serif",filterColor:"rgb(25, 25, 25)",filterBackgroundColor:"white",filterForegroundSelectionColor:"rgb(25, 25, 25)",filterBackgroundSelectionColor:"rgb(255, 220, 97)",filterCellBorderStyle:"rgba(0,0,0,0.8)",filterCellBorderThickness:.4,treeColumnFont:"12px Tahoma, Geneva, sans-serif",treeColumnColor:"rgb(25, 25, 25)",treeColumnBackgroundColor:"rgb(223, 227, 232)",treeColumnForegroundSelectionColor:"rgb(25, 25, 25)",treeColumnBackgroundSelectionColor:"rgba(255, 220, 97, 0.45)",treeColumnForegroundColumnSelectionColor:"rgb(25, 25, 25)",treeColumnBackgroundColumnSelectionColor:"rgb(255, 180, 0)",backgroundColor2:"rgb(201, 201, 201)",voffset:0,scrollbarHoverOver:"visible",scrollbarHoverOff:"hidden",scrollingEnabled:!0,vScrollbarClassPrefix:"",hScrollbarClassPrefix:"",fixedRowAlign:"center",fixedColAlign:"center",cellPadding:5,gridLinesH:!0,gridLinesV:!0,lineColor:"rgb(199, 199, 199)",lineWidth:.4,defaultRowHeight:15,defaultColumnWidth:100,repaintIntervalRate:60,repaintImmediately:!1,useBitBlit:!1,useHiDPI:!0,editorActivationKeys:["alt","esc"],readOnly:!1,getTextWidth:n,getTextHeight:o,fixedColumnCount:0,fixedRowCount:0,headerColumnCount:0,showRowNumbers:!0,showTreeColumn:!0,showHeaderRow:!0,showFilterRow:!0,cellSelection:!0,columnSelection:!0,rowSelection:!0,singleRowSelectionMode:!0,selectionRegionOverlayColor:"rgba(0, 0, 48, 0.2)",selectionRegionOutlineColor:"black",columnAutosizing:!0,rowNumberAutosizing:!0,headerTextWrapping:!1,rowResize:!1,editable:!0,editOnDoubleClick:!0,doubleClickDelay:325,editOnKeydown:!0,renderCellError:s,checkboxOnlyRowSelections:!1,format:"default",hoverCellHighlight:{enabled:!0,backgroundColor:"rgba(160, 160, 40, 0.45)"},hoverRowHighlight:{enabled:!0,backgroundColor:"rgba(100, 100, 25, 0.30)"},hoverColumnHighlight:{enabled:!0,backgroundColor:"rgba(60, 60, 15, 0.15)"},link:!1,strikeThrough:!1};var a=new r(2e3),l={}},{"./lib/renderCellError":80,"lru-cache":22}],51:[function(e,t,i){"use strict";e("./lib/polyfills"),e("object-iterators");var n=e("./Hypergrid");n.images=e("../images"),n.behaviors=e("./behaviors"),n.cellEditors=e("./cellEditors"),n.features=e("./features"),(window.fin=window.fin||{}).Hypergrid=n},{"../images":3,"./Hypergrid":31,"./behaviors":37,"./cellEditors":47,"./features":68,"./lib/polyfills":79,"object-iterators":24}],52:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("CellClick",{handleTap:function(e,t){t.gridCell.y>=e.behavior.getHeaderRowCount()&&t.gridCell.x>=e.behavior.getHeaderColumnCount()?e.cellClicked(t):this.next&&this.next.handleTap(e,t)}});t.exports=o},{"./Feature.js":61}],53:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("CellEditing",{handleDoubleClick:function(e,t){var i=e.resolveProperty("editOnDoubleClick");this.checkActivateEditor(e,t,i)?e.onEditorActivate(t):this.next&&this.next.handleDoubleClick(e,t)},handleTap:function(e,t){var i=e.resolveProperty("editOnDoubleClick");this.checkActivateEditor(e,t,!i)?e.onEditorActivate(t):this.next&&this.next.handleTap(e,t)},handleHoldPulse:function(e,t){var i=e.resolveProperty("editOnDoubleClick");this.checkActivateEditor(e,t,!i)?e.onEditorActivate(t):this.next&&this.next.handleHoldPulse(e,t)},checkActivateEditor:function(e,t,i){var n=e.behavior.getHeaderRowCount(),o=e.behavior.getHeaderColumnCount(),r=t.gridCell,s=e.isFilterRow(r.y);return i&&r.x>=o&&(s||r.y>=n)}});t.exports=o},{"./Feature.js":61}],54:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("CellSelection",{currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,handleMouseUp:function(e,t){this.dragging&&(this.dragging=!1),this.next&&this.next.handleMouseUp(e,t)},handleMouseDown:function(e,t){var i=t.primitiveEvent.detail.isRightClick,n=t.gridCell,o=t.viewPoint,r=n.x,s=n.y,a=e.behavior.getHeaderRowCount(),l=e.behavior.getHeaderColumnCount(),u=e.behavior.getColumnCount(),c=o.x>=u,h=a>s||l>r;if(!e.isCellSelection()||i||h||c)this.next&&this.next.handleMouseDown(e,t);else{var d=e.getFixedColumnCount(),g=e.getFixedRowCount();o.x<d&&(r=o.x),o.y<g&&(s=o.y);var f=e.newPoint(r,s),p=t.primitiveEvent,v=p.detail.keys;this.dragging=!0,this.extendSelection(e,f,v)}},handleMouseDrag:function(e,t){var i=t.primitiveEvent.detail.isRightClick;if(e.isCellSelection()&&!i&&this.dragging){var n=e.getFixedColumnCount(),o=e.getFixedRowCount(),r=t.gridCell,s=t.viewPoint,a=r.x,l=r.y;s.x<n&&(a=s.x),s.y<o&&(l=s.y);var u=e.newPoint(a,l),c=t.primitiveEvent;this.currentDrag=c.detail.mouse,this.lastDragCell=u,this.checkDragScroll(e,this.currentDrag),this.handleMouseDragCellSelection(e,u,c.detail.keys)}else this.next&&this.next.handleMouseDrag(e,t)},handleKeyDown:function(e,t){var i="handle"+t.detail["char"];this[i]&&this[i].call(this,e,t.detail)},handleMouseDragCellSelection:function(e,t,i){var n=e.behavior.getHeaderRowCount(),o=e.behavior.getHeaderColumnCount(),r=t.x,s=t.y;r=Math.max(o,r),s=Math.max(n,s);var a=e.getDragExtent(),l=e.getMouseDown(),u=r-l.x,c=s-l.y;(a.x!==u||a.y!==c)&&(e.clearMostRecentSelection(),e.select(l.x,l.y,u,c),e.setDragExtent(e.newPoint(u,c)),e.repaint())},checkDragScroll:function(e,t){if(e.resolveProperty("scrollingEnabled")){var i=e.getDataBounds(),n=i.contains(t);n?e.isScrollingNow()&&e.setScrollingNow(!1):e.isScrollingNow()||(e.setScrollingNow(!0),this.scrollDrag(e))}},scrollDrag:function(e){if(e.isScrollingNow()){var t=e.isMouseDownInHeaderArea(),i=this.lastDragCell,n=e.getDataBounds(),o=0,r=0,s=e.getFixedColumnCount(),a=e.getFixedRowCount(),l=i.x<s,u=i.y<a;t||(this.currentDrag.x<n.origin.x&&(o=-1),this.currentDrag.y<n.origin.y&&(r=-1)),this.currentDrag.x>n.origin.x+n.extent.x&&(o=1),this.currentDrag.y>n.origin.y+n.extent.y&&(r=1);var c=o,h=r;l&&(c=0),u&&(h=0),this.lastDragCell=i.plusXY(c,h),e.scrollBy(o,r),this.handleMouseDragCellSelection(e,i,[]),e.repaint(),setTimeout(this.scrollDrag.bind(this,e),25)}},extendSelection:function(e,t,i){var n=i.indexOf("CTRL")>=0,o=i.indexOf("SHIFT")>=0,r=e.getMouseDown(),s=t.x,a=t.y;if(!(0>s||0>a)){if(n&&s===r.x&&a===r.y)return e.clearMostRecentSelection(),e.popMouseDown(),void e.repaint();n||o||e.clearSelections(),o?(e.clearMostRecentSelection(),e.select(r.x,r.y,s-r.x+1,a-r.y+1),e.setDragExtent(e.newPoint(s-r.x+1,a-r.y))):(e.select(s,a,0,0),e.setMouseDown(e.newPoint(s,a)),e.setDragExtent(e.newPoint(0,0))),e.repaint()}},handleDOWNSHIFT:function(e){this.moveShiftSelect(e,0,1)},handleUPSHIFT:function(e){this.moveShiftSelect(e,0,-1)},handleLEFTSHIFT:function(e){this.moveShiftSelect(e,-1,0)},handleRIGHTSHIFT:function(e){this.moveShiftSelect(e,1,0)},handleDOWN:function(e,t){t.primitiveEvent.preventDefault();var i=this.getAutoScrollAcceleration();this.moveSingleSelect(e,0,i)},handleUP:function(e,t){t.primitiveEvent.preventDefault();var i=this.getAutoScrollAcceleration();this.moveSingleSelect(e,0,-i)},handleLEFT:function(e){this.moveSingleSelect(e,-1,0)},handleRIGHT:function(e){this.moveSingleSelect(e,1,0)},getAutoScrollAcceleration:function(){var e=1,t=this.getAutoScrollDuration()/2e3;return e=Math.max(1,Math.floor(t*t*t*t))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){var e=Date.now();e-this.sbLastAuto>500&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return Date.now()-this.sbLastAuto>500?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(e,t,i){var n=e.getColumnCount()-1,o=e.getRowCount()-1,r=e.getVisibleColumns()-1,s=e.getVisibleRows()-1;e.resolveProperty("scrollingEnabled")||(n=Math.min(n,r),o=Math.min(o,s));var a=e.getMouseDown(),l=e.getDragExtent(),u=l.x+t,c=l.y+i;u=Math.min(n-a.x,Math.max(-a.x,u)),c=Math.min(o-a.y,Math.max(-a.y,c)),e.clearMostRecentSelection(),e.select(a.x,a.y,u,c),e.setDragExtent(e.newPoint(u,c)),e.insureModelColIsVisible(u+a.x,t)&&this.pingAutoScroll(),e.insureModelRowIsVisible(c+a.y,i)&&this.pingAutoScroll(),e.repaint()},moveSingleSelect:function(e,t,i){var n=e.getColumnCount()-1,o=e.getRowCount()-1,r=e.getVisibleColumnsCount()-1,s=e.getVisibleRowsCount()-1,a=e.getHeaderRowCount(),l=e.getHeaderColumnCount();e.resolveProperty("scrollingEnabled")||(n=Math.min(n,r),o=Math.min(o,s));var u=e.getMouseDown().plus(e.getDragExtent()),c=u.x+t,h=u.y+i;c=Math.min(n,Math.max(l,c)),h=Math.min(o,Math.max(a,h)),e.clearSelections(),e.select(c,h,0,0),e.setMouseDown(e.newPoint(c,h)),e.setDragExtent(e.newPoint(0,0)),e.insureModelColIsVisible(c,t)&&this.pingAutoScroll(),e.insureModelRowIsVisible(h,i)&&this.pingAutoScroll(),e.repaint()}});t.exports=o},{"./Feature.js":61}],55:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("ColumnAutosizing",{handleDoubleClick:function(e,t){var i=e.getHeaderRowCount(),n=t.gridCell;n.y<=i?e.autosizeColumn(n.x):this.next&&this.next.handleDoubleClick(e,t)}});t.exports=o},{"./Feature.js":61}],56:[function(e,t,i){"use strict";var n,o,r,s,a=e("./Feature.js"),l=150,u=a.extend("ColumnMoving",{floaterAnimationQueue:[],columnDragAutoScrollingRight:!1,columnDragAutoScrollingLeft:!1,dragArmed:!1,dragging:!1,dragCol:-1,dragOffset:0,initializeOn:function(e){this.isFloatingNow=!1,this.initializeAnimationSupport(e),this.next&&this.next.initializeOn(e)},initializeAnimationSupport:function(e){n||(n=document.createElement("canvas"),n.setAttribute("width","0px"),n.setAttribute("height","0px"),document.body.appendChild(n),o=n.getContext("2d")),r||(r=document.createElement("canvas"),r.setAttribute("width","0px"),r.setAttribute("height","0px"),document.body.appendChild(r),s=r.getContext("2d"))},getCanDragCursorName:function(){return"-webkit-grab"},getDraggingCursorName:function(){return"-webkit-grabbing"},handleMouseDrag:function(e,t){var i,n=t.gridCell,o=Math.abs(t.primitiveEvent.detail.dragstart.x-t.primitiveEvent.detail.mouse.x);return 10>o?void(this.next&&this.next.handleMouseDrag(e,t)):(this.isHeaderRow(e,t)&&this.dragArmed&&!this.dragging?(this.dragging=!0,this.dragCol=n.x,this.dragOffset=t.mousePoint.x,this.detachChain(),i=t.primitiveEvent.detail.mouse.x-this.dragOffset,this.createDragColumn(e,i,this.dragCol)):this.next&&this.next.handleMouseDrag(e,t),void(this.dragging&&(i=t.primitiveEvent.detail.mouse.x-this.dragOffset,this.dragColumn(e,i))))},handleMouseDown:function(e,t){e.behavior.isColumnReorderable()&&this.isHeaderRow(e,t)&&-1!==t.gridCell.x&&(this.dragArmed=!0,this.cursor=this.getDraggingCursorName(),e.clearSelections()),this.next&&this.next.handleMouseDown(e,t)},handleMouseUp:function(e,t){if(this.dragging){this.cursor=null;var i=this;this.endDragColumn(e),setTimeout(function(){i.attachChain()},200)}this.dragCol=-1,this.dragging=!1,this.dragArmed=!1,this.cursor=null,e.repaint(),this.next&&this.next.handleMouseUp(e,t)},handleMouseMove:function(e,t){!this.dragging&&t.mousePoint.y<5&&0===t.viewPoint.y?this.cursor=this.getCanDragCursorName():this.cursor=null,this.next&&this.next.handleMouseMove(e,t),this.isHeaderRow(e,t)&&this.dragging&&(this.cursor=this.getDraggingCursorName())},floatColumnTo:function(e,t){this.floatingNow=!0;var i,n,o=e.getRenderer(),r=o.getColumnEdges(),s=e.getHScrollValue(),a=e.renderOverridesCache.floater.columnIndex,l=e.renderOverridesCache.dragger.columnIndex,u=e.renderOverridesCache.dragger.hdpiratio,c=e.getFixedColumnCount(),h=e.getColumnWidth(l),d=e.getColumnWidth(a),g=e.getVisibleColumnsCount(),f=0,p=0;l>=c&&(f=s),a>=c&&(p=s),t?(i=r[Math.min(g,l-f)],n=r[Math.min(g,a-p)],e.renderOverridesCache.dragger.startX=(i+d)*u,e.renderOverridesCache.floater.startX=i*u):(n=r[Math.min(g,a-p)],i=n+h,e.renderOverridesCache.dragger.startX=n*u,e.renderOverridesCache.floater.startX=i*u),e.swapColumns(l,a),e.renderOverridesCache.dragger.columnIndex=a,e.renderOverridesCache.floater.columnIndex=l,this.floaterAnimationQueue.unshift(this.doColumnMoveAnimation(e,n,i)),this.doFloaterAnimation(e)},doColumnMoveAnimation:function(e,t,i){var n=this;return function(){var o=r;o.style.display="inline",n.setCrossBrowserProperty(o,"transform","translate("+t+"px, 0px)"),requestAnimationFrame(function(){n.setCrossBrowserProperty(o,"transition",(n.isWebkit?"-webkit-":"")+"transform "+l+"ms ease"),n.setCrossBrowserProperty(o,"transform","translate("+i+"px, -2px)")}),e.repaint(),setTimeout(function(){n.setCrossBrowserProperty(o,"transition",""),e.renderOverridesCache.floater=null,e.repaint(),n.doFloaterAnimation(e),requestAnimationFrame(function(){o.style.display="none",n.isFloatingNow=!1})},l+50)}},doFloaterAnimation:function(e){if(0===this.floaterAnimationQueue.length)return this.floatingNow=!1,void e.repaint();var t=this.floaterAnimationQueue.pop();t()},createFloatColumn:function(e,t){var i=e.getFixedColumnCount(),n=e.getHScrollValue();i>t&&(n=0);var o=e.getRenderer(),a=o.getColumnEdges(),l=e.getColumnWidth(t),u=e.div.clientHeight,c=r,h=c.style,d=e.div.getBoundingClientRect();h.top=d.top-2+"px",h.left=d.left+"px",h.position="fixed";var g=e.getHiDPI(s);c.setAttribute("width",Math.round(l*g)+"px"),c.setAttribute("height",Math.round(u*g)+"px"),h.boxShadow="0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23)",h.width=l+"px",h.height=u+"px",h.borderTop="1px solid "+o.resolveProperty("lineColor"),h.backgroundColor=o.resolveProperty("backgroundColor");var f=a[t-n];f*=g,s.scale(g,g),e.renderOverridesCache.floater={columnIndex:t,ctx:s,startX:f,width:l,height:u,hdpiratio:g},h.zIndex="4",this.setCrossBrowserProperty(c,"transform","translate("+f+"px, -2px)"),h.cursor=this.getDraggingCursorName(),e.repaint()},setCrossBrowserProperty:function(e,t,i){var n=t[0].toUpperCase()+t.substr(1);this.setProp(e,"webkit"+n,i),this.setProp(e,"Moz"+n,i),this.setProp(e,"ms"+n,i),this.setProp(e,"O"+n,i),this.setProp(e,t,i)},setProp:function(e,t,i){t in e.style&&(e.style[t]=i)},createDragColumn:function(e,t,i){var r=e.getFixedColumnCount(),s=e.getHScrollValue();r>i&&(s=0);var a=e.getRenderer(),l=a.getColumnEdges(),u=e.getHiDPI(o),c=e.getColumnWidth(i),h=e.div.clientHeight,d=n,g=e.div.getBoundingClientRect(),f=d.style;f.top=g.top+"px",f.left=g.left+"px",f.position="fixed",f.opacity=.85,f.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)",f.borderTop="1px solid "+a.resolveProperty("lineColor"),f.backgroundColor=e.renderer.resolveProperty("backgroundColor"),d.setAttribute("width",Math.round(c*u)+"px"),d.setAttribute("height",Math.round(h*u)+"px"),f.width=c+"px",f.height=h+"px";var p=l[i-s];p*=u,o.scale(u,u),e.renderOverridesCache.dragger={columnIndex:i,ctx:o,startX:p,width:c,height:h,hdpiratio:u},this.setCrossBrowserProperty(d,"transform","translate("+t+"px, -5px)"),f.zIndex="5",f.cursor=this.getDraggingCursorName(),e.repaint()},dragColumn:function(e,t){var i=this,r=this.columnDragAutoScrollingRight||this.columnDragAutoScrollingLeft,s=e.getHiDPI(o),a=e.renderOverridesCache.dragger.columnIndex,u=e.renderOverridesCache.dragger.width,c=0,h=e.renderer.getFinalVisableColumnBoundary()-u;t=Math.min(t,h+15),t=Math.max(c-15,t);var d=c>t&&0!==a,g=t>h,f=n;this.setCrossBrowserProperty(f,"transition",(i.isWebkit?"-webkit-":"")+"transform 0ms ease, box-shadow "+l+"ms ease"),this.setCrossBrowserProperty(f,"transform","translate("+t+"px, -10px)"),requestAnimationFrame(function(){f.style.display="inline"});var p=e.renderer.getColumnFromPixelX(t+f.width/2/s);d&&(p=0),g&&(p=e.getColumnCount()-1);var v=a>p;if(v=v||p-a>=1,!v||g||r){if(c-10>t&&this.checkAutoScrollToLeft(e,t),t>c-10&&(this.columnDragAutoScrollingLeft=!1),g||t>h+10)return void this.checkAutoScrollToRight(e,t);h+10>t&&(this.columnDragAutoScrollingRight=!1)}else{var m=p>a;if(this.isFloatingNow)return;this.isFloatingNow=!0,this.createFloatColumn(e,p),this.floatColumnTo(e,m)}},checkAutoScrollToRight:function(e,t){this.columnDragAutoScrollingRight||(this.columnDragAutoScrollingRight=!0,this._checkAutoScrollToRight(e,t))},_checkAutoScrollToRight:function(e,t){if(this.columnDragAutoScrollingRight){var i=e.getHScrollValue();if(e.dragging&&!(i>e.sbHScrollConfig.rangeStop-2)){var n=e.renderOverridesCache.dragger.columnIndex;e.scrollBy(1,0);var o=n+1;console.log(o,n),e.swapColumns(o,n),e.renderOverridesCache.dragger.columnIndex=o,setTimeout(this._checkAutoScrollToRight.bind(this,e,t),250)}}},checkAutoScrollToLeft:function(e,t){this.columnDragAutoScrollingLeft||(this.columnDragAutoScrollingLeft=!0,this._checkAutoScrollToLeft(e,t))},_checkAutoScrollToLeft:function(e,t){if(this.columnDragAutoScrollingLeft){var i=e.getHScrollValue();if(e.dragging&&!(1>i)){var n=e.renderOverridesCache.dragger.columnIndex;e.swapColumns(n+i,n+i-1),e.scrollBy(-1,0),setTimeout(this._checkAutoScrollToLeft.bind(this,e,t),250)}}},endDragColumn:function(e){var t=e.getFixedColumnCount(),i=e.getHScrollValue(),o=e.renderOverridesCache.dragger.columnIndex;t>o&&(i=0);var r=e.getRenderer(),s=r.getColumnEdges(),a=this,u=s[o-i],c=n;a.setCrossBrowserProperty(c,"transition",(a.isWebkit?"-webkit-":"")+"transform "+l+"ms ease, box-shadow "+l+"ms ease"),a.setCrossBrowserProperty(c,"transform","translate("+u+"px, -1px)"),c.style.boxShadow="0px 0px 0px #888888",setTimeout(function(){e.renderOverridesCache.dragger=null,e.repaint(),requestAnimationFrame(function(){c.style.display="none",e.endDragColumnNotification()})},l+50)},isHeaderRow:function(e,t){var i=t.viewPoint,n=0===i.y;return n}});t.exports=u},{"./Feature.js":61}],57:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("ColumnPicker",{handleKeyUp:function(e,t){var i=t.detail["char"].toLowerCase(),n=e.resolveProperty("editorActivationKeys");n.indexOf(i)>-1&&e.toggleColumnPicker()}});t.exports=o},{"./Feature.js":61}],58:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("ColumnResizing",{dragIndex:-2,dragStart:-1,dragIndexStartingSize:-1,getMouseValue:function(e){return e.primitiveEvent.detail.mouse.x},getGridCellValue:function(e){return e.y},getScrollValue:function(e){return e.getHScrollValue()},getAreaSize:function(e,t){return e.getColumnWidth(t)},setAreaSize:function(e,t,i){e.setColumnWidth(t,i)},getPreviousAbsoluteSize:function(e,t){return e.getRenderedWidth(t)},overAreaDivider:function(e,t){return e.overColumnDivider(t)},isFirstFixedOtherArea:function(e,t){return this.isFirstFixedRow(e,t)},getCursorName:function(){return"col-resize"},handleMouseDrag:function(e,t){if(this.dragIndex>-2){var i=this.getMouseValue(t),n=this.getScrollValue(e);this.dragIndex<this.getFixedAreaCount(e)&&(n=0);var o=this.getPreviousAbsoluteSize(e,this.dragIndex-n),r=i-o;this.setAreaSize(e,this.dragIndex,r)}else this.next&&this.next.handleMouseDrag(e,t)},getSize:function(e,t){return this.getAreaSize(e,t)},getOtherFixedAreaCount:function(e){return e.getFixedRowCount()},handleMouseDown:function(e,t){var i=this.isEnabled(e),n=this.overAreaDivider(e,t);if(i&&n>-1&&this.isFirstFixedOtherArea(e,t)){var o=this.getScrollValue(e);n<this.getFixedAreaCount(e)&&(o=0),this.dragIndex=n-1+o,this.dragStart=this.getMouseValue(t),this.dragIndexStartingSize=0,this.detachChain()}else this.next&&this.next.handleMouseDown(e,t)},handleMouseUp:function(e,t){var i=this.isEnabled(e);if(i&&this.dragIndex>-2){this.cursor=null,this.dragIndex=-2,t.primitiveEvent.stopPropagation();var n=this;e.synchronizeScrollingBoundries(),setTimeout(function(){n.attachChain()},200)}else this.next&&this.next.handleMouseUp(e,t)},handleMouseMove:function(e,t){this.dragIndex>-2||(this.cursor=null,this.next&&this.next.handleMouseMove(e,t),this.checkForAreaResizeCursorChange(e,t))},checkForAreaResizeCursorChange:function(e,t){var i=this.isEnabled(e);i&&this.overAreaDivider(e,t)>-1&&this.isFirstFixedOtherArea(e,t)?this.cursor=this.getCursorName():this.cursor=null},getFixedAreaCount:function(e){var t=e.getFixedColumnCount()+(e.isShowRowNumbers()?1:0)+(e.hasHierarchyColumn()?1:0);return t},handleDoubleClick:function(e,t){var i=this.isEnabled(e),n=this.overAreaDivider(e,t)>-1,o=e.getHeaderRowCount(),r=t.gridCell;i&&n&&r.y<=o?e.autosizeColumn(r.x-1):this.next&&this.next.handleDoubleClick(e,t)},isEnabled:function(e){return!0}});t.exports=o},{"./Feature.js":61}],59:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=50,r=n.extend("ColumnSelection",{currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,handleMouseUp:function(e,t){this.dragging&&(this.dragging=!1),this.next&&this.next.handleMouseUp(e,t)},handleDoubleClick:function(e,t){this.doubleClickTimer&&(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=void 0),this.next&&this.next.handleDoubleClick(e,t)},handleMouseDown:function(e,t){if(!this.doubleClickTimer){if((!e.isColumnSelection()||t.mousePoint.y<5)&&this.next)return void this.next.handleMouseDown(e,t);var i=t.primitiveEvent.detail.isRightClick,n=t.gridCell,r=t.viewPoint,s=n.x,a=n.y,l=e.isShowHeaderRow()&&0===a&&-1!==s;i||!l?this.next&&this.next.handleMouseDown(e,t):this.doubleClickTimer=setTimeout(function(){this.doubleClickTimer=void 0;var i=e.getFixedColumnCount();r.x<i&&(s=r.x);var n=e.newPoint(s,0),o=t.primitiveEvent,a=o.detail.keys;this.dragging=!0,this.extendSelection(e,n,a)}.bind(this),e.resolveProperty("doubleClickDelay")+o)}},handleMouseDrag:function(e,t){if((!e.isColumnSelection()||this.isColumnDragging(e))&&this.next)return void this.next.handleMouseDrag(e,t);var i=t.primitiveEvent.detail.isRightClick;if(i||!this.dragging)this.next&&this.next.handleMouseDrag(e,t);else{var n=e.getFixedColumnCount(),o=t.gridCell,r=t.viewPoint,s=o.x,a=o.y;r.x<n&&(s=r.x);var l=e.newPoint(s,a),u=t.primitiveEvent;this.currentDrag=u.detail.mouse,this.lastDragCell=l,this.checkDragScroll(e,this.currentDrag),this.handleMouseDragCellSelection(e,l,u.detail.keys)}},handleKeyDown:function(e,t){if("column"!==e.getLastSelectionType())return void(this.next&&this.next.handleKeyDown(e,t));var i="handle"+t.detail["char"];this[i]&&this[i].call(this,e,t.detail)},handleMouseDragCellSelection:function(e,t,i){var n=t.x,o=e.getMouseDown(),r=n-o.x;e.clearMostRecentColumnSelection(),e.selectColumn(o.x,n),e.setDragExtent(e.newPoint(r,0)),e.repaint()},checkDragScroll:function(e,t){if(e.resolveProperty("scrollingEnabled")){var i=e.getDataBounds(),n=i.contains(t);n?e.isScrollingNow()&&e.setScrollingNow(!1):e.isScrollingNow()||(e.setScrollingNow(!0),this.scrollDrag(e))}},scrollDrag:function(e){if(e.isScrollingNow()){var t=this.lastDragCell,i=e.getDataBounds(),n=0,o=0,r=e.getFixedColumnCount(),s=e.getFixedRowCount(),a=t.x<r,l=t.y<s;this.currentDrag.x<i.origin.x&&(n=-1),this.currentDrag.x>i.origin.x+i.extent.x&&(n=1);var u=n,c=o;a&&(u=0),l&&(c=0),this.lastDragCell=t.plusXY(u,c),e.scrollBy(n,o),this.handleMouseDragCellSelection(e,t,[]),e.repaint(),setTimeout(this.scrollDrag.bind(this,e),25)}},extendSelection:function(e,t,i){e.stopEditing();var n=-1!==i.indexOf("SHIFT"),o=e.getMouseDown(),r=t.x,s=t.y;0>r||0>s||(n?(e.clearMostRecentColumnSelection(),e.selectColumn(r,o.x),e.setDragExtent(e.newPoint(r-o.x,0))):(e.toggleSelectColumn(r,i),e.setMouseDown(e.newPoint(r,s)),e.setDragExtent(e.newPoint(0,0))),e.repaint())},handleDOWNSHIFT:function(e){},handleUPSHIFT:function(e){},handleLEFTSHIFT:function(e){this.moveShiftSelect(e,-1)},handleRIGHTSHIFT:function(e){this.moveShiftSelect(e,1)},handleDOWN:function(e){},handleUP:function(e){},handleLEFT:function(e){this.moveSingleSelect(e,-1)},handleRIGHT:function(e){this.moveSingleSelect(e,1)},getAutoScrollAcceleration:function(){var e=1,t=this.getAutoScrollDuration()/2e3;return e=Math.max(1,Math.floor(t*t*t*t))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){var e=Date.now();e-this.sbLastAuto>500&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return Date.now()-this.sbLastAuto>500?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(e,t){var i=e.getColumnCount()-1,n=e.getVisibleColumns()-1;e.resolveProperty("scrollingEnabled")||(i=Math.min(i,n));var o=e.getMouseDown(),r=e.getDragExtent(),s=r.x+t;s=Math.min(i-o.x,Math.max(-o.x,s)),e.clearMostRecentColumnSelection(),e.selectColumn(o.x,o.x+s),e.setDragExtent(e.newPoint(s,0)),e.insureModelColIsVisible(s+o.x,t)&&this.pingAutoScroll(),e.repaint()},moveSingleSelect:function(e,t){var i=e.getColumnCount()-1,n=e.getVisibleColumnsCount()-1;e.resolveProperty("scrollingEnabled")||(i=Math.min(i,n));var o=e.getMouseDown().plus(e.getDragExtent()),r=o.x+t;r=Math.min(i,Math.max(0,r)),e.clearSelections(),e.selectColumn(r),e.setMouseDown(e.newPoint(r,0)),e.setDragExtent(e.newPoint(0,0)),e.insureModelColIsVisible(r,t)&&this.pingAutoScroll(),e.repaint()},isColumnDragging:function(e){var t=e.lookupFeature("ColumnMoving");if(!t)return!1;var i=t.dragging&&!this.dragging;return i}});t.exports=r},{"./Feature.js":61}],60:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("ColumnSorting",{handleDoubleClick:function(e,t){var i=t.gridCell;if(e.isShowHeaderRow()&&0===i.y&&-1!==i.x){var n=t.primitiveEvent.detail.keys;e.toggleSort(i.x,n)}else this.next&&this.next.handleDoubleClick(e,t)},handleMouseMove:function(e,t){var i=t.gridCell.y;this.isFixedRow(e,t)&&1>i?this.cursor="pointer":this.cursor=null,this.next&&this.next.handleMouseMove(e,t)}});t.exports=o},{"./Feature.js":61}],61:[function(e,t,i){"use strict";var n=e("../lib/Base"),o=n.extend("Feature",{next:null,detached:null,cursor:null,currentHoverCell:null,setNext:function(e){this.next?this.next.setNext(e):(this.next=e,this.detached=e)},detachChain:function(){this.next=null},attachChain:function(){this.next=this.detached},handleMouseMove:function(e,t){this.next&&this.next.handleMouseMove(e,t)},handleMouseExit:function(e,t){this.next&&this.next.handleMouseExit(e,t)},handleMouseEnter:function(e,t){this.next&&this.next.handleMouseEnter(e,t)},handleMouseDown:function(e,t){this.next&&this.next.handleMouseDown(e,t)},handleMouseUp:function(e,t){this.next&&this.next.handleMouseUp(e,t)},handleKeyDown:function(e,t){this.next&&this.next.handleKeyDown(e,t)},handleKeyUp:function(e,t){this.next&&this.next.handleKeyUp(e,t)},handleWheelMoved:function(e,t){this.next&&this.next.handleWheelMoved(e,t)},handleDoubleClick:function(e,t){this.next&&this.next.handleDoubleClick(e,t)},handleHoldPulse:function(e,t){this.next&&this.next.handleHoldPulse(e,t)},handleTap:function(e,t){this.next&&this.next.handleTap(e,t)},handleMouseDrag:function(e,t){this.next&&this.next.handleMouseDrag(e,t)},handleContextMenu:function(e,t){this.next&&this.next.handleContextMenu(e,t)},moveSingleSelect:function(e,t,i){this.next&&this.next.moveSingleSelect(e,t,i)},isFixedRow:function(e,t){var i=t.viewPoint,n=i.y<e.getFixedRowCount();return n},isFirstFixedRow:function(e,t){var i=t.viewPoint,n=i.y<1;return n},isFixedColumn:function(e,t){var i=t.viewPoint,n=i.x<e.getFixedColumnCount();return n},isFirstFixedColumn:function(e,t){var i=t.viewPoint,n=e.isShowRowNumbers()?0:1,o=i.x<n;return o},isTopLeft:function(e,t){var i=this.isFixedRow(e,t)&&this.isFixedColumn(e,t);return i},setCursor:function(e){this.next&&this.next.setCursor(e),this.cursor&&e.beCursor(this.cursor)},initializeOn:function(e){this.next&&this.next.initializeOn(e)}});t.exports=o},{"../lib/Base":69}],62:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("Filters",{handleDoubleClick:function(e,t){e.isFilterRow(t.gridCell.y)?e.onEditorActivate(t):n.prototype.handleDoubleClick.apply(this,arguments)},handleTap:function(e,t){e.isFilterRow(t.gridCell.y)?e.onEditorActivate(t):n.prototype.handleTap.apply(this,arguments)},handleHoldPulse:function(e,t){var i=e.resolveProperty("editOnDoubleClick");this.checkActivateEditor(e,t,!i)?e.onEditorActivate(t):this.next&&this.next.handleHoldPulse(e,t)}});t.exports=o},{"./Feature.js":61}],63:[function(e,t,i){"use strict";var n=e("./Feature.js"),o={PAGEDOWN:function(e){e.pageDown()},PAGEUP:function(e){e.pageUp()},PAGELEFT:function(e){e.pageLeft()},PAGERIGHT:function(e){e.pageRight()}},r=n.extend("KeyPaging",{handleKeyDown:function(e,t){var i=t.detail["char"],n=o[i];n?n(e):this.next&&this.next.handleKeyDown(e,t)}});t.exports=r},{"./Feature.js":61}],64:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("OnHover",{handleMouseMove:function(e,t){var i=e.getHoverCell();t.gridCell.equals(i)?this.next&&this.next.handleMouseMove(e,t):(i&&this.handleMouseExit(e,i),this.handleMouseEnter(e,t),e.setHoverCell(t.gridCell))}});t.exports=o},{"./Feature.js":61}],65:[function(e,t,i){"use strict";var n=e("./ColumnResizing"),o=n.extend("RowResizing",{dragArea:-1,dragStart:-1,dragAreaStartingSize:-1,getMouseValue:function(e){return e.primitiveEvent.detail.mouse.y},getGridCellValue:function(e){return e.x},getScrollValue:function(e){return e.getVScrollValue()},getAreaSize:function(e,t){return e.getRowHeight(t)},setAreaSize:function(e,t,i){e.setRowHeight(t,i)},overAreaDivider:function(e,t){return e.overRowDivider(t)},isFirstFixedOtherArea:function(e,t){return this.isFirstFixedColumn(e,t)},getCursorName:function(){return"row-resize"},getPreviousAbsoluteSize:function(e,t){return e.getRenderedHeight(t)},getOtherFixedAreaCount:function(e){return e.getFixedColumnCount()},getFixedAreaCount:function(e){return e.getFixedRowCount()+e.getHeaderRowCount()},isEnabled:function(e){return e.isRowResizeable()}});t.exports=o},{"./ColumnResizing":58}],66:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("RowSelection",{currentDrag:null,lastDragCell:null,sbLastAuto:0,sbAutoStart:0,dragArmed:!1,handleMouseUp:function(e,t){this.dragArmed?(this.dragArmed=!1,-1===t.gridCell.x&&0===t.gridCell.y&&e.toggleSelectAllRows(),e.fireSyntheticRowSelectionChangedEvent()):this.dragging?(this.dragging=!1,e.fireSyntheticRowSelectionChangedEvent()):this.next&&this.next.handleMouseUp(e,t)},handleMouseDown:function(e,t){var i=t.primitiveEvent.detail.isRightClick,n=t.gridCell,o=t.viewPoint,r=n.x,s=n.y,a=e.isShowRowNumbers()&&0>r;if(e.isRowSelection()&&!i&&a){var l=e.getFixedRowCount();o.y<l&&(s=o.y);var u=e.newPoint(0,s),c=t.primitiveEvent,h=c.detail.keys;this.dragArmed=!0,this.extendSelection(e,u,h)}else this.next&&this.next.handleMouseDown(e,t)},handleMouseDrag:function(e,t){var i=t.primitiveEvent.detail.isRightClick;if(this.dragArmed&&e.isRowSelection()&&!i){this.dragging=!0;var n=e.getFixedRowCount(),o=t.gridCell,r=t.viewPoint,s=o.y;r.y<n&&(s=r.y);var a=e.newPoint(0,s),l=t.primitiveEvent;this.currentDrag=l.detail.mouse,this.lastDragCell=a,this.checkDragScroll(e,this.currentDrag),this.handleMouseDragCellSelection(e,a,l.detail.keys)}else this.next&&this.next.handleMouseDrag(e,t)},handleKeyDown:function(e,t){if("row"!==e.getLastSelectionType())return void(this.next&&this.next.handleKeyDown(e,t));
var i="handle"+t.detail["char"];this[i]&&this[i].call(this,e,t.detail)},handleMouseDragCellSelection:function(e,t,i){var n=t.y,o=e.getMouseDown(),r=n-o.y;e.clearMostRecentRowSelection(),e.selectRow(o.y,n),e.setDragExtent(e.newPoint(0,r)),e.repaint()},checkDragScroll:function(e,t){if(e.resolveProperty("scrollingEnabled")){var i=e.getDataBounds(),n=i.contains(t);n?e.isScrollingNow()&&e.setScrollingNow(!1):e.isScrollingNow()||(e.setScrollingNow(!0),this.scrollDrag(e))}},scrollDrag:function(e){if(e.isScrollingNow()){var t=this.lastDragCell,i=e.getDataBounds(),n=0,o=0,r=e.getFixedColumnCount(),s=e.getFixedRowCount(),a=t.x<r,l=t.y<s;this.currentDrag.y<i.origin.y&&(o=-1),this.currentDrag.y>i.origin.y+i.extent.y&&(o=1);var u=n,c=o;a&&(u=0),l&&(c=0),this.lastDragCell=t.plusXY(u,c),e.scrollBy(n,o),this.handleMouseDragCellSelection(e,t,[]),e.repaint(),setTimeout(this.scrollDrag.bind(this,e),25)}},extendSelection:function(e,t,i){e.stopEditing();var n=-1!==i.indexOf("SHIFT"),o=e.getMouseDown(),r=t.x,s=t.y;0>r||0>s||(n?(e.clearMostRecentRowSelection(),e.selectRow(s,o.y),e.setDragExtent(e.newPoint(0,s-o.y))):(e.toggleSelectRow(s,i),e.setMouseDown(e.newPoint(r,s)),e.setDragExtent(e.newPoint(0,0))),e.repaint())},handleDOWNSHIFT:function(e){this.moveShiftSelect(e,1)},handleUPSHIFT:function(e){this.moveShiftSelect(e,-1)},handleLEFTSHIFT:function(e){},handleRIGHTSHIFT:function(e){},handleDOWN:function(e){this.moveSingleSelect(e,1)},handleUP:function(e){this.moveSingleSelect(e,-1)},handleLEFT:function(e){},handleRIGHT:function(e){var t=e.getMouseDown().plus(e.getDragExtent()),i=e.getColumnCount()-1,n=e.getHeaderColumnCount()+e.getHScrollValue(),o=t.y;n=Math.min(i,n),e.clearSelections(),e.select(n,o,0,0),e.setMouseDown(e.newPoint(n,o)),e.setDragExtent(e.newPoint(0,0)),e.repaint()},getAutoScrollAcceleration:function(){var e=1,t=this.getAutoScrollDuration()/2e3;return e=Math.max(1,Math.floor(t*t*t*t))},setAutoScrollStartTime:function(){this.sbAutoStart=Date.now()},pingAutoScroll:function(){var e=Date.now();e-this.sbLastAuto>500&&this.setAutoScrollStartTime(),this.sbLastAuto=Date.now()},getAutoScrollDuration:function(){return Date.now()-this.sbLastAuto>500?0:Date.now()-this.sbAutoStart},moveShiftSelect:function(e,t){var i=e.getRowCount()-1,n=e.getVisibleRows()-1;e.resolveProperty("scrollingEnabled")||(i=Math.min(i,n));var o=e.getMouseDown(),r=e.getDragExtent(),s=r.y+t;s=Math.min(i-o.y,Math.max(-o.y,s)),e.clearMostRecentRowSelection(),e.selectRow(o.y,o.y+s),e.setDragExtent(e.newPoint(0,s)),e.insureModelRowIsVisible(s+o.y,t)&&this.pingAutoScroll(),e.fireSyntheticRowSelectionChangedEvent(),e.repaint()},moveSingleSelect:function(e,t){var i=e.getRowCount()-1,n=e.getVisibleRowsCount()-1;e.resolveProperty("scrollingEnabled")||(i=Math.min(i,n));var o=e.getMouseDown().plus(e.getDragExtent()),r=o.y+t;r=Math.min(i,Math.max(0,r)),e.clearSelections(),e.selectRow(r),e.setMouseDown(e.newPoint(0,r)),e.setDragExtent(e.newPoint(0,0)),e.insureModelRowIsVisible(r,t)&&this.pingAutoScroll(),e.fireSyntheticRowSelectionChangedEvent(),e.repaint()},isSingleRowSelection:function(){return!0}});t.exports=o},{"./Feature.js":61}],67:[function(e,t,i){"use strict";var n=e("./Feature.js"),o=n.extend("ThumbwheelScrolling",{handleWheelMoved:function(e,t){if(e.resolveProperty("scrollingEnabled")){var i=t.primitiveEvent,n=Math.sign(i.wheelDeltaX||-i.deltaX),o=Math.sign(i.wheelDeltaY||-i.deltaY);(n||o)&&e.scrollBy(-n||0,-o||0)}}});t.exports=o},{"./Feature.js":61}],68:[function(e,t,i){"use strict";t.exports={Feature:e("./Feature"),CellClick:e("./CellClick"),CellEditing:e("./CellEditing"),CellSelection:e("./CellSelection"),ColumnAutosizing:e("./ColumnAutosizing"),ColumnMoving:e("./ColumnMoving"),ColumnResizing:e("./ColumnResizing"),ColumnSelection:e("./ColumnSelection"),ColumnSorting:e("./ColumnSorting"),Filters:e("./Filters"),KeyPaging:e("./KeyPaging"),OnHover:e("./OnHover"),ColumnPicker:e("./ColumnPicker"),RowResizing:e("./RowResizing"),RowSelection:e("./RowSelection"),ThumbwheelScrolling:e("./ThumbwheelScrolling")}},{"./CellClick":52,"./CellEditing":53,"./CellSelection":54,"./ColumnAutosizing":55,"./ColumnMoving":56,"./ColumnPicker":57,"./ColumnResizing":58,"./ColumnSelection":59,"./ColumnSorting":60,"./Feature":61,"./Filters":62,"./KeyPaging":63,"./OnHover":64,"./RowResizing":65,"./RowSelection":66,"./ThumbwheelScrolling":67}],69:[function(e,t,i){"use strict";var n=e("./deprecated"),o=e("extend-me").Base;o.prototype.deprecated=n,t.exports=o},{"./deprecated":78,"extend-me":5}],70:[function(e,t,i){"use strict";function n(e,t,i,n,o,r){t.forEach(function(t){e.fillStyle=t,e.fillRect(i,n,o,r)})}function o(e,t){var i="f"===(typeof e)[0]?e(t):e;return i||0===i?i:""}function r(e,t,i,n,o,r){var s=e.getTextWidth(t,i);switch(t.textAlign){case"center":n-=s/2;break;case"right":n-=s}t.lineWidth=r,t.moveTo(n+.5,o+.5),t.lineTo(n+s+.5,o+.5)}function s(e,t,i,n,o,r){var s=e.getTextHeight(e.font),a=e.getTextWidth(t,i);switch(o-=.4*s.height,t.textAlign){case"center":n-=a/2;break;case"right":n-=a}t.lineWidth=r,t.moveTo(n+.5,o+.5),t.lineTo(n+a+.5,o+.5)}function a(e,t,i,n){if(1===i.length)return i;for(var o,r=[i.shift()];(o=t.getTextWidth(e,r.join(" "))<n)&&i.length;)r.push(i.shift());return!o&&r.length>1&&i.unshift(r.pop()),r=[r.join(" ")],i.length&&(r=r.concat(a(e,t,i,n))),r}function l(e,t,i,n){return a(e,t,u(i).split(" "),n)}function u(e){return(e+"").trim().replace(/\s\s+/g," ")}function c(e,t,i,n,o,r,s,a){a||(a=!0),r||(r=5),e.beginPath(),e.moveTo(t+r,i),e.lineTo(t+n-r,i),e.quadraticCurveTo(t+n,i,t+n,i+r),e.lineTo(t+n,i+o-r),e.quadraticCurveTo(t+n,i+o,t+n-r,i+o),e.lineTo(t+r,i+o),e.quadraticCurveTo(t,i+o,t,i+o-r),e.lineTo(t,i+r),e.quadraticCurveTo(t,i,t+r,i),e.closePath(),a&&e.stroke(),s&&e.fill(),e.closePath()}function h(e){if(void 0===e)return 0;var t=e.match(h.regex);if(null===t)return 1;var i=t[4];return void 0===i?0:Number(i)}var d=e("./Base"),g=d.extend("CellProvider",{initialize:function(){this.cellCache={},this.initializeCells()},getCell:function(e){var t=this.cellCache.simpleCellRenderer;return t.config=e,t},getColumnHeaderCell:function(e){var t=this.cellCache.simpleCellRenderer;return t.config=e,t},getRowHeaderCell:function(e){var t=this.cellCache.simpleCellRenderer;return t.config=e,t},paintButton:function(e,t){var i=t.value,n=t.x,o=t.y,r=t.bounds,s=r.x+2,a=r.y+2,l=r.width-3,u=r.height-3,h=u/2,d=e.createLinearGradient(s,a,s,a+u);t.mouseDown?(d.addColorStop(0,"#B5CBED"),d.addColorStop(1,"#4d74ea")):(d.addColorStop(0,"#ffffff"),d.addColorStop(1,"#aaaaaa")),e.fillStyle=d,e.strokeStyle="#000000",c(e,s,a,l,u,h,d,!0);var g=(l-t.getTextWidth(e,i))/2,f=(u-t.getTextHeight(e.font).descent)/2;"middle"!==e.textBaseline&&(e.textBaseline="middle"),e.fillStyle="#000000",t.backgroundColor="rgba(0,0,0,0)",e.fillText(i,s+g,a+f),t.buttonCells[n+","+o]=!0},defaultCellPaint:function(e,t){var i,r,s,a,l,u,c=t.value,d=t.bounds.x,g=t.bounds.y,f=t.bounds.width,p=t.bounds.height,v=t.headerTextWrapping,m=2,C=0===t.y;c&&c.constructor===Array&&(i=c[0],r=c[2],c=c[1],c&&"object"==typeof c&&"HTMLImageElement"===c.constructor.name&&(s=c,c=null),i&&"IMG"!==i.nodeName&&(i=null),r&&"IMG"!==r.nodeName&&(r=null),s&&"IMG"!==s.nodeName&&(s=null)),c=o(c,t),c=t.formatter(c),u=t.isSelected?t.foregroundSelectionFont:t.font,e.font!==u&&(e.font=u),"left"!==e.textAlign&&(e.textAlign="left"),"middle"!==e.textBaseline&&(e.textBaseline="middle");var w,b,y,x,S=[];t.isCellHovered&&t.hoverCellHighlight.enabled?y=t.hoverCellHighlight.backgroundColor:t.isRowHovered&&(b=t.hoverRowHighlight).enabled?y=t.isGridColumn||!b.header||void 0===b.header.backgroundColor?b.backgroundColor:b.header.backgroundColor:t.isColumnHovered&&(b=t.hoverColumnHighlight).enabled&&(y=t.isGridRow||!b.header||void 0===b.header.backgroundColor?b.backgroundColor:b.header.backgroundColor),h(y)<1&&(t.isSelected&&(x=o(t.backgroundSelectionColor,t)),h(x)<1&&(w=o(t.backgroundColor,t),h(w)>0&&S.push(w)),void 0!==x&&S.push(x)),void 0!==y&&S.push(y),n(e,S,d,g,f,p);var E=o(t.isSelected?t.foregroundSelectionColor:t.color,t);e.fillStyle!==E&&(e.fillStyle=E,e.strokeStyle=E),C&&v?this.renderMultiLineText(e,d,g,p,f,t,c):this.renderSingleLineText(e,d,g,p,f,t,c);var A=0;if(i&&(l=Math.round((p-i.height)/2),e.drawImage(i,d+m,g+l),A=Math.max(i.width+2)),r&&f>1.75*p){l=Math.round((p-r.height)/2);var R=d+f-r.width;void 0!==w?n(e,S,R,g,r.width,p):e.clearRect(R,g,r.width,p),e.drawImage(r,R,g+l),A=Math.max(r.width+2)}s&&(l=Math.round((p-s.height)/2),a=Math.round((f-s.width)/2),e.drawImage(s,d+f-a-s.width,g+l),A=Math.max(s.width+2)),t.cellBorderThickness&&(e.beginPath(),e.rect(d,g,f,p),e.lineWidth=t.cellBorderThickness,e.strokeStyle=t.cellBorderStyle,e.stroke(),e.closePath()),t.minWidth=t.minWidth+2*A},renderMultiLineText:function(e,t,i,n,o,r,s){var a=l(e,r,s,o);if(1===a.length)return this.renderSingleLineText(e,t,i,n,o,r,u(s));var c=r.cellPadding,h=0,d=r.voffset,g=r.halign,f=r.getTextHeight(r.font).height;switch(g){case"right":h=o-c;break;case"center":h=o/2;break;case"left":h=c}var p=0,v=Math.ceil(f/2);d+=Math.ceil((n-(a.length-1)*f)/2),h=Math.max(p,h),d=Math.max(v,d),e.save(),e.rect(t,i,o,n),e.clip(),e.textAlign=g;for(var m=0;m<a.length;m++)e.fillText(a[m],t+h,i+d+m*f);e.restore()},renderSingleLineText:function(e,t,i,n,o,a,l){var u=a.cellPadding,c=0,h=a.voffset,d=a.halign,g=a.isCellHovered,f=a.link,p=a.getTextHeight(a.font),v=a.getTextWidth(e,l);switch(a.minWidth=v+2*u,d){case"right":c=o-u-v;break;case"center":c=(o-v)/2;break;case"left":c=u}c=Math.max(0,c),h+=Math.ceil(n/2),null!==l&&e.fillText(l,t+c,i+h),g&&(e.beginPath(),f&&(r(a,e,l,t+c,i+h+Math.floor(p.height/2),1),e.stroke()),e.closePath()),a.strikeThrough===!0&&(e.beginPath(),s(a,e,l,t+c,i+h+Math.floor(p.height/2),1),e.stroke(),e.closePath())},paintSlider:function(e,t,i,n,o){},paintSparkbar:function(e,t,i,n,o){e.beginPath();var r=this.config.value;if(r&&r.length){var s=r.length,a=n/s,l=this.config.isSelected?this.config.fgSelColor:this.config.fgColor;(this.config.bgColor||this.config.isSelected)&&(e.fillStyle=this.config.isSelected?this.config.bgSelColor:this.config.bgColor,e.fillRect(t,i,n,o)),e.fillStyle=l;for(var u=0;u<r.length;u++){var c=r[u]/110*o;e.fillRect(t+5,i+o-c,.6666*a,c),t+=a}e.closePath(),this.config.minWidth=10*s}},paintSparkline:function(e,t,i,n,o){e.beginPath();var r=this.config.value;if(r&&r.length){var s=r.length,a=n/s,l=this.config.isSelected?this.config.fgSelColor:this.config.fgColor;(this.config.bgColor||this.config.isSelected)&&(e.fillStyle=this.config.isSelected?this.config.bgSelColor:this.config.bgColor,e.fillRect(t,i,n,o)),e.strokeStyle=l,e.fillStyle=l,e.beginPath();for(var u,c=0;c<r.length;c++){var h=r[c]/110*o;u||(u=h),e.lineTo(t+5,i+o-h),e.arc(t+5,i+o-h,1,0,2*Math.PI,!1),t+=a}this.config.minWidth=10*s,e.stroke(),e.closePath()}},treeCellRenderer:function(e,t,i,n,o){var r=this.config.value.data,s=this.config.value.indent,a=this.config.value.icon;if((this.config.bgColor||this.config.isSelected)&&(e.fillStyle=this.config.isSelected?this.config.bgSelColor:this.config.bgColor,e.fillRect(t,i,n,o)),r&&r.length){var l=Math.ceil(o/2);e.fillStyle=this.config.isSelected?this.config.fgSelColor:this.config.fgColor,e.fillText(a+r,t+s,i+l);var u=this.config.getTextWidth(e,a+r),c=t+s+u+10;this.config.minWidth=c}},emptyCellRenderer:function(e,t,i,n,o){},initializeCells:function(){var e=this;this.cellCache.simpleCellRenderer={paint:this.defaultCellPaint,renderSingleLineText:this.renderSingleLineText,renderMultiLineText:this.renderMultiLineText},this.cellCache.sliderCellRenderer={paint:this.paintSlider},this.cellCache.sparkbarCellRenderer={paint:this.paintSparkbar},this.cellCache.sparklineCellRenderer={paint:this.paintSparkline},this.cellCache.treeCellRenderer={paint:this.treeCellRenderer},this.cellCache.emptyCellRenderer={paint:this.emptyCellRenderer},this.cellCache.buttonRenderer={paint:this.paintButton},this.cellCache.linkCellRenderer={paint:function(t,i,n,o,r){e.config=this.config,e.defaultCellPaint(t,i,n,o,r,!0)}}}});h.regex=/^(transparent|((RGB|HSL)A\(.*,\s*([\d\.]+)\)))$/i,t.exports=g},{"./Base":69}],71:[function(e,t,i){"use strict";function n(e,t){this.schema=e,this.options=Object.create(d),t&&this.setOptions(function(e){return t[e]})}var o=/\b(AND|OR|NOR)\b/gi,r=/^\s*(<=|>=|<>|[<≤≠≥>=]|(NOT )?(IN|CONTAINS|BEGINS|ENDS|LIKE) )?(.*?)\s*$/i,s="(.*?)",a="\\b",l="^"+s+a,u=a+s+a,c=a+s+"$",h={">=":"≥","<=":"≤","<>":"≠"},d={autoLookupByName:!0,autoLookupByAlias:!0,caseSensitiveColumnNames:!1};n.prototype={constructor:n.prototype.constructor,setOptions:function(e){for(var t in d)if(d.hasOwnProperty(t)){var i=e(t);void 0!==i?this.options[t]=i:delete this.options[t]}},captureBooleans:function(e){var t=e.match(o);if(t){var i=t.find(function(e,i){return t[i]=e.toLowerCase(),t[i]!==t[0]});if(i)throw new Error(["Expected homogeneous boolean operators.","You cannot mix <code>AND</code>, <code>OR</code>, and <code>NOR</code> operators here.",'(Everything after your <code style="color:red">'+i.toUpperCase()+"</code> was ignored.)","<i>Tip: You can create more complex filters by using Manage Filters.</i>"].join("<br>"))}return t},captureExpressions:function(e,t){var i,n;return t?(n=new RegExp(l+t.join(u)+c,"i"),i=e.match(n),i.shift()):i=[e],i},makeChildren:function(e,t){var i=this,n=[],o=[];if(t.forEach(function(t){if(t){var s=t.match(r),a=s[1]&&s[1].trim().toUpperCase()||"=",l=s[s.length-1];if(l){var u=i.comparable(l),c=i.schema.find(function(e){return u===(i.autoLookupByName&&i.comparable(e.name||e))||u===(i.autoLookupByAlias&&i.comparable(e.alias))}),d={column:e,operator:h[a]||a};c?(d.column2=c.name||c,d.editor="Columns"):d.literal=l,n.push(d)}else o.push(a)}}),n.length>0&&o.length>0||o.length>1){var s=' <code style="color:red">';o=1===o.length?["Expected a value following"+s+o+"</code> to compare against the column.","The incomplete expression was ignored."]:["Expected values following"+s+o.join("</code> and"+s)+"</code> to compare against the column.","The incomplete expressions were ignored."],this.orphanedOpMsg=o.join("<br>")}else this.orphanedOpMsg=void 0;return n},comparable:function(e){return this.caseSensitiveColumnNames||"string"!=typeof e||(e=e.toLowerCase()),e},parse:function(e,t){t=t.replace(/\s\s+/g," ").trim();var i,n=this.captureBooleans(t),o=this.captureExpressions(t,n),r=this.makeChildren(e,o),s=n&&n[0];return r.length&&(i={type:"columnFilter",children:r},s&&(i.operator="op-"+s)),this.cql=t,this.state=i,i}},t.exports=n},{}],72:[function(e,t,i){"use strict";function n(e,t){}var o=e("filter-tree"),r=e("pop-menu"),s=e("./ColumnQueryLanguage"),a={alert:!1,focus:!1},l=o.extend("CustomFilter",{preInitialize:function(e){e&&(e.state=e.state||this.makeNewRoot(),"columnFilter"===(e.type||e.state&&e.state.type)&&(this.schema=[r.findItem(e.parent.root.schema,e.state.children[0].column)]))},initialize:function(e){this.cache={},e.parent||this.extractSubtrees()},extractSubtrees:function(){var e=this.root.children;this.tableFilter=e[0],this.columnFilters=e[1]},makeNewRoot:function(){this.tableFilter={persist:!0,children:[]},this.columnFilters={persist:!0,type:"columnFilters",children:[]};var e={children:[this.tableFilter,this.columnFilters]};return e},getColumnFilter:function(e){return this.columnFilters.children.find(function(t){return t.children.length&&t.children[0].column===e})},getColumnFilterState:function(e,t){var i=this.cache[e];if(void 0===i){var n=this.getColumnFilter(e);if(n){var o=t&&t.syntax||"CQL";i=n.getState({syntax:o})}else i="";this.cache[e]=i}return i},setColumnFilterState:function(e,t,i){var o=i&&i.syntax,r=void 0===o||"CQL"===o,l=this.getColumnFilter(e);if(r){this.CQL||(this.CQL=new s(this.root.schema),this.CQL.setOptions(n.bind(this,e)));var u;try{t=this.CQL.parse(e,t),this.cache[e]=this.CQL.cql,u=this.CQL.orphanedOpMsg}catch(c){u=c.message}u&&console.warn(u)}t?(l?l.setState(t):l=this.columnFilters.add(t),l.invalid(a)):l.remove()},initializeDialog:function(){},onShow:function(e){e.appendChild(this.el)},onOk:function(){return this.invalid()},onReset:function(){},onDelete:function(){},onCancel:function(){},create:function(){return this.test.bind(this)}});t.exports=l},{"./ColumnQueryLanguage":71,"filter-tree":6,"pop-menu":25}],73:[function(e,t,i){"use strict";function n(e){return(10>e?"-0":"-")+e}t.exports={date:function(e){return e instanceof Date?e.getFullYear()+n(e.getMonth()+1)+n(e.getDate()):e+""},"default":function(e){return e+""}}},{}],74:[function(e,t,i){"use strict";t.exports=function(){function e(){this.keys=[],this.data={},this.values=[]}var t=".~.#%_",i=0,n=function(e){var n=typeof e;switch(n){case"number":return t+n+"_"+e;case"string":return t+n+"_"+e;case"boolean":return t+n+"_"+e;case"symbol":return t+n+"_"+e;case"undefined":return t+"undefined";case"object":case"function":return e.___finhash||(e.___finhash=t+i++),e.___finhash}},o=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t},r=function(e,t){if(t!=t||0===t)for(var i=e.length;i--&&!o(e[i],t););else i=[].indexOf.call(e,t);return i};return e.prototype.set=function(e,t){var i=n(e);void 0===this.data[i]&&(this.keys.push(e),this.values.push(t)),this.data[i]=t},e.prototype.get=function(e){var t=n(e);return this.data[t]},e.prototype.getIfAbsent=function(e,t){var i=this.get(e);return void 0===i&&(i=t(e,this)),i},e.prototype.size=function(){return this.keys.length},e.prototype.clear=function(){this.keys.length=0,this.data={}},e.prototype["delete"]=function(e){var t=n(e);if(void 0!==this.data[t]){var i=r(this.keys,e);this.keys.splice(i,1),this.values.splice(i,1),delete this.data[t]}},e.prototype.forEach=function(e){for(var t=this.keys,i=0;i<t.length;i++){var n=t[i],o=this.get(n);e(o,n,this)}},e.prototype.map=function(t){for(var i=this.keys,n=new e,o=0;o<i.length;o++){var r=i[o],s=this.get(r),a=t(s,r,this);n.set(r,a)}return n},e.prototype.copy=function(){for(var t=this.keys,i=new e,n=0;n<t.length;n++){var o=t[n],r=this.get(o);i.set(o,r)}return i},e}()},{}],75:[function(e,t,i){"use strict";function n(e,t,i){var n=t.getColumnProperties(-1),o=n.rowHeader,r=s.checked;e.font=o.font,n.preferredWidth=r.width+7+o.getTextWidth(e,i+1)}var o=e("object-iterators"),r=e("./Base"),s=e("../../images"),a=r.extend("Renderer",{cell:{x:0,y:0,width:0,height:0},scrollHeight:0,viewHeight:0,reset:function(){this.bounds={width:0,height:0},this.columnEdges=[],this.columnEdgesIndexMap=[],this.renderedColumnMinWidths=[],this.rowEdges=[],this.rowEdgesIndexMap=[],this.visibleColumns=[],this.visibleRows=[],this.insertionBounds=[]},initialize:function(e){this.grid=e,this.reset()},computeCellsBounds:function(){var e,t,i,n,o,r,s,a,l,u,c=this.getScrollTop(),h=this.getScrollLeft(),d=this.getColumnCount(),g=this.getFixedColumnCount(),f=this.getRowCount(),p=this.getFixedRowCount(),v=this.getBounds(),m=this.grid,C=m.behavior.dataModel.getBottomTotals().length,w=v.width||m.canvas.width,b=v.height-C*m.behavior.getDefaultRowHeight(),y=0,x=0,S=0,E=0,A=0;for(this.getColumnEdges().length=0,this.rowEdges.length=0,this.columnEdges[0]=0,this.rowEdges[0]=0,this.scrollHeight=0,this.visibleColumns.length=0,this.visibleRows.length=0,this.columnEdgesIndexMap=[],this.rowEdgesIndexMap=[],this.insertionBounds=[],this.grid.isShowRowNumbers()&&(S--,this.columnEdges[-1]=-1),e=S;d>e&&(i=e,e>=g&&(i+=h,void 0===s&&(s=i),a=i),!(E>w||i>=d));e++)o=m.getColumnWidth(i),E+=o,this.columnEdges[e+1]=Math.round(E),this.visibleColumns[e]=i,this.columnEdgesIndexMap[i]=e,y=y+Math.round(o/2)+x,this.insertionBounds.push(y),x=Math.round(o/2);for(t=0;f>t&&(n=t,t>=p&&(n+=c,void 0===l&&(l=n),u=n),!(A>b||n>=f));t++)r=m.getRowHeight(n),A+=r,this.rowEdges[t+1]=Math.round(A),this.visibleRows[t]=n,this.rowEdgesIndexMap[n]=t;this.viewHeight=b,this.dataWindow=this.grid.newRectangle(s,l,a-s,u-l)},resolveProperty:function(e){return this.grid.resolveProperty(e)},getGrid:function(){return this.deprecated("grid",{since:"0.2"})},paint:function(e){this.grid&&(this.renderGrid(e),this.grid.gridRenderedNotification())},getVisibleRowsCount:function(){return this.visibleRows.length-1},getVisibleScrollHeight:function(){return this.viewHeight-this.grid.getFixedRowsHeight()},getVisibleRows:function(){return this.visibleRows},getVisibleColumnsCount:function(){return this.visibleColumns.length-1},getVisibleColumns:function(){return this.visibleColumns},overColumnDivider:function(e){e=Math.round(e);var t=this.getColumnEdges(),i=t.indexOf(e-1);return 0>i&&(i=t.indexOf(e)),0>i&&(i=t.indexOf(e-2)),0>i&&(i=t.indexOf(e+1)),0>i&&(i=t.indexOf(e-3)),i},overRowDivider:function(e){e=Math.round(e);var t=this.rowEdges.indexOf(e+1);return 0>t&&(t=this.rowEdges.indexOf(e)),0>t&&(t=this.rowEdges.indexOf(e-1)),t},getBoundsOfCell:function(e){return this._getBoundsOfCell(e.x,e.y)},_getBoundsOfCell:function(e,t){var i,n=!1,o=!1,r=this.cell,s=this.columnEdgesIndexMap[e];void 0===s&&(s=this.columnEdgesIndexMap[e-1],n=!0);var a,l,u,c=this.columnEdges[s],h=this.columnEdges[s+1],d=h-c;if(r.x=n?h:c,r.width=n?0:d,0>t){var g=this.grid.behavior,f=this.getBounds();u=g.getDefaultRowHeight(),a=f.height+t*u,l=a+u}else i=this.rowEdgesIndexMap[t],void 0===i&&(i=this.rowEdgesIndexMap[t-1],o=!0),a=this.rowEdges[i],l=this.rowEdges[i+1],u=l-a;return r.y=o?l:a,r.height=o?0:u,r},getColumnFromPixelX:function(e){for(var t=0,i=this.getFixedColumnCount(),n=this.grid.getHScrollValue(),o=this.getColumnEdges(),r=1;r<o.length-1;r++)if(t=o[r]-(o[r]-o[r-1])/2,t>e)return r>i&&(r+=n),r-1;return r>i&&(r+=n),r-1},getGridCellFromMousePoint:function(e){var t,i,n,o,r=this.grid.behavior,s=0,a=0,l=0,u=this.getColumnEdges(),c=this.getFixedColumnCount(),h=this.getFixedRowCount(),d=this.getScrollLeft(),g=this.getScrollTop();for(n=0;n<u.length;n++){if(s=u[n],e.x<s){t=Math.max(0,e.x-l-2);break}l=s}for(n--,l=0,o=0;o<this.rowEdges.length;o++){if(a=this.rowEdges[o],e.y<a){i=Math.max(0,e.y-l-2);break}l=a}o--,e.x<0&&(n=-1),e.y<0&&(o=-1);var f=this.grid.newPoint(n,o);n>=c&&(n+=d),o>=h&&(o+=g);var p=-1,v=r.getColumn(n);return v&&(p=v.index),{gridCell:this.grid.newPoint(n,o),mousePoint:this.grid.newPoint(t,i),viewPoint:f,dataCell:this.grid.newPoint(p,o)}},isColumnVisible:function(e){var t=-1!==this.visibleColumns.indexOf(e);return t},getFinalVisableColumnBoundary:function(){var e=this.isLastColumnVisible(),t=e?2:1,i=this.getColumnEdges()[this.getColumnEdges().length-t],n=Math.min(i,this.getBounds().width-200);return n},isRowVisible:function(e){var t=-1!==this.visibleRows.indexOf(e);return t},isSelected:function(e,t){return this.grid.isSelected(e,t)},renderGrid:function(e){e.beginPath(),this.paintCells(e),this.paintGridlines(e),this.renderOverrides(e),this.renderFocusCell(e),e.closePath()},focusLineStep:[[5,5],[0,1,5,4],[0,2,5,3],[0,3,5,2],[0,4,5,1],[0,5,5,0],[1,5,4,0],[2,5,3,0],[3,5,2,0],[4,5,1,0]],renderFocusCell:function(e){e.beginPath(),this._renderFocusCell(e),e.closePath()},_renderFocusCell:function(e){var t=this.grid.selectionModel.getSelections();if(t&&0!==t.length){var i=t[t.length-1],n=i.origin;if(-1!==n.x){var o=this.getVisibleColumns(),r=this.getVisibleRows(),s=o[o.length-1],a=r[r.length-1],l=i.extent,u=Math.min(n.x,n.x+l.x),c=Math.min(n.y,n.y+l.y);if(!(u>s||c>a)){var h=Math.max(n.x,n.x+l.x)+1;h=Math.min(h,1+s);var d=Math.max(n.y,n.y+l.y)+1;d=Math.min(d,1+a);var g=this._getBoundsOfCell(u,c),f=Math.round(void 0===g.x?this.grid.getFixedColumnsWidth():g.x),p=Math.round(void 0===g.y?this.grid.getFixedRowsHeight():g.y),v=this._getBoundsOfCell(h,d),m=Math.round(void 0===v.x?this.grid.getFixedColumnsWidth():v.x),C=Math.round(void 0===v.y?this.grid.getFixedRowsHeight():v.y),w=Math.min(f,m),b=Math.min(p,C),y=1+m-f,x=1+C-p;w===m&&(y=f-m),b===C&&(x=p-C),1>y*x||(e.rect(w,b,y,x),e.fillStyle=this.resolveProperty("selectionRegionOverlayColor"),e.fill(),e.lineWidth=1,e.strokeStyle=this.resolveProperty("selectionRegionOutlineColor"),e.stroke())}}}},renderOverrides:function(e){var t=this.grid.renderOverridesCache;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n&&this.renderOverride(e,n)}},renderOverride:function(e,t){var i=t.hdpiratio,n=t.startX,o=t.width+1,r=t.height,s=t.ctx,a=e.getImageData(n,0,Math.round(o*i),Math.round(r*i));s.putImageData(a,0,0),e.fillStyle=this.resolveProperty("backgroundColor2"),e.fillRect(Math.round(n/i),0,o,r)},getScrollTop:function(){return this.grid.getVScrollValue()},getScrollLeft:function(){return this.grid.getHScrollValue()},getBehavior:function(){return this.deprecated("grid.behavior",{since:"0.2"})},getColumnEdges:function(){return this.columnEdges},getRowEdges:function(){return this.rowEdges},isLastColumnVisible:function(){var e=this.getColumnCount()-1;return-1!==this.visibleColumns.indexOf(e)},getRenderedWidth:function(e){return this.getColumnEdges()[e]},getRenderedHeight:function(e){return this.rowEdges[e]},getCanvas:function(){return this.grid.getCanvas()},isDraggingColumn:function(){return this.grid.isDraggingColumn()},getPageUpRow:function(){for(var e=this.grid,t=this.getVisibleScrollHeight(),i=this.grid.getFixedRowCount(),n=this.dataWindow.origin.y-i,o=0;t>o&&n>-1;)o+=e.getRowHeight(n),n--;return n+1},getPageDownRow:function(){var e=this.grid.getFixedRowCount(),t=this.dataWindow.corner.y-e-1;return t},getColumnCount:function(){return this.grid.getColumnCount()},getRowCount:function(){return this.grid.getRowCount()},getFixedColumnCount:function(){return this.grid.getFixedColumnCount()},getFixedRowCount:function(){return this.grid.getFixedRowCount()},getHeaderRowCount:function(){return this.grid.getHeaderRowCount()},getHeaderColumnCount:function(){return this.grid.getHeaderColumnCount()},paintCells:function(e){var t,i,o,r,s,a,l,u=this.getColumnEdges(),c=this.rowEdges,h=this.getVisibleColumns(),d=this.getVisibleRows(),g=this.grid.behavior,f=0,p=0,v=this.getBounds().height,m=this.grid.isShowRowNumbers()?-1:0,C=h.length;if(this.buttonCells={},C)for(o=m;C>o;o++,f+=l){for(s=h[o],this.renderedColumnMinWidths[s]=0,t=g.getColumnProperties(s).renderCellError,e.save(),l=u[o-m]-f,e.beginPath(),e.rect(f,p,l,v),e.clip(),r=0;r<d.length;r++){a=d[r];try{this._paintCell(e,s,a)}catch(w){if(i=w&&(w.message||w)||"Unknown error.",console.error(i),t){var b=e.gc||e,y=c[r],x=c[r+1]-y;b.save(),b.beginPath(),b.rect(f,y,l,x),b.clip(),t(b,i,f,y,l,x),b.restore()}}}for(r=-g.dataModel.getBottomTotals().length;r;r++)this._paintCell(e,s,r);e.restore()}n(e,g,this.grid.getRowCount())},paintGridlines:function(e){var t,i,n,o=0,r=this.getColumnEdges(),s=this.rowEdges,a=r[r.length-1],l=this.getBounds().height,u=this.resolveProperty("gridLinesH"),c=this.resolveProperty("gridLinesV"),h=this.resolveProperty("lineColor");if(e.beginPath(),c)for(n=0;n<r.length+1;n++)t=r[n]+.5,e.moveTo(t,0),e.lineTo(t,l);if(u){for(o=0;o<s.length-1;o++)i=s[o]+.5,e.moveTo(0,i),e.lineTo(a,i);var d=this.grid.behavior,g=d.getDefaultRowHeight();for(o=-d.dataModel.getBottomTotals().length,i=this.getBounds().height;o;o++)i-=g,e.moveTo(0,i),e.lineTo(a,i)}e.closePath(),e.strokeStyle=h,e.lineWidth=this.resolveProperty("lineWidth"),e.stroke()},paintCell:function(e,t,i){e.moveTo(0,0);var n=this.getVisibleColumns()[t],o=this.getVisibleRows()[i];n&&this._paintCell(e,n,o)},_paintCell:function(e,t,i){var n=this.grid,r=n.behavior,a=r.getColumnProperties(t);if(!a.isNull){var l,u=a,c=r.getHeaderRowCount(),h=i>=c,d=0>i,g=!h&&!d,f=n.isFilterRow(i),p=r.getHeaderColumnCount(),v=t>=p,m=n.isShowRowNumbers(),C=n.isHierarchyColumn(t),w=n.isRowSelected(i),b=n.isColumnSelected(t),y=n.isCellSelected(t,i),x=n.isCellSelectedInColumn(t),S=n.isCellSelectedInRow(i),E=n.areAllRowsSelected();m&&-1===t||C?(w?(l=Object.create(a.rowHeaderRowSelection),l.isSelected=!0):(l=Object.create(a.rowHeader),l.isSelected=S),l.isUserDataArea=!1):g||d?(f?(l=Object.create(a.filterProperties),l.isSelected=!1):b?(l=Object.create(a.columnHeaderColumnSelection),l.isSelected=!0):(l=Object.create(a.columnHeader),l.isSelected=x),l.isUserDataArea=!1):C?(l=Object.create(a.rowHeader),l.isSelected=S):(l=Object.create(a),l.isSelected=y||w||b,l.isUserDataArea=!0);var A=i-c+1;if(-1===t?(0===i?l.value=[s.checkbox(E),"",null]:f?l.value=[s.filter(!1),"",null]:g||d?l.value="":l.value=[s.checkbox(w),A,null],l.halign="right"):(l.value=n.getValue(t,i),l.halign=n.getColumnAlignment(t)),l.isGridColumn=v,l.isGridRow=h,l.isColumnHovered=n.isColumnHovered(t)&&v,l.isRowHovered=n.isRowHovered(i)&&h,l.isCellHovered=n.isHovered(t,i)&&v&&h,l.bounds=this._getBoundsOfCell(t,i),l.isCellSelected=y,l.isRowSelected=w,l.isColumnSelected=b,l.isInCurrentSelectionRectangle=n.isInCurrentSelectionRectangle(t,i),n.mouseDownState){var R=n.mouseDownState.gridCell;l.mouseDown=R.x===t&&R.y===i}l.x=t,l.y=i,r.cellPropertiesPrePaintNotification(l);var k=r.getCellRenderer(l,t,i),M=r.getCellProperties(t,i);o(l).extendOwn(M),l.buttonCells=this.buttonCells;var T=l.isUserDataArea?l.format:"default";l.formatter=n.getFormatter(T),k.paint(e,l),this.renderedColumnMinWidths[t]=Math.max(l.minWidth||0,this.renderedColumnMinWidths[t]),u.preferredWidth=this.renderedColumnMinWidths[t]}},isViewableButton:function(e,t){var i=e+","+t;return this.buttonCells[i]===!0},getRowNumbersWidth:function(){var e=this.getColumnEdges();return 0===e.length?0:e[0]},startAnimator:function(){var e=this;requestAnimationFrame(function t(){e.animate(),requestAnimationFrame(t)})},animate:function(){var e=this.getCanvas().canvasCTX;e.beginPath(),e.save(),this.renderFocusCell(e),e.restore(),e.closePath()},getBounds:function(){return this.bounds},setBounds:function(e){return this.bounds=e}});t.exports=a},{"../../images":3,"./Base":69,"object-iterators":24}],76:[function(e,t,i){"use strict";function n(e){this.grid=e,this.selections=[],this.flattenedX=[],this.flattenedY=[],this.rowSelectionModel=new o,this.columnSelectionModel=new o,this.setLastSelectionType("")}var o=e("sparse-boolean-array");n.prototype={constructor:n.prototype.constructor,allRowsSelected:!1,getLastSelection:function(){var e=this.selections,t=e[e.length-1];return t},getLastSelectionType:function(){return this.lastSelectionType},setLastSelectionType:function(e){this.lastSelectionType=e},select:function(e,t,i,n){var o=this.grid.newRectangle(e,t,i,n);this.selections.push(o),this.flattenedX.push(o.flattenXAt(0)),this.flattenedY.push(o.flattenYAt(0)),this.setLastSelectionType("cell"),this.grid.selectionChanged()},toggleSelect:function(e,t,i,n){var o,r;o=this.selections.find(function(o,s){return r=s,o.origin.x===e&&o.origin.y===t&&o.extent.x===i&&o.extent.y===n}),o?(this.selections.splice(r,1),this.flattenedX.splice(r,1),this.flattenedY.splice(r,1),this.grid.selectionChanged()):this.select(e,t,i,n)},clearMostRecentSelection:function(e){e=e===!0,e||this.setAllRowsSelected(!1),this.selections.length&&--this.selections.length,this.flattenedX.length&&--this.flattenedX.length,this.flattenedY.length&&--this.flattenedY.length},clearMostRecentColumnSelection:function(){this.columnSelectionModel.clearMostRecentSelection(),this.setLastSelectionType("column")},clearMostRecentRowSelection:function(){this.rowSelectionModel.clearMostRecentSelection(),this.setLastSelectionType("row")},clearRowSelection:function(){this.rowSelectionModel.clear(),this.setLastSelectionType("row")},getSelections:function(){return this.selections},hasSelections:function(){return 0!==this.selections.length},hasRowSelections:function(){return!this.rowSelectionModel.isEmpty()},hasColumnSelections:function(){return!this.columnSelectionModel.isEmpty()},isCellSelectedInRow:function(e){return this._isCellSelected(this.flattenedX,0,e)},isCellSelectedInColumn:function(e){return this._isCellSelected(this.flattenedY,e,0)},isSelected:function(e,t){return this.isColumnSelected(e)||this.isRowSelected(t)||this._isCellSelected(this.selections,e,t)},isCellSelected:function(e,t){return this._isCellSelected(this.selections,e,t)},_isCellSelected:function(e,t,i){var n=this;return!!e.find(function(e){return n.rectangleContains(e,t,i)})},clear:function(e){e=e===!0,this.selections.length=0,this.flattenedX.length=0,this.flattenedY.length=0,this.columnSelectionModel.clear(),e||(this.setAllRowsSelected(!1),this.rowSelectionModel.clear())},isRectangleSelected:function(e,t,i,n){return!!this.selections.find(function(o){return o.origin.x===e&&o.origin.y===t&&o.extent.x===i&&o.extent.y===n;
})},isColumnSelected:function(e){return this.columnSelectionModel.isSelected(e)},isRowSelected:function(e){return this.allRowsSelected||this.rowSelectionModel.isSelected(e)},selectColumn:function(e,t){this.columnSelectionModel.select(e,t),this.setLastSelectionType("column")},selectAllRows:function(){this.clear(),this.setAllRowsSelected(!0)},setAllRowsSelected:function(e){this.allRowsSelected=e},areAllRowsSelected:function(){return this.allRowsSelected},selectRow:function(e,t){this.rowSelectionModel.select(e,t),this.setLastSelectionType("row")},deselectColumn:function(e,t){this.columnSelectionModel.deselect(e,t),this.setLastSelectionType("column")},deselectRow:function(e,t){this.rowSelectionModel.deselect(e,t),this.setLastSelectionType("row")},getSelectedRows:function(){if(this.areAllRowsSelected()){for(var e=this.grid.getHeaderRowCount(),t=this.grid.getRowCount()-e,i=new Array(t),n=0;t>n;n++)i[n]=n+e;return i}return this.rowSelectionModel.getSelections()},getSelectedColumns:function(){return this.columnSelectionModel.getSelections()},isColumnOrRowSelected:function(){return!this.columnSelectionModel.isEmpty()||!this.rowSelectionModel.isEmpty()},getFlattenedYs:function(){var e=[],t={};return this.selections.forEach(function(i){for(var n=i.origin.y,o=i.extent.y+1,r=0;o>r;r++){var s=r+n;t[s]||(e.push(s),t[s]=!0)}}),e.sort(function(e,t){return e-t}),e},selectRowsFromCells:function(e,t){e=e||0,t=t===!0;var i=this.rowSelectionModel;t||(this.setAllRowsSelected(!1),i.clear()),this.selections.forEach(function(t){var n=t.origin.y,o=t.extent.y;n+=e,i.select(n,n+o)})},selectColumnsFromCells:function(e){e=e||0;var t=this.columnSelectionModel;t.clear(),this.selections.forEach(function(i){var n=i.origin.x,o=i.extent.x;n+=e,t.select(n,n+o)})},isInCurrentSelectionRectangle:function(e,t){var i=this.selections[this.selections.length-1];return i&&this.rectangleContains(i,e,t)},rectangleContains:function(e,t,i){var n=e.origin.x,o=e.origin.y,r=n+e.extent.x,s=o+e.extent.y;e.extent.x<0&&(n=r,r=e.origin.x),e.extent.y<0&&(o=s,s=e.origin.y);var a=t>=n&&i>=o&&r>=t&&s>=i;return a}},t.exports=n},{"sparse-boolean-array":28}],77:[function(e,t,i){"use strict";var n=e("./Base"),o=500,r=o+"ms ease-in",s=n.extend("TableDialog",{initialize:function(e){this.grid=e,this.initializeOverlaySurface(),this.openNow=!1},isOpen:function(){return this.openNow},open:function(){if(!this.isOpen()){this.openNow=!0;var e=this;this.overlay.style.backgroundColor=this.grid.resolveProperty("backgroundColor"),this.overlay.style.top=this.overlay.style.bottom=this.overlay.style.right=this.overlay.style.left=0,e.overlay.style.webkitTransition="",this.overlay.style.margin="15px 35px 35px 15px",this.overlay.style.opacity=0,this.overlay.style.zIndex=100,this.closeTransition=function(){this.overlay.style.opacity=0},this._closer||(this._closer=function(t){var i=e.getCharFor(t.keyCode).toLowerCase(),n=e.grid.resolveProperty("editorActivationKeys");(n.indexOf(i)>-1||27===t.keyCode)&&(t.preventDefault(),e.close())}),requestAnimationFrame(function(){e.overlay.style.webkitTransition="opacity "+o+"ms ease-in",requestAnimationFrame(function(){document.addEventListener("keydown",e._closer,!1),e.overlay.style.opacity=.95})}),setTimeout(function(){e.overlay.focus()},100)}},openFrom:function(e){if(!this.isOpen()){this.openNow=!0;var t=this,i=this.overlay.style;i.backgroundColor=this.grid.resolveProperty("backgroundColor");var n=this.grid.div.getBoundingClientRect(),o=e.y+"px "+(n.width-(e.x+e.width))+"px "+(n.height-(e.y+e.height))+"px "+e.x+"px";i.webkitTransition="",i.top=i.right=i.bottom=i.left=0,i.margin=o,i.zIndex=100,i.opacity=1,this.closeTransition=function(){i.margin=o},this._closer||(this._closer=function(e){var i=t.getCharFor(e.keyCode).toLowerCase(),n=t.grid.resolveProperty("editorActivationKeys");(n.indexOf(i)>-1||27===e.keyCode)&&(e.preventDefault(),t.close())}),requestAnimationFrame(function(){document.addEventListener("keydown",t._closer,!1),requestAnimationFrame(function(){requestAnimationFrame(function(){i.webkitTransition="margin-top "+r+", margin-right "+r+", margin-bottom "+r+", margin-left "+r,i.margin="15px 35px 35px 15px"})})}),setTimeout(function(){t.overlay.focus()},100)}},close:function(){this.openNow=!1,document.removeEventListener("keydown",this._closer,!1);var e=this;requestAnimationFrame(function(){e.closeTransition()}),setTimeout(function(){e.clear(),e.overlay.style.zIndex=-1e3,e.onClose&&(e.onClose(),e.onClose=void 0),e.grid.takeFocus()},o)},initializeOverlaySurface:function(){this.overlay=document.createElement("div"),this.overlay.setAttribute("tabindex",0),this.overlay.addEventListener("wheel",function(e){e.stopPropagation()});var e=this.overlay.style;e.outline="none",e.boxShadow="0 19px 38px rgba(0,0,0,0.30), 0 15px 12px rgba(0,0,0,0.22)",e.position="absolute",e.margin=0,e.overflow="hidden",e.opacity=0,e.zIndex=10,this.grid.div.appendChild(this.overlay)},getCharFor:function(e){var t=this.grid.getCanvas().getCharMap();return t[e][0]},clear:function(){this.overlay.innerHTML=""},querySelector:function(e){var t=this.overlay.querySelector(e);return t},getAnimationTime:function(){return o}});t.exports=s},{"./Base":69}],78:[function(e,t,i){"use strict";console.warn||(console.warn=function(){console.log.apply(console,["WARNING:"].concat(Array.prototype.slice.call(arguments)))});var n=function(e,t){var i,n=e.split("."),o=n[n.length-1],r=t&&t.asOfVersion,s=this;return o="get"+o[0].toUpperCase()+o.substr(1),i="."+o+"() method is deprecated",r&&(i+=" as of v"+t.asOfVersion),i+=". Use ."+e,")"!==e[e.length-1]&&(i+=" property"),i+=" instead. (Will be removed in a future release.)",console.warn(i),n.forEach(function(e){s=s[e]}),s};t.exports=n},{}],79:[function(e,t,i){"use strict";Math.sign=Math.sign||function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1}},{}],80:[function(e,t,i){"use strict";function n(e,t,i,n,r,s){e.fillStyle="#FFD500",e.fill(),e.strokeStyle=e.createPattern(o.caution,"repeat"),e.lineWidth=5,e.beginPath(),e.moveTo(i,n),e.lineTo(i+r,n),e.lineTo(i+r,n+s),e.lineTo(i,n+s),e.lineTo(i,n),e.stroke(),e.beginPath(),e.rect(i,n,r-2,s),e.clip(),e.fillStyle="#A00",e.textAlign="start",e.textBaseline="middle",e.font='bold 6pt "arial narrow", verdana, geneva',e.fillText(t,i+4,n+s/2+.5)}var o=e("../../images");t.exports=n},{"../../images":3}],81:[function(e,t,i){"use strict";var n=e("../../lib/Base"),o=n.extend("DataNodeBase",{isNullObject:!1,INDENT:"   ",initialize:function(e){this.label=e,this.data=[""],this.index=[],this.hasChildren=!1,this.depth=0,this.height=1,this.expanded=!1},getValue:function(e){return this.data[e]},toArray:function(e){this.depth=e,this.data[0]=this.computeDepthString()},computeDepthString:function(){return Array(this.depth+1).join(this.INDENT)+"  "+this.label},computeHeight:function(){return 1},getIndex:function(){return this.index},computeAggregates:function(e){var t=this.getIndex();if(t.length){var i=Number(e.hasGroups()),n=this.data;n.length=i+e.aggregates.length;var o=e.sorterInstance;o.index=t,e.aggregates.forEach(function(e,t){n[i+t]=e(o)})}},buildView:function(e){e.addView(this)},toggleExpansionState:function(){}});t.exports=o},{"../../lib/Base":69}],82:[function(e,t,i){"use strict";function n(e){return this.splice.bind(this,this.length,0).apply(this,e),this}var o=e("./util/Mappy"),r=e("./DataNodeBase"),s={"true":"▼","false":"▶"},a=r.extend("DataNodeGroup",{extendable:!0,initialize:function(e){this.children=new o},toArray:function(e){this.depth=e,this.children=this.children.values,this.children.forEach(function(t){t.toArray(e+1)}),this.data[0]=this.computeDepthString()},computeDepthString:function(){return Array(this.depth+1).join(this.INDENT)+s[this.expanded]+" "+this.label},getIndex:function(){return 0===this.index.length&&(this.index=this.computeIndex()),this.index},computeIndex:function(){var e=[];return e.append=n,this.children.forEach(function(t){e.append(t.getIndex())}),e},toggleExpansionState:function(e){this.expanded=!this.expanded,this.data[0]=this.computeDepthString(),this.expanded&&this.computeAggregates(e)},computeAggregates:function(e){r.prototype.computeAggregates.call(this,e),this.expanded&&this.children.forEach(function(t){t.computeAggregates(e)})},buildView:function(e){e.view.push(this),this.expanded&&this.children.forEach(function(t){t.buildView(e)})},computeHeight:function(){var e=1;return this.expanded&&this.children.forEach(function(t){e+=t.computeHeight()}),this.height=e}});t.exports=a},{"./DataNodeBase":81,"./util/Mappy":92}],83:[function(e,t,i){"use strict";var n=e("./DataNodeBase"),o=n.extend("DataNodeLeaf",{toArray:function(e){this.depth=e,this.data[0]=this.computeDepthString()},getIndex:function(){return this.index},buildView:function(e){e.addView(this)},computeHeight:function(){return 1}});t.exports=o},{"./DataNodeBase":81}],84:[function(e,t,i){"use strict";var n=e("./DataNodeGroup"),o=n.extend("DataNodeTree",{initialize:function(e){this.height=0,this.expanded=!0},toArray:function(){this.children=this.children.values,this.children.forEach(function(e){e.toArray(0)})},buildView:function(e){this.children.forEach(function(t){t.buildView(e)})},computeHeight:function(){var e=1;return this.children.forEach(function(t){e+=t.computeHeight()}),this.height=e}});t.exports=o},{"./DataNodeGroup":82}],85:[function(e,t,i){"use strict";function n(e,t){this.fields=t||r(e[0]),this.data=e}function o(e,t){throw new Error("DataSource."+e+": "+t)}function r(e){return Object.getOwnPropertyNames(e||[]).filter(function(e){return"__"!==e.substr(0,2)})}var s=e("./util/headerify");n.prototype={constructor:n.prototype.constructor,isNullObject:!1,getRow:function(e){return this.data[e]},getValue:function(e,t){var i=this.getRow(t);return i?i[this.fields[e]]:null},setValue:function(e,t,i){this.getRow(t)[this.fields[e]]=i},getRowCount:function(){return this.data.length},getColumnCount:function(){return this.getFields().length},getFields:function(){return this.fields},getHeaders:function(){return this.headers=this.headers||this.getDefaultHeaders().map(function(e){return s(e)})},getDefaultHeaders:function(){return this.getFields()},setFields:function(e){this.fields=e},setHeaders:function(e){e instanceof Array||o("setHeaders","param #1 `headers` not array"),this.headers=e},getGrandTotals:function(){},setData:function(e){this.data=e}},t.exports=n},{"./util/headerify":94}],86:[function(e,t,i){"use strict";function n(e){this.dataSource=e,this.tree=new a("Totals"),this.index=[],this.aggregates=[],this.headers=[],this.groupBys=[],this.view=[],this.sorterInstance={},this.presortGroups=!0,this.lastAggregate={},this.setAggregates({})}function o(e){return new u(e)}function r(e){return new l(e)}var s=e("./DataSourceSorter"),a=e("./DataNodeTree"),l=e("./DataNodeGroup"),u=e("./DataNodeLeaf"),c=e("./util/headerify");n.prototype={constructor:n.prototype.constructor,isNullObject:!1,setAggregates:function(e){this.lastAggregate=e,this.clearAggregations(),this.headers.length=0,this.hasGroups()&&this.headers.push("Tree");for(var t in e)this.addAggregate(t,e[t])},addAggregate:function(e,t){this.headers.push(c(e)),this.aggregates.push(t)},setGroupBys:function(e){var t=this.groupBys;t.length=0,e.forEach(function(e){t.push(e)}),this.setAggregates(this.lastAggregate)},addGroupBy:function(e){this.groupBys.push(e)},hasGroups:function(){return!!this.groupBys.length},hasAggregates:function(){return!!this.aggregates.length},apply:function(){this.buildGroupTree()},clearGroups:function(){this.groupBys.length=0},clearAggregations:function(){this.aggregates.length=0,this.headers.length=0},buildGroupTree:function(){var e=this.groupBys,t=e.length-1,i=this.dataSource,n=i.getRowCount(),l=this.tree=new a("Totals");this.presortGroups&&e.reverse().forEach(function(e){i=new s(i),i.sortOn(e)});for(var u=0;n>u;u++){var c=l;e.forEach(function(e,n){var s=i.getValue(e,u),a=n===t?o:r;c=c.children.getIfUndefined(s,a)}),c.index.push(u)}this.sorterInstance=new s(i),l.toArray(),l.computeAggregates(this),this.buildView()},addView:function(e){this.view.push(e)},buildView:function(){this.view.length=0,this.tree.computeHeight(),this.tree.buildView(this)},viewMakesSense:function(){return this.hasAggregates()},getValue:function(e,t){if(!this.viewMakesSense())return this.dataSource.getValue(e,t);var i=this.view[t];return i?i.getValue(e):null},setValue:function(e,t,i){return this.viewMakesSense()?void 0:this.dataSource.setValue(e,t,i)},getColumnCount:function(){return this.viewMakesSense()?this.getHeaders().length:this.dataSource.getColumnCount()},getRowCount:function(){return this.viewMakesSense()?this.view.length:this.dataSource.getRowCount()},click:function(e){var t=this.view[e];t.toggleExpansionState(this),this.buildView()},getHeaders:function(){return this.viewMakesSense()?this.headers:this.dataSource.getHeaders()},setHeaders:function(e){this.dataSource.setHeaders(e)},getFields:function(){return this.dataSource.getFields()},setFields:function(e){return this.dataSource.setFields(e)},getGrandTotals:function(){var e=this.tree;return[e.data]},getRow:function(e){if(!this.viewMakesSense())return this.dataSource.getRow(e);var t=this.view[e];return t?t:this.tree},setData:function(e){this.dataSource.setData(e),this.apply()}},t.exports=n},{"./DataNodeGroup":82,"./DataNodeLeaf":83,"./DataNodeTree":84,"./DataSourceSorter":89,"./util/headerify":94}],87:[function(e,t,i){"use strict";var n=e("./DataSourceIndexed"),o=n.extend("DataSourceGlobalFilter",{set:function(e){this.filter=e},get:function(e){return this.filter},clear:function(){delete this.filter,this.clearIndex()},apply:function(){this.filter?this.buildIndex(function(e,t){return this.filter.test(t)}):this.clearIndex()},getRowCount:function(){return this.filter?this.index.length:this.dataSource.getRowCount()}});t.exports=o},{"./DataSourceIndexed":88}],88:[function(e,t,i){"use strict";var n=e("../../lib/Base"),o=n.extend("DataSourceIndexed",{isNullObject:!1,initialize:function(e){this.dataSource=e,this.index=[]},transposeY:function(e){return this.index.length?this.index[e]:e},getRow:function(e){return this.dataSource.getRow(this.transposeY(e))},getValue:function(e,t){return this.dataSource.getValue(e,this.transposeY(t))},setValue:function(e,t,i){this.dataSource.setValue(e,this.transposeY(t),i)},getRowCount:function(){return this.index.length||this.dataSource.getRowCount()},getColumnCount:function(){return this.dataSource.getColumnCount()},getFields:function(){return this.dataSource.getFields()},setFields:function(e){return this.dataSource.setFields(e)},setHeaders:function(e){return this.dataSource.setHeaders(e)},getHeaders:function(){return this.dataSource.getHeaders()},getGrandTotals:function(){return this.dataSource.getGrandTotals()},setData:function(e){return this.dataSource.setData(e)},clearIndex:function(){this.index.length=0},buildIndex:function(e){var t=this.dataSource.getRowCount(),i=this.index;this.clearIndex();for(var n=0;t>n;n++)(!e||e.call(this,n,this.dataSource.getRow(n)))&&i.push(n);return i}});t.exports=o},{"../../lib/Base":69}],89:[function(e,t,i){"use strict";function n(e){return"function"==typeof e?e():e}var o=e("./DataSourceIndexed"),r=e("./util/stableSort"),s=o.extend("DataSourceSorter",{initialize:function(){this.descendingSort=!1},sortOn:function(e,t){function i(t){return n(o.dataSource.getValue(e,t))}switch(t){case 0:this.clearIndex();break;case void 0:case 1:case-1:var o=this;r.sort(this.buildIndex(),i,t)}}});t.exports=s},{"./DataSourceIndexed":88,"./util/stableSort":95}],90:[function(e,t,i){"use strict";var n=e("./DataSourceIndexed"),o=e("./DataSourceSorter"),r=n.extend("DataSourceSorterComposite",{initialize:function(){this.sorts=[],this.last=this.dataSource},getRow:function(e){return this.last.getRow(e)},sortOn:function(e,t){this.sorts.push([e,t])},applySorts:function(){var e=this.dataSource;this.sorts.forEach(function(t){e=new o(e),e.sortOn.apply(e,t)}),this.last=e},clearSorts:function(){this.sorts.length=0,this.last=this.dataSource},getValue:function(e,t){return this.last.getValue(e,t)},setValue:function(e,t,i){this.last.setValue(e,t,i)}});t.exports=r},{"./DataSourceIndexed":88,"./DataSourceSorter":89}],91:[function(e,t,i){"use strict";t.exports={JSDataSource:e("./DataSource"),DataSourceSorter:e("./DataSourceSorter"),DataSourceSorterComposite:e("./DataSourceSorterComposite"),DataSourceGlobalFilter:e("./DataSourceGlobalFilter"),DataSourceAggregator:e("./DataSourceAggregator"),util:{aggregations:e("./util/aggregations")}}},{"./DataSource":85,"./DataSourceAggregator":86,"./DataSourceGlobalFilter":87,"./DataSourceSorter":89,"./DataSourceSorterComposite":90,"./util/aggregations":93}],92:[function(e,t,i){"use strict";function n(){this.keys=[],this.data={},this.values=[]}function o(e){var t=typeof e;switch(t){case"number":case"string":case"boolean":case"symbol":return a+t+"_"+e;case"undefined":return"UNDEFINED";case"object":if(null===e)return"NULL";case"function":return e.___finhash=e.___finhash||a+l++}}function r(e){return e}function s(e,t){if(t!=t||0===t)for(var i=e.length;i--&&!u(e[i],t););else i=[].indexOf.call(e,t);return i}n.prototype={constructor:n.prototype.constructor,set:function(e,t){var i=o(e);i in this.data||(this.keys.push(e),this.values.push(t)),this.data[i]=t},get:function(e){var t=o(e);return this.data[t]},getIfUndefined:function(e,t){var i=this.get(e);return void 0===i&&(i=t(e),this.set(e,i)),i},size:function(){return this.keys.length},clear:function(){this.keys.length=0,this.values.length=0,this.data={}},"delete":function(e){var t=o(e);if(void 0!==this.data[t]){var i=s(this.keys,e);this.keys.splice(i,1),this.values.splice(i,1),delete this.data[t]}},forEach:function(e){if("function"==typeof e){var t=this.keys,i=this;t.forEach(function(t){var n=i.get(t);e(n,t,i)})}},map:function(e){var t=this.keys,i=new n,o=this;return"function"!=typeof e&&(e=r),t.forEach(function(t){var n=o.get(t),r=e(n,t,o);i.set(t,r)}),i},copy:function(){var e=this.keys,t=new n,i=this;return e.forEach(function(e){var n=i.get(e);t.set(e,n)}),t}};var a=".~.#%_",l=0,u=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t};t.exports=n},{}],93:[function(e,t,i){"use strict";function n(e){return e.getRowCount()}function o(e,t){for(var i=t.getRowCount(),n=0;i--;)n+=t.getValue(e,i);return n}function r(e,t,i,n){for(var o=n.getRowCount();o--;)i=t(i,n.getValue(e,o));return i}function s(e,t){return o(e,t)/t.getRowCount()}function a(e,t){return t.getValue(e,0)}function l(e,t){return t.getValue(e,t.getRowCount()-1)}function u(e,t){for(var i,n=t.getRowCount(),o=s(e,t),r=n,a=0;r--;a+=i*i)i=t.getValue(e,r)-o;return Math.sqrt(a/n)}t.exports={count:function(e){return n},sum:function(e){return o.bind(this,e)},min:function(e){return r.bind(this,e,Math.min,1/0)},max:function(e){return r.bind(this,e,Math.max,-(1/0))},avg:function(e){return s.bind(this,e)},first:function(e){return a.bind(this,e)},last:function(e){return l.bind(this,e)},stddev:function(e){return u.bind(this,e)}}},{}],94:[function(e,t,i){"use strict";function n(e){return(/[a-z]/.test(e)?e:e.toLowerCase()).replace(/[\s\-_]*([^\s\-_])([^\s\-_]+)/g,o).replace(/[A-Z]/g," $&").trim()}function o(e,t,i){return t.toUpperCase()+i}t.exports=n},{}],95:[function(e,t,i){"use strict";function n(e,t,i,n){var o=i[0],r=n[0];if(o===r)o=t?n[1]:i[1],r=t?i[1]:n[1];else{if(null===r)return-1;if(null===o)return 1}return e(o,r)}function o(e,t){return e-t}function r(e,t){return t-e}function s(e,t){return t>e?-1:1}function a(e,t){return e>t?-1:1}function l(e){return n.bind(this,"number"===e?o:s,!1)}function u(e){return n.bind(this,"number"===e?r:a,!0)}function c(e,t,i){var n,o;if(void 0===i&&(i=1),e.length){switch(i){case 0:return;case void 0:i=1;case 1:n=l(typeof t(0));break;case-1:n=u(typeof t(0))}var r=new Array(e.length);for(o=0;o<e.length;o++)r[o]=[t(o),o];for(r.sort(n),o=0;o<e.length;o++)e[o]=r[o][1]}}i.sort=c},{}]},{},[51]);